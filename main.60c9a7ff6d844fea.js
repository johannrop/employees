"use strict";var iL=Object.defineProperty,sL=Object.defineProperties,oL=Object.getOwnPropertyDescriptors,dR=Object.getOwnPropertySymbols,aL=Object.prototype.hasOwnProperty,uL=Object.prototype.propertyIsEnumerable,hR=(Je,we,O)=>we in Je?iL(Je,we,{enumerable:!0,configurable:!0,writable:!0,value:O}):Je[we]=O,fR=(Je,we)=>{for(var O in we||(we={}))aL.call(we,O)&&hR(Je,O,we[O]);if(dR)for(var O of dR(we))uL.call(we,O)&&hR(Je,O,we[O]);return Je},pR=(Je,we)=>sL(Je,oL(we));(self.webpackChunkempleados=self.webpackChunkempleados||[]).push([[179],{2011:(Je,we,O)=>{O.d(we,{Dh:()=>oe,GT:()=>pe,cc:()=>Ae,hO:()=>Le,on:()=>$,pX:()=>ie,xv:()=>he});var f=O(5e3),J=O(127),P=O(5813);Je=O.hmd(Je);const ue=["ngOnDestroy"],ie=(Ie,qe,Ye,xe={})=>new Proxy(Ie,{get:(me,be)=>Ye.runOutsideAngular(()=>{var Ve;if(Ie[be])return(null===(Ve=null==xe?void 0:xe.spy)||void 0===Ve?void 0:Ve.get)&&xe.spy.get(be,Ie[be]),Ie[be];if(ue.indexOf(be)>-1)return()=>{};const Be=qe.toPromise().then(G=>{const _e=G&&G[be];return"function"==typeof _e?_e.bind(G):_e&&_e.then?_e.then(W=>Ye.run(()=>W)):Ye.run(()=>_e)});return new Proxy(()=>{},{get:(G,_e)=>Be[_e],apply:(G,_e,W)=>Be.then(ee=>{var Q;const ge=ee&&ee(...W);return(null===(Q=null==xe?void 0:xe.spy)||void 0===Q?void 0:Q.apply)&&xe.spy.apply(be,W,ge),ge})})})}),pe=(Ie,qe)=>{qe.forEach(Ye=>{Object.getOwnPropertyNames(Ye.prototype||Ye).forEach(xe=>{Object.defineProperty(Ie.prototype,xe,Object.getOwnPropertyDescriptor(Ye.prototype||Ye,xe))})})};class se{constructor(qe){return qe}}const oe=new f.OlP("angularfire2.app.options"),he=new f.OlP("angularfire2.app.name");function $(Ie,qe,Ye){const me="object"==typeof Ye&&Ye||{};me.name=me.name||"string"==typeof Ye&&Ye||"[DEFAULT]";const Ve=J.Z.apps.filter(Be=>Be&&Be.name===me.name)[0]||qe.runOutsideAngular(()=>J.Z.initializeApp(Ie,me));try{JSON.stringify(Ie)!==JSON.stringify(Ve.options)&&B("error",`${Ve.name} Firebase App already initialized with different options${Je.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Be){}return new se(Ve)}const B=(Ie,...qe)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[Ie](...qe)},X={provide:se,useFactory:$,deps:[oe,f.R0b,[new f.FiY,he]]};let Le=(()=>{class Ie{constructor(Ye){J.Z.registerVersion("angularfire",P.q4.full,"core"),J.Z.registerVersion("angularfire",P.q4.full,"app-compat"),J.Z.registerVersion("angular",f.q4F.full,Ye.toString())}static initializeApp(Ye,xe){return{ngModule:Ie,providers:[{provide:oe,useValue:Ye},{provide:he,useValue:xe}]}}}return Ie.\u0275fac=function(Ye){return new(Ye||Ie)(f.LFG(f.Lbi))},Ie.\u0275mod=f.oAB({type:Ie}),Ie.\u0275inj=f.cJS({providers:[X]}),Ie})();function Ae(Ie,qe,Ye,xe,me){const[,be,Ve]=globalThis.\u0275AngularfireInstanceCache.find(Be=>Be[0]===Ie)||[];if(be)return function Oe(Ie,qe){try{return Ie.toString()===qe.toString()}catch(Ye){return Ie===qe}}(me,Ve)||(fe("error",`${qe} was already initialized on the ${Ye} Firebase App with different settings.${Ue?" You may need to reload as Firebase is not HMR aware.":""}`),fe("warn",{is:me,was:Ve})),be;{const Be=xe();return globalThis.\u0275AngularfireInstanceCache.push([Ie,Be,me]),Be}}const Ue=!!Je.hot,fe=(Ie,...qe)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[Ie](...qe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Je,we,O)=>{O.d(we,{q4:()=>$t,iC:()=>Ou,HU:()=>Tg,vb:()=>Td,JM:()=>Nu});var f=O(5e3),J=O(5867),P=O(5861),ue=O(9681),ie=O(2090),pe=O(4859),se=O(1877),oe=O(8766);const he="@firebase/installations",$="0.5.16",X=`w:${$}`,Le="FIS_v2",qe=new ie.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ye(b){return b instanceof ie.ZR&&b.code.includes("request-failed")}function xe({projectId:b}){return`https://firebaseinstallations.googleapis.com/v1/projects/${b}/installations`}function me(b){return{token:b.token,requestStatus:2,expiresIn:ee(b.expiresIn),creationTime:Date.now()}}function be(b,C){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,P.Z)(function*(b,C){const F=(yield C.json()).error;return qe.create("request-failed",{requestName:b,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function Be({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function G(b,{refreshToken:C}){const x=Be(b);return x.append("Authorization",function Q(b){return`${Le} ${b}`}(C)),x}function _e(b){return W.apply(this,arguments)}function W(){return(W=(0,P.Z)(function*(b){const C=yield b();return C.status>=500&&C.status<600?b():C})).apply(this,arguments)}function ee(b){return Number(b.replace("s","000"))}function ge(b,C){return ae.apply(this,arguments)}function ae(){return(ae=(0,P.Z)(function*({appConfig:b,heartbeatServiceProvider:C},{fid:x}){const F=xe(b),Z=Be(b),te=C.getImmediate({optional:!0});if(te){const It=yield te.getHeartbeatsHeader();It&&Z.append("x-firebase-client",It)}const je={method:"POST",headers:Z,body:JSON.stringify({fid:x,authVersion:Le,appId:b.appId,sdkVersion:X})},lt=yield _e(()=>fetch(F,je));if(lt.ok){const It=yield lt.json();return{fid:It.fid||x,registrationStatus:2,refreshToken:It.refreshToken,authToken:me(It.authToken)}}throw yield be("Create Installation",lt)})).apply(this,arguments)}function Pe(b){return new Promise(C=>{setTimeout(C,b)})}const Qt=/^[cdef][\w-]{21}$/;function Ke(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const x=function sn(b){return function ut(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return Qt.test(x)?x:""}catch(b){return""}}function mn(b){return`${b.appName}!${b.appId}`}const un=new Map;function Xt(b,C){const x=mn(b);zt(x,C),function Qr(b,C){const x=function Nr(){return!Ui&&"BroadcastChannel"in self&&(Ui=new BroadcastChannel("[Firebase] FID Change"),Ui.onmessage=b=>{zt(b.data.key,b.data.fid)}),Ui}();x&&x.postMessage({key:b,fid:C}),function Jr(){0===un.size&&Ui&&(Ui.close(),Ui=null)}()}(x,C)}function zt(b,C){const x=un.get(b);if(x)for(const F of x)F(C)}let Ui=null;const oi="firebase-installations-store";let bi=null;function Et(){return bi||(bi=(0,oe.X3)("firebase-installations-database",1,{upgrade:(b,C)=>{0===C&&b.createObjectStore(oi)}})),bi}function Rr(b,C){return bn.apply(this,arguments)}function bn(){return(bn=(0,P.Z)(function*(b,C){const x=mn(b),Z=(yield Et()).transaction(oi,"readwrite"),te=Z.objectStore(oi),Ce=yield te.get(x);return yield te.put(C,x),yield Z.done,(!Ce||Ce.fid!==C.fid)&&Xt(b,C.fid),C})).apply(this,arguments)}function nr(b){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,P.Z)(function*(b){const C=mn(b),F=(yield Et()).transaction(oi,"readwrite");yield F.objectStore(oi).delete(C),yield F.done})).apply(this,arguments)}function Bi(b,C){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,P.Z)(function*(b,C){const x=mn(b),Z=(yield Et()).transaction(oi,"readwrite"),te=Z.objectStore(oi),Ce=yield te.get(x),je=C(Ce);return void 0===je?yield te.delete(x):yield te.put(je,x),yield Z.done,je&&(!Ce||Ce.fid!==je.fid)&&Xt(b,je.fid),je})).apply(this,arguments)}function Un(b){return ai.apply(this,arguments)}function ai(){return(ai=(0,P.Z)(function*(b){let C;const x=yield Bi(b.appConfig,F=>{const Z=oo(F),te=Zt(b,Z);return C=te.registrationPromise,te.installationEntry});return""===x.fid?{installationEntry:yield C}:{installationEntry:x,registrationPromise:C}})).apply(this,arguments)}function oo(b){return ao(b||{fid:Ke(),registrationStatus:0})}function Zt(b,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(qe.create("app-offline"))};const x={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},F=function it(b,C){return _t.apply(this,arguments)}(b,x);return{installationEntry:x,registrationPromise:F}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:Or(b)}:{installationEntry:C}}function _t(){return(_t=(0,P.Z)(function*(b,C){try{const x=yield ge(b,C);return Rr(b.appConfig,x)}catch(x){throw Ye(x)&&409===x.customData.serverCode?yield nr(b.appConfig):yield Rr(b.appConfig,{fid:C.fid,registrationStatus:0}),x}})).apply(this,arguments)}function Or(b){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,P.Z)(function*(b){let C=yield Wt(b.appConfig);for(;1===C.registrationStatus;)yield Pe(100),C=yield Wt(b.appConfig);if(0===C.registrationStatus){const{installationEntry:x,registrationPromise:F}=yield Un(b);return F||x}return C})).apply(this,arguments)}function Wt(b){return Bi(b,C=>{if(!C)throw qe.create("installation-not-found");return ao(C)})}function ao(b){return function kr(b){return 1===b.registrationStatus&&b.registrationTime+1e4<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function Fr(b,C){return pt.apply(this,arguments)}function pt(){return(pt=(0,P.Z)(function*({appConfig:b,heartbeatServiceProvider:C},x){const F=uo(b,x),Z=G(b,x),te=C.getImmediate({optional:!0});if(te){const It=yield te.getHeartbeatsHeader();It&&Z.append("x-firebase-client",It)}const je={method:"POST",headers:Z,body:JSON.stringify({installation:{sdkVersion:X,appId:b.appId}})},lt=yield _e(()=>fetch(F,je));if(lt.ok)return me(yield lt.json());throw yield be("Generate Auth Token",lt)})).apply(this,arguments)}function uo(b,{fid:C}){return`${xe(b)}/${C}/authTokens:generate`}function jt(b){return cs.apply(this,arguments)}function cs(){return(cs=(0,P.Z)(function*(b,C=!1){let x;const F=yield Bi(b.appConfig,te=>{if(!Ht(te))throw qe.create("not-registered");const Ce=te.authToken;if(!C&&j(Ce))return te;if(1===Ce.requestStatus)return x=Qe(b,C),te;{if(!navigator.onLine)throw qe.create("app-offline");const je=K(te);return x=At(b,je),je}});return x?yield x:F.authToken})).apply(this,arguments)}function Qe(b,C){return De.apply(this,arguments)}function De(){return(De=(0,P.Z)(function*(b,C){let x=yield ze(b.appConfig);for(;1===x.authToken.requestStatus;)yield Pe(100),x=yield ze(b.appConfig);const F=x.authToken;return 0===F.requestStatus?jt(b,C):F})).apply(this,arguments)}function ze(b){return Bi(b,C=>{if(!Ht(C))throw qe.create("not-registered");return function ve(b){return 1===b.requestStatus&&b.requestTime+1e4<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function At(b,C){return wt.apply(this,arguments)}function wt(){return(wt=(0,P.Z)(function*(b,C){try{const x=yield Fr(b,C),F=Object.assign(Object.assign({},C),{authToken:x});return yield Rr(b.appConfig,F),x}catch(x){if(!Ye(x)||401!==x.customData.serverCode&&404!==x.customData.serverCode){const F=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield Rr(b.appConfig,F)}else yield nr(b.appConfig);throw x}})).apply(this,arguments)}function Ht(b){return void 0!==b&&2===b.registrationStatus}function j(b){return 2===b.requestStatus&&!function V(b){const C=Date.now();return C<b.creationTime||b.creationTime+b.expiresIn<C+36e5}(b)}function K(b){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:C})}function Xe(){return(Xe=(0,P.Z)(function*(b){const C=b,{installationEntry:x,registrationPromise:F}=yield Un(C);return F?F.catch(console.error):jt(C).catch(console.error),x.fid})).apply(this,arguments)}function dn(){return(dn=(0,P.Z)(function*(b,C=!1){const x=b;return yield en(x),(yield jt(x,C)).token})).apply(this,arguments)}function en(b){return ln.apply(this,arguments)}function ln(){return(ln=(0,P.Z)(function*(b){const{registrationPromise:C}=yield Un(b);C&&(yield C)})).apply(this,arguments)}function zo(b){return qe.create("missing-app-config-values",{valueName:b})}const Xr="installations",dt=b=>{const C=b.getProvider("app").getImmediate(),x=function hr(b){if(!b||!b.options)throw zo("App Configuration");if(!b.name)throw zo("App Name");const C=["projectId","apiKey","appId"];for(const x of C)if(!b.options[x])throw zo(x);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(C);return{app:C,appConfig:x,heartbeatServiceProvider:(0,ue._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},hn=b=>{const C=b.getProvider("app").getImmediate(),x=(0,ue._getProvider)(C,Xr).getImmediate();return{getId:()=>function ne(b){return Xe.apply(this,arguments)}(x),getToken:Z=>function Rt(b){return dn.apply(this,arguments)}(x,Z)}};(function Lr(){(0,ue._registerComponent)(new pe.wA(Xr,dt,"PUBLIC")),(0,ue._registerComponent)(new pe.wA("installations-internal",hn,"PRIVATE"))})(),(0,ue.registerVersion)(he,$),(0,ue.registerVersion)(he,$,"esm2017");const ji="@firebase/remote-config",Rn=new ie.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class gg{constructor(C,x,F,Z){this.client=C,this.storage=x,this.storageCache=F,this.logger=Z}isCachedDataFresh(C,x){if(!x)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-x,Z=F<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${Z}.`),Z}fetch(C){var x=this;return(0,P.Z)(function*(){const[F,Z]=yield Promise.all([x.storage.getLastSuccessfulFetchTimestampMillis(),x.storage.getLastSuccessfulFetchResponse()]);if(Z&&x.isCachedDataFresh(C.cacheMaxAgeMillis,F))return Z;C.eTag=Z&&Z.eTag;const te=yield x.client.fetch(C),Ce=[x.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===te.status&&Ce.push(x.storage.setLastSuccessfulFetchResponse(te)),yield Promise.all(Ce),te})()}}function Jc(b=navigator){return b.languages&&b.languages[0]||b.language}class Er{constructor(C,x,F,Z,te,Ce){this.firebaseInstallations=C,this.sdkVersion=x,this.namespace=F,this.projectId=Z,this.apiKey=te,this.appId=Ce}fetch(C){var x=this;return(0,P.Z)(function*(){var F,Z,te;const[Ce,je]=yield Promise.all([x.firebaseInstallations.getId(),x.firebaseInstallations.getToken()]),It=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${x.projectId}/namespaces/${x.namespace}:fetch?key=${x.apiKey}`,xt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},rt={sdk_version:x.sdkVersion,app_instance_id:Ce,app_instance_id_token:je,app_id:x.appId,language_code:Jc()},$n={method:"POST",headers:xt,body:JSON.stringify(rt)},Gn=fetch(It,$n),Ys=new Promise((rs,xi)=>{C.signal.addEventListener(()=>{const da=new Error("The operation was aborted.");da.name="AbortError",xi(da)})});let Qs;try{yield Promise.race([Gn,Ys]),Qs=yield Gn}catch(rs){let xi="fetch-client-network";throw"AbortError"===(null===(F=rs)||void 0===F?void 0:F.name)&&(xi="fetch-timeout"),Rn.create(xi,{originalErrorMessage:null===(Z=rs)||void 0===Z?void 0:Z.message})}let ns=Qs.status;const Fu=Qs.headers.get("ETag")||void 0;let Qa,Ao;if(200===Qs.status){let rs;try{rs=yield Qs.json()}catch(xi){throw Rn.create("fetch-client-parse",{originalErrorMessage:null===(te=xi)||void 0===te?void 0:te.message})}Qa=rs.entries,Ao=rs.state}if("INSTANCE_STATE_UNSPECIFIED"===Ao?ns=500:"NO_CHANGE"===Ao?ns=304:("NO_TEMPLATE"===Ao||"EMPTY_CONFIG"===Ao)&&(Qa={}),304!==ns&&200!==ns)throw Rn.create("fetch-status",{httpStatus:ns});return{status:ns,eTag:Fu,config:Qa}})()}}class mg{constructor(C,x){this.client=C,this.storage=x}fetch(C){var x=this;return(0,P.Z)(function*(){const F=(yield x.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return x.attemptFetch(C,F)})()}attemptFetch(C,{throttleEndTimeMillis:x,backoffCount:F}){var Z=this;return(0,P.Z)(function*(){yield function Ls(b,C){return new Promise((x,F)=>{const Z=Math.max(C-Date.now(),0),te=setTimeout(x,Z);b.addEventListener(()=>{clearTimeout(te),F(Rn.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,x);try{const te=yield Z.client.fetch(C);return yield Z.storage.deleteThrottleMetadata(),te}catch(te){if(!function Xc(b){if(!(b instanceof ie.ZR&&b.customData))return!1;const C=Number(b.customData.httpStatus);return 429===C||500===C||503===C||504===C}(te))throw te;const Ce={throttleEndTimeMillis:Date.now()+(0,ie.$s)(F),backoffCount:F+1};return yield Z.storage.setThrottleMetadata(Ce),Z.attemptFetch(C,Ce)}})()}}class ed{constructor(C,x,F,Z,te){this.app=C,this._client=x,this._storageCache=F,this._storage=Z,this._logger=te,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ol(b,C){var x;const F=b.target.error||void 0;return Rn.create(C,{originalErrorMessage:F&&(null===(x=F)||void 0===x?void 0:x.message)})}const Vs="app_namespace_store";class Eg{constructor(C,x,F,Z=function vg(){return new Promise((b,C)=>{var x;try{const F=indexedDB.open("firebase_remote_config",1);F.onerror=Z=>{C(Ol(Z,"storage-open"))},F.onsuccess=Z=>{b(Z.target.result)},F.onupgradeneeded=Z=>{0===Z.oldVersion&&Z.target.result.createObjectStore(Vs,{keyPath:"compositeKey"})}}catch(F){C(Rn.create("storage-open",{originalErrorMessage:null===(x=F)||void 0===x?void 0:x.message}))}})}()){this.appId=C,this.appName=x,this.namespace=F,this.openDbPromise=Z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var x=this;return(0,P.Z)(function*(){const F=yield x.openDbPromise;return new Promise((Z,te)=>{var Ce;const lt=F.transaction([Vs],"readonly").objectStore(Vs),It=x.createCompositeKey(C);try{const xt=lt.get(It);xt.onerror=rt=>{te(Ol(rt,"storage-get"))},xt.onsuccess=rt=>{const $n=rt.target.result;Z($n?$n.value:void 0)}}catch(xt){te(Rn.create("storage-get",{originalErrorMessage:null===(Ce=xt)||void 0===Ce?void 0:Ce.message}))}})})()}set(C,x){var F=this;return(0,P.Z)(function*(){const Z=yield F.openDbPromise;return new Promise((te,Ce)=>{var je;const It=Z.transaction([Vs],"readwrite").objectStore(Vs),xt=F.createCompositeKey(C);try{const rt=It.put({compositeKey:xt,value:x});rt.onerror=$n=>{Ce(Ol($n,"storage-set"))},rt.onsuccess=()=>{te()}}catch(rt){Ce(Rn.create("storage-set",{originalErrorMessage:null===(je=rt)||void 0===je?void 0:je.message}))}})})()}delete(C){var x=this;return(0,P.Z)(function*(){const F=yield x.openDbPromise;return new Promise((Z,te)=>{var Ce;const lt=F.transaction([Vs],"readwrite").objectStore(Vs),It=x.createCompositeKey(C);try{const xt=lt.delete(It);xt.onerror=rt=>{te(Ol(rt,"storage-delete"))},xt.onsuccess=()=>{Z()}}catch(xt){te(Rn.create("storage-delete",{originalErrorMessage:null===(Ce=xt)||void 0===Ce?void 0:Ce.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class nd{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,P.Z)(function*(){const x=C.storage.getLastFetchStatus(),F=C.storage.getLastSuccessfulFetchTimestampMillis(),Z=C.storage.getActiveConfig(),te=yield x;te&&(C.lastFetchStatus=te);const Ce=yield F;Ce&&(C.lastSuccessfulFetchTimestampMillis=Ce);const je=yield Z;je&&(C.activeConfig=je)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function mu(){return rd.apply(this,arguments)}function rd(){return(rd=(0,P.Z)(function*(){if(!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch(b){return!1}})).apply(this,arguments)}!function Wo(){(0,ue._registerComponent)(new pe.wA("remote-config",function b(C,{instanceIdentifier:x}){const F=C.getProvider("app").getImmediate(),Z=C.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Rn.create("registration-window");if(!(0,ie.hl)())throw Rn.create("indexed-db-unavailable");const{projectId:te,apiKey:Ce,appId:je}=F.options;if(!te)throw Rn.create("registration-project-id");if(!Ce)throw Rn.create("registration-api-key");if(!je)throw Rn.create("registration-app-id");const lt=new Eg(je,F.name,x=x||"firebase"),It=new nd(lt),xt=new se.Yd(ji);xt.logLevel=se.in.ERROR;const rt=new Er(Z,ue.SDK_VERSION,x,te,Ce,je),$n=new mg(rt,lt),Gn=new gg($n,lt,It,xt),Ys=new ed(F,Gn,It,lt,xt);return function pn(b){const C=(0,ie.m9)(b);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(Ys),Ys},"PUBLIC").setMultipleInstances(!0)),(0,ue.registerVersion)(ji,"0.3.15"),(0,ue.registerVersion)(ji,"0.3.15","esm2017")}();const id="/firebase-messaging-sw.js",wr="/firebase-cloud-messaging-push-scope",Us="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ko="google.c.a.c_id",sd="google.c.a.c_l",Zh="google.c.a.ts",Pa="google.c.a.e";var Zo=(()=>{return(b=Zo||(Zo={})).PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",Zo;var b})();function Vr(b){const C=new Uint8Array(b);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function od(b){const x=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(x),Z=new Uint8Array(F.length);for(let te=0;te<F.length;++te)Z[te]=F.charCodeAt(te);return Z}const Ur="fcm_token_details_db",ui="fcm_token_object_Store";function Pl(b){return ad.apply(this,arguments)}function ad(){return ad=(0,P.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(te=>te.name).includes(Ur))return null;let C=null;return(yield(0,oe.X3)(Ur,5,{upgrade:(F=(0,P.Z)(function*(Z,te,Ce,je){var lt;if(te<2||!Z.objectStoreNames.contains(ui))return;const It=je.objectStore(ui),xt=yield It.index("fcmSenderId").get(b);if(yield It.clear(),xt)if(2===te){const rt=xt;if(!rt.auth||!rt.p256dh||!rt.endpoint)return;C={token:rt.fcmToken,createTime:null!==(lt=rt.createTime)&&void 0!==lt?lt:Date.now(),subscriptionOptions:{auth:rt.auth,p256dh:rt.p256dh,endpoint:rt.endpoint,swScope:rt.swScope,vapidKey:"string"==typeof rt.vapidKey?rt.vapidKey:Vr(rt.vapidKey)}}}else if(3===te){const rt=xt;C={token:rt.fcmToken,createTime:rt.createTime,subscriptionOptions:{auth:Vr(rt.auth),p256dh:Vr(rt.p256dh),endpoint:rt.endpoint,swScope:rt.swScope,vapidKey:Vr(rt.vapidKey)}}}else if(4===te){const rt=xt;C={token:rt.fcmToken,createTime:rt.createTime,subscriptionOptions:{auth:Vr(rt.auth),p256dh:Vr(rt.p256dh),endpoint:rt.endpoint,swScope:rt.swScope,vapidKey:Vr(rt.vapidKey)}}}}),function(te,Ce,je,lt){return F.apply(this,arguments)})})).close(),yield(0,oe.Lj)(Ur),yield(0,oe.Lj)("fcm_vapid_details_db"),yield(0,oe.Lj)("undefined"),kl(C)?C:null;var F}),ad.apply(this,arguments)}function kl(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:C}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}const Wi="firebase-messaging-store";let Yh=null;function gn(){return Yh||(Yh=(0,oe.X3)("firebase-messaging-database",1,{upgrade:(b,C)=>{0===C&&b.createObjectStore(Wi)}})),Yh}function ka(b){return fo.apply(this,arguments)}function fo(){return(fo=(0,P.Z)(function*(b){const C=fr(b),F=yield(yield gn()).transaction(Wi).objectStore(Wi).get(C);if(F)return F;{const Z=yield Pl(b.appConfig.senderId);if(Z)return yield on(b,Z),Z}})).apply(this,arguments)}function on(b,C){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,P.Z)(function*(b,C){const x=fr(b),Z=(yield gn()).transaction(Wi,"readwrite");return yield Z.objectStore(Wi).put(C,x),yield Z.done,C})).apply(this,arguments)}function yu(b){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,P.Z)(function*(b){const C=fr(b),F=(yield gn()).transaction(Wi,"readwrite");yield F.objectStore(Wi).delete(C),yield F.done})).apply(this,arguments)}function fr({appConfig:b}){return b.appId}const Dn=new ie.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ki(b,C){return pr.apply(this,arguments)}function pr(){return(pr=(0,P.Z)(function*(b,C){var x;const F=yield Jo(b),Z=js(C),te={method:"POST",headers:F,body:JSON.stringify(Z)};let Ce;try{Ce=yield(yield fetch(Zi(b.appConfig),te)).json()}catch(je){throw Dn.create("token-subscribe-failed",{errorInfo:null===(x=je)||void 0===x?void 0:x.toString()})}if(Ce.error)throw Dn.create("token-subscribe-failed",{errorInfo:Ce.error.message});if(!Ce.token)throw Dn.create("token-subscribe-no-token");return Ce.token})).apply(this,arguments)}function po(b,C){return fs.apply(this,arguments)}function fs(){return(fs=(0,P.Z)(function*(b,C){var x;const F=yield Jo(b),Z=js(C.subscriptionOptions),te={method:"PATCH",headers:F,body:JSON.stringify(Z)};let Ce;try{Ce=yield(yield fetch(`${Zi(b.appConfig)}/${C.token}`,te)).json()}catch(je){throw Dn.create("token-update-failed",{errorInfo:null===(x=je)||void 0===x?void 0:x.toString()})}if(Ce.error)throw Dn.create("token-update-failed",{errorInfo:Ce.error.message});if(!Ce.token)throw Dn.create("token-update-no-token");return Ce.token})).apply(this,arguments)}function La(b,C){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,P.Z)(function*(b,C){var x;const Z={method:"DELETE",headers:yield Jo(b)};try{const Ce=yield(yield fetch(`${Zi(b.appConfig)}/${C}`,Z)).json();if(Ce.error)throw Dn.create("token-unsubscribe-failed",{errorInfo:Ce.error.message})}catch(te){throw Dn.create("token-unsubscribe-failed",{errorInfo:null===(x=te)||void 0===x?void 0:x.toString()})}})).apply(this,arguments)}function Zi({projectId:b}){return`https://fcmregistrations.googleapis.com/v1/projects/${b}/registrations`}function Jo(b){return vt.apply(this,arguments)}function vt(){return(vt=(0,P.Z)(function*({appConfig:b,installations:C}){const x=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${x}`})})).apply(this,arguments)}function js({p256dh:b,auth:C,endpoint:x,vapidKey:F}){const Z={web:{endpoint:x,auth:C,p256dh:b}};return F!==Us&&(Z.web.applicationPubKey=F),Z}const Vl=6048e5;function Va(b){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,P.Z)(function*(b){const C=yield go(b.swRegistration,b.vapidKey),x={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:C.endpoint,auth:Vr(C.getKey("auth")),p256dh:Vr(C.getKey("p256dh"))},F=yield ka(b.firebaseDependencies);if(F){if(Eu(F.subscriptionOptions,x))return Date.now()>=F.createTime+Vl?Bl(b,{token:F.token,createTime:Date.now(),subscriptionOptions:x}):F.token;try{yield La(b.firebaseDependencies,F.token)}catch(Z){console.warn(Z)}return Se(b.firebaseDependencies,x)}return Se(b.firebaseDependencies,x)})).apply(this,arguments)}function _u(b){return vu.apply(this,arguments)}function vu(){return(vu=(0,P.Z)(function*(b){const C=yield ka(b.firebaseDependencies);C&&(yield La(b.firebaseDependencies,C.token),yield yu(b.firebaseDependencies));const x=yield b.swRegistration.pushManager.getSubscription();return!x||x.unsubscribe()})).apply(this,arguments)}function Bl(b,C){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,P.Z)(function*(b,C){try{const x=yield po(b.firebaseDependencies,C),F=Object.assign(Object.assign({},C),{token:x,createTime:Date.now()});return yield on(b.firebaseDependencies,F),x}catch(x){throw yield _u(b),x}})).apply(this,arguments)}function Se(b,C){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,P.Z)(function*(b,C){const F={token:yield Ki(b,C),createTime:Date.now(),subscriptionOptions:C};return yield on(b,F),F.token})).apply(this,arguments)}function go(b,C){return wn.apply(this,arguments)}function wn(){return(wn=(0,P.Z)(function*(b,C){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:od(C)})})).apply(this,arguments)}function Eu(b,C){return C.vapidKey===b.vapidKey&&C.endpoint===b.endpoint&&C.auth===b.auth&&C.p256dh===b.p256dh}function mo(b){const C={from:b.from,collapseKey:b.collapse_key,messageId:b.fcmMessageId};return function li(b,C){if(!C.notification)return;b.notification={};const x=C.notification.title;x&&(b.notification.title=x);const F=C.notification.body;F&&(b.notification.body=F);const Z=C.notification.image;Z&&(b.notification.image=Z);const te=C.notification.icon;te&&(b.notification.icon=te)}(C,b),function jl(b,C){!C.data||(b.data=C.data)}(C,b),function Hl(b,C){var x,F,Z,te,Ce;if(!C.fcmOptions&&!(null===(x=C.notification)||void 0===x?void 0:x.click_action))return;b.fcmOptions={};const je=null!==(Z=null===(F=C.fcmOptions)||void 0===F?void 0:F.link)&&void 0!==Z?Z:null===(te=C.notification)||void 0===te?void 0:te.click_action;je&&(b.fcmOptions.link=je);const lt=null===(Ce=C.fcmOptions)||void 0===Ce?void 0:Ce.analytics_label;lt&&(b.fcmOptions.analyticsLabel=lt)}(C,b),C}function $l(b){return"object"==typeof b&&!!b&&Ko in b}function ud(b,C){const x=[];for(let F=0;F<b.length;F++)x.push(b.charAt(F)),F<C.length&&x.push(C.charAt(F));return x.join("")}function ps(b){return Dn.create("missing-app-config-values",{valueName:b})}ud("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ud("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ir{constructor(C,x,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Z=function wg(b){if(!b||!b.options)throw ps("App Configuration Object");if(!b.name)throw ps("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:x}=b;for(const F of C)if(!x[F])throw ps(F);return{appName:b.name,projectId:x.projectId,apiKey:x.apiKey,appId:x.appId,senderId:x.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:Z,installations:x,analyticsProvider:F}}_delete(){return Promise.resolve()}}function ci(b){return wu.apply(this,arguments)}function wu(){return(wu=(0,P.Z)(function*(b){var C;try{b.swRegistration=yield navigator.serviceWorker.register(id,{scope:wr}),b.swRegistration.update().catch(()=>{})}catch(x){throw Dn.create("failed-service-worker-registration",{browserErrorMessage:null===(C=x)||void 0===C?void 0:C.message})}})).apply(this,arguments)}function Hs(b,C){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,P.Z)(function*(b,C){if(!C&&!b.swRegistration&&(yield ci(b)),C||!b.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw Dn.create("invalid-sw-registration");b.swRegistration=C}})).apply(this,arguments)}function Gl(b,C){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,P.Z)(function*(b,C){C?b.vapidKey=C:b.vapidKey||(b.vapidKey=Us)})).apply(this,arguments)}function ql(){return(ql=(0,P.Z)(function*(b,C){if(!navigator)throw Dn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Dn.create("permission-blocked");return yield Gl(b,null==C?void 0:C.vapidKey),yield Hs(b,null==C?void 0:C.serviceWorkerRegistration),Va(b)})).apply(this,arguments)}function ea(b,C,x){return Du.apply(this,arguments)}function Du(){return(Du=(0,P.Z)(function*(b,C,x){const F=Cu(C);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:x[Ko],message_name:x[sd],message_time:x[Zh],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Cu(b){switch(b){case Zo.NOTIFICATION_CLICKED:return"notification_open";case Zo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function cd(){return(cd=(0,P.Z)(function*(b,C){const x=C.data;if(!x.isFirebaseMessaging)return;b.onMessageHandler&&x.messageType===Zo.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(mo(x)):b.onMessageHandler.next(mo(x)));const F=x.data;$l(F)&&"1"===F[Pa]&&(yield ea(b,x.messageType,F))})).apply(this,arguments)}const Tu="@firebase/messaging",dd=b=>{const C=new Ir(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",x=>function ld(b,C){return cd.apply(this,arguments)}(C,x)),C},ta=b=>{const C=b.getProvider("messaging").getImmediate();return{getToken:F=>function bu(b,C){return ql.apply(this,arguments)}(C,F)}};function Au(){return ti.apply(this,arguments)}function ti(){return(ti=(0,P.Z)(function*(){try{yield(0,ie.eu)()}catch(b){return!1}return"undefined"!=typeof window&&(0,ie.hl)()&&(0,ie.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function hd(){(0,ue._registerComponent)(new pe.wA("messaging",dd,"PUBLIC")),(0,ue._registerComponent)(new pe.wA("messaging-internal",ta,"PRIVATE")),(0,ue.registerVersion)(Tu,"0.11.0"),(0,ue.registerVersion)(Tu,"0.11.0","esm2017")}();const pd="analytics",Ig="firebase_id",gs="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",vo="https://www.googletagmanager.com/gtag/js",Jn=new se.Yd("@firebase/analytics");function gd(b){return Promise.all(b.map(C=>C.catch(x=>x)))}function bg(b,C){const x=document.createElement("script");x.src=`${vo}?l=${b}&id=${C}`,x.async=!0,document.head.appendChild(x)}function na(b,C,x,F,Z,te){return Su.apply(this,arguments)}function Su(){return(Su=(0,P.Z)(function*(b,C,x,F,Z,te){const Ce=F[Z];try{if(Ce)yield C[Ce];else{const lt=(yield gd(x)).find(It=>It.measurementId===Z);lt&&(yield C[lt.appId])}}catch(je){Jn.error(je)}b("config",Z,te)})).apply(this,arguments)}function Wl(b,C,x,F,Z){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,P.Z)(function*(b,C,x,F,Z){try{let te=[];if(Z&&Z.send_to){let Ce=Z.send_to;Array.isArray(Ce)||(Ce=[Ce]);const je=yield gd(x);for(const lt of Ce){const It=je.find(rt=>rt.measurementId===lt),xt=It&&C[It.appId];if(!xt){te=[];break}te.push(xt)}}0===te.length&&(te=Object.values(C)),yield Promise.all(te),b("event",F,Z||{})}catch(te){Jn.error(te)}})).apply(this,arguments)}function Cn(b){const C=window.document.getElementsByTagName("script");for(const x of Object.values(C))if(x.src&&x.src.includes(vo)&&x.src.includes(b))return x;return null}const st=new ie.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ha=new class Xn{constructor(C={},x=1e3){this.throttleMetadata=C,this.intervalMillis=x}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,x){this.throttleMetadata[C]=x}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function md(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function ra(b){return $s.apply(this,arguments)}function $s(){return($s=(0,P.Z)(function*(b){var C;const{appId:x,apiKey:F}=b,Z={method:"GET",headers:md(F)},te=gs.replace("{app-id}",x),Ce=yield fetch(te,Z);if(200!==Ce.status&&304!==Ce.status){let je="";try{const lt=yield Ce.json();(null===(C=lt.error)||void 0===C?void 0:C.message)&&(je=lt.error.message)}catch(lt){}throw st.create("config-fetch-failed",{httpStatus:Ce.status,responseMessage:je})}return Ce.json()})).apply(this,arguments)}function Pn(b){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,P.Z)(function*(b,C=Ha,x){const{appId:F,apiKey:Z,measurementId:te}=b.options;if(!F)throw st.create("no-app-id");if(!Z){if(te)return{measurementId:te,appId:F};throw st.create("no-api-key")}const Ce=C.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},je=new Kl;return setTimeout((0,P.Z)(function*(){je.abort()}),void 0!==x?x:6e4),Qi({appId:F,apiKey:Z,measurementId:te},Ce,je,C)})).apply(this,arguments)}function Qi(b,C,x){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,P.Z)(function*(b,{throttleEndTimeMillis:C,backoffCount:x},F,Z=Ha){var te,Ce;const{appId:je,measurementId:lt}=b;try{yield yd(F,C)}catch(It){if(lt)return Jn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${lt} provided in the "measurementId" field in the local Firebase config. [${null===(te=It)||void 0===te?void 0:te.message}]`),{appId:je,measurementId:lt};throw It}try{const It=yield ra(b);return Z.deleteThrottleMetadata(je),It}catch(It){const xt=It;if(!_d(xt)){if(Z.deleteThrottleMetadata(je),lt)return Jn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${lt} provided in the "measurementId" field in the local Firebase config. [${null==xt?void 0:xt.message}]`),{appId:je,measurementId:lt};throw It}const rt=503===Number(null===(Ce=null==xt?void 0:xt.customData)||void 0===Ce?void 0:Ce.httpStatus)?(0,ie.$s)(x,Z.intervalMillis,30):(0,ie.$s)(x,Z.intervalMillis),$n={throttleEndTimeMillis:Date.now()+rt,backoffCount:x+1};return Z.setThrottleMetadata(je,$n),Jn.debug(`Calling attemptFetch again in ${rt} millis`),Qi(b,$n,F,Z)}})).apply(this,arguments)}function yd(b,C){return new Promise((x,F)=>{const Z=Math.max(C-Date.now(),0),te=setTimeout(x,Z);b.addEventListener(()=>{clearTimeout(te),F(st.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}function _d(b){if(!(b instanceof ie.ZR&&b.customData))return!1;const C=Number(b.customData.httpStatus);return 429===C||500===C||503===C||504===C}class Kl{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}let $a,sa;function Ji(){return(Ji=(0,P.Z)(function*(b,C,x,F,Z){if(Z&&Z.global)b("event",x,F);else{const te=yield C;b("event",x,Object.assign(Object.assign({},F),{send_to:te}))}})).apply(this,arguments)}function qa(b){sa=b}function za(b){$a=b}function Wa(){return di.apply(this,arguments)}function di(){return(di=(0,P.Z)(function*(){var b;if(!(0,ie.hl)())return Jn.warn(st.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ie.eu)()}catch(C){return Jn.warn(st.create("indexeddb-unavailable",{errorInfo:null===(b=C)||void 0===b?void 0:b.toString()}).message),!1}return!0})).apply(this,arguments)}function sr(){return(sr=(0,P.Z)(function*(b,C,x,F,Z,te,Ce){var je;const lt=Pn(b);lt.then(Gn=>{x[Gn.measurementId]=Gn.appId,b.options.measurementId&&Gn.measurementId!==b.options.measurementId&&Jn.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${Gn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Gn=>Jn.error(Gn)),C.push(lt);const It=Wa().then(Gn=>{if(Gn)return F.getId()}),[xt,rt]=yield Promise.all([lt,It]);Cn(te)||bg(te,xt.measurementId),sa&&(Z("consent","default",sa),qa(void 0)),Z("js",new Date);const $n=null!==(je=null==Ce?void 0:Ce.config)&&void 0!==je?je:{};return $n.origin="firebase",$n.update=!0,null!=rt&&($n[Ig]=rt),Z("config",xt.measurementId,$n),$a&&(Z("set",$a),za(void 0)),xt.measurementId})).apply(this,arguments)}class Zl{constructor(C){this.app=C}_delete(){return delete Br[this.app.options.appId],Promise.resolve()}}let Br={},Hn=[];const oa={};let Si,Tn,Xi="dataLayer",jr=!1;function vd(b,C,x){!function es(){const b=[];if((0,ie.ru)()&&b.push("This is a browser extension environment."),(0,ie.zI)()||b.push("Cookies are not available."),b.length>0){const C=b.map((F,Z)=>`(${Z+1}) ${F}`).join(" "),x=st.create("invalid-analytics-context",{errorInfo:C});Jn.warn(x.message)}}();const F=b.options.appId;if(!F)throw st.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw st.create("no-api-key");Jn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Br[F])throw st.create("already-exists",{id:F});if(!jr){!function Eo(b){let C=[];Array.isArray(window[b])?C=window[b]:window[b]=C}(Xi);const{wrappedGtag:te,gtagCore:Ce}=function Dg(b,C,x,F,Z){let te=function(...Ce){window[F].push(arguments)};return window[Z]&&"function"==typeof window[Z]&&(te=window[Z]),window[Z]=function Ba(b,C,x,F){function te(){return(te=(0,P.Z)(function*(Ce,je,lt){try{"event"===Ce?yield Wl(b,C,x,je,lt):"config"===Ce?yield na(b,C,x,F,je,lt):"consent"===Ce?b("consent","update",lt):b("set",je)}catch(It){Jn.error(It)}})).apply(this,arguments)}return function Z(Ce,je,lt){return te.apply(this,arguments)}}(te,b,C,x),{gtagCore:te,wrappedGtag:window[Z]}}(Br,Hn,oa,Xi,"gtag");Tn=te,Si=Ce,jr=!0}return Br[F]=function bo(b,C,x,F,Z,te,Ce){return sr.apply(this,arguments)}(b,Hn,oa,C,Si,Xi,x),new Zl(b)}function Ed(){return wd.apply(this,arguments)}function wd(){return(wd=(0,P.Z)(function*(){if((0,ie.ru)()||!(0,ie.zI)()||!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch(b){return!1}})).apply(this,arguments)}const kn="@firebase/analytics";!function Za(){(0,ue._registerComponent)(new pe.wA(pd,(C,{options:x})=>vd(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),x),"PUBLIC")),(0,ue._registerComponent)(new pe.wA("analytics-internal",function b(C){try{const x=C.getProvider(pd).getImmediate();return{logEvent:(F,Z,te)=>function ys(b,C,x,F){b=(0,ie.m9)(b),function br(b,C,x,F,Z){return Ji.apply(this,arguments)}(Tn,Br[b.app.options.appId],C,x,F).catch(Z=>Jn.error(Z))}(x,F,Z,te)}}catch(x){throw st.create("interop-component-reg-failed",{reason:x})}},"PRIVATE")),(0,ue.registerVersion)(kn,"0.8.4"),(0,ue.registerVersion)(kn,"0.8.4","esm2017")}();var bd=O(4408),Hr=O(7565);const Ya=new class $r extends Hr.v{}(class Xh extends bd.o{constructor(C,x){super(C,x),this.scheduler=C,this.work=x}schedule(C,x=0){return x>0?super.schedule(C,x):(this.delay=x,this.state=C,this.scheduler.flush(this),this)}execute(C,x){return x>0||this.closed?super.execute(C,x):this._execute(C,x)}requestAsyncId(C,x,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(C,x,F):(C.flush(this),0)}});var Co=O(4986),ua=O(8505),To=O(9468),xu=O(5363);const $t=new f.GfV("7.4.1"),Dd="__angularfire_symbol__analyticsIsSupportedValue",_s="__angularfire_symbol__analyticsIsSupported",er="__angularfire_symbol__remoteConfigIsSupportedValue",Ks="__angularfire_symbol__remoteConfigIsSupported",Zs="__angularfire_symbol__messagingIsSupportedValue",Cd="__angularfire_symbol__messagingIsSupported";function Nu(b,C,x){if(C){if(1===C.length)return C[0];const te=C.filter(Ce=>Ce.app===x);if(1===te.length)return te[0]}return x.container.getProvider(b).getImmediate({optional:!0})}globalThis[_s]||(globalThis[_s]=Ed().then(b=>globalThis[Dd]=b).catch(()=>globalThis[Dd]=!1)),globalThis[Cd]||(globalThis[Cd]=Au().then(b=>globalThis[Zs]=b).catch(()=>globalThis[Zs]=!1)),globalThis[Ks]||(globalThis[Ks]=mu().then(b=>globalThis[er]=b).catch(()=>globalThis[er]=!1));const Td=(b,C)=>{const x=C?[C]:(0,J.C6)(),F=[];return x.forEach(Z=>{Z.container.getProvider(b).instances.forEach(Ce=>{F.includes(Ce)||F.push(Ce)})}),F};function In(){}class ar{constructor(C,x=Ya){this.zone=C,this.delegate=x}now(){return this.delegate.now()}schedule(C,x,F){const Z=this.zone;return this.delegate.schedule(function(Ce){Z.runGuarded(()=>{C.apply(this,[Ce])})},x,F)}}class Ru{constructor(C){this.zone=C,this.task=null}call(C,x){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",In,{},In,In)),x.pipe((0,ua.b)({next:F,complete:F,error:F})).subscribe(C).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Tg=(()=>{class b{constructor(x){this.ngZone=x,this.outsideAngular=x.runOutsideAngular(()=>new ar(Zone.current)),this.insideAngular=x.run(()=>new ar(Zone.current,Co.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(x){return new(x||b)(f.LFG(f.R0b))},b.\u0275prov=f.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function Gr(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function Ou(b){return Gr(),function Pu(b){return function(x){return(x=x.lift(new Ru(b.ngZone))).pipe((0,To.R)(b.outsideAngular),(0,xu.Q)(b.insideAngular))}}(Gr())(b)}},2090:(Je,we,O)=>{O.d(we,{$s:()=>ze,BH:()=>Bt,G6:()=>be,L:()=>oe,LL:()=>un,Pz:()=>Qt,Sg:()=>Ke,UG:()=>Oe,US:()=>pe,ZB:()=>B,ZR:()=>mn,aH:()=>ut,b$:()=>Ie,eu:()=>Be,hl:()=>Ve,jU:()=>Ue,m9:()=>Ht,ne:()=>ai,pd:()=>Yn,r3:()=>ls,ru:()=>fe,tV:()=>he,uI:()=>Ae,vZ:()=>Rr,w1:()=>Ye,xO:()=>Rs,xb:()=>bi,z$:()=>Le,zI:()=>G,zd:()=>Bi});const ue=function(j){const V=[];let K=0;for(let ve=0;ve<j.length;ve++){let ne=j.charCodeAt(ve);ne<128?V[K++]=ne:ne<2048?(V[K++]=ne>>6|192,V[K++]=63&ne|128):55296==(64512&ne)&&ve+1<j.length&&56320==(64512&j.charCodeAt(ve+1))?(ne=65536+((1023&ne)<<10)+(1023&j.charCodeAt(++ve)),V[K++]=ne>>18|240,V[K++]=ne>>12&63|128,V[K++]=ne>>6&63|128,V[K++]=63&ne|128):(V[K++]=ne>>12|224,V[K++]=ne>>6&63|128,V[K++]=63&ne|128)}return V},pe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(j,V){if(!Array.isArray(j))throw Error("encodeByteArray takes an array as a parameter");this.init_();const K=V?this.byteToCharMapWebSafe_:this.byteToCharMap_,ve=[];for(let ne=0;ne<j.length;ne+=3){const Xe=j[ne],Rt=ne+1<j.length,dn=Rt?j[ne+1]:0,en=ne+2<j.length,ln=en?j[ne+2]:0;let En=(15&dn)<<2|ln>>6,lo=63&ln;en||(lo=64,Rt||(En=64)),ve.push(K[Xe>>2],K[(3&Xe)<<4|dn>>4],K[En],K[lo])}return ve.join("")},encodeString(j,V){return this.HAS_NATIVE_SUPPORT&&!V?btoa(j):this.encodeByteArray(ue(j),V)},decodeString(j,V){return this.HAS_NATIVE_SUPPORT&&!V?atob(j):function(j){const V=[];let K=0,ve=0;for(;K<j.length;){const ne=j[K++];if(ne<128)V[ve++]=String.fromCharCode(ne);else if(ne>191&&ne<224){const Xe=j[K++];V[ve++]=String.fromCharCode((31&ne)<<6|63&Xe)}else if(ne>239&&ne<365){const en=((7&ne)<<18|(63&j[K++])<<12|(63&j[K++])<<6|63&j[K++])-65536;V[ve++]=String.fromCharCode(55296+(en>>10)),V[ve++]=String.fromCharCode(56320+(1023&en))}else{const Xe=j[K++],Rt=j[K++];V[ve++]=String.fromCharCode((15&ne)<<12|(63&Xe)<<6|63&Rt)}}return V.join("")}(this.decodeStringToByteArray(j,V))},decodeStringToByteArray(j,V){this.init_();const K=V?this.charToByteMapWebSafe_:this.charToByteMap_,ve=[];for(let ne=0;ne<j.length;){const Xe=K[j.charAt(ne++)],dn=ne<j.length?K[j.charAt(ne)]:0;++ne;const ln=ne<j.length?K[j.charAt(ne)]:64;++ne;const Dt=ne<j.length?K[j.charAt(ne)]:64;if(++ne,null==Xe||null==dn||null==ln||null==Dt)throw Error();ve.push(Xe<<2|dn>>4),64!==ln&&(ve.push(dn<<4&240|ln>>2),64!==Dt&&ve.push(ln<<6&192|Dt))}return ve},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let j=0;j<this.ENCODED_VALS.length;j++)this.byteToCharMap_[j]=this.ENCODED_VALS.charAt(j),this.charToByteMap_[this.byteToCharMap_[j]]=j,this.byteToCharMapWebSafe_[j]=this.ENCODED_VALS_WEBSAFE.charAt(j),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[j]]=j,j>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(j)]=j,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(j)]=j)}}},oe=function(j){return function(j){const V=ue(j);return pe.encodeByteArray(V,!0)}(j).replace(/\./g,"")},he=function(j){try{return pe.decodeString(j,!0)}catch(V){console.error("base64Decode failed: ",V)}return null};function B(j,V){if(!(V instanceof Object))return V;switch(V.constructor){case Date:return new Date(V.getTime());case Object:void 0===j&&(j={});break;case Array:j=[];break;default:return V}for(const K in V)!V.hasOwnProperty(K)||!X(K)||(j[K]=B(j[K],V[K]));return j}function X(j){return"__proto__"!==j}function Le(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ae(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Le())}function Oe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(j){return!1}}function Ue(){return"object"==typeof self&&self.self===self}function fe(){const j="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof j&&void 0!==j.id}function Ie(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ye(){const j=Le();return j.indexOf("MSIE ")>=0||j.indexOf("Trident/")>=0}function be(){return!Oe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ve(){return"object"==typeof indexedDB}function Be(){return new Promise((j,V)=>{try{let K=!0;const ve="validate-browser-context-for-indexeddb-analytics-module",ne=self.indexedDB.open(ve);ne.onsuccess=()=>{ne.result.close(),K||self.indexedDB.deleteDatabase(ve),j(!0)},ne.onupgradeneeded=()=>{K=!1},ne.onerror=()=>{var Xe;V((null===(Xe=ne.error)||void 0===Xe?void 0:Xe.message)||"")}}catch(K){V(K)}})}function G(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}const ge=()=>{try{return function _e(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const j=process.env.__FIREBASE_DEFAULTS__;return j?JSON.parse(j):void 0})()||(()=>{if("undefined"==typeof document)return;let j;try{j=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(K){return}const V=j&&he(j[1]);return V&&JSON.parse(V)})()}catch(j){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${j}`)}},ut=()=>{var j;return null===(j=ge())||void 0===j?void 0:j.config},Qt=j=>{var V;return null===(V=ge())||void 0===V?void 0:V[`_${j}`]};class Bt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((V,K)=>{this.resolve=V,this.reject=K})}wrapCallback(V){return(K,ve)=>{K?this.reject(K):this.resolve(ve),"function"==typeof V&&(this.promise.catch(()=>{}),1===V.length?V(K):V(K,ve))}}}function Ke(j,V){if(j.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const ve=V||"demo-project",ne=j.iat||0,Xe=j.sub||j.user_id;if(!Xe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Rt=Object.assign({iss:`https://securetoken.google.com/${ve}`,aud:ve,iat:ne,exp:ne+3600,auth_time:ne,sub:Xe,user_id:Xe,firebase:{sign_in_provider:"custom",identities:{}}},j);return[oe(JSON.stringify({alg:"none",type:"JWT"})),oe(JSON.stringify(Rt)),""].join(".")}class mn extends Error{constructor(V,K,ve){super(K),this.code=V,this.customData=ve,this.name="FirebaseError",Object.setPrototypeOf(this,mn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,un.prototype.create)}}class un{constructor(V,K,ve){this.service=V,this.serviceName=K,this.errors=ve}create(V,...K){const ve=K[0]||{},ne=`${this.service}/${V}`,Xe=this.errors[V],Rt=Xe?function Xt(j,V){return j.replace(xr,(K,ve)=>{const ne=V[ve];return null!=ne?String(ne):`<${ve}?>`})}(Xe,ve):"Error";return new mn(ne,`${this.serviceName}: ${Rt} (${ne}).`,ve)}}const xr=/\{\$([^}]+)}/g;function ls(j,V){return Object.prototype.hasOwnProperty.call(j,V)}function bi(j){for(const V in j)if(Object.prototype.hasOwnProperty.call(j,V))return!1;return!0}function Rr(j,V){if(j===V)return!0;const K=Object.keys(j),ve=Object.keys(V);for(const ne of K){if(!ve.includes(ne))return!1;const Xe=j[ne],Rt=V[ne];if(bn(Xe)&&bn(Rt)){if(!Rr(Xe,Rt))return!1}else if(Xe!==Rt)return!1}for(const ne of ve)if(!K.includes(ne))return!1;return!0}function bn(j){return null!==j&&"object"==typeof j}function Rs(j){const V=[];for(const[K,ve]of Object.entries(j))Array.isArray(ve)?ve.forEach(ne=>{V.push(encodeURIComponent(K)+"="+encodeURIComponent(ne))}):V.push(encodeURIComponent(K)+"="+encodeURIComponent(ve));return V.length?"&"+V.join("&"):""}function Bi(j){const V={};return j.replace(/^\?/,"").split("&").forEach(ve=>{if(ve){const[ne,Xe]=ve.split("=");V[decodeURIComponent(ne)]=decodeURIComponent(Xe)}}),V}function Yn(j){const V=j.indexOf("?");if(!V)return"";const K=j.indexOf("#",V);return j.substring(V,K>0?K:void 0)}function ai(j,V){const K=new oo(j,V);return K.subscribe.bind(K)}class oo{constructor(V,K){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=K,this.task.then(()=>{V(this)}).catch(ve=>{this.error(ve)})}next(V){this.forEachObserver(K=>{K.next(V)})}error(V){this.forEachObserver(K=>{K.error(V)}),this.close(V)}complete(){this.forEachObserver(V=>{V.complete()}),this.close()}subscribe(V,K,ve){let ne;if(void 0===V&&void 0===K&&void 0===ve)throw new Error("Missing Observer.");ne=function it(j,V){if("object"!=typeof j||null===j)return!1;for(const K of V)if(K in j&&"function"==typeof j[K])return!0;return!1}(V,["next","error","complete"])?V:{next:V,error:K,complete:ve},void 0===ne.next&&(ne.next=_t),void 0===ne.error&&(ne.error=_t),void 0===ne.complete&&(ne.complete=_t);const Xe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ne.error(this.finalError):ne.complete()}catch(Rt){}}),this.observers.push(ne),Xe}unsubscribeOne(V){void 0===this.observers||void 0===this.observers[V]||(delete this.observers[V],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(V){if(!this.finalized)for(let K=0;K<this.observers.length;K++)this.sendOne(K,V)}sendOne(V,K){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[V])try{K(this.observers[V])}catch(ve){"undefined"!=typeof console&&console.error&&console.error(ve)}})}close(V){this.finalized||(this.finalized=!0,void 0!==V&&(this.finalError=V),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function _t(){}function ze(j,V=1e3,K=2){const ve=V*Math.pow(K,j),ne=Math.round(.5*ve*(Math.random()-.5)*2);return Math.min(144e5,ve+ne)}function Ht(j){return j&&j._delegate?j._delegate:j}},5226:(Je,we,O)=>{var f=O(5e3);let J=null;function P(){return J}const se=new f.OlP("DocumentToken");let oe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function he(){return(0,f.LFG)(B)}()},providedIn:"platform"}),n})();const $=new f.OlP("Location Initialized");let B=(()=>{class n extends oe{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){X()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){X()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(se))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function Le(){return new B((0,f.LFG)(se))}()},providedIn:"platform"}),n})();function X(){return!!window.history.pushState}function Ae(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Oe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ue(n){return n&&"?"!==n[0]?"?"+n:n}let fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function Ie(n){const e=(0,f.LFG)(se).location;return new Ye((0,f.LFG)(oe),e&&e.origin||"")}()},providedIn:"root"}),n})();const qe=new f.OlP("appBaseHref");let Ye=(()=>{class n extends fe{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ae(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ue(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,u){const c=this.prepareExternalUrl(i+Ue(u));this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){const c=this.prepareExternalUrl(i+Ue(u));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(oe),f.LFG(qe,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),xe=(()=>{class n extends fe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ae(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,u){let c=this.prepareExternalUrl(i+Ue(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,i,u){let c=this.prepareExternalUrl(i+Ue(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(oe),f.LFG(qe,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),me=(()=>{class n{constructor(t,r){this._subject=new f.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Oe(Be(i)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ue(r))}normalize(t){return n.stripTrailingSlash(function Ve(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Be(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ue(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ue(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Ue,n.joinWithSlash=Ae,n.stripTrailingSlash=Oe,n.\u0275fac=function(t){return new(t||n)(f.LFG(fe),f.LFG(oe))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function be(){return new me((0,f.LFG)(fe),(0,f.LFG)(oe))}()},providedIn:"root"}),n})();function Be(n){return n.replace(/\/index.html$/,"")}const G={ADP:[void 0,void 0,0],AFN:[void 0,"\u060b",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058f",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20bc"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,"\u0440.",2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GHS:[void 0,"GH\u20b5"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RUR:[void 0,"\u0440."],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202fCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var _e=(()=>((_e=_e||{})[_e.Decimal=0]="Decimal",_e[_e.Percent=1]="Percent",_e[_e.Currency=2]="Currency",_e[_e.Scientific=3]="Scientific",_e))(),ae=(()=>((ae=ae||{})[ae.Decimal=0]="Decimal",ae[ae.Group=1]="Group",ae[ae.List=2]="List",ae[ae.PercentSign=3]="PercentSign",ae[ae.PlusSign=4]="PlusSign",ae[ae.MinusSign=5]="MinusSign",ae[ae.Exponential=6]="Exponential",ae[ae.SuperscriptingExponent=7]="SuperscriptingExponent",ae[ae.PerMille=8]="PerMille",ae[ae.Infinity=9]="Infinity",ae[ae.NaN=10]="NaN",ae[ae.TimeSeparator=11]="TimeSeparator",ae[ae.CurrencyDecimal=12]="CurrencyDecimal",ae[ae.CurrencyGroup=13]="CurrencyGroup",ae))();function zt(n,e){const t=(0,f.cg1)(n),r=t[f.wAp.NumberSymbols][e];if(void 0===r){if(e===ae.CurrencyDecimal)return t[f.wAp.NumberSymbols][ae.Decimal];if(e===ae.CurrencyGroup)return t[f.wAp.NumberSymbols][ae.Group]}return r}const ln=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function Xr(n,e,t,r,i){const c=function hn(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(";"),i=r[0],u=r[1],c=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],p=c[0],_=c[1]||"";t.posPre=p.substr(0,p.indexOf("#"));for(let T=0;T<_.length;T++){const M=_.charAt(T);"0"===M?t.minFrac=t.maxFrac=T+1:"#"===M?t.maxFrac=T+1:t.posSuf+=M}const I=p.split(",");if(t.gSize=I[1]?I[1].length:0,t.lgSize=I[2]||I[1]?(I[2]||I[1]).length:0,u){const T=i.length-t.posPre.length-t.posSuf.length,M=u.indexOf("#");t.negPre=u.substr(0,M).replace(/'/g,""),t.negSuf=u.substr(M+T).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function Qr(n,e){return(0,f.cg1)(n)[f.wAp.NumberFormats][e]}(e,_e.Currency),zt(e,ae.MinusSign));return c.minFrac=function Yn(n){let e;const t=G[n];return t&&(e=t[2]),"number"==typeof e?e:2}(r),c.maxFrac=c.minFrac,function zo(n,e,t,r,i,u,c=!1){let p="",_=!1;if(isFinite(n)){let I=function ji(n){let r,i,u,c,p,e=Math.abs(n)+"",t=0;for((i=e.indexOf("."))>-1&&(e=e.replace(".","")),(u=e.search(/e/i))>0?(i<0&&(i=u),i+=+e.slice(u+1),e=e.substring(0,u)):i<0&&(i=e.length),u=0;"0"===e.charAt(u);u++);if(u===(p=e.length))r=[0],i=1;else{for(p--;"0"===e.charAt(p);)p--;for(i-=u,r=[],c=0;u<=p;u++,c++)r[c]=Number(e.charAt(u))}return i>22&&(r=r.splice(0,21),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}(n);c&&(I=function Lr(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(I));let T=e.minInt,M=e.minFrac,L=e.maxFrac;if(u){const ot=u.match(ln);if(null===ot)throw new Error(`${u} is not a valid digit info`);const gt=ot[1],at=ot[3],Ct=ot[5];null!=gt&&(T=Hi(gt)),null!=at&&(M=Hi(at)),null!=Ct?L=Hi(Ct):null!=at&&M>L&&(L=M)}!function Bn(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen;const u=Math.min(Math.max(e,i),t);let c=u+n.integerLen,p=r[c];if(c>0){r.splice(Math.max(n.integerLen,c));for(let M=c;M<r.length;M++)r[M]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,c=u+1),r[0]=0;for(let M=1;M<c;M++)r[M]=0}if(p>=5)if(c-1<0){for(let M=0;M>c;M--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[c-1]++;for(;i<Math.max(0,u);i++)r.push(0);let _=0!==u;const I=e+n.integerLen,T=r.reduceRight(function(M,L,U,z){return z[U]=(L+=M)<10?L:L-10,_&&(0===z[U]&&U>=I?z.pop():_=!1),L>=10?1:0},0);T&&(r.unshift(T),n.integerLen++)}(I,M,L);let U=I.digits,z=I.integerLen;const de=I.exponent;let Te=[];for(_=U.every(ot=>!ot);z<T;z++)U.unshift(0);for(;z<0;z++)U.unshift(0);z>0?Te=U.splice(z,U.length):(Te=U,U=[0]);const nt=[];for(U.length>=e.lgSize&&nt.unshift(U.splice(-e.lgSize,U.length).join(""));U.length>e.gSize;)nt.unshift(U.splice(-e.gSize,U.length).join(""));U.length&&nt.unshift(U.join("")),p=nt.join(zt(t,r)),Te.length&&(p+=zt(t,i)+Te.join("")),de&&(p+=zt(t,ae.Exponential)+"+"+de)}else p=zt(t,ae.Infinity);return p=n<0&&!_?e.negPre+p+e.negSuf:e.posPre+p+e.posSuf,p}(n,c,e,ae.CurrencyGroup,ae.CurrencyDecimal,i).replace("\xa4",t).replace("\xa4","").trim()}function Hi(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}class ks{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let rr=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,u,c)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new ks(i.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===u?void 0:u);else if(null!==u){const p=r.get(u);r.move(p,c),co(p,i)}});for(let i=0,u=r.length;i<u;i++){const p=r.get(i).context;p.index=i,p.count=u,p.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{co(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function co(n,e){n.context.$implicit=e.item}let jn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new pn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){pu("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){pu("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class pn{constructor(){this.$implicit=null,this.ngIf=null}}function pu(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,f.AaK)(e)}'.`)}let Us=(()=>{class n{constructor(t,r="USD"){this._locale=t,this._defaultCurrencyCode=r}transform(t,r=this._defaultCurrencyCode,i="symbol",u,c){if(!function zi(n){return!(null==n||""===n||n!=n)}(t))return null;c=c||this._locale,"boolean"==typeof i&&(i=i?"symbol":"code");let p=r||this._defaultCurrencyCode;"code"!==i&&(p="symbol"===i||"symbol-narrow"===i?function Rs(n,e,t="en"){const r=function us(n){return(0,f.cg1)(n)[f.wAp.Currencies]}(t)[n]||G[n]||[],i=r[1];return"narrow"===e&&"string"==typeof i?i:r[0]||n}(p,"symbol"===i?"wide":"narrow",c):i);try{return Xr(function Ko(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),c,p,r,u)}catch(_){throw function Er(n,e){return new f.vHH(2100,"")}()}}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.soG,16),f.Y36(f.EJc,16))},n.\u0275pipe=f.Yjl({name:"currency",type:n,pure:!0}),n})();let Pa=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function Yo(n){return"server"===n}let kl=(()=>{class n{}return n.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new Qo((0,f.LFG)(se),window)}),n})();class Qo{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Wi(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const u=i.shadowRoot;if(u){const c=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(c)return c}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],i-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Fl(this.window.history)||Fl(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Fl(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class fo extends class ka extends class pe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ie(n){J||(J=n)}(new fo)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Fa(){return on=on||document.querySelector("base"),on?on.getAttribute("href"):null}();return null==t?null:function Bs(n){yu=yu||document.createElement("a"),yu.setAttribute("href",n);const e=yu.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){on=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Na(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let yu,on=null;const fr=new f.OlP("TRANSITION_ID"),Dn=[{provide:f.ip1,useFactory:function Ll(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const r=P(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<i.length;u++)r.remove(i[u])})}},deps:[fr,se,f.zs3],multi:!0}];class Ki{static init(){(0,f.VLi)(new Ki)}addToWindow(e){f.dqk.getAngularTestability=(r,i=!0)=>{const u=e.findTestabilityInTree(r,i);if(null==u)throw new Error("Could not find testability for element.");return u},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const i=f.dqk.getAllAngularTestabilities();let u=i.length,c=!1;const p=function(_){c=c||_,u--,0==u&&r(c)};i.forEach(function(_){_.whenStable(p)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let pr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const po=new f.OlP("EventManagerPlugins");let fs=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let u=0;u<i.length;u++){const c=i[u];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(po),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class La{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=P().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Ci=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Zi=(()=>{class n extends Ci{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(u=>{const c=this._doc.createElement("style");c.textContent=u,i.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Jo),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Jo))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(se))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function Jo(n){P().remove(n)}const vt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},js=/%COMP%/g;function Xo(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Xo(n,i,t):(i=i.replace(js,n),t.push(i))}return t}function Se(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let go=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new wn(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case f.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new li(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case f.ifc.ShadowDom:return new jl(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Xo(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(fs),f.LFG(Zi),f.LFG(f.AFp))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class wn{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(vt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const u=vt[i];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=vt[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,i&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Se(r)):this.eventManager.addEventListener(e,t,Se(r))}}class li extends wn{constructor(e,t,r,i){super(e),this.component=r;const u=Xo(i+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function vu(n){return"_ngcontent-%COMP%".replace(js,n)}(i+"-"+r.id),this.hostAttr=function Bl(n){return"_nghost-%COMP%".replace(js,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class jl extends wn{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Xo(i.id,i.styles,[]);for(let c=0;c<u.length;c++){const p=document.createElement("style");p.textContent=u[c],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Hl=(()=>{class n extends La{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(se))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const $l=["alt","control","meta","shift"],wg={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ps={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ir={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ci=(()=>{class n extends La{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const u=n.parseEventName(r),c=n.eventCallback(u.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,u.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const u=n._normalizeKey(r.pop());let c="";if($l.forEach(_=>{const I=r.indexOf(_);I>-1&&(r.splice(I,1),c+=_+".")}),c+=u,0!=r.length||0===u.length)return null;const p={};return p.domEventName=i,p.fullKey=c,p}static getEventFullKey(t){let r="",i=function wu(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&ps.hasOwnProperty(e)&&(e=ps[e]))}return wg[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),$l.forEach(u=>{u!=i&&Ir[u](t)&&(r+=u+".")}),r+=i,r}static eventCallback(t,r,i){return u=>{n.getEventFullKey(u)===t&&i.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(se))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const bu=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:"browser"},{provide:f.g9A,useValue:function Hs(){fo.makeCurrent(),Ki.init()},multi:!0},{provide:se,useFactory:function Gl(){return(0,f.RDi)(document),document},deps:[]}]),ql=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function Ti(){return new f.qLn},deps:[]},{provide:po,useClass:Hl,multi:!0,deps:[se,f.R0b,f.Lbi]},{provide:po,useClass:ci,multi:!0,deps:[se]},{provide:go,useClass:go,deps:[fs,Zi,f.AFp]},{provide:f.FYo,useExisting:go},{provide:Ci,useExisting:Zi},{provide:Zi,useClass:Zi,deps:[se]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b]},{provide:fs,useClass:fs,deps:[po,f.R0b]},{provide:class gn{},useClass:pr,deps:[]}];let ea=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:fr,useExisting:f.AFp},Dn]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(n,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:ql,imports:[Pa,f.hGG]}),n})();"undefined"!=typeof window&&window;let Wl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):f.LFG(Ba),r},providedIn:"root"}),n})(),Ba=(()=>{class n extends Wl{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case f.q3G.NONE:return r;case f.q3G.HTML:return(0,f.qzn)(r,"HTML")?(0,f.z3N)(r):(0,f.EiD)(this._doc,String(r)).toString();case f.q3G.STYLE:return(0,f.qzn)(r,"Style")?(0,f.z3N)(r):r;case f.q3G.SCRIPT:if((0,f.qzn)(r,"Script"))return(0,f.z3N)(r);throw new Error("unsafe value used in a script context");case f.q3G.URL:return(0,f.yhl)(r),(0,f.qzn)(r,"URL")?(0,f.z3N)(r):(0,f.mCW)(String(r));case f.q3G.RESOURCE_URL:if((0,f.qzn)(r,"ResourceURL"))return(0,f.z3N)(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,f.JVY)(t)}bypassSecurityTrustStyle(t){return(0,f.L6k)(t)}bypassSecurityTrustScript(t){return(0,f.eBb)(t)}bypassSecurityTrustUrl(t){return(0,f.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,f.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(se))},n.\u0275prov=f.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Yi(n){return new Ba(n.get(se))}(f.LFG(f.zs3)),r},providedIn:"root"}),n})();var Cn=O(8996),ja=O(7669);function st(...n){const e=(0,ja.yG)(n);return(0,Cn.D)(n,e)}var Mn=O(7579);class Ai extends Mn.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Xn=O(8306);const{isArray:Ha}=Array,{getPrototypeOf:md,prototype:ra,keys:$s}=Object;function Pn(n){if(1===n.length){const e=n[0];if(Ha(e))return{args:e,keys:null};if(function Gs(n){return n&&"object"==typeof n&&md(n)===ra}(e)){const t=$s(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Qi=O(4671),Ot=O(4004);const{isArray:yd}=Array;function Kl(n){return(0,Ot.U)(e=>function _d(n,e){return yd(e)?n(...e):n(e)}(n,e))}function $a(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var br=O(5403),Ji=O(9672);function qs(n,e,t){n?(0,Ji.f)(t,n,e):e()}var zs=O(576);function ia(n,e){const t=(0,zs.m)(n)?n:()=>n,r=i=>i.error(t());return new Xn.y(e?i=>e.schedule(r,0,i):r)}const wo=(0,O(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Io=O(8189);function qa(...n){return function sa(){return(0,Io.J)(1)}()((0,Cn.D)(n,(0,ja.yG)(n)))}var za=O(8421);function Wa(n){return new Xn.y(e=>{(0,za.Xf)(n()).subscribe(e)})}var di=O(515),bo=O(727),sr=O(4482);function Zl(){return(0,sr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,br.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,u=t;t=null,i&&(!u||i===u)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Br extends Xn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,sr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new bo.w0;const t=this.getSubject();e.add(this.source.subscribe((0,br.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=bo.w0.EMPTY)}return e}refCount(){return Zl()(this)}}function Hn(n,e){return(0,sr.e)((t,r)=>{let i=null,u=0,c=!1;const p=()=>c&&!i&&r.complete();t.subscribe((0,br.x)(r,_=>{null==i||i.unsubscribe();let I=0;const T=u++;(0,za.Xf)(n(_,T)).subscribe(i=(0,br.x)(r,M=>r.next(e?e(_,M,T,I++):M),()=>{i=null,p()}))},()=>{c=!0,p()}))})}function oa(n){return n<=0?()=>di.E:(0,sr.e)((e,t)=>{let r=0;e.subscribe((0,br.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function Xi(...n){const e=(0,ja.yG)(n);return(0,sr.e)((t,r)=>{(e?qa(n,t,e):qa(n,t)).subscribe(r)})}function Ws(n,e,t,r,i){return(u,c)=>{let p=t,_=e,I=0;u.subscribe((0,br.x)(c,T=>{const M=I++;_=p?n(_,T,M):(p=!0,T),r&&c.next(_)},i&&(()=>{p&&c.next(_),c.complete()})))}}function Si(n,e){return(0,sr.e)(Ws(n,e,arguments.length>=2,!0))}function Tn(n,e){return(0,sr.e)((t,r)=>{let i=0;t.subscribe((0,br.x)(r,u=>n.call(e,u,i++)&&r.next(u)))})}function jr(n){return(0,sr.e)((e,t)=>{let u,r=null,i=!1;r=e.subscribe((0,br.x)(t,void 0,void 0,c=>{u=(0,za.Xf)(n(c,jr(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,u.subscribe(t))})}var or=O(5577);function es(n,e){return(0,zs.m)(e)?(0,or.z)(n,e,1):(0,or.z)(n,1)}function vd(n){return n<=0?()=>di.E:(0,sr.e)((e,t)=>{let r=[];e.subscribe((0,br.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Yl(n=An){return(0,sr.e)((e,t)=>{let r=!1;e.subscribe((0,br.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function An(){return new wo}function Ed(n){return(0,sr.e)((e,t)=>{let r=!1;e.subscribe((0,br.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Ka(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Tn((i,u)=>n(i,u,r)):Qi.y,oa(1),t?Ed(e):Yl(()=>new wo))}var Mi=O(8505);class Do{constructor(e,t){this.id=e,this.url=t}}class Jh extends Do{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ys extends Do{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Id extends Do{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class kn extends Do{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class aa extends Do{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Za extends Do{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bd extends Do{constructor(e,t,r,i,u){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Xh extends Do{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Hr extends Do{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $r{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ya{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ql{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Co{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ua{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class To{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xu{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const $t="primary";class Dd{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function _s(n){return new Dd(n)}const er="ngNavigationCancelingError";function Ks(n){const e=Error("NavigationCancelingError: "+n);return e[er]=!0,e}function Cd(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let u=0;u<r.length;u++){const c=r[u],p=n[u];if(c.startsWith(":"))i[c.substring(1)]=p;else if(c!==p.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function vs(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let u=0;u<t.length;u++)if(i=t[u],!Jl(n[i],e[i]))return!1;return!0}function Jl(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,u)=>r[u]===i)}return n===e}function ef(n){return Array.prototype.concat.apply([],n)}function Nu(n){return n.length>0?n[n.length-1]:null}function In(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function ar(n){return(0,f.CqO)(n)?n:(0,f.QGY)(n)?(0,Cn.D)(Promise.resolve(n)):st(n)}const Tg={exact:function tf(n,e,t){if(!F(n.segments,e.segments)||!ku(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!tf(n.children[r],e.children[r],t))return!1;return!0},subset:Ou},Gr={exact:function hi(n,e){return vs(n,e)},subset:function Ad(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Jl(n[t],e[t]))},ignored:()=>!0};function ca(n,e,t){return Tg[t.paths](n.root,e.root,t.matrixParams)&&Gr[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Ou(n,e,t){return Pu(n,e,e.segments,t)}function Pu(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!F(i,t)||e.hasChildren()||!ku(i,t,r))}if(n.segments.length===t.length){if(!F(n.segments,t)||!ku(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Ou(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(F(n.segments,i)&&ku(n.segments,i,r)&&n.children[$t])&&Pu(n.children[$t],e,u,r)}}function ku(n,e,t){return e.every((r,i)=>Gr[t](n[i].parameters,r.parameters))}class ts{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=_s(this.queryParams)),this._queryParamMap}toString(){return je.serialize(this)}}class b{constructor(e,t){this.segments=e,this.children=t,this.parent=null,In(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return lt(this)}}class C{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=_s(this.parameters)),this._parameterMap}toString(){return ns(this)}}function F(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class te{}class Ce{parse(e){const t=new Ag(e);return new ts(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${It(e.root,!0)}`,r=function Qa(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${rt(t)}=${rt(i)}`).join("&"):`${rt(t)}=${rt(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function $n(n){return encodeURI(n)}(e.fragment)}`:""}`}}const je=new Ce;function lt(n){return n.segments.map(e=>ns(e)).join("/")}function It(n,e){if(!n.hasChildren())return lt(n);if(e){const t=n.children[$t]?It(n.children[$t],!1):"",r=[];return In(n.children,(i,u)=>{u!==$t&&r.push(`${u}:${It(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Z(n,e){let t=[];return In(n.children,(r,i)=>{i===$t&&(t=t.concat(e(r,i)))}),In(n.children,(r,i)=>{i!==$t&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===$t?[It(n.children[$t],!1)]:[`${i}:${It(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[$t]?`${lt(n)}/${t[0]}`:`${lt(n)}/(${t.join("//")})`}}function xt(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function rt(n){return xt(n).replace(/%3B/gi,";")}function Gn(n){return xt(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ys(n){return decodeURIComponent(n)}function Qs(n){return Ys(n.replace(/\+/g,"%20"))}function ns(n){return`${Gn(n.path)}${function Fu(n){return Object.keys(n).map(e=>`;${Gn(e)}=${Gn(n[e])}`).join("")}(n.parameters)}`}const Ao=/^[^\/()?;=#]+/;function rs(n){const e=n.match(Ao);return e?e[0]:""}const xi=/^[^=?&#]+/,nf=/^[^&#]+/;class Ag{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new b([],{}):new b([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[$t]=new b(e,t)),r}parseSegment(){const e=rs(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new C(Ys(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=rs(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=rs(this.remaining);i&&(r=i,this.capture(r))}e[Ys(t)]=Ys(r)}parseQueryParam(e){const t=function da(n){const e=n.match(xi);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function uE(n){const e=n.match(nf);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const i=Qs(t),u=Qs(r);if(e.hasOwnProperty(i)){let c=e[i];Array.isArray(c)||(c=[c],e[i]=c),c.push(u)}else e[i]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=rs(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=$t);const c=this.parseChildren();t[u]=1===Object.keys(c).length?c[$t]:new b([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class rf{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Sg(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Sg(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Lu(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Lu(e,this._root).map(t=>t.value)}}function Sg(n,e){if(n===e.value)return e;for(const t of e.children){const r=Sg(n,t);if(r)return r}return null}function Lu(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Lu(n,t);if(r.length)return r.unshift(e),r}return[]}class So{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Vu(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Xl extends rf{constructor(e,t){super(e),this.snapshot=t,xd(this,e)}toString(){return this.snapshot.toString()}}function Sd(n,e){const t=function Uu(n,e){const c=new Mo([],{},{},"",{},$t,e,null,n.root,-1,{});return new Md("",new So(c,[]))}(n,e),r=new Ai([new C("",{})]),i=new Ai({}),u=new Ai({}),c=new Ai({}),p=new Ai(""),_=new Ja(r,i,c,p,u,$t,e,t.root);return _.snapshot=t.root,new Xl(new So(_,[]),t)}class Ja{constructor(e,t,r,i,u,c,p,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=p,this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ot.U)(e=>_s(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ot.U)(e=>_s(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Mg(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],u=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(u.component)break;r--}}return function lE(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Mo{constructor(e,t,r,i,u,c,p,_,I,T,M){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=u,this.outlet=c,this.component=p,this.routeConfig=_,this._urlSegment=I,this._lastPathIndex=T,this._resolve=M}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=_s(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=_s(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Md extends rf{constructor(e,t){super(t),this.url=e,xd(this,t)}toString(){return sf(this._root)}}function xd(n,e){e.value._routerState=n,e.children.forEach(t=>xd(n,t))}function sf(n){const e=n.children.length>0?` { ${n.children.map(sf).join(", ")} } `:"";return`${n.value}${e}`}function Nd(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,vs(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),vs(e.params,t.params)||n.params.next(t.params),function la(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!vs(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),vs(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function xo(n,e){const t=vs(n.params,e.params)&&function x(n,e){return F(n,e)&&n.every((t,r)=>vs(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||xo(n.parent,e.parent))}function ec(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Gy(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return ec(n,r,i);return ec(n,r)})}(n,e,t);return new So(r,i)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const c=u.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(p=>ec(n,p)),c}}const r=function qy(n){return new Ja(new Ai(n.url),new Ai(n.params),new Ai(n.queryParams),new Ai(n.fragment),new Ai(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(u=>ec(n,u));return new So(r,i)}}function fi(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Js(n){return"object"==typeof n&&null!=n&&n.outlets}function Bu(n,e,t,r,i){let u={};if(r&&In(r,(p,_)=>{u[_]=Array.isArray(p)?p.map(I=>`${I}`):`${p}`}),n===e)return new ts(t,u,i);const c=Ng(n,e,t);return new ts(c,u,i)}function Ng(n,e,t){const r={};return In(n.children,(i,u)=>{r[u]=i===e?t:Ng(i,e,t)}),new b(n.segments,r)}class of{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&fi(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(Js);if(i&&i!==Nu(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class tc{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Og(n,e,t){if(n||(n=new b([],{})),0===n.segments.length&&n.hasChildren())return Rd(n,e,t);const r=function Zy(n,e,t){let r=0,i=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return u;const c=n.segments[i],p=t[r];if(Js(p))break;const _=`${p}`,I=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&I&&"object"==typeof I&&void 0===I.outlets){if(!uf(_,I,c))return u;r+=2}else{if(!uf(_,{},c))return u;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new b(n.segments.slice(0,r.pathIndex),{});return u.children[$t]=new b(n.segments.slice(r.pathIndex),n.children),Rd(u,0,i)}return r.match&&0===i.length?new b(n.segments,{}):r.match&&!n.hasChildren()?Pg(n,e,t):r.match?Rd(n,0,i):Pg(n,e,t)}function Rd(n,e,t){if(0===t.length)return new b(n.segments,{});{const r=function Rg(n){return Js(n[0])?n[0].outlets:{[$t]:n}}(t),i={};return In(r,(u,c)=>{"string"==typeof u&&(u=[u]),null!==u&&(i[c]=Og(n.children[c],e,u))}),In(n.children,(u,c)=>{void 0===r[c]&&(i[c]=u)}),new b(n.segments,i)}}function Pg(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const u=t[i];if(Js(u)){const _=Yy(u.outlets);return new b(r,_)}if(0===i&&fi(t[0])){r.push(new C(n.segments[e].path,Xa(t[0]))),i++;continue}const c=Js(u)?u.outlets[$t]:`${u}`,p=i<t.length-1?t[i+1]:null;c&&p&&fi(p)?(r.push(new C(c,Xa(p))),i+=2):(r.push(new C(c,{})),i++)}return new b(r,{})}function Yy(n){const e={};return In(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Pg(new b([],{}),0,t))}),e}function Xa(n){const e={};return In(n,(t,r)=>e[r]=`${t}`),e}function uf(n,e,t){return n==t.path&&vs(e,t.parameters)}class Es{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Nd(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Vu(t);e.children.forEach(u=>{const c=u.value.outlet;this.deactivateRoutes(u,i[c],r),delete i[c]}),In(i,(u,c)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(i===u)if(i.component){const c=r.getContext(i.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=Vu(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);if(r&&r.outlet){const c=r.outlet.detach(),p=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:p})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,u=Vu(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Vu(t);e.children.forEach(u=>{this.activateRoutes(u,i[u.value.outlet],r),this.forwardEvent(new To(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Co(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,u=t?t.value:null;if(Nd(i),i===u)if(i.component){const c=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const c=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const p=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),c.children.onOutletReAttached(p.contexts),c.attachRef=p.componentRef,c.route=p.route.value,c.outlet&&c.outlet.attach(p.componentRef,p.route.value),Nd(p.route.value),this.activateChildRoutes(e,null,c.children)}else{const p=function kg(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),_=p?p.module.componentFactoryResolver:null;c.attachRef=null,c.route=i,c.resolver=_,c.outlet&&c.outlet.activateWith(i,_),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,r)}}class Od{constructor(e,t){this.routes=e,this.module=t}}function ws(n){return"function"==typeof n}function ha(n){return n instanceof ts}const Pd=Symbol("INITIAL_VALUE");function ju(){return Hn(n=>function Mu(...n){const e=(0,ja.yG)(n),t=(0,ja.jO)(n),{args:r,keys:i}=Pn(n);if(0===r.length)return(0,Cn.D)([],e);const u=new Xn.y(function ms(n,e,t=Qi.y){return r=>{qs(e,()=>{const{length:i}=n,u=new Array(i);let c=i,p=i;for(let _=0;_<i;_++)qs(e,()=>{const I=(0,Cn.D)(n[_],e);let T=!1;I.subscribe((0,br.x)(r,M=>{u[_]=M,T||(T=!0,p--),p||r.next(t(u.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,i?c=>$a(i,c):Qi.y));return t?u.pipe(Kl(t)):u}(n.map(e=>e.pipe(oa(1),Xi(Pd)))).pipe(Si((e,t)=>{let r=!1;return t.reduce((i,u,c)=>i!==Pd?i:(u===Pd&&(r=!0),r||!1!==u&&c!==t.length-1&&!ha(u)?i:u),e)},Pd),Tn(e=>e!==Pd),(0,Ot.U)(e=>ha(e)?e:!0===e),oa(1)))}class Fg{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new rc,this.attachRef=null}}class rc{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Fg,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let df=(()=>{class n{constructor(t,r,i,u,c){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.name=u||$t,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const c=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),p=this.parentContexts.getOrCreateContext(this.name).children,_=new Qy(t,p,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,_),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(rc),f.Y36(f.s_b),f.Y36(f._Vd),f.$8M("name"),f.Y36(f.sBO))},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Qy{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ja?this.route:e===rc?this.childContexts:this.parent.get(e,t)}}let Lg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},directives:[df],encapsulation:2}),n})();function kd(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Hu(r,Vg(e,r))}}function Hu(n,e){n.children&&kd(n.children,e)}function Vg(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function ic(n){const e=n.children&&n.children.map(ic),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==$t&&(t.component=Lg),t}function pi(n){return n.outlet||$t}function Sn(n,e){const t=n.filter(r=>pi(r)===e);return t.push(...n.filter(r=>pi(r)!==e)),t}const hf={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Fd(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},hf):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||Cd)(t,n,e);if(!u)return Object.assign({},hf);const c={};In(u.posParams,(_,I)=>{c[I]=_.path});const p=u.consumed.length>0?Object.assign(Object.assign({},c),u.consumed[u.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:p,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function Ro(n,e,t,r,i="corrected"){if(t.length>0&&function Xy(n,e,t){return t.some(r=>Ld(n,e,r)&&pi(r)!==$t)}(n,t,r)){const c=new b(e,function Jy(n,e,t,r){const i={};i[$t]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&pi(u)!==$t){const c=new b([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,i[pi(u)]=c}return i}(n,e,r,new b(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function Bg(n,e,t){return t.some(r=>Ld(n,e,r))}(n,t,r)){const c=new b(n.segments,function Ug(n,e,t,r,i,u){const c={};for(const p of r)if(Ld(n,t,p)&&!i[pi(p)]){const _=new b([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===u?n.segments.length:e.length,c[pi(p)]=_}return Object.assign(Object.assign({},i),c)}(n,e,t,r,n.children,i));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const u=new b(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function Ld(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function jg(n,e,t,r){return!!(pi(n)===r||r!==$t&&Ld(e,t,n))&&("**"===n.path||Fd(e,n,t).matched)}function e_(n,e,t){return 0===e.length&&!n.children[t]}class ff{constructor(e){this.segmentGroup=e||null}}class Xs{constructor(e){this.urlTree=e}}function ur(n){return ia(new ff(n))}function sc(n){return ia(new Xs(n))}class oc{constructor(e,t,r,i,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(f.h0i)}apply(){const e=Ro(this.urlTree.root,[],[],this.config).segmentGroup,t=new b(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,$t).pipe((0,Ot.U)(u=>this.createUrlTree(ac(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(jr(u=>{if(u instanceof Xs)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof ff?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,$t).pipe((0,Ot.U)(i=>this.createUrlTree(ac(i),e.queryParams,e.fragment))).pipe(jr(i=>{throw i instanceof ff?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new b([],{[$t]:e}):e;return new ts(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Ot.U)(u=>new b([],u))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const u of Object.keys(r.children))"primary"===u?i.unshift(u):i.push(u);return(0,Cn.D)(i).pipe(es(u=>{const c=r.children[u],p=Sn(t,u);return this.expandSegmentGroup(e,p,c,u).pipe((0,Ot.U)(_=>({segment:_,outlet:u})))}),Si((u,c)=>(u[c.outlet]=c.segment,u),{}),function wd(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Tn((i,u)=>n(i,u,r)):Qi.y,vd(1),t?Ed(e):Yl(()=>new wo))}())}expandSegment(e,t,r,i,u,c){return(0,Cn.D)(r).pipe(es(p=>this.expandSegmentAgainstRoute(e,t,r,p,i,u,c).pipe(jr(I=>{if(I instanceof ff)return st(null);throw I}))),Ka(p=>!!p),jr((p,_)=>{if(p instanceof wo||"EmptyError"===p.name)return e_(t,i,u)?st(new b([],{})):ur(t);throw p}))}expandSegmentAgainstRoute(e,t,r,i,u,c,p){return jg(i,t,u,c)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,u,c):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c):ur(t):ur(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?sc(u):this.lineralizeSegments(r,u).pipe((0,or.z)(c=>{const p=new b(c,{});return this.expandSegment(e,p,t,c,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,u,c){const{matched:p,consumedSegments:_,remainingSegments:I,positionalParamSegments:T}=Fd(t,i,u);if(!p)return ur(t);const M=this.applyRedirectCommands(_,i.redirectTo,T);return i.redirectTo.startsWith("/")?sc(M):this.lineralizeSegments(i,M).pipe((0,or.z)(L=>this.expandSegment(e,t,r,L.concat(I),c,!1)))}matchSegmentAgainstRoute(e,t,r,i,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?st(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,Ot.U)(M=>(r._loadedConfig=M,new b(i,{})))):st(new b(i,{}));const{matched:c,consumedSegments:p,remainingSegments:_}=Fd(t,r,i);return c?this.getChildConfig(e,r,i).pipe((0,or.z)(T=>{const M=T.module,L=T.routes,{segmentGroup:U,slicedSegments:z}=Ro(t,p,_,L),de=new b(U.segments,U.children);if(0===z.length&&de.hasChildren())return this.expandChildren(M,L,de).pipe((0,Ot.U)(gt=>new b(p,gt)));if(0===L.length&&0===z.length)return st(new b(p,{}));const Te=pi(r)===u;return this.expandSegment(M,de,L,z,Te?$t:u,!0).pipe((0,Ot.U)(ot=>new b(p.concat(ot.segments),ot.children)))})):ur(t)}getChildConfig(e,t,r){return t.children?st(new Od(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?st(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,or.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,Ot.U)(u=>(t._loadedConfig=u,u))):function $g(n){return ia(Ks(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):st(new Od([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?st(i.map(c=>{const p=e.get(c);let _;if(function dE(n){return n&&ws(n.canLoad)}(p))_=p.canLoad(t,r);else{if(!ws(p))throw new Error("Invalid CanLoad guard");_=p(t,r)}return ar(_)})).pipe(ju(),(0,Mi.b)(c=>{if(!ha(c))return;const p=Ks(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw p.url=c,p}),(0,Ot.U)(c=>!0===c)):st(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return st(r);if(i.numberOfChildren>1||!i.children[$t])return ia(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));i=i.children[$t]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const u=this.createSegmentGroup(e,t.root,r,i);return new ts(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return In(e,(i,u)=>{if("string"==typeof i&&i.startsWith(":")){const p=i.substring(1);r[u]=t[p]}else r[u]=i}),r}createSegmentGroup(e,t,r,i){const u=this.createSegments(e,t.segments,r,i);let c={};return In(t.children,(p,_)=>{c[_]=this.createSegmentGroup(e,p,r,i)}),new b(u,c)}createSegments(e,t,r,i){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,i):this.findOrReturn(u,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function ac(n){const e={};for(const r of Object.keys(n.children)){const u=ac(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Vd(n){if(1===n.numberOfChildren&&n.children[$t]){const e=n.children[$t];return new b(n.segments.concat(e.segments),e.children)}return n}(new b(n.segments,e))}class Ud{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Bd{constructor(e,t){this.component=e,this.route=t}}function jd(n,e,t){const r=n._root;return $u(r,e?e._root:null,t,[r.value])}function Dr(n,e,t){const r=function uc(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function $u(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=Vu(e);return n.children.forEach(c=>{(function gf(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,c=e?e.value:null,p=t?t.getContext(n.value.outlet):null;if(c&&u.routeConfig===c.routeConfig){const _=function mf(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!F(n.url,e.url);case"pathParamsOrQueryParamsChange":return!F(n.url,e.url)||!vs(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!xo(n,e)||!vs(n.queryParams,e.queryParams);default:return!xo(n,e)}}(c,u,u.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new Ud(r)):(u.data=c.data,u._resolvedData=c._resolvedData),$u(n,e,u.component?p?p.children:null:t,r,i),_&&p&&p.outlet&&p.outlet.isActivated&&i.canDeactivateChecks.push(new Bd(p.outlet.component,c))}else c&&eu(e,p,i),i.canActivateChecks.push(new Ud(r)),$u(n,null,u.component?p?p.children:null:t,r,i)})(c,u[c.value.outlet],t,r.concat([c.value]),i),delete u[c.value.outlet]}),In(u,(c,p)=>eu(c,t.getContext(p),i)),i}function eu(n,e,t){const r=Vu(n),i=n.value;In(r,(u,c)=>{eu(u,i.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new Bd(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class zg{}function zr(n){return new Xn.y(e=>e.error(n))}class vf{constructor(e,t,r,i,u,c){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=c}recognize(){const e=Ro(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,$t);if(null===t)return null;const r=new Mo([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},$t,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new So(r,t),u=new Md(this.url,i);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=Mg(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const c=t.children[u],p=Sn(e,u),_=this.processSegmentGroup(p,c,u);if(null===_)return null;r.push(..._)}const i=Ef(r);return function o_(n){n.sort((e,t)=>e.value.outlet===$t?-1:t.value.outlet===$t?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const u of e){const c=this.processSegmentAgainstRoute(u,t,r,i);if(null!==c)return c}return e_(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!jg(e,t,r,i))return null;let u,c=[],p=[];if("**"===e.path){const U=r.length>0?Nu(r).parameters:{};u=new Mo(r,U,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,bs(e),pi(e),e.component,e,Wg(t),Po(t)+r.length,u_(e))}else{const U=Fd(t,e,r);if(!U.matched)return null;c=U.consumedSegments,p=U.remainingSegments,u=new Mo(c,U.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,bs(e),pi(e),e.component,e,Wg(t),Po(t)+c.length,u_(e))}const _=function Oo(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:I,slicedSegments:T}=Ro(t,c,p,_.filter(U=>void 0===U.redirectTo),this.relativeLinkResolution);if(0===T.length&&I.hasChildren()){const U=this.processChildren(_,I);return null===U?null:[new So(u,U)]}if(0===_.length&&0===T.length)return[new So(u,[])];const M=pi(e)===i,L=this.processSegment(_,I,T,M?$t:i);return null===L?null:[new So(u,L)]}}function lc(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Ef(n){const e=[],t=new Set;for(const r of n){if(!lc(r)){e.push(r);continue}const i=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=Ef(r.children);e.push(new So(r.value,i))}return e.filter(r=>!t.has(r))}function Wg(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Po(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function bs(n){return n.data||{}}function u_(n){return n.resolve||{}}function g(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function A(n){return Hn(e=>{const t=n(e);return t?(0,Cn.D)(t).pipe((0,Ot.U)(()=>e)):st(e)})}class le extends class q{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const ke=new f.OlP("ROUTES");class Ze{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,Ot.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const c=u.create(e);return new Od(ef(c.injector.get(ke,void 0,f.XFs.Self|f.XFs.Optional)).map(ic),c)}),jr(u=>{throw t._loader$=void 0,u}));return t._loader$=new Br(i,()=>new Mn.x).pipe(Zl()),t._loader$}loadModuleFactory(e){return ar(e()).pipe((0,or.z)(t=>t instanceof f.YKP?st(t):(0,Cn.D)(this.compiler.compileModuleAsync(t))))}}class ft{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function gr(n){throw n}function Wr(n,e,t){return e.parse("/")}function tu(n,e){return st(null)}const wf={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},If={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Cr=(()=>{class n{constructor(t,r,i,u,c,p,_){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=u,this.config=_,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Mn.x,this.errorHandler=gr,this.malformedUriErrorHandler=Wr,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:tu,afterPreactivation:tu},this.urlHandlingStrategy=new ft,this.routeReuseStrategy=new le,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(f.h0i),this.console=c.get(f.c2e);const M=c.get(f.R0b);this.isNgZoneEnabled=M instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=function Ru(){return new ts(new b([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Ze(c,p,L=>this.triggerEvent(new $r(L)),L=>this.triggerEvent(new Ya(L))),this.routerState=Sd(this.currentUrlTree,this.rootComponentType),this.transitions=new Ai({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Tn(i=>0!==i.id),(0,Ot.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Hn(i=>{let u=!1,c=!1;return st(i).pipe((0,Mi.b)(p=>{this.currentNavigation={id:p.id,initialUrl:p.currentRawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Hn(p=>{const _=this.browserUrlTree.toString(),I=!this.navigated||p.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||I)&&this.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return Hd(p.source)&&(this.browserUrlTree=p.extractedUrl),st(p).pipe(Hn(M=>{const L=this.transitions.getValue();return r.next(new Jh(M.id,this.serializeUrl(M.extractedUrl),M.source,M.restoredState)),L!==this.transitions.getValue()?di.E:Promise.resolve(M)}),function pf(n,e,t,r){return Hn(i=>function qr(n,e,t,r,i){return new oc(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,Ot.U)(u=>Object.assign(Object.assign({},i),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Mi.b)(M=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:M.urlAfterRedirects})}),function hE(n,e,t,r,i){return(0,or.z)(u=>function _f(n,e,t,r,i="emptyOnly",u="legacy"){try{const c=new vf(n,e,t,r,i,u).recognize();return null===c?zr(new zg):st(c)}catch(c){return zr(c)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,i).pipe((0,Ot.U)(c=>Object.assign(Object.assign({},u),{targetSnapshot:c}))))}(this.rootComponentType,this.config,M=>this.serializeUrl(M),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Mi.b)(M=>{if("eager"===this.urlUpdateStrategy){if(!M.extras.skipLocationChange){const U=this.urlHandlingStrategy.merge(M.urlAfterRedirects,M.rawUrl);this.setBrowserUrl(U,M)}this.browserUrlTree=M.urlAfterRedirects}const L=new aa(M.id,this.serializeUrl(M.extractedUrl),this.serializeUrl(M.urlAfterRedirects),M.targetSnapshot);r.next(L)}));if(I&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:L,extractedUrl:U,source:z,restoredState:de,extras:Te}=p,nt=new Jh(L,this.serializeUrl(U),z,de);r.next(nt);const ot=Sd(U,this.rootComponentType).snapshot;return st(Object.assign(Object.assign({},p),{targetSnapshot:ot,urlAfterRedirects:U,extras:Object.assign(Object.assign({},Te),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=p.rawUrl,p.resolve(null),di.E}),A(p=>{const{targetSnapshot:_,id:I,extractedUrl:T,rawUrl:M,extras:{skipLocationChange:L,replaceUrl:U}}=p;return this.hooks.beforePreactivation(_,{navigationId:I,appliedUrlTree:T,rawUrlTree:M,skipLocationChange:!!L,replaceUrl:!!U})}),(0,Mi.b)(p=>{const _=new Za(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(_)}),(0,Ot.U)(p=>Object.assign(Object.assign({},p),{guards:jd(p.targetSnapshot,p.currentSnapshot,this.rootContexts)})),function yf(n,e){return(0,or.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:u,canDeactivateChecks:c}}=t;return 0===c.length&&0===u.length?st(Object.assign(Object.assign({},t),{guardsResult:!0})):function Gg(n,e,t,r){return(0,Cn.D)(n).pipe((0,or.z)(i=>function s_(n,e,t,r,i){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?st(u.map(p=>{const _=Dr(p,e,i);let I;if(function cf(n){return n&&ws(n.canDeactivate)}(_))I=ar(_.canDeactivate(n,e,t,r));else{if(!ws(_))throw new Error("Invalid CanDeactivate guard");I=ar(_(n,e,t,r))}return I.pipe(Ka())})).pipe(ju()):st(!0)}(i.component,i.route,t,e,r)),Ka(i=>!0!==i,!0))}(c,r,i,n).pipe((0,or.z)(p=>p&&function cE(n){return"boolean"==typeof n}(p)?function n_(n,e,t,r){return(0,Cn.D)(e).pipe(es(i=>qa(function qg(n,e){return null!==n&&e&&e(new Ql(n)),st(!0)}(i.route.parent,r),function Is(n,e){return null!==n&&e&&e(new ua(n)),st(!0)}(i.route,r),function i_(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(c=>function t_(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>Wa(()=>st(c.guards.map(_=>{const I=Dr(_,c.node,t);let T;if(function nc(n){return n&&ws(n.canActivateChild)}(I))T=ar(I.canActivateChild(r,n));else{if(!ws(I))throw new Error("Invalid CanActivateChild guard");T=ar(I(r,n))}return T.pipe(Ka())})).pipe(ju())));return st(u).pipe(ju())}(n,i.path,t),function r_(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return st(!0);const i=r.map(u=>Wa(()=>{const c=Dr(u,e,t);let p;if(function lf(n){return n&&ws(n.canActivate)}(c))p=ar(c.canActivate(e,n));else{if(!ws(c))throw new Error("Invalid CanActivate guard");p=ar(c(e,n))}return p.pipe(Ka())}));return st(i).pipe(ju())}(n,i.route,t))),Ka(i=>!0!==i,!0))}(r,u,n,e):st(p)),(0,Ot.U)(p=>Object.assign(Object.assign({},t),{guardsResult:p})))})}(this.ngModule.injector,p=>this.triggerEvent(p)),(0,Mi.b)(p=>{if(ha(p.guardsResult)){const I=Ks(`Redirecting to "${this.serializeUrl(p.guardsResult)}"`);throw I.url=p.guardsResult,I}const _=new bd(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.triggerEvent(_)}),Tn(p=>!!p.guardsResult||(this.restoreHistory(p),this.cancelNavigationTransition(p,""),!1)),A(p=>{if(p.guards.canActivateChecks.length)return st(p).pipe((0,Mi.b)(_=>{const I=new Xh(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(I)}),Hn(_=>{let I=!1;return st(_).pipe(function Kg(n,e){return(0,or.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return st(t);let u=0;return(0,Cn.D)(i).pipe(es(c=>function y(n,e,t,r){return function h(n,e,t,r){const i=g(n);if(0===i.length)return st({});const u={};return(0,Cn.D)(i).pipe((0,or.z)(c=>function E(n,e,t,r){const i=Dr(n,e,r);return ar(i.resolve?i.resolve(e,t):i(e,t))}(n[c],e,t,r).pipe((0,Mi.b)(p=>{u[c]=p}))),vd(1),(0,or.z)(()=>g(u).length===i.length?st(u):di.E))}(n._resolve,n,e,r).pipe((0,Ot.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),Mg(n,t).resolve),null)))}(c.route,r,n,e)),(0,Mi.b)(()=>u++),vd(1),(0,or.z)(c=>u===i.length?st(t):di.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Mi.b)({next:()=>I=!0,complete:()=>{I||(this.restoreHistory(_),this.cancelNavigationTransition(_,"At least one route resolver didn't emit any value."))}}))}),(0,Mi.b)(_=>{const I=new Hr(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(I)}))}),A(p=>{const{targetSnapshot:_,id:I,extractedUrl:T,rawUrl:M,extras:{skipLocationChange:L,replaceUrl:U}}=p;return this.hooks.afterPreactivation(_,{navigationId:I,appliedUrlTree:T,rawUrlTree:M,skipLocationChange:!!L,replaceUrl:!!U})}),(0,Ot.U)(p=>{const _=function xg(n,e,t){const r=ec(n,e._root,t?t._root:void 0);return new Xl(r,e)}(this.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return Object.assign(Object.assign({},p),{targetRouterState:_})}),(0,Mi.b)(p=>{this.currentUrlTree=p.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl),this.routerState=p.targetRouterState,"deferred"===this.urlUpdateStrategy&&(p.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,p),this.browserUrlTree=p.urlAfterRedirects)}),((n,e,t)=>(0,Ot.U)(r=>(new Es(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,p=>this.triggerEvent(p)),(0,Mi.b)({next(){u=!0},complete(){u=!0}}),function Cg(n){return(0,sr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var p;u||c||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(p=this.currentNavigation)||void 0===p?void 0:p.id)===i.id&&(this.currentNavigation=null)}),jr(p=>{if(c=!0,function Zs(n){return n&&n[er]}(p)){const _=ha(p.url);_||(this.navigated=!0,this.restoreHistory(i,!0));const I=new Id(i.id,this.serializeUrl(i.extractedUrl),p.message);r.next(I),_?setTimeout(()=>{const T=this.urlHandlingStrategy.merge(p.url,this.rawUrlTree),M={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Hd(i.source)};this.scheduleNavigation(T,"imperative",null,M,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const _=new kn(i.id,this.serializeUrl(i.extractedUrl),p);r.next(_);try{i.resolve(this.errorHandler(p))}catch(I){i.reject(I)}}return di.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const u={replaceUrl:!0},c=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(c){const _=Object.assign({},c);delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(u.state=_)}const p=this.parseUrl(t.url);this.scheduleNavigation(p,r,c,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){kd(t),this.config=t.map(ic),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:u,fragment:c,queryParamsHandling:p,preserveFragment:_}=r,I=i||this.routerState.root,T=_?this.currentUrlTree.fragment:c;let M=null;switch(p){case"merge":M=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":M=this.currentUrlTree.queryParams;break;default:M=u||null}return null!==M&&(M=this.removeEmptyProps(M)),function zy(n,e,t,r,i){if(0===t.length)return Bu(e.root,e.root,e.root,r,i);const u=function Wy(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new of(!0,0,n);let e=0,t=!1;const r=n.reduce((i,u,c)=>{if("object"==typeof u&&null!=u){if(u.outlets){const p={};return In(u.outlets,(_,I)=>{p[I]="string"==typeof _?_.split("/"):_}),[...i,{outlets:p}]}if(u.segmentPath)return[...i,u.segmentPath]}return"string"!=typeof u?[...i,u]:0===c?(u.split("/").forEach((p,_)=>{0==_&&"."===p||(0==_&&""===p?t=!0:".."===p?e++:""!=p&&i.push(p))}),i):[...i,u]},[]);return new of(t,e,r)}(t);if(u.toRoot())return Bu(e.root,e.root,new b([],{}),r,i);const c=function Ky(n,e,t){if(n.isAbsolute)return new tc(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new tc(u,u===e.root,0)}const r=fi(n.commands[0])?0:1;return function af(n,e,t){let r=n,i=e,u=t;for(;u>i;){if(u-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new tc(r,!1,i-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),p=c.processChildren?Rd(c.segmentGroup,c.index,u.commands):Og(c.segmentGroup,c.index,u.commands);return Bu(e.root,c.segmentGroup,p,r,i)}(I,this.currentUrlTree,t,M,null!=T?T:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=ha(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function Zg(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},wf):!1===r?Object.assign({},If):r,ha(t))return ca(this.currentUrlTree,t,i);const u=this.parseUrl(t);return ca(this.currentUrlTree,u,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const u=t[i];return null!=u&&(r[i]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new ys(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,u,c){var p,_;if(this.disposed)return Promise.resolve(!1);let I,T,M;c?(I=c.resolve,T=c.reject,M=c.promise):M=new Promise((z,de)=>{I=z,T=de});const L=++this.navigationId;let U;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),U=i&&i.\u0275routerPageId?i.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(p=this.browserPageId)&&void 0!==p?p:0:(null!==(_=this.browserPageId)&&void 0!==_?_:0)+1):U=0,this.setTransition({id:L,targetPageId:U,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:I,reject:T,promise:M,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),M.catch(z=>Promise.reject(z))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",u):this.location.go(i,"",u)}restoreHistory(t,r=!1){var i,u;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===c?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new Id(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function Hd(n){return"imperative"!==n}let Gu=(()=>{class n{constructor(t,r,i,u,c){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=u,this.el=c,this.commands=null,this.onChanges=new Mn.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:fa(this.skipLocationChange),replaceUrl:fa(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:fa(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Cr),f.Y36(Ja),f.$8M("tabindex"),f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&f.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[f.TTD]}),n})();function fa(n){return""===n||!!n}class qu{}class Xg{preload(e,t){return st(null)}}let fE=(()=>{class n{constructor(t,r,i,u){this.router=t,this.injector=i,this.preloadingStrategy=u,this.loader=new Ze(i,r,_=>t.triggerEvent(new $r(_)),_=>t.triggerEvent(new Ya(_)))}setUpPreloading(){this.subscription=this.router.events.pipe(Tn(t=>t instanceof ys),es(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(f.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const c=u._loadedConfig;i.push(this.processRoutes(c.module,c.routes))}else u.loadChildren&&!u.canLoad?i.push(this.preloadConfig(t,u)):u.children&&i.push(this.processRoutes(t,u.children));return(0,Cn.D)(i).pipe((0,Io.J)(),(0,Ot.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?st(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,or.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Cr),f.LFG(f.Sil),f.LFG(f.zs3),f.LFG(qu))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),l_=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Jh?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ys&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof xu&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new xu(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const zu=new f.OlP("ROUTER_CONFIGURATION"),Wu=new f.OlP("ROUTER_FORROOT_GUARD"),pE=[me,{provide:te,useClass:Ce},{provide:Cr,useFactory:function _E(n,e,t,r,i,u,c={},p,_){const I=new Cr(null,n,e,t,r,i,ef(u));return p&&(I.urlHandlingStrategy=p),_&&(I.routeReuseStrategy=_),function d_(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,I),c.enableTracing&&I.events.subscribe(T=>{var M,L;null===(M=console.group)||void 0===M||M.call(console,`Router Event: ${T.constructor.name}`),console.log(T.toString()),console.log(T),null===(L=console.groupEnd)||void 0===L||L.call(console)}),I},deps:[te,rc,me,f.zs3,f.Sil,ke,zu,[class yt{},new f.FiY],[class R{},new f.FiY]]},rc,{provide:Ja,useFactory:function vE(n){return n.routerState.root},deps:[Cr]},fE,Xg,class Jg{preload(e,t){return t().pipe(jr(()=>st(null)))}},{provide:zu,useValue:{enableTracing:!1}}];function gE(){return new f.PXZ("Router",Cr)}let mE=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[pE,c_(t),{provide:Wu,useFactory:yE,deps:[[Cr,new f.FiY,new f.tp0]]},{provide:zu,useValue:r||{}},{provide:fe,useFactory:lD,deps:[oe,[new f.tBr(qe),new f.FiY],zu]},{provide:l_,useFactory:em,deps:[Cr,kl,zu]},{provide:qu,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:Xg},{provide:f.PXZ,multi:!0,useFactory:gE},[Gd,{provide:f.ip1,multi:!0,useFactory:tm,deps:[Gd]},{provide:nm,useFactory:EE,deps:[Gd]},{provide:f.tb,multi:!0,useExisting:nm}]]}}static forChild(t){return{ngModule:n,providers:[c_(t)]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Wu,8),f.LFG(Cr,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function em(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new l_(n,e,t)}function lD(n,e,t={}){return t.useHash?new xe(n,e):new Ye(n,e)}function yE(n){return"guarded"}function c_(n){return[{provide:f.deG,multi:!0,useValue:n},{provide:ke,multi:!0,useValue:n}]}let Gd=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Mn.x}appInitializer(){return this.injector.get($,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(p=>r=p),u=this.injector.get(Cr),c=this.injector.get(zu);return"disabled"===c.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?st(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(zu),i=this.injector.get(fE),u=this.injector.get(l_),c=this.injector.get(Cr),p=this.injector.get(f.z2F);t===p.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&c.initialNavigation(),i.setUpPreloading(),u.init(),c.resetRootComponentType(p.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.zs3))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function tm(n){return n.appInitializer.bind(n)}function EE(n){return n.bootstrapListener.bind(n)}const nm=new f.OlP("Router Initializer");let bE=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n}),n})(),Ku=(()=>{class n extends bE{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();const pa=new f.OlP("NgValueAccessor"),f_={provide:pa,useExisting:(0,f.Gpc)(()=>Df),multi:!0},fS=new f.OlP("CompositionEventMode");let Df=(()=>{class n extends bE{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function DE(){const n=P()?P().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(fS,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[f._Bn([f_]),f.qOj]}),n})();function Zu(n){return null==n||0===n.length}function p_(n){return null!=n&&"number"==typeof n.length}const gi=new f.OlP("NgValidators"),Yu=new f.OlP("NgAsyncValidators"),ko=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class rm{static min(e){return function g_(n){return e=>{if(Zu(e.value)||Zu(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function CE(n){return e=>{if(Zu(e.value)||Zu(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function TE(n){return Zu(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function AE(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function SE(n){return Zu(n.value)||ko.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function m_(n){return e=>Zu(e.value)||!p_(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function ME(n){return e=>p_(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function xE(n){if(!n)return im;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Zu(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return E_(e)}static composeAsync(e){return om(e)}}function im(n){return null}function Ft(n){return null!=n}function y_(n){const e=(0,f.QGY)(n)?(0,Cn.D)(n):n;return(0,f.CqO)(e),e}function __(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function v_(n,e){return e.map(t=>t(n))}function eo(n){return n.map(e=>function sm(n){return!n.validate}(e)?e:t=>e.validate(t))}function E_(n){if(!n)return null;const e=n.filter(Ft);return 0==e.length?null:function(t){return __(v_(t,e))}}function w_(n){return null!=n?E_(eo(n)):null}function om(n){if(!n)return null;const e=n.filter(Ft);return 0==e.length?null:function(t){return function bf(...n){const e=(0,ja.jO)(n),{args:t,keys:r}=Pn(n),i=new Xn.y(u=>{const{length:c}=t;if(!c)return void u.complete();const p=new Array(c);let _=c,I=c;for(let T=0;T<c;T++){let M=!1;(0,za.Xf)(t[T]).subscribe((0,br.x)(u,L=>{M||(M=!0,I--),p[T]=L},()=>_--,void 0,()=>{(!_||!M)&&(I||u.next(r?$a(r,p):p),u.complete())}))}});return e?i.pipe(Kl(e)):i}(v_(t,e).map(y_)).pipe((0,Ot.U)(__))}}function Fo(n){return null!=n?om(eo(n)):null}function am(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function I_(n){return n._rawValidators}function um(n){return n._rawAsyncValidators}function NE(n){return n?Array.isArray(n)?n:[n]:[]}function Cf(n,e){return Array.isArray(n)?n.includes(e):n===e}function dD(n,e){const t=NE(e);return NE(n).forEach(i=>{Cf(t,i)||t.push(i)}),t}function Tf(n,e){return NE(e).filter(t=>!Cf(n,t))}class Af{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=w_(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Fo(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class ga extends Af{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class ni extends Af{get formDirective(){return null}get path(){return null}}class lm{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}let RE=(()=>{class n extends lm{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ga,2))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[f.qOj]}),n})(),OE=(()=>{class n extends lm{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(ni,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[f.qOj]}),n})();function cm(n,e){S_(n,e),e.valueAccessor.writeValue(n.value),function M_(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&dm(n,e)})}(n,e),function gD(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function kE(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&dm(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function A_(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function T_(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Mf(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function Lo(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function S_(n,e){const t=I_(n);null!==e.validator?n.setValidators(am(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=um(n);null!==e.asyncValidator?n.setAsyncValidators(am(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();Lo(e._rawValidators,i),Lo(e._rawAsyncValidators,i)}function Mf(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=I_(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(c=>c!==e.validator);u.length!==i.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const i=um(n);if(Array.isArray(i)&&i.length>0){const u=i.filter(c=>c!==e.asyncValidator);u.length!==i.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return Lo(e._rawValidators,r),Lo(e._rawAsyncValidators,r),t}function dm(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function xf(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const ma="VALID",hm="INVALID",dc="PENDING",zd="DISABLED";function Rf(n){return(Of(n)?n.validators:n)||null}function O_(n){return Array.isArray(n)?w_(n):n||null}function Wd(n,e){return(Of(e)?e.asyncValidators:n)||null}function VE(n){return Array.isArray(n)?Fo(n):n||null}function Of(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const UE=n=>n instanceof Ni,Pf=n=>n instanceof fm,P_=n=>n instanceof HE;function BE(n){return UE(n)?n.value:n.getRawValue()}function k_(n,e){const t=Pf(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new f.vHH(1e3,"");if(!r[e])throw new f.vHH(1001,"")}function jE(n,e){Pf(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new f.vHH(1002,"")})}class F_{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=O_(this._rawValidators),this._composedAsyncValidatorFn=VE(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===ma}get invalid(){return this.status===hm}get pending(){return this.status==dc}get disabled(){return this.status===zd}get enabled(){return this.status!==zd}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=O_(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=VE(e)}addValidators(e){this.setValidators(dD(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(dD(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Tf(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Tf(e,this._rawAsyncValidators))}hasValidator(e){return Cf(this._rawValidators,e)}hasAsyncValidator(e){return Cf(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=dc,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=zd,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=ma,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ma||this.status===dc)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?zd:ma}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=dc,this._hasOwnPendingAsyncValidator=!0;const t=y_(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function R_(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=Pf(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:P_(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?zd:this.errors?hm:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(dc)?dc:this._anyControlsHaveStatus(hm)?hm:ma}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Of(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Ni extends F_{constructor(e=null,t,r){super(Rf(t),Wd(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Of(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){xf(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){xf(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class fm extends F_{constructor(e,t,r){super(Rf(t),Wd(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){jE(this,e),Object.keys(e).forEach(r=>{k_(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=BE(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,u)=>{r=t(r,i,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class HE extends F_{constructor(e,t,r){super(Rf(t),Wd(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){jE(this,e),e.forEach((r,i)=>{k_(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>BE(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}let WE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const wD={provide:pa,useExisting:(0,f.Gpc)(()=>mm),multi:!0};let mm=(()=>{class n extends Ku{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},features:[f._Bn([wD]),f.qOj]}),n})(),Vo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const ym=new f.OlP("NgModelWithFormControlWarning"),CD={provide:ni,useExisting:(0,f.Gpc)(()=>Kd)};let Kd=(()=>{class n extends ni{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new f.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Mf(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return cm(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){T_(t.control||null,t,!1),xf(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function qd(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(T_(r||null,t),UE(i)&&(cm(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function nu(n,e){S_(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function FE(n,e){return Mf(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){S_(this.form,this),this._oldForm&&Mf(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(gi,10),f.Y36(Yu,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&f.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([CD]),f.qOj,f.TTD]}),n})();const B_={provide:ga,useExisting:(0,f.Gpc)(()=>Ff)};let Ff=(()=>{class n extends ga{constructor(t,r,i,u,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new f.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function Qu(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(u=>{u.constructor===Df?t=u:function yD(n){return Object.getPrototypeOf(n.constructor)===Ku}(u)?r=u:i=u}),i||r||t||null}(0,u)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function N_(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function C_(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(f.Y36(ni,13),f.Y36(gi,10),f.Y36(Yu,10),f.Y36(pa,10),f.Y36(ym,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[f._Bn([B_]),f.qOj,f.TTD]}),n})(),Zd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[Vo]]}),n})(),ow=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:ym,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[Zd]}),n})(),kD=(()=>{class n{group(t,r=null){const i=this._reduceControls(t);let p,u=null,c=null;return null!=r&&(function PD(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(u=null!=r.validators?r.validators:null,c=null!=r.asyncValidators?r.asyncValidators:null,p=null!=r.updateOn?r.updateOn:void 0):(u=null!=r.validator?r.validator:null,c=null!=r.asyncValidator?r.asyncValidator:null)),new fm(i,{asyncValidators:c,updateOn:p,validators:u})}control(t,r,i){return new Ni(t,r,i)}array(t,r,i){const u=t.map(c=>this._createControl(c));return new HE(u,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return UE(t)||Pf(t)||P_(t)?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:ow}),n})();var G_=O(4986),Kr=O(5813);function bm(){return(0,sr.e)((n,e)=>{let t,r=!1;n.subscribe((0,br.x)(e,i=>{const u=t;t=i,r&&e.next([u,i]),r=!0}))})}function uw(n,e){return n===e}var ht,Uo=O(2011),FD=(O(1277),O(3942)),Ee=O(5861),Ju=O(9681),q_=O(4859),iu=O(1877),cn=O(2090),LD="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Xu={},jf=jf||{},Lt=LD||self;function Hf(){}function $f(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Dm(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var lw="closure_uid_"+(1e9*Math.random()>>>0),PS=0;function cw(n,e,t){return n.call.apply(n.bind,arguments)}function dw(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function ri(n,e,t){return(ri=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?cw:dw).apply(null,arguments)}function Cm(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function mi(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,u){for(var c=Array(arguments.length-2),p=2;p<arguments.length;p++)c[p-2]=arguments[p];return e.prototype[i].apply(r,c)}}function su(){this.s=this.s,this.o=this.o}su.prototype.s=!1,su.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function Bo(n){Object.prototype.hasOwnProperty.call(n,lw)&&n[lw]||(n[lw]=++PS)}(this)},su.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const hw=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Gf(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function fw(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if($f(r)){const i=n.length||0,u=r.length||0;n.length=i+u;for(let c=0;c<u;c++)n[i+c]=r[c]}else n.push(r)}}function yi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}yi.prototype.h=function(){this.defaultPrevented=!0};var VD=function(){if(!Lt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Lt.addEventListener("test",Hf,e),Lt.removeEventListener("test",Hf,e)}catch(t){}return n}();function Tm(n){return/^[\s\xa0]*$/.test(n)}var pw=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function W_(n,e){return n<e?-1:n>e?1:0}function pc(){var n=Lt.navigator;return n&&(n=n.userAgent)?n:""}function Ri(n){return-1!=pc().indexOf(n)}function K_(n){return K_[" "](n),n}K_[" "]=Hf;var gc,n,UD=Ri("Opera"),Yd=Ri("Trident")||Ri("MSIE"),Am=Ri("Edge"),to=Am||Yd,Qd=Ri("Gecko")&&!(-1!=pc().toLowerCase().indexOf("webkit")&&!Ri("Edge"))&&!(Ri("Trident")||Ri("MSIE"))&&!Ri("Edge"),_i=-1!=pc().toLowerCase().indexOf("webkit")&&!Ri("Edge");function el(){var n=Lt.document;return n?n.documentMode:void 0}e:{var is="",zf=(n=pc(),Qd?/rv:([^\);]+)(\)|;)/.exec(n):Am?/Edge\/([\d\.]+)/.exec(n):Yd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):_i?/WebKit\/(\S+)/.exec(n):UD?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(zf&&(is=zf?zf[1]:""),Yd){var tl=el();if(null!=tl&&tl>parseFloat(is)){gc=String(tl);break e}}gc=is}var Jd={};var eh=Lt.document&&Yd&&(el()||parseInt(gc,10))||void 0;function _a(n,e){if(yi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Qd){e:{try{K_(e.nodeName);var i=!0;break e}catch(u){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:th[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&_a.X.h.call(this)}}mi(_a,yi);var th={2:"touch",3:"pen",4:"mouse"};_a.prototype.h=function(){_a.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var va="closure_listenable_"+(1e6*Math.random()|0),gw=0;function mw(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++gw,this.ba=this.ea=!1}function Wf(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Sm(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Z_(n){const e={};for(const t in n)e[t]=n[t];return e}const Y_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Q_(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let u=0;u<Y_.length;u++)t=Y_[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Kf(n){this.src=n,this.g={},this.h=0}function Mm(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],i=hw(r,e);(u=0<=i)&&Array.prototype.splice.call(r,i,1),u&&(Wf(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function J_(n,e,t,r){for(var i=0;i<n.length;++i){var u=n[i];if(!u.ba&&u.listener==e&&u.capture==!!t&&u.ha==r)return i}return-1}Kf.prototype.add=function(n,e,t,r,i){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=J_(n,e,r,i);return-1<c?(e=n[c],t||(e.ea=!1)):((e=new mw(e,this.src,u,!!r,i)).ea=t,n.push(e)),e};var xm="closure_lm_"+(1e6*Math.random()|0),X_={};function yw(n,e,t,r,i){if(r&&r.once)return _w(n,e,t,r,i);if(Array.isArray(e)){for(var u=0;u<e.length;u++)yw(n,e[u],t,r,i);return null}return t=sv(t),n&&n[va]?n.N(e,t,Dm(r)?!!r.capture:!!r,i):ev(n,e,t,!1,r,i)}function ev(n,e,t,r,i,u){if(!e)throw Error("Invalid event type");var c=Dm(i)?!!i.capture:!!i,p=iv(n);if(p||(n[xm]=p=new Kf(n)),(t=p.add(e,t,r,c,u)).proxy)return t;if(r=function BD(){const e=jD;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)VD||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(rv(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function _w(n,e,t,r,i){if(Array.isArray(e)){for(var u=0;u<e.length;u++)_w(n,e[u],t,r,i);return null}return t=sv(t),n&&n[va]?n.O(e,t,Dm(r)?!!r.capture:!!r,i):ev(n,e,t,!0,r,i)}function tv(n,e,t,r,i){if(Array.isArray(e))for(var u=0;u<e.length;u++)tv(n,e[u],t,r,i);else r=Dm(r)?!!r.capture:!!r,t=sv(t),n&&n[va]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=J_(u=n.g[e],t,r,i))&&(Wf(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=iv(n))&&(e=n.g[e.toString()],n=-1,e&&(n=J_(e,t,r,i)),(t=-1<n?e[n]:null)&&nv(t))}function nv(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[va])Mm(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(rv(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=iv(e))?(Mm(t,n),0==t.h&&(t.src=null,e[xm]=null)):Wf(n)}}}function rv(n){return n in X_?X_[n]:X_[n]="on"+n}function jD(n,e){if(n.ba)n=!0;else{e=new _a(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&nv(n),n=t.call(r,e)}return n}function iv(n){return(n=n[xm])instanceof Kf?n:null}var vw="__closure_events_fn_"+(1e9*Math.random()>>>0);function sv(n){return"function"==typeof n?n:(n[vw]||(n[vw]=function(e){return n.handleEvent(e)}),n[vw])}function mr(){su.call(this),this.i=new Kf(this),this.P=this,this.I=null}function Tr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new yi(e,n);else if(e instanceof yi)e.target=e.target||n;else{var i=e;Q_(e=new yi(r,n),i)}if(i=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];i=Nm(c,r,!0,e)&&i}if(i=Nm(c=e.g=n,r,!0,e)&&i,i=Nm(c,r,!1,e)&&i,t)for(u=0;u<t.length;u++)i=Nm(c=e.g=t[u],r,!1,e)&&i}function Nm(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.ba&&c.capture==t){var p=c.listener,_=c.ha||c.src;c.ea&&Mm(n.i,c),i=!1!==p.call(_,r)&&i}}return i&&!r.defaultPrevented}mi(mr,su),mr.prototype[va]=!0,mr.prototype.removeEventListener=function(n,e,t,r){tv(this,n,e,t,r)},mr.prototype.M=function(){if(mr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Wf(t[r]);delete n.g[e],n.h--}}this.I=null},mr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},mr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Ew=Lt.JSON.stringify;function kS(){var n=Dw;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var rl,ww=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Iw,n=>n.reset());class Iw{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function LS(n){Lt.setTimeout(()=>{throw n},0)}function bw(n,e){rl||function HD(){var n=Lt.Promise.resolve(void 0);rl=function(){n.then(Cw)}}(),Rm||(rl(),Rm=!0),Dw.add(n,e)}var Rm=!1,Dw=new class FS{constructor(){this.h=this.g=null}add(e,t){const r=ww.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Cw(){for(var n;n=kS();){try{n.h.call(n.g)}catch(t){LS(t)}var e=ww;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Rm=!1}function yc(n,e){mr.call(this),this.h=n||1,this.g=e||Lt,this.j=ri(this.lb,this),this.l=Date.now()}function ov(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function Om(n,e,t){if("function"==typeof n)t&&(n=ri(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ri(n.handleEvent,n)}return 2147483647<Number(e)?-1:Lt.setTimeout(n,e||0)}function Tw(n){n.g=Om(()=>{n.g=null,n.i&&(n.i=!1,Tw(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}mi(yc,mr),(ht=yc.prototype).ca=!1,ht.R=null,ht.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Tr(this,"tick"),this.ca&&(ov(this),this.start()))}},ht.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ht.M=function(){yc.X.M.call(this),ov(this),delete this.g};class $D extends su{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Tw(this)}M(){super.M(),this.g&&(Lt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zf(n){su.call(this),this.h=n,this.g={}}mi(Zf,su);var Aw=[];function Sw(n,e,t,r){Array.isArray(t)||(t&&(Aw[0]=t.toString()),t=Aw);for(var i=0;i<t.length;i++){var u=yw(e,t[i],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function av(n){Sm(n.g,function(e,t){this.g.hasOwnProperty(t)&&nv(e)},n),n.g={}}function Pm(){this.g=!0}function il(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function uv(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var u=i[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<i.length;c++)i[c]=""}}}return Ew(t)}catch(p){return e}}(n,t)+(r?" "+r:"")})}Zf.prototype.M=function(){Zf.X.M.call(this),av(this)},Zf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Pm.prototype.Aa=function(){this.g=!1},Pm.prototype.info=function(){};var _c={},GD=null;function sl(){return GD=GD||new mr}function lv(n){yi.call(this,_c.Pa,n)}function vc(n){const e=sl();Tr(e,new lv(e))}function km(n,e){yi.call(this,_c.STAT_EVENT,n),this.stat=e}function Oi(n){const e=sl();Tr(e,new km(e,n))}function Yf(n,e){yi.call(this,_c.Qa,n),this.size=e}function ol(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Lt.setTimeout(function(){n()},e)}_c.Pa="serverreachability",mi(lv,yi),_c.STAT_EVENT="statevent",mi(km,yi),_c.Qa="timingevent",mi(Yf,yi);var nh={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},qD={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function cv(){}function Jf(){}cv.prototype.h=null;var Lm,rh={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Fm(){yi.call(this,"d")}function Xf(){yi.call(this,"c")}function ep(){}function Ec(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Zf(this),this.O=zD,this.T=new yc(n=to?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new dv}function dv(){this.i=null,this.g="",this.h=!1}mi(Fm,yi),mi(Xf,yi),mi(ep,cv),ep.prototype.g=function(){return new XMLHttpRequest},ep.prototype.i=function(){return{}},Lm=new ep;var zD=45e3,Vm={},tp={};function np(n,e,t){n.K=1,n.v=Hm(ou(e)),n.s=t,n.P=!0,hv(n,null)}function hv(n,e){n.F=Date.now(),ih(n),n.A=ou(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),$m(t.i,"t",r),n.C=0,t=n.l.H,n.h=new dv,n.g=Ov(n.l,t?e:null,!n.s),0<n.N&&(n.L=new $D(ri(n.La,n,n.g),n.N)),Sw(n.S,n.g,"readystatechange",n.ib),e=n.H?Z_(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),vc(),function Mw(n,e,t,r,i,u){n.info(function(){if(n.g)if(u)for(var c="",p=u.split("&"),_=0;_<p.length;_++){var I=p[_].split("=");if(1<I.length){var T=I[0];I=I[1];var M=T.split("_");c=2<=M.length&&"type"==M[1]?c+(T+"=")+I+"&":c+(T+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.U,n.s)}function Nw(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function Rw(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=WD(n,t),i==tp){4==e&&(n.o=4,Oi(14),r=!1),il(n.j,n.m,null,"[Incomplete Response]");break}if(i==Vm){n.o=4,Oi(15),il(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}il(n.j,n.m,i,null),Bm(n,i)}Nw(n)&&i!=tp&&i!=Vm&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Oi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Sv(e),e.K=!0,Oi(11))):(il(n.j,n.m,t,"[Invalid Chunked Response]"),al(n),sh(n))}function WD(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?tp:(t=Number(e.substring(t,r)),isNaN(t)?Vm:(r+=1)+t>e.length?tp:(e=e.substr(r,t),n.C=r+t,e))}function ih(n){n.V=Date.now()+n.O,Um(n,n.O)}function Um(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=ol(ri(n.gb,n),e)}function rp(n){n.B&&(Lt.clearTimeout(n.B),n.B=null)}function sh(n){0==n.l.G||n.I||Mv(n.l,n)}function al(n){rp(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,ov(n.T),av(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Bm(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Gm(t.h,n)))if(!n.J&&Gm(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch(I){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=ol(ri(t.cb,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Xm(t),Qm(t)}Av(t),Oi(18)}if(1>=ro(t.h)&&t.ja){try{t.ja()}catch(I){}t.ja=void 0}}else dl(t,11)}else if((n.J||t.g==n)&&Xm(t),!Tm(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let I=i[e];if(t.T=I[0],I=I[1],2==t.G)if("c"==I[0]){t.I=I[1],t.ka=I[2];const T=I[3];null!=T&&(t.ma=T,t.j.info("VER="+t.ma));const M=I[4];null!=M&&(t.Ca=M,t.j.info("SVER="+t.Ca));const L=I[5];null!=L&&"number"==typeof L&&0<L&&(t.J=r=1.5*L,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const U=n.g;if(U){const z=U.g?U.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(z){var u=r.h;u.g||-1==z.indexOf("spdy")&&-1==z.indexOf("quic")&&-1==z.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(qm(u,u.h),u.h=null))}if(r.D){const de=U.g?U.g.getResponseHeader("X-HTTP-Session-Id"):null;de&&(r.za=de,xn(r.F,r.D,de))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var c=n;if((r=t).sa=Rv(r,r.H?r.ka:null,r.V),c.J){Fw(r.h,c);var p=c,_=r.J;_&&p.setTimeout(_),p.B&&(rp(p),ih(p)),r.g=c}else Ww(r);0<t.i.length&&Jm(t)}else"stop"!=I[0]&&"close"!=I[0]||dl(t,7);else 3==t.G&&("stop"==I[0]||"close"==I[0]?"stop"==I[0]?dl(t,7):Tv(t):"noop"!=I[0]&&t.l&&t.l.wa(I),t.A=0)}vc()}catch(I){}}function fv(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if($f(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Pw(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if("undefined"!=typeof Map&&n instanceof Map)return Array.from(n.keys());if(!("undefined"!=typeof Set&&n instanceof Set)){if($f(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function Ow(n){if(n.W&&"function"==typeof n.W)return n.W();if("undefined"!=typeof Map&&n instanceof Map||"undefined"!=typeof Set&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if($f(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,u=0;u<i;u++)e.call(void 0,r[u],t&&t[u],n)}(ht=Ec.prototype).setTimeout=function(n){this.O=n},ht.ib=function(n){n=n.target;const e=this.L;e&&3==Ia(n)?e.l():this.La(n)},ht.La=function(n){try{if(n==this.g)e:{const T=Ia(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>T)&&(3!=T||to||this.g&&(this.h.h||this.g.fa()||jw(this.g)))){this.I||4!=T||7==e||vc(),rp(this);var t=this.g.aa();this.Y=t;t:if(Nw(this)){var r=jw(this.g);n="";var i=r.length,u=4==Ia(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){al(this),sh(this);var c="";break t}this.h.i=new Lt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.fa();if(this.i=200==t,function xw(n,e,t,r,i,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.U,T,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var p,_=this.g;if((p=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Tm(p)){var I=p;break t}}I=null}if(!(t=I)){this.i=!1,this.o=3,Oi(12),al(this),sh(this);break e}il(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Bm(this,t)}this.P?(Rw(this,T,c),to&&this.i&&3==T&&(Sw(this.S,this.T,"tick",this.hb),this.T.start())):(il(this.j,this.m,c,null),Bm(this,c)),4==T&&al(this),this.i&&!this.I&&(4==T?Mv(this.l,this):(this.i=!1,ih(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Oi(12)):(this.o=0,Oi(13)),al(this),sh(this)}}}catch(T){}},ht.hb=function(){if(this.g){var n=Ia(this.g),e=this.g.fa();this.C<e.length&&(rp(this),Rw(this,n,e),this.i&&4!=n&&ih(this))}},ht.cancel=function(){this.I=!0,al(this)},ht.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function VS(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(vc(),Oi(17)),al(this),this.o=2,sh(this)):Um(this,this.V-n)};var pv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wc(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof wc){this.h=void 0!==e?e:n.h,ip(this,n.j),this.s=n.s,this.g=n.g,jm(this,n.m),this.l=n.l,e=n.i;var t=new uh;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),yr(this,t),this.o=n.o}else n&&(t=String(n).match(pv))?(this.h=!!e,ip(this,t[1]||"",!0),this.s=sp(t[2]||""),this.g=sp(t[3]||"",!0),jm(this,t[4]),this.l=sp(t[5]||"",!0),yr(this,t[6]||"",!0),this.o=sp(t[7]||"")):(this.h=!!e,this.i=new uh(null,this.h))}function ou(n){return new wc(n)}function ip(n,e,t){n.j=t?sp(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function jm(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function yr(n,e,t){e instanceof uh?(n.i=e,function Ea(n,e){e&&!n.j&&(ul(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(mv(this,r),$m(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=oh(e,ZD)),n.i=new uh(e,n.h))}function xn(n,e,t){n.i.set(e,t)}function Hm(n){return xn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function sp(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function oh(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,KD),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function KD(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}wc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(oh(e,gv,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(oh(e,gv,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(oh(t,"/"==t.charAt(0)?ah:kw,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",oh(t,YD)),n.join("")};var gv=/[#\/\?@]/g,kw=/[#\?:]/g,ah=/[#\?]/g,ZD=/[#\?@]/g,YD=/#/g;function uh(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function ul(n){n.g||(n.g=new Map,n.h=0,n.i&&function US(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var u=n[t].substring(0,r);i=n[t].substring(r+1)}else u=n[t];e(u,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function mv(n,e){ul(n),e=ll(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function QD(n,e){return ul(n),e=ll(n,e),n.g.has(e)}function $m(n,e,t){mv(n,e),0<t.length&&(n.i=null,n.g.set(ll(n,e),Gf(t)),n.h+=t.length)}function ll(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function yv(n){this.l=n||wa,n=Lt.PerformanceNavigationTiming?0<(n=Lt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Lt.g&&Lt.g.Ga&&Lt.g.Ga()&&Lt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ht=uh.prototype).add=function(n,e){ul(this),this.i=null,n=ll(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ht.forEach=function(n,e){ul(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},ht.oa=function(){ul(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let u=0;u<i.length;u++)t.push(e[r])}return t},ht.W=function(n){ul(this);let e=[];if("string"==typeof n)QD(this,n)&&(e=e.concat(this.g.get(ll(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},ht.set=function(n,e){return ul(this),this.i=null,QD(this,n=ll(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ht.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},ht.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),c=this.W(r);for(r=0;r<c.length;r++){var i=u;""!==c[r]&&(i+="="+encodeURIComponent(String(c[r]))),n.push(i)}}return this.i=n.join("&")};var wa=10;function no(n){return!!n.h||!!n.g&&n.g.size>=n.j}function ro(n){return n.h?1:n.g?n.g.size:0}function Gm(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function qm(n,e){n.g?n.g.add(e):n.h=e}function Fw(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Lw(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Gf(n.i)}function _v(){}function XD(){this.g=new _v}function vv(n,e,t){const r=t||"";try{fv(n,function(i,u){let c=i;Dm(i)&&(c=Ew(i)),e.push(r+u+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function zm(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(u){}}function lh(n){this.l=n.ac||null,this.j=n.jb||!1}function Wm(n,e){mr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Km,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}yv.prototype.cancel=function(){if(this.i=Lw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},_v.prototype.stringify=function(n){return Lt.JSON.stringify(n,void 0)},_v.prototype.parse=function(n){return Lt.JSON.parse(n,void 0)},mi(lh,cv),lh.prototype.g=function(){return new Wm(this.l,this.j)},lh.prototype.i=function(n){return function(){return n}}({}),mi(Wm,mr);var Km=0;function Ev(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function cl(n){n.readyState=4,n.l=null,n.j=null,n.A=null,ap(n)}function ap(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ht=Wm.prototype).open=function(n,e){if(this.readyState!=Km)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,ap(this)},ht.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Lt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},ht.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,cl(this)),this.readyState=Km},ht.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,ap(this)),this.g&&(this.readyState=3,ap(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(void 0!==Lt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ev(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},ht.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?cl(this):ap(this),3==this.readyState&&Ev(this)}},ht.Va=function(n){this.g&&(this.response=this.responseText=n,cl(this))},ht.Ua=function(n){this.g&&(this.response=n,cl(this))},ht.ga=function(){this.g&&cl(this)},ht.setRequestHeader=function(n,e){this.v.append(n,e)},ht.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ht.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Wm.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Vw=Lt.JSON.parse;function qn(n){mr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Zm,this.K=this.L=!1}mi(qn,mr);var Zm="",Ym=/^https?$/i,Uw=["POST","PUT"];function wv(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Iv(n),up(n)}function Iv(n){n.D||(n.D=!0,Tr(n,"complete"),Tr(n,"error"))}function bv(n){if(n.h&&void 0!==jf&&(!n.C[1]||4!=Ia(n)||2!=n.aa()))if(n.v&&4==Ia(n))Om(n.Ha,0,n);else if(Tr(n,"readystatechange"),4==Ia(n)){n.h=!1;try{const p=n.aa();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===p){var i=String(n.H).match(pv)[1]||null;if(!i&&Lt.self&&Lt.self.location){var u=Lt.self.location.protocol;i=u.substr(0,u.length-1)}r=!Ym.test(i?i.toLowerCase():"")}t=r}if(t)Tr(n,"complete"),Tr(n,"success");else{n.m=6;try{var c=2<Ia(n)?n.g.statusText:""}catch(_){c=""}n.j=c+" ["+n.aa()+"]",Iv(n)}}finally{up(n)}}}function up(n,e){if(n.g){Dv(n);const t=n.g,r=n.C[0]?Hf:null;n.g=null,n.C=null,e||Tr(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function Dv(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Lt.clearTimeout(n.A),n.A=null)}function Ia(n){return n.g?n.g.readyState:0}function jw(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Zm:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Hw(n){let e="";return Sm(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Cv(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=Hw(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):xn(n,e,t))}function lp(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function $w(n){this.Ca=0,this.i=[],this.j=new Pm,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=lp("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=lp("baseRetryDelayMs",5e3,n),this.bb=lp("retryDelaySeedMs",1e4,n),this.$a=lp("forwardChannelMaxRetries",2,n),this.ta=lp("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new yv(n&&n.concurrentRequestLimit),this.Fa=new XD,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Tv(n){if(Gw(n),3==n.G){var e=n.U++,t=ou(n.F);xn(t,"SID",n.I),xn(t,"RID",e),xn(t,"TYPE","terminate"),cp(n,t),(e=new Ec(n,n.j,e,void 0)).K=2,e.v=Hm(ou(t)),t=!1,Lt.navigator&&Lt.navigator.sendBeacon&&(t=Lt.navigator.sendBeacon(e.v.toString(),"")),!t&&Lt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Ov(e.l,null),e.g.da(e.v)),e.F=Date.now(),ih(e)}Nv(n)}function Qm(n){n.g&&(Sv(n),n.g.cancel(),n.g=null)}function Gw(n){Qm(n),n.u&&(Lt.clearTimeout(n.u),n.u=null),Xm(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Lt.clearTimeout(n.m),n.m=null)}function Jm(n){no(n.h)||n.m||(n.m=!0,bw(n.Ja,n),n.C=0)}function qw(n,e){var t;t=e?e.m:n.U++;const r=ou(n.F);xn(r,"SID",n.I),xn(r,"RID",t),xn(r,"AID",n.T),cp(n,r),n.o&&n.s&&Cv(r,n.o,n.s),t=new Ec(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=zw(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),qm(n.h,t),np(t,r,e)}function cp(n,e){n.ia&&Sm(n.ia,function(t,r){xn(e,r,t)}),n.l&&fv({},function(t,r){xn(e,r,t)})}function zw(n,e,t){t=Math.min(n.i.length,t);var r=n.l?ri(n.l.Ra,n.l,n):null;e:{var i=n.i;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=i[0].h,c.push("ofs="+u)):u=0:c.push("ofs="+u);let p=!0;for(let _=0;_<t;_++){let I=i[_].h;const T=i[_].g;if(I-=u,0>I)u=Math.max(0,i[_].h-100),p=!1;else try{vv(T,c,"req"+I+"_")}catch(M){r&&r(T)}}if(p){r=c.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function Ww(n){n.g||n.u||(n.Z=1,bw(n.Ia,n),n.A=0)}function Av(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=ol(ri(n.Ia,n),xv(n,n.A)),n.A++,0))}function Sv(n){null!=n.B&&(Lt.clearTimeout(n.B),n.B=null)}function Kw(n){n.g=new Ec(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=ou(n.sa);xn(e,"RID","rpc"),xn(e,"SID",n.I),xn(e,"CI",n.L?"0":"1"),xn(e,"AID",n.T),xn(e,"TYPE","xmlhttp"),cp(n,e),n.o&&n.s&&Cv(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=Hm(ou(e)),t.s=null,t.P=!0,hv(t,n)}function Xm(n){null!=n.v&&(Lt.clearTimeout(n.v),n.v=null)}function Mv(n,e){var t=null;if(n.g==e){Xm(n),Sv(n),n.g=null;var r=2}else{if(!Gm(n.h,e))return;t=e.D,Fw(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Tr(r=sl(),new Yf(r,t)),Jm(n)}else Ww(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function eC(n,e){return!(ro(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=ol(ri(n.Ja,n,e),xv(n,n.C)),n.C++,0)))}(n,e)||2==r&&Av(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:dl(n,5);break;case 4:dl(n,10);break;case 3:dl(n,6);break;default:dl(n,2)}}function xv(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function dl(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=ri(n.kb,n);t||(t=new wc("//www.google.com/images/cleardot.gif"),Lt.location&&"http"==Lt.location.protocol||ip(t,"https"),Hm(t)),function op(n,e){const t=new Pm;if(Lt.Image){const r=new Image;r.onload=Cm(zm,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Cm(zm,t,r,"TestLoadImage: error",!1,e),r.onabort=Cm(zm,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Cm(zm,t,r,"TestLoadImage: timeout",!1,e),Lt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Oi(2);n.G=0,n.l&&n.l.va(e),Nv(n),Gw(n)}function Nv(n){if(n.G=0,n.la=[],n.l){const e=Lw(n.h);(0!=e.length||0!=n.i.length)&&(fw(n.la,e),fw(n.la,n.i),n.h.i.length=0,Gf(n.i),n.i.length=0),n.l.ua()}}function Rv(n,e,t){var r=t instanceof wc?ou(t):new wc(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),jm(r,r.m);else{var i=Lt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var u=new wc(null,void 0);r&&ip(u,r),e&&(u.g=e),i&&jm(u,i),t&&(u.l=t),r=u}return e=n.za,(t=n.D)&&e&&xn(r,t,e),xn(r,"VER",n.ma),cp(n,r),r}function Ov(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new qn(t&&n.Da&&!n.ra?new lh({jb:!0}):n.ra)).Ka(n.H),e}function Pv(){}function dp(){if(Yd&&!(10<=Number(eh)))throw Error("Environmental error: no available transport.")}function ss(n,e){mr.call(this),this.g=new $w(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!Tm(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Tm(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new io(this)}function kv(n){Fm.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function ey(){Xf.call(this),this.status=1}function io(n){this.g=n}(ht=qn.prototype).Ka=function(n){this.L=n},ht.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Lm.g(),this.C=function Qf(n){return n.h||(n.h=n.i())}(this.u?this.u:Lm),this.g.onreadystatechange=ri(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void wv(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),i=Lt.FormData&&n instanceof Lt.FormData,!(0<=hw(Uw,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,c]of t)this.g.setRequestHeader(u,c);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Dv(this),0<this.B&&((this.K=function Bw(n){return Yd&&function Xd(){return function qf(n){var e=Jd;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=pw(String(gc)).split("."),t=pw("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var i=e[c]||"",u=t[c]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==i[0].length&&0==u[0].length)break;n=W_(0==i[1].length?0:parseInt(i[1],10),0==u[1].length?0:parseInt(u[1],10))||W_(0==i[2].length,0==u[2].length)||W_(i[2],u[2]),i=i[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ri(this.qa,this)):this.A=Om(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){wv(this,u)}},ht.qa=function(){void 0!==jf&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Tr(this,"timeout"),this.abort(8))},ht.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Tr(this,"complete"),Tr(this,"abort"),up(this))},ht.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),up(this,!0)),qn.X.M.call(this)},ht.Ha=function(){this.s||(this.F||this.v||this.l?bv(this):this.fb())},ht.fb=function(){bv(this)},ht.aa=function(){try{return 2<Ia(this)?this.g.status:-1}catch(n){return-1}},ht.fa=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},ht.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Vw(e)}},ht.Ea=function(){return this.m},ht.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ht=$w.prototype).ma=8,ht.G=1,ht.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new Ec(this,this.j,n,void 0);let u=this.s;if(this.S&&(u?(u=Z_(u),Q_(u,this.S)):u=this.S),null!==this.o||this.N||(i.H=u,u=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=zw(this,i,e),xn(t=ou(this.F),"RID",n),xn(t,"CVER",22),this.D&&xn(t,"X-HTTP-Session-Id",this.D),cp(this,t),u&&(this.N?e="headers="+encodeURIComponent(String(Hw(u)))+"&"+e:this.o&&Cv(t,this.o,u)),qm(this.h,i),this.Ya&&xn(t,"TYPE","init"),this.O?(xn(t,"$req",e),xn(t,"SID","null"),i.Z=!0,np(i,t,null)):np(i,t,e),this.G=2}}else 3==this.G&&(n?qw(this,n):0==this.i.length||no(this.h)||qw(this))},ht.Ia=function(){if(this.u=null,Kw(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=ol(ri(this.eb,this),n)}},ht.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Oi(10),Qm(this),Kw(this))},ht.cb=function(){null!=this.v&&(this.v=null,Qm(this),Av(this),Oi(19))},ht.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Oi(2)):(this.j.info("Failed to ping google.com"),Oi(1))},(ht=Pv.prototype).xa=function(){},ht.wa=function(){},ht.va=function(){},ht.ua=function(){},ht.Ra=function(){},dp.prototype.g=function(n,e){return new ss(n,e)},mi(ss,mr),ss.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Oi(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=Rv(n,null,n.V),Jm(n)},ss.prototype.close=function(){Tv(this.g)},ss.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Ew(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&Jm(e)},ss.prototype.M=function(){this.g.l=null,delete this.j,Tv(this.g),delete this.g,ss.X.M.call(this)},mi(kv,Fm),mi(ey,Xf),mi(io,Pv),io.prototype.xa=function(){Tr(this.g,"a")},io.prototype.wa=function(n){Tr(this.g,new kv(n))},io.prototype.va=function(n){Tr(this.g,new ey)},io.prototype.ua=function(){Tr(this.g,"b")},dp.prototype.createWebChannel=dp.prototype.g,ss.prototype.send=ss.prototype.u,ss.prototype.open=ss.prototype.m,ss.prototype.close=ss.prototype.close,nh.NO_ERROR=0,nh.TIMEOUT=8,nh.HTTP_ERROR=6,qD.COMPLETE="complete",Jf.EventType=rh,rh.OPEN="a",rh.CLOSE="b",rh.ERROR="c",rh.MESSAGE="d",mr.prototype.listen=mr.prototype.N,qn.prototype.listenOnce=qn.prototype.O,qn.prototype.getLastError=qn.prototype.Oa,qn.prototype.getLastErrorCode=qn.prototype.Ea,qn.prototype.getStatus=qn.prototype.aa,qn.prototype.getResponseJson=qn.prototype.Sa,qn.prototype.getResponseText=qn.prototype.fa,qn.prototype.send=qn.prototype.da,qn.prototype.setWithCredentials=qn.prototype.Ka;var tC=Xu.createWebChannelTransport=function(){return new dp},nC=Xu.getStatEventTarget=function(){return sl()},hl=Xu.ErrorCode=nh,BS=Xu.EventType=qD,Fv=Xu.Event=_c,rC=Xu.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Zw=Xu.FetchXmlHttpFactory=lh,hp=Xu.WebChannel=Jf,jS=Xu.XhrIo=qn;const bt="@firebase/firestore";class Zr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Zr.UNAUTHENTICATED=new Zr(null),Zr.GOOGLE_CREDENTIALS=new Zr("google-credentials-uid"),Zr.FIRST_PARTY=new Zr("first-party-uid"),Zr.MOCK_USER=new Zr("mock-user");let ch="9.14.0";const fl=new iu.Yd("@firebase/firestore");function dh(){return fl.logLevel}function Re(n,...e){if(fl.logLevel<=iu.in.DEBUG){const t=e.map(Yw);fl.debug(`Firestore (${ch}): ${n}`,...t)}}function Fn(n,...e){if(fl.logLevel<=iu.in.ERROR){const t=e.map(Yw);fl.error(`Firestore (${ch}): ${n}`,...t)}}function _n(n,...e){if(fl.logLevel<=iu.in.WARN){const t=e.map(Yw);fl.warn(`Firestore (${ch}): ${n}`,...t)}}function Yw(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function et(n="Unexpected state"){const e=`FIRESTORE (${ch}) INTERNAL ASSERTION FAILED: `+n;throw Fn(e),new Error(e)}function St(n,e){n||et()}function Ge(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends cn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class _r{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Qw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class oC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Zr.UNAUTHENTICATED))}shutdown(){}}class aC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class fp{constructor(e){this.t=e,this.currentUser=Zr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const u=I=>this.i!==i?(i=this.i,t(I)):Promise.resolve();let c=new _r;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new _r,e.enqueueRetryable(()=>u(this.currentUser))};const p=()=>{const I=c;e.enqueueRetryable((0,Ee.Z)(function*(){yield I.promise,yield u(r.currentUser)}))},_=I=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=I,this.auth.addAuthTokenListener(this.o),p()};this.t.onInit(I=>_(I)),setTimeout(()=>{if(!this.auth){const I=this.t.getImmediate({optional:!0});I?_(I):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new _r)}},0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(St("string"==typeof r.accessToken),new Qw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return St(null===e||"string"==typeof e),new Zr(e)}}class uC{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=Zr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(St(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class lC{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new uC(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Zr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Jw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ty{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.A;return this.A=u.token,Re("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const i=u=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>i(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?i(u):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(St("string"==typeof t.token),this.A=t.token,new Jw(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Xw(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Lv{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Xw(40);for(let u=0;u<i.length;++u)r.length<20&&i[u]<t&&(r+=e.charAt(i[u]%e.length))}return r}}function Vt(n,e){return n<e?-1:n>e?1:0}function ba(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function hh(n){return n+"\0"}class Ln{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ne(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ne(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ne(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ln.fromMillis(Date.now())}static fromDate(e){return Ln.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Ln(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Vt(this.nanoseconds,e.nanoseconds):Vt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Mt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Mt(e)}static min(){return new Mt(new Ln(0,0))}static max(){return new Mt(new Ln(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class pp{constructor(e,t,r){void 0===t?t=0:t>e.length&&et(),void 0===r?r=e.length-t:r>e.length-t&&et(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===pp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof pp?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const u=e.get(i),c=t.get(i);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Jt extends pp{construct(e,t,r){return new Jt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ne(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Jt(t)}static emptyPath(){return new Jt([])}}const eI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zn extends pp{construct(e,t,r){return new zn(e,t,r)}static isValidIdentifier(e){return eI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new zn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const u=()=>{if(0===r.length)throw new Ne(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const p=e[i];if("\\"===p){if(i+1===e.length)throw new Ne(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Ne(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===p?(c=!c,i++):"."!==p||c?(r+=p,i++):(u(),i++)}if(u(),c)throw new Ne(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zn(t)}static emptyPath(){return new zn([])}}class $e{constructor(e){this.path=e}static fromPath(e){return new $e(Jt.fromString(e))}static fromName(e){return new $e(Jt.fromString(e).popFirst(5))}static empty(){return new $e(Jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Jt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Jt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $e(new Jt(e.slice()))}}class gp{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Vv(n){return n.fields.find(e=>2===e.kind)}function Ic(n){return n.fields.filter(e=>2!==e.kind)}gp.UNKNOWN_ID=-1;class Uv{constructor(e,t){this.fieldPath=e,this.kind=t}}class ny{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ny(0,Ds.min())}}function Bv(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Mt.fromTimestamp(1e9===r?new Ln(t+1,0):new Ln(t,r));return new Ds(i,$e.empty(),e)}function mp(n){return new Ds(n.readTime,n.key,-1)}class Ds{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ds(Mt.min(),$e.empty(),-1)}static max(){return new Ds(Mt.max(),$e.empty(),-1)}}function jv(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=$e.comparator(n.documentKey,e.documentKey),0!==t?t:Vt(n.largestBatchId,e.largestBatchId))}const Hv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fh{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function pl(n){return $v.apply(this,arguments)}function $v(){return $v=(0,Ee.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==Hv)throw n;Re("LocalStore","Unexpectedly lost primary lease")}),$v.apply(this,arguments)}class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&et(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re((r,i)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,i)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):re.reject(t)}static resolve(e){return new re((t,r)=>{t(e)})}static reject(e){return new re((t,r)=>{r(e)})}static waitFor(e){return new re((t,r)=>{let i=0,u=0,c=!1;e.forEach(p=>{++i,p.next(()=>{++u,c&&u===i&&t()},_=>r(_))}),c=!0,u===i&&t()})}static or(e){let t=re.resolve(!1);for(const r of e)t=t.next(i=>i?re.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,u)=>{r.push(t.call(this,i,u))}),this.waitFor(r)}static mapArray(e,t){return new re((r,i)=>{const u=e.length,c=new Array(u);let p=0;for(let _=0;_<u;_++){const I=_;t(e[I]).next(T=>{c[I]=T,++p,p===u&&r(c)},T=>i(T))}})}static doWhile(e,t){return new re((r,i)=>{const u=()=>{!0===e()?t().next(()=>{u()},i):r()};u()})}}class ry{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new _r,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new yp(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=qv(r.target.error);this.P.reject(new yp(e,i))}}static open(e,t,r,i){try{return new ry(t,e.transaction(i,r))}catch(u){throw new yp(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Re("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new ph(t)}}class jo{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===jo.D((0,cn.z$)())&&Fn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Re("SimpleDb","Removing database:",e),bc(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,cn.hl)())return!1;if(jo.N())return!0;const e=(0,cn.z$)(),t=jo.D(e),r=0<t&&t<10,i=jo.k(e),u=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,Ee.Z)(function*(){return t.db||(Re("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{i(new yp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const p=c.target.error;i("VersionError"===p.name?new Ne(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===p.name?new Ne(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+p):new yp(e,p))},u.onupgradeneeded=c=>{Re("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.S.$(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{Re("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var u=this;return(0,Ee.Z)(function*(){const c="readonly"===t;let p=0;for(;;){++p;try{u.db=yield u.F(e);const _=ry.open(u.db,e,c?"readonly":"readwrite",r),I=i(_).next(T=>(_.V(),T)).catch(T=>(_.abort(T),re.reject(T))).toPromise();return I.catch(()=>{}),yield _.v,I}catch(_){const I=_,T="FirebaseError"!==I.name&&p<3;if(Re("SimpleDb","Transaction failed with error:",I.message,"Retrying:",T),u.close(),!T)return Promise.reject(I)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class tI{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return bc(this.U.delete())}}class yp extends Ne{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function gl(n){return"IndexedDbTransactionError"===n.name}class ph{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Re("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Re("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),bc(r)}add(e){return Re("SimpleDb","ADD",this.store.name,e,e),bc(this.store.add(e))}get(e){return bc(this.store.get(e)).next(t=>(void 0===t&&(t=null),Re("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Re("SimpleDb","DELETE",this.store.name,e),bc(this.store.delete(e))}count(){return Re("SimpleDb","COUNT",this.store.name),bc(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),u=[];return this.H(i,(c,p)=>{u.push(p)}).next(()=>u)}{const i=this.store.getAll(r.range);return new re((u,c)=>{i.onerror=p=>{c(p.target.error)},i.onsuccess=p=>{u(p.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new re((i,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}Y(e,t){Re("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(u,c,p)=>p.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new re((r,i)=>{t.onerror=u=>{const c=qv(u.target.error);i(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(p=>{p?c.continue():r()}):r()}})}H(e,t){const r=[];return new re((i,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const p=c.target.result;if(!p)return void i();const _=new tI(p),I=t(p.primaryKey,p.value,_);if(I instanceof re){const T=I.catch(M=>(_.done(),re.reject(M)));r.push(T)}_.isDone?i():null===_.G?p.continue():p.continue(_.G)}}).next(()=>re.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function bc(n){return new re((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=qv(r.target.error);t(i)}})}let Gv=!1;function qv(n){const e=jo.D((0,cn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ne("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Gv||(Gv=!0,setTimeout(()=>{throw r},0)),r}}return n}class nI{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Re("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ee.Z)(function*(){t.task=null;try{Re("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){gl(r)?Re("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield pl(r)}yield t.nt(6e4)}))}}class dC{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,Ee.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,u=!0;return re.doWhile(()=>!0===u&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return Re("IndexBackiller",`Processing collection: ${c}`),this.rt(e,c,i).next(p=>{i-=p,r.add(c)});u=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(u=>{const c=u.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.ot(i,u)).next(p=>(Re("IndexBackiller",`Updating offset: ${p}`),this.localStore.indexManager.updateCollectionGroup(e,t,p))).next(()=>c.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,u)=>{const c=mp(u);jv(c,r)>0&&(r=c)}),new Ds(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Pi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function rI(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function au(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function iI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Pi.at=-1;class Wn{constructor(e,t){this.comparator=e,this.root=t||ii.EMPTY}insert(e,t){return new Wn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ii.BLACK,null,null))}remove(e){return new Wn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ii.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _p(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _p(this.root,e,this.comparator,!1)}getReverseIterator(){return new _p(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _p(this.root,e,this.comparator,!0)}}class _p{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&i&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ii{constructor(e,t,r,i,u){this.key=e,this.value=t,this.color=null!=r?r:ii.RED,this.left=null!=i?i:ii.EMPTY,this.right=null!=u?u:ii.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,u){return new ii(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const u=r(e,i.key);return i=u<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===u?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ii.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ii.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ii.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ii.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw et();const e=this.left.check();if(e!==this.right.check())throw et();return e+(this.isRed()?0:1)}}ii.EMPTY=null,ii.RED=!0,ii.BLACK=!1,ii.EMPTY=new class{constructor(){this.size=0}get key(){throw et()}get value(){throw et()}get color(){throw et()}get left(){throw et()}get right(){throw et()}copy(n,e,t,r,i){return this}insert(n,e,t){return new ii(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class vn{constructor(e){this.comparator=e,this.data=new Wn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new sI(this.data.getIterator())}getIteratorFrom(e){return new sI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof vn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(i,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new vn(this.comparator);return t.data=e,t}}class sI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ml(n){return n.hasNext()?n.getNext():void 0}class Cs{constructor(e){this.fields=e,e.sort(zn.comparator)}static empty(){return new Cs([])}unionWith(e){let t=new vn(zn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Cs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ba(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Ar{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Ar(t)}static fromUint8Array(e){const t=function(r){let i="";for(let u=0;u<r.length;++u)i+=String.fromCharCode(r[u]);return i}(e);return new Ar(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Vt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ar.EMPTY_BYTE_STRING=new Ar("");const hC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yl(n){if(St(!!n),"string"==typeof n){let e=0;const t=hC.exec(n);if(St(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:tr(n.seconds),nanos:tr(n.nanos)}}function tr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Dc(n){return"string"==typeof n?Ar.fromBase64String(n):Ar.fromUint8Array(n)}function zv(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function aI(n){const e=n.mapValue.fields.__previous_value__;return zv(e)?aI(e):e}function vp(n){const e=yl(n.mapValue.fields.__local_write_time__.timestampValue);return new Ln(e.seconds,e.nanos)}class uI{constructor(e,t,r,i,u,c,p,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=p,this.useFetchStreams=_}}class uu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new uu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof uu&&e.projectId===this.projectId&&e.database===this.database}}function Ep(n){return null==n}function wp(n){return 0===n&&1/n==-1/0}function Wv(n){return"number"==typeof n&&Number.isInteger(n)&&!wp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const _l={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},iy={nullValue:"NULL_VALUE"};function Cc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?zv(n)?4:fC(n)?9007199254740991:10:et()}function so(n,e){if(n===e)return!0;const t=Cc(n);if(t!==Cc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return vp(n).isEqual(vp(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const u=yl(r.timestampValue),c=yl(i.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Dc(n.bytesValue).isEqual(Dc(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return tr(r.geoPointValue.latitude)===tr(i.geoPointValue.latitude)&&tr(r.geoPointValue.longitude)===tr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return tr(r.integerValue)===tr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const u=tr(r.doubleValue),c=tr(i.doubleValue);return u===c?wp(u)===wp(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return ba(n.arrayValue.values||[],e.arrayValue.values||[],so);case 10:return function(r,i){const u=r.mapValue.fields||{},c=i.mapValue.fields||{};if(rI(u)!==rI(c))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(void 0===c[p]||!so(u[p],c[p])))return!1;return!0}(n,e);default:return et()}var i}function Tc(n,e){return void 0!==(n.values||[]).find(t=>so(t,e))}function lu(n,e){if(n===e)return 0;const t=Cc(n),r=Cc(e);if(t!==r)return Vt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Vt(n.booleanValue,e.booleanValue);case 2:return function(i,u){const c=tr(i.integerValue||i.doubleValue),p=tr(u.integerValue||u.doubleValue);return c<p?-1:c>p?1:c===p?0:isNaN(c)?isNaN(p)?0:-1:1}(n,e);case 3:return sy(n.timestampValue,e.timestampValue);case 4:return sy(vp(n),vp(e));case 5:return Vt(n.stringValue,e.stringValue);case 6:return function(i,u){const c=Dc(i),p=Dc(u);return c.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(i,u){const c=i.split("/"),p=u.split("/");for(let _=0;_<c.length&&_<p.length;_++){const I=Vt(c[_],p[_]);if(0!==I)return I}return Vt(c.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,u){const c=Vt(tr(i.latitude),tr(u.latitude));return 0!==c?c:Vt(tr(i.longitude),tr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,u){const c=i.values||[],p=u.values||[];for(let _=0;_<c.length&&_<p.length;++_){const I=lu(c[_],p[_]);if(I)return I}return Vt(c.length,p.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,u){if(i===_l.mapValue&&u===_l.mapValue)return 0;if(i===_l.mapValue)return 1;if(u===_l.mapValue)return-1;const c=i.fields||{},p=Object.keys(c),_=u.fields||{},I=Object.keys(_);p.sort(),I.sort();for(let T=0;T<p.length&&T<I.length;++T){const M=Vt(p[T],I[T]);if(0!==M)return M;const L=lu(c[p[T]],_[I[T]]);if(0!==L)return L}return Vt(p.length,I.length)}(n.mapValue,e.mapValue);default:throw et()}}function sy(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Vt(n,e);const t=yl(n),r=yl(e),i=Vt(t.seconds,r.seconds);return 0!==i?i:Vt(t.nanos,r.nanos)}function gh(n){return Kv(n)}function Kv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=yl(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Dc(n.bytesValue).toBase64():"referenceValue"in n?$e.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",u=!0;for(const c of r.values||[])u?u=!1:i+=",",i+=Kv(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const p of i)c?c=!1:u+=",",u+=`${p}:${Kv(r.fields[p])}`;return u+"}"}(n.mapValue):et();var e}function cu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Zv(n){return!!n&&"integerValue"in n}function mh(n){return!!n&&"arrayValue"in n}function lI(n){return!!n&&"nullValue"in n}function Yv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function oy(n){return!!n&&"mapValue"in n}function yh(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return au(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=yh(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=yh(n.arrayValue.values[t]);return e}return Object.assign({},n)}function fC(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function pC(n){return"nullValue"in n?iy:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?cu(uu.empty(),$e.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:et()}function ay(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?cu(uu.empty(),$e.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?_l:et()}function cI(n,e){const t=lu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Ac(n,e){const t=lu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class lr{constructor(e){this.value=e}static empty(){return new lr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!oy(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=yh(t)}setAll(e){let t=zn.emptyPath(),r={},i=[];e.forEach((c,p)=>{if(!t.isImmediateParentOf(p)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=p.popLast()}c?r[p.lastSegment()]=yh(c):i.push(p.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,i)}delete(e){const t=this.field(e.popLast());oy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return so(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];oy(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){au(t,(i,u)=>e[i]=u);for(const i of r)delete e[i]}clone(){return new lr(yh(this.value))}}function dI(n){const e=[];return au(n.fields,(t,r)=>{const i=new zn([t]);if(oy(r)){const u=dI(r.mapValue).fields;if(0===u.length)e.push(i);else for(const c of u)e.push(i.child(c))}else e.push(i)}),new Cs(e)}class Nn{constructor(e,t,r,i,u,c){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=u,this.documentState=c}static newInvalidDocument(e){return new Nn(e,0,Mt.min(),Mt.min(),lr.empty(),0)}static newFoundDocument(e,t,r){return new Nn(e,1,t,Mt.min(),r,0)}static newNoDocument(e,t){return new Nn(e,2,t,Mt.min(),lr.empty(),0)}static newUnknownDocument(e,t){return new Nn(e,3,t,Mt.min(),lr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=lr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=lr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Mt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class hI{constructor(e,t=null,r=[],i=[],u=null,c=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=u,this.startAt=c,this.endAt=p,this.ht=null}}function fI(n,e=null,t=[],r=[],i=null,u=null,c=null){return new hI(n,e,t,r,i,u,c)}function Sc(n){const e=Ge(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+gh(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Ep(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>gh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>gh(r)).join(",")),e.ht=t}return e.ht}function Ip(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!vh(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!so(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Mc(n.startAt,e.startAt)&&Mc(n.endAt,e.endAt)}function bp(n){return $e.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Dp(n,e){return n.filters.filter(t=>t instanceof cr&&t.field.isEqual(e))}function uy(n,e,t){let r=iy,i=!0;for(const u of Dp(n,e)){let c=iy,p=!0;switch(u.op){case"<":case"<=":c=pC(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,p=!1;break;case"!=":case"not-in":c=iy}cI({value:r,inclusive:i},{value:c,inclusive:p})<0&&(r=c,i=p)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];cI({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function Cp(n,e,t){let r=_l,i=!0;for(const u of Dp(n,e)){let c=_l,p=!0;switch(u.op){case">=":case">":c=ay(u.value),p=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,p=!1;break;case"!=":case"not-in":c=_l}Ac({value:r,inclusive:i},{value:c,inclusive:p})>0&&(r=c,i=p)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];Ac({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class cr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new mC(e,t,r):"array-contains"===t?new yC(e,r):"in"===t?new Qv(e,r):"not-in"===t?new _C(e,r):"array-contains-any"===t?new GS(e,r):new cr(e,t,r)}static lt(e,t,r){return"in"===t?new pI(e,r):new gI(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(lu(t,this.value)):null!==t&&Cc(this.value)===Cc(t)&&this.ft(lu(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return et()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class mC extends cr{constructor(e,t,r){super(e,t,r),this.key=$e.fromName(r.referenceValue)}matches(e){const t=$e.comparator(e.key,this.key);return this.ft(t)}}class pI extends cr{constructor(e,t){super(e,"in",t),this.keys=mI(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class gI extends cr{constructor(e,t){super(e,"not-in",t),this.keys=mI(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function mI(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>$e.fromName(r.referenceValue))}class yC extends cr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return mh(t)&&Tc(t.arrayValue,this.value)}}class Qv extends cr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Tc(this.value.arrayValue,t)}}class _C extends cr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Tc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Tc(this.value.arrayValue,t)}}class GS extends cr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!mh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Tc(this.value.arrayValue,r))}}class vl{constructor(e,t){this.position=e,this.inclusive=t}}class _h{constructor(e,t="asc"){this.field=e,this.dir=t}}function vh(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Jv(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const u=e[i],c=n.position[i];if(r=u.field.isKeyField()?$e.comparator($e.fromName(c.referenceValue),t.key):lu(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function Mc(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!so(n.position[t],e.position[t]))return!1;return!0}class El{constructor(e,t=null,r=[],i=[],u=null,c="F",p=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=u,this.limitType=c,this.startAt=p,this.endAt=_,this._t=null,this.wt=null}}function Xv(n,e,t,r,i,u,c,p){return new El(n,e,t,r,i,u,c,p)}function Eh(n){return new El(n)}function vC(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function ly(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function yI(n){for(const e of n.filters)if(e.dt())return e.field;return null}function cy(n){return null!==n.collectionGroup}function wl(n){const e=Ge(n);if(null===e._t){e._t=[];const t=yI(e),r=ly(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new _h(t)),e._t.push(new _h(zn.keyField(),"asc"));else{let i=!1;for(const u of e.explicitOrderBy)e._t.push(u),u.field.isKeyField()&&(i=!0);if(!i){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new _h(zn.keyField(),u))}}}return e._t}function ki(n){const e=Ge(n);if(!e.wt)if("F"===e.limitType)e.wt=fI(e.path,e.collectionGroup,wl(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of wl(e))t.push(new _h(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new vl(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new vl(e.startAt.position,e.startAt.inclusive):null;e.wt=fI(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function Tp(n,e,t){return new El(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ap(n,e){return Ip(ki(n),ki(e))&&n.limitType===e.limitType}function _I(n){return`${Sc(ki(n))}|lt:${n.limitType}`}function e0(n){return`Query(target=${function gC(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${gh(r.value)}`;var r}).join(", ")}]`),Ep(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>gh(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>gh(t)).join(",")),`Target(${e})`}(ki(n))}; limitType=${n.limitType})`}function t0(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):$e.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,u,c){const p=Jv(i,u,c);return i.inclusive?p<=0:p<0}(t.startAt,wl(t),r)||t.endAt&&!function(i,u,c){const p=Jv(i,u,c);return i.inclusive?p>=0:p>0}(t.endAt,wl(t),r)));var t,r}function vI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function EI(n){return(e,t)=>{let r=!1;for(const i of wl(n)){const u=EC(i,e,t);if(0!==u)return u;r=r||i.field.isKeyField()}return 0}}function EC(n,e,t){const r=n.field.isKeyField()?$e.comparator(e.key,t.key):function(i,u,c){const p=u.data.field(i),_=c.data.field(i);return null!==p&&null!==_?lu(p,_):et()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return et()}}function wI(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wp(e)?"-0":e}}function wh(n){return{integerValue:""+n}}function n0(n,e){return Wv(e)?wh(e):wI(n,e)}class Sp{constructor(){this._=void 0}}function II(n,e,t){return n instanceof xc?function(r,i){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(u.fields.__previous_value__=i),{mapValue:u}}(t,e):n instanceof Nc?s0(n,e):n instanceof Rc?DI(n,e):function(r,i){const u=r0(r,i),c=CI(u)+CI(r.yt);return Zv(u)&&Zv(r.yt)?wh(c):wI(r.It,c)}(n,e)}function bI(n,e,t){return n instanceof Nc?s0(n,e):n instanceof Rc?DI(n,e):t}function r0(n,e){return n instanceof Ih?Zv(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class xc extends Sp{}class Nc extends Sp{constructor(e){super(),this.elements=e}}function s0(n,e){const t=bh(e);for(const r of n.elements)t.some(i=>so(i,r))||t.push(r);return{arrayValue:{values:t}}}class Rc extends Sp{constructor(e){super(),this.elements=e}}function DI(n,e){let t=bh(e);for(const r of n.elements)t=t.filter(i=>!so(i,r));return{arrayValue:{values:t}}}class Ih extends Sp{constructor(e,t){super(),this.It=e,this.yt=t}}function CI(n){return tr(n.integerValue||n.doubleValue)}function bh(n){return mh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Mp{constructor(e,t){this.field=e,this.transform=t}}class Da{constructor(e,t){this.version=e,this.transformResults=t}}class Vn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Vn}static exists(e){return new Vn(void 0,e)}static updateTime(e){return new Vn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Dh(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Il{}function TI(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Oc(n.key,Vn.none()):new Ch(n.key,n.data,Vn.none());{const t=n.data,r=lr.empty();let i=new vn(zn.comparator);for(let u of e.fields)if(!i.has(u)){let c=t.field(u);null===c&&u.length>1&&(u=u.popLast(),c=t.field(u)),null===c?r.delete(u):r.set(u,c),i=i.add(u)}return new du(n.key,r,new Cs(i.toArray()),Vn.none())}}function wC(n,e,t){n instanceof Ch?function(r,i,u){const c=r.value.clone(),p=u0(r.fieldTransforms,i,u.transformResults);c.setAll(p),i.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof du?function(r,i,u){if(!Dh(r.precondition,i))return void i.convertToUnknownDocument(u.version);const c=u0(r.fieldTransforms,i,u.transformResults),p=i.data;p.setAll(a0(r)),p.setAll(c),i.convertToFoundDocument(u.version,p).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function xp(n,e,t,r){return n instanceof Ch?function(i,u,c,p){if(!Dh(i.precondition,u))return c;const _=i.value.clone(),I=hy(i.fieldTransforms,p,u);return _.setAll(I),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof du?function(i,u,c,p){if(!Dh(i.precondition,u))return c;const _=hy(i.fieldTransforms,p,u),I=u.data;return I.setAll(a0(i)),I.setAll(_),u.convertToFoundDocument(u.version,I).setHasLocalMutations(),null===c?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(T=>T.field))}(n,e,t,r):(c=t,Dh(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):c);var u,c}function dy(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),u=r0(r.transform,i||null);null!=u&&(null===t&&(t=lr.empty()),t.set(r.field,u))}return t||null}function Np(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&ba(t,r,(i,u)=>function o0(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Nc&&r instanceof Nc||t instanceof Rc&&r instanceof Rc?ba(t.elements,r.elements,so):t instanceof Ih&&r instanceof Ih?so(t.yt,r.yt):t instanceof xc&&r instanceof xc);var t,r}(i,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Ch extends Il{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class du extends Il{constructor(e,t,r,i,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function a0(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function u0(n,e,t){const r=new Map;St(n.length===t.length);for(let i=0;i<t.length;i++){const u=n[i],c=u.transform,p=e.data.field(u.field);r.set(u.field,bI(c,p,t[i]))}return r}function hy(n,e,t){const r=new Map;for(const i of n){const u=i.transform,c=t.data.field(i.field);r.set(i.field,II(u,c,e))}return r}class Oc extends Il{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class l0 extends Il{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class IC{constructor(e){this.count=e}}var Sr,Yt;function fy(n){switch(n){default:return et();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function c0(n){if(void 0===n)return Fn("GRPC error has no .code"),ce.UNKNOWN;switch(n){case Sr.OK:return ce.OK;case Sr.CANCELLED:return ce.CANCELLED;case Sr.UNKNOWN:return ce.UNKNOWN;case Sr.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case Sr.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case Sr.INTERNAL:return ce.INTERNAL;case Sr.UNAVAILABLE:return ce.UNAVAILABLE;case Sr.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case Sr.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case Sr.NOT_FOUND:return ce.NOT_FOUND;case Sr.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case Sr.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case Sr.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case Sr.ABORTED:return ce.ABORTED;case Sr.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case Sr.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case Sr.DATA_LOSS:return ce.DATA_LOSS;default:return et()}}(Yt=Sr||(Sr={}))[Yt.OK=0]="OK",Yt[Yt.CANCELLED=1]="CANCELLED",Yt[Yt.UNKNOWN=2]="UNKNOWN",Yt[Yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Yt[Yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Yt[Yt.NOT_FOUND=5]="NOT_FOUND",Yt[Yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Yt[Yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Yt[Yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Yt[Yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Yt[Yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Yt[Yt.ABORTED=10]="ABORTED",Yt[Yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Yt[Yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Yt[Yt.INTERNAL=13]="INTERNAL",Yt[Yt.UNAVAILABLE=14]="UNAVAILABLE",Yt[Yt.DATA_LOSS=15]="DATA_LOSS";class Ca{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,u]of r)if(this.equalsFn(i,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<i.length;u++)if(this.equalsFn(i[u][0],e))return void(i[u]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){au(this.inner,(t,r)=>{for(const[i,u]of r)e(i,u)})}isEmpty(){return iI(this.inner)}size(){return this.innerSize}}const d0=new Wn($e.comparator);function os(){return d0}const AI=new Wn($e.comparator);function Rp(...n){let e=AI;for(const t of n)e=e.insert(t.key,t);return e}function SI(n){let e=AI;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Ho(){return Th()}function py(){return Th()}function Th(){return new Ca(n=>n.toString(),(n,e)=>n.isEqual(e))}const bC=new Wn($e.comparator),MI=new vn($e.comparator);function Ut(...n){let e=MI;for(const t of n)e=e.add(t);return e}const DC=new vn(Vt);function Op(){return DC}class Ah{constructor(e,t,r,i,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Pp.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Ah(Mt.min(),i,Op(),os(),Ut())}}class Pp{constructor(e,t,r,i,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Pp(r,t,Ut(),Ut(),Ut())}}class kp{constructor(e,t,r,i){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=i}}class xI{constructor(e,t){this.targetId=e,this.At=t}}class vi{constructor(e,t,r=Ar.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Pc{constructor(){this.Rt=0,this.bt=TC(),this.Pt=Ar.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Ut(),t=Ut(),r=Ut();return this.bt.forEach((i,u)=>{switch(u){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:et()}}),new Pp(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=TC()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class CC{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=os(),this.qt=NI(),this.Kt=new vn(Vt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:et()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,i)=>{this.Ht(i)&&t(i)})}Yt(e){const t=e.targetId,r=e.At.count,i=this.Xt(t);if(i){const u=i.target;if(bp(u))if(0===r){const c=new $e(u.path);this.jt(t,c,Nn.newNoDocument(c,Mt.min()))}else St(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((u,c)=>{const p=this.Xt(c);if(p){if(u.current&&bp(p.target)){const _=new $e(p.target.path);null!==this.Ut.get(_)||this.ee(c,_)||this.jt(c,_,Nn.newNoDocument(_,e))}u.Dt&&(t.set(c,u.xt()),u.Nt())}});let r=Ut();this.qt.forEach((u,c)=>{let p=!0;c.forEachWhile(_=>{const I=this.Xt(_);return!I||2===I.purpose||(p=!1,!1)}),p&&(r=r.add(u))}),this.Ut.forEach((u,c)=>c.setReadTime(e));const i=new Ah(e,t,this.Kt,this.Ut,r);return this.Ut=os(),this.qt=NI(),this.Kt=new vn(Vt),i}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const i=this.zt(e);this.ee(e,t)?i.kt(t,1):i.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new Pc,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new vn(Vt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Re("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new Pc),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function NI(){return new Wn($e.comparator)}function TC(){return new Wn($e.comparator)}const Fp={asc:"ASCENDING",desc:"DESCENDING"},AC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class h0{constructor(e,t){this.databaseId=e,this.gt=t}}function Lp(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function f0(n,e){return n.gt?e.toBase64():e.toUint8Array()}function SC(n,e){return Lp(n,e.toTimestamp())}function Yr(n){return St(!!n),Mt.fromTimestamp(function(e){const t=yl(e);return new Ln(t.seconds,t.nanos)}(n))}function Vp(n,e){return(t=n,new Jt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function p0(n){const e=Jt.fromString(n);return St(_0(e)),e}function Sh(n,e){return Vp(n.databaseId,e.path)}function Ts(n,e){const t=p0(e);if(t.get(1)!==n.databaseId.projectId)throw new Ne(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ne(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new $e(RI(t))}function Up(n,e){return Vp(n.databaseId,e)}function MC(n){const e=p0(n);return 4===e.length?Jt.emptyPath():RI(e)}function Mh(n){return new Jt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function RI(n){return St(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function g0(n,e,t){return{name:Sh(n,e),fields:t.value.mapValue.fields}}function Bp(n,e,t){const r=Ts(n,e.name),i=Yr(e.updateTime),u=new lr({mapValue:{fields:e.fields}}),c=Nn.newFoundDocument(r,i,u);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function kc(n,e){let t;if(e instanceof Ch)t={update:g0(n,e.key,e.value)};else if(e instanceof Oc)t={delete:Sh(n,e.key)};else if(e instanceof du)t={update:g0(n,e.key,e.data),updateMask:BI(e.fieldMask)};else{if(!(e instanceof l0))return et();t={verify:Sh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,u){const c=u.transform;if(c instanceof xc)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Nc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Rc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Ih)return{fieldPath:u.field.canonicalString(),increment:c.yt};throw et()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:SC(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:et()),t;var i}function jp(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Vn.updateTime(Yr(i.updateTime)):void 0!==i.exists?Vn.exists(i.exists):Vn.none():Vn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(u,c){let p=null;"setToServerValue"in c?(St("REQUEST_TIME"===c.setToServerValue),p=new xc):"appendMissingElements"in c?p=new Nc(c.appendMissingElements.values||[]):"removeAllFromArray"in c?p=new Rc(c.removeAllFromArray.values||[]):"increment"in c?p=new Ih(u,c.increment):et();const _=zn.fromServerFormat(c.fieldPath);return new Mp(_,p)}(n,i)):[];var i;if(e.update){const i=Ts(n,e.update.name),u=new lr({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new Cs((e.updateMask.fieldPaths||[]).map(I=>zn.fromServerFormat(I)));return new du(i,u,c,t,r)}return new Ch(i,u,t,r)}if(e.delete){const i=Ts(n,e.delete);return new Oc(i,t)}if(e.verify){const i=Ts(n,e.verify);return new l0(i,t)}return et()}function PI(n,e){return{documents:[Up(n,e.path)]}}function m0(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Up(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Up(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0===_.length)return;const I=_.map(T=>function(M){if("=="===M.op){if(Yv(M.value))return{unaryFilter:{field:xh(M.field),op:"IS_NAN"}};if(lI(M.value))return{unaryFilter:{field:xh(M.field),op:"IS_NULL"}}}else if("!="===M.op){if(Yv(M.value))return{unaryFilter:{field:xh(M.field),op:"IS_NOT_NAN"}};if(lI(M.value))return{unaryFilter:{field:xh(M.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xh(M.field),op:VI(M.op),value:M.value}}}(T));return 1===I.length?I[0]:{compositeFilter:{op:"AND",filters:I}}}(e.filters);i&&(t.structuredQuery.where=i);const u=function(_){if(0!==_.length)return _.map(I=>{return{field:xh((T=I).field),direction:LI(T.dir)};var T})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=(I=e.limit,n.gt||Ep(I)?I:{value:I});var I,p,_;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(p=e.startAt).inclusive,values:p.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function y0(n){let e=MC(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){St(1===r);const T=t.from[0];T.allDescendants?i=T.collectionId:e=e.child(T.collectionId)}let u=[];t.where&&(u=FI(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(T=>{return new _h(Nh((M=T).field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(M.direction));var M}));let p=null;t.limit&&(p=function(T){let M;return M="object"==typeof T?T.value:T,Ep(M)?null:M}(t.limit));let _=null;var T;t.startAt&&(_=new vl((T=t.startAt).values||[],!!T.before));let I=null;return t.endAt&&(I=function(T){return new vl(T.values||[],!T.before)}(t.endAt)),Xv(e,i,c,u,p,"F",_,I)}function FI(n){return n?void 0!==n.unaryFilter?[NC(n)]:void 0!==n.fieldFilter?[UI(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>FI(e)).reduce((e,t)=>e.concat(t)):et():[]}function LI(n){return Fp[n]}function VI(n){return AC[n]}function xh(n){return{fieldPath:n.canonicalString()}}function Nh(n){return zn.fromServerFormat(n.fieldPath)}function UI(n){return cr.create(Nh(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return et()}}(n.fieldFilter.op),n.fieldFilter.value)}function NC(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Nh(n.unaryFilter.field);return cr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Nh(n.unaryFilter.field);return cr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Nh(n.unaryFilter.field);return cr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Nh(n.unaryFilter.field);return cr.create(i,"!=",{nullValue:"NULL_VALUE"});default:return et()}}function BI(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function _0(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ei(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=HI(e)),e=jI(n.get(t),e);return HI(e)}function jI(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const u=n.charAt(i);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function HI(n){return n+"\x01\x01"}function Ta(n){const e=n.length;if(St(e>=2),2===e)return St("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Jt.emptyPath();const t=e-2,r=[];let i="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&et(),n.charAt(c+1)){case"\x01":const p=n.substring(u,c);let _;0===i.length?_=p:(i+=p,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(u,c),i+="\0";break;case"\x11":i+=n.substring(u,c+1);break;default:et()}u=c+2}return new Jt(r)}const RC=["userId","batchId"];function Hp(n,e){return[n,Ei(e)]}function OC(n,e,t){return[n,Ei(e),t]}const zS={},WS=["prefixPath","collectionGroup","readTime","documentId"],KS=["prefixPath","collectionGroup","documentId"],ZS=["collectionGroup","readTime","prefixPath","documentId"],YS=["canonicalId","targetId"],QS=["targetId","path"],JS=["path","targetId"],gy=["collectionId","parent"],XS=["indexId","uid"],$I=["uid","sequenceNumber"],v0=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],GI=["indexId","uid","orderedDocumentKey"],qI=["userId","collectionPath","documentId"],eM=["userId","collectionPath","largestBatchId"],E0=["userId","collectionGroup","largestBatchId"],w0=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],PC=[...w0,"documentOverlays"],I0=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],kC=I0,FC=[...kC,"indexConfiguration","indexState","indexEntries"];class b0 extends fh{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function vr(n,e){const t=Ge(n);return jo.M(t.ie,e)}class D0{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const u=this.mutations[i];u.key.isEqual(e.key)&&wC(u,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=xp(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=xp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=py();return this.mutations.forEach(i=>{const u=e.get(i.key),c=u.overlayedDocument;let p=this.applyToLocalView(c,u.mutatedFields);p=t.has(i.key)?null:p;const _=TI(c,p);null!==_&&r.set(i.key,_),c.isValidDocument()||c.convertToNoDocument(Mt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ut())}isEqual(e){return this.batchId===e.batchId&&ba(this.mutations,e.mutations,(t,r)=>Np(t,r))&&ba(this.baseMutations,e.baseMutations,(t,r)=>Np(t,r))}}class zI{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){St(e.mutations.length===r.length);let i=bC;const u=e.mutations;for(let c=0;c<u.length;c++)i=i.insert(u[c].key,r[c].version);return new zI(e,t,r,i)}}class WI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Fc{constructor(e,t,r,i,u=Mt.min(),c=Mt.min(),p=Ar.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=p}withSequenceNumber(e){return new Fc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Fc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Fc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class KI{constructor(e){this.re=e}}function ZI(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:C0(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Sh(i=n.re,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Lp(i,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Lc(e.version)};else{if(!e.isUnknownDocument())return et();r.unknownDocument={path:t.path.toArray(),version:Lc(e.version)}}var i,u;return r}function C0(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Lc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function hu(n){const e=new Ln(n.seconds,n.nanoseconds);return Mt.fromTimestamp(e)}function Vc(n,e){const t=(e.baseMutations||[]).map(u=>jp(n.re,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(c.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>jp(n.re,u)),i=Ln.fromMillis(e.localWriteTimeMs);return new D0(e.batchId,i,t,r)}function Fi(n){const e=hu(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?hu(n.lastLimboFreeSnapshotVersion):Mt.min();let r;var i;return void 0!==n.query.documents?(St(1===(i=n.query).documents.length),r=ki(Eh(MC(i.documents[0])))):r=ki(y0(n.query)),new Fc(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Ar.fromBase64String(n.resumeToken))}function YI(n,e){const t=Lc(e.snapshotVersion),r=Lc(e.lastLimboFreeSnapshotVersion);let i;i=bp(e.target)?PI(n.re,e.target):m0(n.re,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Sc(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function $p(n){const e=y0({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Tp(e,e.limit,"L"):e}function T0(n,e){return new WI(e.largestBatchId,jp(n.re,e.overlayMutation))}function QI(n,e){const t=e.path.lastSegment();return[n,Ei(e.path.popLast()),t]}function my(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Lc(r.readTime),documentKey:Ei(r.documentKey.path),largestBatchId:r.largestBatchId}}class JI{getBundleMetadata(e,t){return A0(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:hu(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return A0(e).put({bundleId:(r=t).id,createTime:Lc(Yr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return XI(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:$p(i.bundledQuery),readTime:hu(i.readTime)};var i})}saveNamedQuery(e,t){return XI(e).put({name:(r=t).name,readTime:Lc(Yr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function A0(n){return vr(n,"bundles")}function XI(n){return vr(n,"namedQueries")}class Gp{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new Gp(e,t.uid||"")}getOverlay(e,t){return qp(e).get(QI(this.userId,t)).next(r=>r?T0(this.It,r):null)}getOverlays(e,t){const r=Ho();return re.forEach(t,i=>this.getOverlay(e,i).next(u=>{null!==u&&r.set(i,u)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((u,c)=>{const p=new WI(t,c);i.push(this.ue(e,p))}),re.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(Ei(c.getCollectionPath())));const u=[];return i.forEach(c=>{const p=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(qp(e).Y("collectionPathOverlayIndex",p))}),re.waitFor(u)}getOverlaysForCollection(e,t,r){const i=Ho(),u=Ei(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return qp(e).W("collectionPathOverlayIndex",c).next(p=>{for(const _ of p){const I=T0(this.It,_);i.set(I.getKey(),I)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const u=Ho();let c;const p=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return qp(e).Z({index:"collectionGroupOverlayIndex",range:p},(_,I,T)=>{const M=T0(this.It,I);u.size()<i||M.largestBatchId===c?(u.set(M.getKey(),M),c=M.largestBatchId):T.done()}).next(()=>u)}ue(e,t){return qp(e).put(function(r,i,u){const[c,p,_]=QI(i,u.mutation.key);return{userId:i,collectionPath:p,documentId:_,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:kc(r.re,u.mutation)}}(this.It,this.userId,t))}}function qp(n){return vr(n,"documentOverlays")}class Uc{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(tr(e.integerValue));else if("doubleValue"in e){const r=tr(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),wp(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(Dc(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?fC(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):et()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const i of Object.keys(r))this._e(i,t),this.ae(r[i],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const i of r)this.ae(i,t)}ge(e,t){this.le(t,37),$e.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function VC(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function yy(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const u=VC(255&t[i]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Uc.Te=new Uc;class Bc{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=t.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.ve()}De(e){const t=this.Ce(e),r=yy(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ne(e){const t=this.Ce(e),r=yy(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(i){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,i,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class eb{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class tb{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class zp{constructor(){this.Be=new Bc,this.Le=new eb(this.Be),this.Ue=new tb(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Rh{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Rh(this.indexId,this.documentKey,this.arrayValue,r)}}function jc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=nb(n.arrayValue,e.arrayValue),0!==t?t:(t=nb(n.directionalValue,e.directionalValue),0!==t?t:$e.comparator(n.documentKey,e.documentKey)))}function nb(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class UC{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=Vv(e);if(void 0!==t&&!this.ze(t))return!1;const r=Ic(e);let i=0,u=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.je){const c=r[i];if(!this.He(this.je,c)||!this.Je(this.Ge[u++],c))return!1;++i}for(;i<r.length;++i){const c=r[i];if(u>=this.Ge.length||!this.Je(this.Ge[u++],c))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class rb{constructor(){this.Ye=new S0}addToCollectionParentIndex(e,t){return this.Ye.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(Ds.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(Ds.min())}updateCollectionGroup(e,t,r){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class S0{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new vn(Jt.comparator),u=!i.has(r);return this.index[t]=i.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new vn(Jt.comparator)).toArray()}}const _y=new Uint8Array(0);class tM{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new S0,this.Ze=new Ca(r=>Sc(r),(r,i)=>Ip(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const u={collectionId:r,parent:Ei(i)};return vy(e).put(u)}return re.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[hh(t),""],!1,!0);return vy(e).W(i).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(Ta(c.parent))}return r})}addFieldIndex(e,t){const r=Ey(e),i={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(p=>[p.fieldPath.canonicalString(),p.kind])};var c;delete i.indexId;const u=r.add(i);if(t.indexState){const c=Wp(e);return u.next(p=>{c.put(my(p,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=Ey(e),i=Wp(e),u=Oh(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Oh(e);let i=!0;const u=new Map;return re.forEach(this.tn(t),c=>this.en(e,c).next(p=>{i&&(i=!!p),u.set(c,p)})).next(()=>{if(i){let c=Ut();const p=[];return re.forEach(u,(_,I)=>{var T;Re("IndexedDbIndexManager",`Using index ${T=_,`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(gt=>`${gt.fieldPath}:${gt.kind}`).join(",")}`} to execute ${Sc(t)}`);const M=function(gt,at){const Ct=Vv(at);if(void 0===Ct)return null;for(const Nt of Dp(gt,Ct.fieldPath))switch(Nt.op){case"array-contains-any":return Nt.value.arrayValue.values||[];case"array-contains":return[Nt.value]}return null}(I,_),L=function(gt,at){const Ct=new Map;for(const Nt of Ic(at))for(const an of Dp(gt,Nt.fieldPath))switch(an.op){case"==":case"in":Ct.set(Nt.fieldPath.canonicalString(),an.value);break;case"not-in":case"!=":return Ct.set(Nt.fieldPath.canonicalString(),an.value),Array.from(Ct.values())}return null}(I,_),U=function(gt,at){const Ct=[];let Nt=!0;for(const an of Ic(at)){const xs=0===an.kind?uy(gt,an.fieldPath,gt.startAt):Cp(gt,an.fieldPath,gt.startAt);Ct.push(xs.value),Nt&&(Nt=xs.inclusive)}return new vl(Ct,Nt)}(I,_),z=function(gt,at){const Ct=[];let Nt=!0;for(const an of Ic(at)){const xs=0===an.kind?Cp(gt,an.fieldPath,gt.endAt):uy(gt,an.fieldPath,gt.endAt);Ct.push(xs.value),Nt&&(Nt=xs.inclusive)}return new vl(Ct,Nt)}(I,_),de=this.nn(_,I,U),Te=this.nn(_,I,z),nt=this.sn(_,I,L),ot=this.rn(_.indexId,M,de,U.inclusive,Te,z.inclusive,nt);return re.forEach(ot,gt=>r.J(gt,t.limit).next(at=>{at.forEach(Ct=>{const Nt=$e.fromSegments(Ct.documentKey);c.has(Nt)||(c=c.add(Nt),p.push(Nt))})}))}).next(()=>p)}return re.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,i,u,c,p){const _=(null!=t?t.length:1)*Math.max(r.length,u.length),I=_/(null!=t?t.length:1),T=[];for(let M=0;M<_;++M){const L=t?this.on(t[M/I]):_y,U=this.un(e,L,r[M%I],i),z=this.cn(e,L,u[M%I],c),de=p.map(Te=>this.un(e,L,Te,!0));T.push(...this.createRange(U,z,de))}return T}un(e,t,r,i){const u=new Rh(e,$e.empty(),t,r);return i?u:u.Ke()}cn(e,t,r,i){const u=new Rh(e,$e.empty(),t,r);return i?u.Ke():u}en(e,t){const r=new UC(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(u=>{let c=null;for(const p of u)r.We(p)&&(!c||p.fields.length>c.fields.length)&&(c=p);return c})}getIndexType(e,t){let r=2;return re.forEach(this.tn(t),i=>this.en(e,i).next(u=>{u?0!==r&&u.fields.length<function(c){let p=new vn(zn.comparator),_=!1;for(const I of c.filters){const T=I;T.field.isKeyField()||("array-contains"===T.op||"array-contains-any"===T.op?_=!0:p=p.add(T.field))}for(const I of c.orderBy)I.field.isKeyField()||(p=p.add(I.field));return p.size+(_?1:0)}(i)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new zp;for(const i of Ic(e)){const u=t.data.field(i.fieldPath);if(null==u)return null;const c=r.qe(i.kind);Uc.Te.ce(u,c)}return r.$e()}on(e){const t=new zp;return Uc.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new zp;return Uc.Te.ce(cu(this.databaseId,t),r.qe(function(i){const u=Ic(i);return 0===u.length?0:u[u.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let i=[];i.push(new zp);let u=0;for(const c of Ic(e)){const p=r[u++];for(const _ of i)if(this.ln(t,c.fieldPath)&&mh(p))i=this.fn(i,c,p);else{const I=_.qe(c.kind);Uc.Te.ce(p,I)}}return this.dn(i)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const i=[...e],u=[];for(const c of r.arrayValue.values||[])for(const p of i){const _=new zp;_.seed(p.$e()),Uc.Te.ce(c,_.qe(t.kind)),u.push(_)}return u}ln(e,t){return!!e.filters.find(r=>r instanceof cr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Ey(e),i=Wp(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const c=[];return re.forEach(u,p=>i.get([p.indexId,this.uid]).next(_=>{c.push(function(I,T){const M=T?new ny(T.sequenceNumber,new Ds(hu(T.readTime),new $e(Ta(T.documentKey)),T.largestBatchId)):ny.empty(),L=I.fields.map(([U,z])=>new Uv(zn.fromServerFormat(U),z));return new gp(I.indexId,I.collectionGroup,L,M)}(p,_))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const u=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==u?u:Vt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Ey(e),u=Wp(e);return this._n(e).next(c=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(p=>re.forEach(p,_=>u.put(my(_.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return re.forEach(t,(i,u)=>{const c=r.get(i.collectionGroup);return(c?re.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(p=>(r.set(i.collectionGroup,p),re.forEach(p,_=>this.wn(e,i,_).next(I=>{const T=this.mn(u,_);return I.isEqual(T)?re.resolve():this.gn(e,u,_,I,T)}))))})}yn(e,t,r,i){return Oh(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,i){return Oh(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=Oh(e);let u=new vn(jc);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(c,p)=>{u=u.add(new Rh(r.indexId,t,p.arrayValue,p.directionalValue))}).next(()=>u)}mn(e,t){let r=new vn(jc);const i=this.an(t,e);if(null==i)return r;const u=Vv(t);if(null!=u){const c=e.data.field(u.fieldPath);if(mh(c))for(const p of c.arrayValue.values||[])r=r.add(new Rh(t.indexId,e.key,this.on(p),i))}else r=r.add(new Rh(t.indexId,e.key,_y,i));return r}gn(e,t,r,i,u){Re("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(p,_,I,T,M){const L=p.getIterator(),U=_.getIterator();let z=ml(L),de=ml(U);for(;z||de;){let Te=!1,nt=!1;if(z&&de){const ot=I(z,de);ot<0?nt=!0:ot>0&&(Te=!0)}else null!=z?nt=!0:Te=!0;Te?(T(de),de=ml(U)):nt?(M(z),z=ml(L)):(z=ml(L),de=ml(U))}}(i,u,jc,p=>{c.push(this.yn(e,t,r,p))},p=>{c.push(this.pn(e,t,r,p))}),re.waitFor(c)}_n(e){let t=1;return Wp(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,u)=>{u.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,p)=>jc(c,p)).filter((c,p,_)=>!p||0!==jc(c,_[p-1]));const i=[];i.push(e);for(const c of r){const p=jc(c,e),_=jc(c,t);if(0===p)i[0]=e.Ke();else if(p>0&&_<0)i.push(c),i.push(c.Ke());else if(_>0)break}i.push(t);const u=[];for(let c=0;c<i.length;c+=2)u.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,_y,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,_y,[]]));return u}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(M0)}getMinOffset(e,t){return re.mapArray(this.tn(t),r=>this.en(e,r).next(i=>i||et())).next(M0)}}function vy(n){return vr(n,"collectionParents")}function Oh(n){return vr(n,"indexEntries")}function Ey(n){return vr(n,"indexConfiguration")}function Wp(n){return vr(n,"indexState")}function M0(n){St(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;jv(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Ds(e.readTime,e.documentKey,t)}const wy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class wi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new wi(e,wi.DEFAULT_COLLECTION_PERCENTILE,wi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function x0(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let p=0;const _=r.Z({range:c},(T,M,L)=>(p++,L.delete()));u.push(_.next(()=>{St(1===p)}));const I=[];for(const T of t.mutations){const M=OC(e,T.key.path,t.batchId);u.push(i.delete(M)),I.push(T.key)}return re.waitFor(u).next(()=>I)}function Iy(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw et();e=n.noDocument}return JSON.stringify(e).length}wi.DEFAULT_COLLECTION_PERCENTILE=10,wi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wi.DEFAULT=new wi(41943040,wi.DEFAULT_COLLECTION_PERCENTILE,wi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wi.DISABLED=new wi(-1,0,0);class Kp{constructor(e,t,r,i){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static oe(e,t,r,i){St(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new Kp(u,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return bl(e).Z({index:"userMutationsIndex",range:r},(i,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const u=Ph(e),c=bl(e);return c.add({}).next(p=>{St("number"==typeof p);const _=new D0(p,t,r,i),I=function(L,U,z){const de=z.baseMutations.map(nt=>kc(L.re,nt)),Te=z.mutations.map(nt=>kc(L.re,nt));return{userId:U,batchId:z.batchId,localWriteTimeMs:z.localWriteTime.toMillis(),baseMutations:de,mutations:Te}}(this.It,this.userId,_),T=[];let M=new vn((L,U)=>Vt(L.canonicalString(),U.canonicalString()));for(const L of i){const U=OC(this.userId,L.key.path,p);M=M.add(L.key.path.popLast()),T.push(c.put(I)),T.push(u.put(U,zS))}return M.forEach(L=>{T.push(this.indexManager.addToCollectionParentIndex(e,L))}),e.addOnCommittedListener(()=>{this.In[p]=_.keys()}),re.waitFor(T).next(()=>_)})}lookupMutationBatch(e,t){return bl(e).get(t).next(r=>r?(St(r.userId===this.userId),Vc(this.It,r)):null)}Tn(e,t){return this.In[t]?re.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return bl(e).Z({index:"userMutationsIndex",range:i},(c,p,_)=>{p.userId===this.userId&&(St(p.batchId>=r),u=Vc(this.It,p)),_.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return bl(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return bl(e).W("userMutationsIndex",t).next(r=>r.map(i=>Vc(this.It,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Hp(this.userId,t.path),i=IDBKeyRange.lowerBound(r),u=[];return Ph(e).Z({range:i},(c,p,_)=>{const[I,T,M]=c,L=Ta(T);if(I===this.userId&&t.path.isEqual(L))return bl(e).get(M).next(U=>{if(!U)throw et();St(U.userId===this.userId),u.push(Vc(this.It,U))});_.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new vn(Vt);const i=[];return t.forEach(u=>{const c=Hp(this.userId,u.path),p=IDBKeyRange.lowerBound(c),_=Ph(e).Z({range:p},(I,T,M)=>{const[L,U,z]=I,de=Ta(U);L===this.userId&&u.path.isEqual(de)?r=r.add(z):M.done()});i.push(_)}),re.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,u=Hp(this.userId,r),c=IDBKeyRange.lowerBound(u);let p=new vn(Vt);return Ph(e).Z({range:c},(_,I,T)=>{const[M,L,U]=_,z=Ta(L);M===this.userId&&r.isPrefixOf(z)?z.length===i&&(p=p.add(U)):T.done()}).next(()=>this.En(e,p))}En(e,t){const r=[],i=[];return t.forEach(u=>{i.push(bl(e).get(u).next(c=>{if(null===c)throw et();St(c.userId===this.userId),r.push(Vc(this.It,c))}))}),re.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return x0(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),re.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return re.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return Ph(e).Z({range:r},(u,c,p)=>{if(u[0]===this.userId){const _=Ta(u[1]);i.push(_)}else p.done()}).next(()=>{St(0===i.length)})})}containsKey(e,t){return N0(e,this.userId,t)}Rn(e){return BC(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function N0(n,e,t){const r=Hp(e,t.path),i=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return Ph(n).Z({range:u,X:!0},(p,_,I)=>{const[T,M,L]=p;T===e&&M===i&&(c=!0),I.done()}).next(()=>c)}function bl(n){return vr(n,"mutations")}function Ph(n){return vr(n,"documentMutations")}function BC(n){return vr(n,"mutationQueues")}class kh{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new kh(0)}static vn(){return new kh(-1)}}class ib{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new kh(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Mt.fromTimestamp(new Ln(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Fh(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(St(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const u=[];return Fh(e).Z((c,p)=>{const _=Fi(p);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,u.push(this.removeTargetData(e,_)))}).next(()=>re.waitFor(u)).next(()=>i)}forEachTarget(e,t){return Fh(e).Z((r,i)=>{const u=Fi(i);t(u)})}Vn(e){return sb(e).get("targetGlobalKey").next(t=>(St(null!==t),t))}Sn(e,t){return sb(e).put("targetGlobalKey",t)}Dn(e,t){return Fh(e).put(YI(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Sc(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Fh(e).Z({range:i,index:"queryTargetsIndex"},(c,p,_)=>{const I=Fi(p);Ip(t,I.target)&&(u=I,_.done())}).next(()=>u)}addMatchingKeys(e,t,r){const i=[],u=Dl(e);return t.forEach(c=>{const p=Ei(c.path);i.push(u.put({targetId:r,path:p})),i.push(this.referenceDelegate.addReference(e,r,c))}),re.waitFor(i)}removeMatchingKeys(e,t,r){const i=Dl(e);return re.forEach(t,u=>{const c=Ei(u.path);return re.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Dl(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Dl(e);let u=Ut();return i.Z({range:r,X:!0},(c,p,_)=>{const I=Ta(c[1]),T=new $e(I);u=u.add(T)}).next(()=>u)}containsKey(e,t){const r=Ei(t.path),i=IDBKeyRange.bound([r],[hh(r)],!1,!0);let u=0;return Dl(e).Z({index:"documentTargetsIndex",X:!0,range:i},([c,p],_,I)=>{0!==c&&(u++,I.done())}).next(()=>u>0)}se(e,t){return Fh(e).get(t).next(r=>r?Fi(r):null)}}function Fh(n){return vr(n,"targets")}function sb(n){return vr(n,"targetGlobal")}function Dl(n){return vr(n,"targetDocuments")}function jC([n,e],[t,r]){const i=Vt(n,t);return 0===i?Vt(e,r):i}class nM{constructor(e){this.xn=e,this.buffer=new vn(jC),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();jC(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class rM{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Re("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ee.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){gl(r)?Re("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield pl(r)}yield t.Fn(3e5)}))}}class iM{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return re.resolve(Pi.at);const r=new nM(t);return this.$n.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(wy)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),wy):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,i,u,c,p,_,I;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(M=>(M>this.params.maximumSequenceNumbersToCollect?(Re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${M}`),i=this.params.maximumSequenceNumbersToCollect):i=M,c=Date.now(),this.nthSequenceNumber(e,i))).next(M=>(r=M,p=Date.now(),this.removeTargets(e,r,t))).next(M=>(u=M,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(M=>(I=Date.now(),dh()<=iu.in.DEBUG&&Re("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-T}ms\n\tDetermined least recently used ${i} in `+(p-c)+`ms\n\tRemoved ${u} targets in `+(_-p)+`ms\n\tRemoved ${M} documents in `+(I-_)+`ms\nTotal Duration: ${I-T}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:u,documentsRemoved:M})))}}class sM{constructor(e,t){this.db=e,this.garbageCollector=new iM(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return by(e,r)}removeReference(e,t,r){return by(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return by(e,t)}Gn(e,t){return function(r,i){let u=!1;return BC(r).tt(c=>N0(r,c,i).next(p=>(p&&(u=!0),re.resolve(!p)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let u=0;return this.Kn(e,(c,p)=>{if(p<=t){const _=this.Gn(e,c).next(I=>{if(!I)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Mt.min()),Dl(e).delete([0,Ei(c.path)])))});i.push(_)}}).next(()=>re.waitFor(i)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return by(e,t)}Kn(e,t){const r=Dl(e);let i,u=Pi.at;return r.Z({index:"documentTargetsIndex"},([c,p],{path:_,sequenceNumber:I})=>{0===c?(u!==Pi.at&&t(new $e(Ta(i)),u),u=I,i=_):u=Pi.at}).next(()=>{u!==Pi.at&&t(new $e(Ta(i)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function by(n,e){return Dl(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ei(e.path),sequenceNumber:r}));var r}class Zp{constructor(){this.changes=new Ca(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Nn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?re.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class HC{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Tl(e).put(r)}removeEntry(e,t,r){return Tl(e).delete(function(i,u){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],C0(u),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Nn.newInvalidDocument(t);return Tl(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Hc(t))},(i,u)=>{r=this.jn(t,u)}).next(()=>r)}Wn(e,t){let r={size:0,document:Nn.newInvalidDocument(t)};return Tl(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Hc(t))},(i,u)=>{r={document:this.jn(t,u),size:Iy(u)}}).next(()=>r)}getEntries(e,t){let r=os();return this.zn(e,t,(i,u)=>{const c=this.jn(i,u);r=r.insert(i,c)}).next(()=>r)}Hn(e,t){let r=os(),i=new Wn($e.comparator);return this.zn(e,t,(u,c)=>{const p=this.jn(u,c);r=r.insert(u,p),i=i.insert(u,Iy(c))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return re.resolve();let i=new vn(ub);t.forEach(_=>i=i.add(_));const u=IDBKeyRange.bound(Hc(i.first()),Hc(i.last())),c=i.getIterator();let p=c.getNext();return Tl(e).Z({index:"documentKeyIndex",range:u},(_,I,T)=>{const M=$e.fromSegments([...I.prefixPath,I.collectionGroup,I.documentId]);for(;p&&ub(p,M)<0;)r(p,null),p=c.getNext();p&&p.isEqual(M)&&(r(p,I),p=c.hasNext()?c.getNext():null),p?T.j(Hc(p)):T.done()}).next(()=>{for(;p;)r(p,null),p=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),C0(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Tl(e).W(IDBKeyRange.bound(i,u,!0)).next(c=>{let p=os();for(const _ of c){const I=this.jn($e.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);p=p.insert(I.key,I)}return p})}getAllFromCollectionGroup(e,t,r,i){let u=os();const c=Dy(t,r),p=Dy(t,Ds.max());return Tl(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,p,!0)},(_,I,T)=>{const M=this.jn($e.fromSegments(I.prefixPath.concat(I.collectionGroup,I.documentId)),I);u=u.insert(M.key,M),u.size===i&&T.done()}).next(()=>u)}newChangeBuffer(e){return new ab(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Cl(e).get("remoteDocumentGlobalKey").next(t=>(St(!!t),t))}Qn(e,t){return Cl(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function LC(n,e){let t;if(e.document)t=Bp(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=$e.fromSegments(e.noDocument.path),i=hu(e.noDocument.readTime);t=Nn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return et();{const r=$e.fromSegments(e.unknownDocument.path),i=hu(e.unknownDocument.version);t=Nn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Ln(r[0],r[1]);return Mt.fromTimestamp(i)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(Mt.min()))return r}return Nn.newInvalidDocument(e)}}function ob(n){return new HC(n)}class ab extends Zp{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Ca(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new vn((u,c)=>Vt(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const p=this.Xn.get(u);if(t.push(this.Yn.removeEntry(e,u,p.readTime)),c.isValidDocument()){const _=ZI(this.Yn.It,c);i=i.add(u.path.popLast()),r+=Iy(_)-p.size,t.push(this.Yn.addEntry(e,u,_))}else if(r-=p.size,this.trackRemovals){const _=ZI(this.Yn.It,c.convertToNoDocument(Mt.min()));t.push(this.Yn.addEntry(e,u,_))}}),i.forEach(u=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Yn.updateMetadata(e,r)),re.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((u,c)=>{this.Xn.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function Cl(n){return vr(n,"remoteDocumentGlobal")}function Tl(n){return vr(n,"remoteDocumentsV14")}function Hc(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Dy(n,e){const t=e.documentKey.path.toArray();return[n,C0(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function ub(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(i=Vt(t[u],r[u]),i)return i;return i=Vt(t.length,r.length),i||(i=Vt(t[t.length-2],r[r.length-2]),i||Vt(t[t.length-1],r[r.length-1]))}class R0{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Cy{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&xp(r.mutation,i,Cs.empty(),Ln.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ut()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ut()){const i=Ho();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(u=>{let c=Rp();return u.forEach((p,_)=>{c=c.insert(p,_.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=Ho();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ut()))}populateOverlays(e,t,r){const i=[];return r.forEach(u=>{t.has(u)||i.push(u)}),this.documentOverlayCache.getOverlays(e,i).next(u=>{u.forEach((c,p)=>{t.set(c,p)})})}computeViews(e,t,r,i){let u=os();const c=Th(),p=Th();return t.forEach((_,I)=>{const T=r.get(I.key);i.has(I.key)&&(void 0===T||T.mutation instanceof du)?u=u.insert(I.key,I):void 0!==T&&(c.set(I.key,T.mutation.getFieldMask()),xp(T.mutation,I,T.mutation.getFieldMask(),Ln.now()))}),this.recalculateAndSaveOverlays(e,u).next(_=>(_.forEach((I,T)=>c.set(I,T)),t.forEach((I,T)=>{var M;return p.set(I,new R0(T,null!==(M=c.get(I))&&void 0!==M?M:null))}),p))}recalculateAndSaveOverlays(e,t){const r=Th();let i=new Wn((c,p)=>c-p),u=Ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const p of c)p.keys().forEach(_=>{const I=t.get(_);if(null===I)return;let T=r.get(_)||Cs.empty();T=p.applyToLocalView(I,T),r.set(_,T);const M=(i.get(p.batchId)||Ut()).add(_);i=i.insert(p.batchId,M)})}).next(()=>{const c=[],p=i.getReverseIterator();for(;p.hasNext();){const _=p.getNext(),I=_.key,T=_.value,M=py();T.forEach(L=>{if(!u.has(L)){const U=TI(t.get(L),r.get(L));null!==U&&M.set(L,U),u=u.add(L)}}),c.push(this.documentOverlayCache.saveOverlays(e,I,M))}return re.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return $e.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):cy(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(u=>{const c=i-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-u.size):re.resolve(Ho());let p=-1,_=u;return c.next(I=>re.forEach(I,(T,M)=>(p<M.largestBatchId&&(p=M.largestBatchId),u.get(T)?re.resolve():this.getBaseDocument(e,T,M).next(L=>{_=_.insert(T,L)}))).next(()=>this.populateOverlays(e,I,u)).next(()=>this.computeViews(e,_,I,Ut())).next(T=>({batchId:p,changes:SI(T)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new $e(t)).next(r=>{let i=Rp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let u=Rp();return this.indexManager.getCollectionParents(e,i).next(c=>re.forEach(c,p=>{const _=(I=t,T=p.child(i),new El(T,null,I.explicitOrderBy.slice(),I.filters.slice(),I.limit,I.limitType,I.startAt,I.endAt));var I,T;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(I=>{I.forEach((T,M)=>{u=u.insert(T,M)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(i=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((p,_)=>{const I=_.getKey();null===i.get(I)&&(i=i.insert(I,Nn.newInvalidDocument(I)))});let c=Rp();return i.forEach((p,_)=>{const I=u.get(p);void 0!==I&&xp(I.mutation,_,Cs.empty(),Ln.now()),t0(t,_)&&(c=c.insert(p,_))}),c})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):re.resolve(Nn.newInvalidDocument(t))}}class Ty{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return re.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Yr(r.createTime)}),re.resolve()}getNamedQuery(e,t){return re.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:$p(r.bundledQuery),readTime:Yr(r.readTime)}),re.resolve();var r}}class oM{constructor(){this.overlays=new Wn($e.comparator),this.es=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ho();return re.forEach(t,i=>this.getOverlay(e,i).next(u=>{null!==u&&r.set(i,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,u)=>{this.ue(e,t,u)}),re.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(u=>this.overlays=this.overlays.remove(u)),this.es.delete(r)),re.resolve()}getOverlaysForCollection(e,t,r){const i=Ho(),u=t.length+1,c=new $e(t.child("")),p=this.overlays.getIteratorFrom(c);for(;p.hasNext();){const _=p.getNext().value,I=_.getKey();if(!t.isPrefixOf(I.path))break;I.path.length===u&&_.largestBatchId>r&&i.set(_.getKey(),_)}return re.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let u=new Wn((I,T)=>I-T);const c=this.overlays.getIterator();for(;c.hasNext();){const I=c.getNext().value;if(I.getKey().getCollectionGroup()===t&&I.largestBatchId>r){let T=u.get(I.largestBatchId);null===T&&(T=Ho(),u=u.insert(I.largestBatchId,T)),T.set(I.getKey(),I)}}const p=Ho(),_=u.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((I,T)=>p.set(I,T)),!(p.size()>=i)););return re.resolve(p)}ue(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const c=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new WI(t,r));let u=this.es.get(t);void 0===u&&(u=Ut(),this.es.set(t,u)),this.es.set(t,u.add(r.key))}}class lb{constructor(){this.ns=new vn(si.ss),this.rs=new vn(si.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new si(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new si(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new $e(new Jt([])),r=new si(t,e),i=new si(t,e+1),u=[];return this.rs.forEachInRange([r,i],c=>{this.cs(c),u.push(c.key)}),u}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new $e(new Jt([])),r=new si(t,e),i=new si(t,e+1);let u=Ut();return this.rs.forEachInRange([r,i],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new si(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class si{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return $e.comparator(e.key,t.key)||Vt(e._s,t._s)}static os(e,t){return Vt(e._s,t._s)||$e.comparator(e.key,t.key)}}class aM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new vn(si.ss)}checkEmpty(e){return re.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const u=this.ws;this.ws++;const c=new D0(u,t,r,i);this.mutationQueue.push(c);for(const p of i)this.gs=this.gs.add(new si(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return re.resolve(c)}lookupMutationBatch(e,t){return re.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),u=i<0?0:i;return re.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new si(t,0),i=new si(t,Number.POSITIVE_INFINITY),u=[];return this.gs.forEachInRange([r,i],c=>{const p=this.ys(c._s);u.push(p)}),re.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new vn(Vt);return t.forEach(i=>{const u=new si(i,0),c=new si(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([u,c],p=>{r=r.add(p._s)})}),re.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let u=r;$e.isDocumentKey(u)||(u=u.child(""));const c=new si(new $e(u),0);let p=new vn(Vt);return this.gs.forEachWhile(_=>{const I=_.key.path;return!!r.isPrefixOf(I)&&(I.length===i&&(p=p.add(_._s)),!0)},c),re.resolve(this.Is(p))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){St(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return re.forEach(t.mutations,i=>{const u=new si(i.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new si(t,0),i=this.gs.firstAfterOrEqual(r);return re.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return re.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class cb{constructor(e){this.Es=e,this.docs=new Wn($e.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),u=i?i.size:0,c=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return re.resolve(r?r.document.mutableCopy():Nn.newInvalidDocument(t))}getEntries(e,t){let r=os();return t.forEach(i=>{const u=this.docs.get(i);r=r.insert(i,u?u.document.mutableCopy():Nn.newInvalidDocument(i))}),re.resolve(r)}getAllFromCollection(e,t,r){let i=os();const u=new $e(t.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:p,value:{document:_}}=c.getNext();if(!t.isPrefixOf(p.path))break;p.path.length>t.length+1||jv(mp(_),r)<=0||(i=i.insert(_.key,_.mutableCopy()))}return re.resolve(i)}getAllFromCollectionGroup(e,t,r,i){et()}As(e,t){return re.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new $C(this)}getSize(e){return re.resolve(this.size)}}class $C extends Zp{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),re.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class GC{constructor(e){this.persistence=e,this.Rs=new Ca(t=>Sc(t),Ip),this.lastRemoteSnapshotVersion=Mt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new lb,this.targetCount=0,this.vs=kh.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),re.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new kh(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.Dn(t),re.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,r){let i=0;const u=[];return this.Rs.forEach((c,p)=>{p.sequenceNumber<=t&&null===r.get(p.targetId)&&(this.Rs.delete(c),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),i++)}),re.waitFor(u).next(()=>i)}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return re.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),re.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,u=[];return i&&t.forEach(c=>{u.push(i.markPotentiallyOrphaned(e,c))}),re.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),re.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return re.resolve(r)}containsKey(e,t){return re.resolve(this.Ps.containsKey(t))}}class db{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Pi(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new GC(this),this.indexManager=new rb,this.remoteDocumentCache=new cb(r=>this.referenceDelegate.xs(r)),this.It=new KI(t),this.Ns=new Ty(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new oM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new aM(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Re("MemoryPersistence","Starting transaction:",e);const i=new qC(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(u=>this.referenceDelegate.Os(i).next(()=>u)).toPromise().then(u=>(i.raiseOnCommittedEvent(),u))}Ms(e,t){return re.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class qC extends fh{constructor(e){super(),this.currentSequenceNumber=e}}class Yp{constructor(e){this.persistence=e,this.Fs=new lb,this.$s=null}static Bs(e){return new Yp(e)}get Ls(){if(this.$s)return this.$s;throw et()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),re.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),re.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(u=>this.Ls.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.Ls,r=>{const i=$e.fromPath(r);return this.Us(e,i).next(u=>{u||t.removeEntry(i,Mt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return re.or([()=>re.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class hb{constructor(e){this.It=e}$(e,t,r,i){const u=new ry("createOrUpgrade",t);var p;r<1&&i>=1&&(e.createObjectStore("owner"),(p=e).createObjectStore("mutationQueues",{keyPath:"userId"}),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",RC,{unique:!0}),p.createObjectStore("documentMutations"),O0(e),function(p){p.createObjectStore("remoteDocuments")}(e));let c=re.resolve();return r<3&&i>=3&&(0!==r&&(function(p){p.deleteObjectStore("targetDocuments"),p.deleteObjectStore("targets"),p.deleteObjectStore("targetGlobal")}(e),O0(e)),c=c.next(()=>function(p){const _=p.store("targetGlobal"),I={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Mt.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",I)}(u))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(p,_){return _.store("mutations").W().next(I=>{p.deleteObjectStore("mutations"),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",RC,{unique:!0});const T=_.store("mutations"),M=I.map(L=>T.put(L));return re.waitFor(M)})}(e,u))),c=c.next(()=>{!function(p){p.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.qs(u))),r<6&&i>=6&&(c=c.next(()=>(function(p){p.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(u)))),r<7&&i>=7&&(c=c.next(()=>this.Gs(u))),r<8&&i>=8&&(c=c.next(()=>this.Qs(e,u))),r<9&&i>=9&&(c=c.next(()=>{!function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.js(u))),r<11&&i>=11&&(c=c.next(()=>{(function(p){p.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(p){p.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(p){const _=p.createObjectStore("documentOverlays",{keyPath:qI});_.createIndex("collectionPathOverlayIndex",eM,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",E0,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(p){const _=p.createObjectStore("remoteDocumentsV14",{keyPath:WS});_.createIndex("documentKeyIndex",KS),_.createIndex("collectionGroupIndex",ZS)}(e)).next(()=>this.Ws(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>this.zs(e,u))),r<15&&i>=15&&(c=c.next(()=>function(p){p.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),p.createObjectStore("indexState",{keyPath:XS}).createIndex("sequenceNumberIndex",$I,{unique:!1}),p.createObjectStore("indexEntries",{keyPath:v0}).createIndex("documentKeyIndex",GI,{unique:!1})}(e))),c}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=Iy(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>re.forEach(i,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",c).next(p=>re.forEach(p,_=>{St(_.userId===u.userId);const I=Vc(this.It,_);return x0(e,u.userId,I).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const u=[];return r.Z((c,p)=>{const _=new Jt(c),I=[0,Ei(_)];u.push(t.get(I).next(T=>T?re.resolve():t.put({targetId:0,path:Ei(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>re.waitFor(u))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:gy});const r=t.store("collectionParents"),i=new S0,u=c=>{if(i.add(c)){const p=c.lastSegment(),_=c.popLast();return r.put({collectionId:p,parent:Ei(_)})}};return t.store("remoteDocuments").Z({X:!0},(c,p)=>{const _=new Jt(c);return u(_.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([c,p,_],I)=>{const T=Ta(p);return u(T.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const u=Fi(i),c=YI(this.It,u);return t.put(c)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((u,c)=>{const p=t.store("remoteDocumentsV14"),_=(I=c,I.document?new $e(Jt.fromString(I.document.name).popFirst(5)):I.noDocument?$e.fromSegments(I.noDocument.path):I.unknownDocument?$e.fromSegments(I.unknownDocument.path):et()).path.toArray();var I;const T={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(p.put(T))}).next(()=>re.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=ob(this.It),u=new db(Yp.Bs,this.It.re);return r.W().next(c=>{const p=new Map;return c.forEach(_=>{var I;let T=null!==(I=p.get(_.userId))&&void 0!==I?I:Ut();Vc(this.It,_).keys().forEach(M=>T=T.add(M)),p.set(_.userId,T)}),re.forEach(p,(_,I)=>{const T=new Zr(I),M=Gp.oe(this.It,T),L=u.getIndexManager(T),U=Kp.oe(T,this.It,L,u.referenceDelegate);return new Cy(i,U,M,L).recalculateAndSaveOverlaysForDocumentKeys(new b0(t,Pi.at),_).next()})})}}function O0(n){n.createObjectStore("targetDocuments",{keyPath:QS}).createIndex("documentTargetsIndex",JS,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",YS,{unique:!0}),n.createObjectStore("targetGlobal")}const P0="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class k0{constructor(e,t,r,i,u,c,p,_,I,T,M=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=u,this.window=c,this.document=p,this.Js=I,this.Ys=T,this.Xs=M,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=L=>Promise.resolve(),!k0.C())throw new Ne(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new sM(this,i),this.ii=t+"main",this.It=new KI(_),this.ri=new jo(this.ii,this.Xs,new hb(this.It)),this.Cs=new ib(this.referenceDelegate,this.It),this.remoteDocumentCache=ob(this.It),this.Ns=new JI,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===T&&Fn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ne(ce.FAILED_PRECONDITION,P0);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Pi(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,Ee.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,Ee.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,Ee.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Vh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(gl(e))return Re("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Re("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Lh(e).get("owner").next(t=>re.resolve(this.mi(t)))}gi(e){return Vh(e).delete(this.clientId)}yi(){var e=this;return(0,Ee.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=vr(r,"clientMetadata");return i.W().next(u=>{const c=e.Ii(u,18e5),p=u.filter(_=>-1===c.indexOf(_));return re.forEach(p,_=>i.delete(_.clientId)).next(()=>p)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?re.resolve(!0):Lh(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Ne(ce.FAILED_PRECONDITION,P0);return!1}}return!(!this.networkEnabled||!this.inForeground)||Vh(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const c=!this.inForeground&&i.inForeground,p=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||c&&p)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Re("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ee.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new b0(t,Pi.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>Vh(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return Kp.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new tM(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return Gp.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Re("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",u=15===(c=this.Xs)?FC:14===c?kC:13===c?I0:12===c?PC:11===c?w0:void et();var c;let p;return this.ri.runTransaction(e,i,u,_=>(p=new b0(_,this.Ss?this.Ss.next():Pi.at),"readwrite-primary"===t?this.fi(p).next(I=>!!I||this.di(p)).next(I=>{if(!I)throw Fn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Ne(ce.FAILED_PRECONDITION,Hv);return r(p)}).next(I=>this.wi(p).next(()=>I)):this.Vi(p).next(()=>r(p)))).then(_=>(p.raiseOnCommittedEvent(),_))}Vi(e){return Lh(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ne(ce.FAILED_PRECONDITION,P0)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Lh(e).put("owner",t)}static C(){return jo.C()}_i(e){const t=Lh(e);return t.get("owner").next(r=>this.mi(r)?(Re("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):re.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Fn(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,cn.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Re("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Fn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Fn("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(e){}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Lh(n){return vr(n,"owner")}function Vh(n){return vr(n,"clientMetadata")}function fb(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Ay{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=Ut(),i=Ut();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}return new Ay(e,t.fromCache,r,i)}}class Sy{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(u=>u||this.Oi(e,t,i,r)).next(u=>u||this.Mi(e,t))}ki(e,t){if(vC(t))return re.resolve(null);let r=ki(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Tp(t,null,"F"),r=ki(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const c=Ut(...u);return this.Ni.getDocuments(e,c).next(p=>this.indexManager.getMinOffset(e,r).next(_=>{const I=this.Fi(t,p);return this.$i(t,I,c,_.readTime)?this.ki(e,Tp(t,null,"F")):this.Bi(e,I,t,_)}))})))}Oi(e,t,r,i){return vC(t)||i.isEqual(Mt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(u=>{const c=this.Fi(t,u);return this.$i(t,c,r,i)?this.Mi(e,t):(dh()<=iu.in.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),e0(t)),this.Bi(e,c,t,Bv(i,-1)))})}Fi(e,t){let r=new vn(EI(e));return t.forEach((i,u)=>{t0(e,u)&&(r=r.add(u))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(i)>0)}Mi(e,t){return dh()<=iu.in.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",e0(t)),this.Ni.getDocumentsMatchingQuery(e,t,Ds.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(u=>(t.forEach(c=>{u=u.insert(c.key,c)}),u))}}class zC{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.It=i,this.Ui=new Wn(Vt),this.qi=new Ca(u=>Sc(u),Ip),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Cy(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function pb(n,e,t,r){return new zC(n,e,t,r)}function WC(n,e){return gb.apply(this,arguments)}function gb(){return gb=(0,Ee.Z)(function*(n,e){const t=Ge(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(u=>(i=u,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const c=[],p=[];let _=Ut();for(const I of i){c.push(I.batchId);for(const T of I.mutations)_=_.add(T.key)}for(const I of u){p.push(I.batchId);for(const T of I.mutations)_=_.add(T.key)}return t.localDocuments.getDocuments(r,_).next(I=>({ji:I,removedBatchIds:c,addedBatchIds:p}))})})}),gb.apply(this,arguments)}function KC(n,e){const t=Ge(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),u=t.Gi.newChangeBuffer({trackRemovals:!0});return function(c,p,_,I){const T=_.batch,M=T.keys();let L=re.resolve();return M.forEach(U=>{L=L.next(()=>I.getEntry(p,U)).next(z=>{const de=_.docVersions.get(U);St(null!==de),z.version.compareTo(de)<0&&(T.applyToRemoteDocument(z,_),z.isValidDocument()&&(z.setReadTime(_.commitVersion),I.addEntry(z)))})}),L.next(()=>c.mutationQueue.removeMutationBatch(p,T))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let p=Ut();for(let _=0;_<c.mutationResults.length;++_)c.mutationResults[_].transformResults.length>0&&(p=p.add(c.batch.mutations[_].key));return p}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function mb(n){const e=Ge(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function uM(n,e){const t=Ge(n),r=e.snapshotVersion;let i=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.Ui;const p=[];e.targetChanges.forEach((T,M)=>{const L=i.get(M);if(!L)return;p.push(t.Cs.removeMatchingKeys(u,T.removedDocuments,M).next(()=>t.Cs.addMatchingKeys(u,T.addedDocuments,M)));let U=L.withSequenceNumber(u.currentSequenceNumber);var z,de,Te;e.targetMismatches.has(M)?U=U.withResumeToken(Ar.EMPTY_BYTE_STRING,Mt.min()).withLastLimboFreeSnapshotVersion(Mt.min()):T.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(T.resumeToken,r)),i=i.insert(M,U),de=U,Te=T,(0===(z=L).resumeToken.approximateByteSize()||de.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=3e8||Te.addedDocuments.size+Te.modifiedDocuments.size+Te.removedDocuments.size>0)&&p.push(t.Cs.updateTargetData(u,U))});let _=os(),I=Ut();if(e.documentUpdates.forEach(T=>{e.resolvedLimboDocuments.has(T)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(u,T))}),p.push(ZC(u,c,e.documentUpdates).next(T=>{_=T.Wi,I=T.zi})),!r.isEqual(Mt.min())){const T=t.Cs.getLastRemoteSnapshotVersion(u).next(M=>t.Cs.setTargetsMetadata(u,u.currentSequenceNumber,r));p.push(T)}return re.waitFor(p).next(()=>c.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,_,I)).next(()=>_)}).then(u=>(t.Ui=i,u))}function ZC(n,e,t){let r=Ut(),i=Ut();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let c=os();return t.forEach((p,_)=>{const I=u.get(p);_.isFoundDocument()!==I.isFoundDocument()&&(i=i.add(p)),_.isNoDocument()&&_.version.isEqual(Mt.min())?(e.removeEntry(p,_.readTime),c=c.insert(p,_)):!I.isValidDocument()||_.version.compareTo(I.version)>0||0===_.version.compareTo(I.version)&&I.hasPendingWrites?(e.addEntry(_),c=c.insert(p,_)):Re("LocalStore","Ignoring outdated watch update for ",p,". Current version:",I.version," Watch version:",_.version)}),{Wi:c,zi:i}})}function lM(n,e){const t=Ge(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Qp(n,e){const t=Ge(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(u=>u?(i=u,re.resolve(i)):t.Cs.allocateTargetId(r).next(c=>(i=new Fc(e,c,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function Jp(n,e,t){return F0.apply(this,arguments)}function F0(){return F0=(0,Ee.Z)(function*(n,e,t){const r=Ge(n),i=r.Ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!gl(c))throw c;Re("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ui=r.Ui.remove(e),r.qi.delete(i.target)}),F0.apply(this,arguments)}function L0(n,e,t){const r=Ge(n);let i=Mt.min(),u=Ut();return r.persistence.runTransaction("Execute query","readonly",c=>function(p,_,I){const T=Ge(p),M=T.qi.get(I);return void 0!==M?re.resolve(T.Ui.get(M)):T.Cs.getTargetData(_,I)}(r,c,ki(e)).next(p=>{if(p)return i=p.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(c,p.targetId).next(_=>{u=_})}).next(()=>r.Li.getDocumentsMatchingQuery(c,e,t?i:Mt.min(),t?u:Ut())).next(p=>(JC(r,vI(e),p),{documents:p,Hi:u})))}function YC(n,e){const t=Ge(n),r=Ge(t.Cs),i=t.Ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",u=>r.se(u,e).next(c=>c?c.target:null))}function QC(n,e){const t=Ge(n),r=t.Ki.get(e)||Mt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,Bv(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(JC(t,e,i),i))}function JC(n,e,t){let r=n.Ki.get(e)||Mt.min();t.forEach((i,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ki.set(e,r)}function o(){return o=(0,Ee.Z)(function*(n,e,t,r){const i=Ge(n);let u=Ut(),c=os();for(const I of t){const T=e.Ji(I.metadata.name);I.document&&(u=u.add(T));const M=e.Yi(I);M.setReadTime(e.Xi(I.metadata.readTime)),c=c.insert(T,M)}const p=i.Gi.newChangeBuffer({trackRemovals:!0}),_=yield Qp(i,(I=r,ki(Eh(Jt.fromString(`__bundle__/docs/${I}`)))));var I;return i.persistence.runTransaction("Apply bundle documents","readwrite",I=>ZC(I,p,c).next(T=>(p.apply(I),T)).next(T=>i.Cs.removeMatchingKeysForTargetId(I,_.targetId).next(()=>i.Cs.addMatchingKeys(I,u,_.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(I,T.Wi,T.zi)).next(()=>T.Wi)))}),o.apply(this,arguments)}function a(n,e){return l.apply(this,arguments)}function l(){return l=(0,Ee.Z)(function*(n,e,t=Ut()){const r=yield Qp(n,ki($p(e.bundledQuery))),i=Ge(n);return i.persistence.runTransaction("Save named query","readwrite",u=>{const c=Yr(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.Ns.saveNamedQuery(u,e);const p=r.withResumeToken(Ar.EMPTY_BYTE_STRING,c);return i.Ui=i.Ui.insert(p.targetId,p),i.Cs.updateTargetData(u,p).next(()=>i.Cs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>i.Cs.addMatchingKeys(u,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(u,e))})}),l.apply(this,arguments)}function d(n,e){return`firestore_clients_${n}_${e}`}function m(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function v(n,e){return`firestore_targets_${n}_${e}`}class w{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let u,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(u=new Ne(i.error.code,i.error.message))),c?new w(e,t,i.state,u):(Fn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class D{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(i=new Ne(r.error.code,r.error.message))),u?new D(e,r.state,i):(Fn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class S{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,u=Op();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=Wv(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return i?new S(e,u):(Fn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class N{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new N(t.clientId,t.onlineState):(Fn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class k{constructor(){this.activeTargetIds=Op()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class H{constructor(e,t,r,i,u){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Wn(Vt),this.started=!1,this.cr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ar=d(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new k),this.lr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(p){return`firestore_bundle_loaded_v2_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const u=e.getItem(d(e.persistenceKey,i));if(u){const c=S.Zi(i,u);c&&(e.ur=e.ur.insert(c.clientId,c))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(v(this.persistenceKey,e));if(r){const i=D.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(v(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Re("SharedClientState","READ",e,t),t}setItem(e,t){Re("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Re("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Re("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void Fn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,Ee.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(u){let c=Pi.at;if(null!=u)try{const p=JSON.parse(u);St("number"==typeof p),c=p}catch(p){Fn("SharedClientState","Failed to read sequence number from WebStorage",p)}return c}(r.newValue);i!==Pi.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Or(r.newValue);yield Promise.all(i.map(u=>t.syncEngine.Mr(u)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new w(this.currentUser,e,t,r),u=m(this.persistenceKey,this.currentUser,e);this.setItem(u,i.tr())}Er(e){const t=m(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=v(this.persistenceKey,e),u=new D(e,t,r);this.setItem(i,u.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return S.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return w.Zi(new Zr(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return D.Zi(i,t)}yr(e){return N.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,Ee.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Re("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),u=this.Ir(r),c=[],p=[];return u.forEach(_=>{i.has(_)||c.push(_)}),i.forEach(_=>{u.has(_)||p.push(_)}),this.syncEngine.Br(c,p).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=Op();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class Y{constructor(){this.Lr=new k,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new k,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class ye{qr(e){}shutdown(){}}class Fe{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const He={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class tt{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class Me extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,i,u){const c=this.ho(e,t);Re("RestConnection","Sending: ",c,r);const p={};return this.lo(p,i,u),this.fo(e,c,p,r).then(_=>(Re("RestConnection","Received: ",_),_),_=>{throw _n("RestConnection",`${e} failed with error: `,_,"url: ",c,"request:",r),_})}_o(e,t,r,i,u,c){return this.ao(e,t,r,i,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+ch,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,u)=>e[u]=i),r&&r.headers.forEach((i,u)=>e[u]=i)}ho(e,t){return`${this.oo}/v1/${t}:${He[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((u,c)=>{const p=new jS;p.setWithCredentials(!0),p.listenOnce(BS.COMPLETE,()=>{var I;try{switch(p.getLastErrorCode()){case hl.NO_ERROR:const T=p.getResponseJson();Re("Connection","XHR received:",JSON.stringify(T)),u(T);break;case hl.TIMEOUT:Re("Connection",'RPC "'+e+'" timed out'),c(new Ne(ce.DEADLINE_EXCEEDED,"Request time out"));break;case hl.HTTP_ERROR:const M=p.getStatus();if(Re("Connection",'RPC "'+e+'" failed with status:',M,"response text:",p.getResponseText()),M>0){let L=p.getResponseJson();Array.isArray(L)&&(L=L[0]);const U=null===(I=L)||void 0===I?void 0:I.error;if(U&&U.status&&U.message){const z=function(de){const Te=de.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(Te)>=0?Te:ce.UNKNOWN}(U.status);c(new Ne(z,U.message))}else c(new Ne(ce.UNKNOWN,"Server responded with status "+p.getStatus()))}else c(new Ne(ce.UNAVAILABLE,"Connection failed."));break;default:et()}}finally{Re("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(i);p.send(t,"POST",_,r,15)})}wo(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=tC(),c=nC(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(p.xmlHttpFactory=new Zw({})),this.lo(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const _=i.join("");Re("Connection","Creating WebChannel: "+_,p);const I=u.createWebChannel(_,p);let T=!1,M=!1;const L=new tt({Hr:z=>{M?Re("Connection","Not sending because WebChannel is closed:",z):(T||(Re("Connection","Opening WebChannel transport."),I.open(),T=!0),Re("Connection","WebChannel sending:",z),I.send(z))},Jr:()=>I.close()}),U=(z,de,Te)=>{z.listen(de,nt=>{try{Te(nt)}catch(ot){setTimeout(()=>{throw ot},0)}})};return U(I,hp.EventType.OPEN,()=>{M||Re("Connection","WebChannel transport opened.")}),U(I,hp.EventType.CLOSE,()=>{M||(M=!0,Re("Connection","WebChannel transport closed"),L.io())}),U(I,hp.EventType.ERROR,z=>{M||(M=!0,_n("Connection","WebChannel transport errored:",z),L.io(new Ne(ce.UNAVAILABLE,"The operation could not be completed")))}),U(I,hp.EventType.MESSAGE,z=>{var de;if(!M){const Te=z.data[0];St(!!Te);const nt=Te,ot=nt.error||(null===(de=nt[0])||void 0===de?void 0:de.error);if(ot){Re("Connection","WebChannel received error:",ot);const gt=ot.status;let at=function(Nt){const an=Sr[Nt];if(void 0!==an)return c0(an)}(gt),Ct=ot.message;void 0===at&&(at=ce.INTERNAL,Ct="Unknown error status: "+gt+" with message "+ot.message),M=!0,L.io(new Ne(at,Ct)),I.close()}else Re("Connection","WebChannel received:",Te),L.ro(Te)}}),U(c,Fv.STAT_EVENT,z=>{z.stat===rC.PROXY?Re("Connection","Detected buffering proxy"):z.stat===rC.NOPROXY&&Re("Connection","Detected no buffering proxy")}),setTimeout(()=>{L.so()},0),L}}function mt(){return"undefined"!=typeof window?window:null}function qt(){return"undefined"!=typeof document?document:null}function tn(n){return new h0(n,!0)}class Li{constructor(e,t,r=1e3,i=1.5,u=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&Re("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class Al{constructor(e,t,r,i,u,c,p,_){this.Hs=e,this.vo=r,this.Vo=i,this.connection=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=p,this.listener=_,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Li(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,Ee.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,Ee.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,Ee.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(Fn(t.toString()),Fn("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new Ne(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,Ee.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Re("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class V0 extends Al{constructor(e,t,r,i,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.It=u}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function xC(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:et(),i=e.targetChange.targetIds||[],u=function(_,I){return _.gt?(St(void 0===I||"string"==typeof I),Ar.fromBase64String(I||"")):(St(void 0===I||I instanceof Uint8Array),Ar.fromUint8Array(I||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,p=c&&function(_){const I=void 0===_.code?ce.UNKNOWN:c0(_.code);return new Ne(I,_.message||"")}(c);t=new vi(r,i,u,p||null)}else if("documentChange"in e){const r=e.documentChange,i=Ts(n,r.document.name),u=Yr(r.document.updateTime),c=new lr({mapValue:{fields:r.document.fields}}),p=Nn.newFoundDocument(i,u,c);t=new kp(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,i=Ts(n,r.document),u=r.readTime?Yr(r.readTime):Mt.min(),c=Nn.newNoDocument(i,u);t=new kp([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=Ts(n,r.document);t=new kp([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return et();{const r=e.filter,u=new IC(r.count||0);t=new xI(r.targetId,u)}}var _;return t}(this.It,e),r=function(i){if(!("targetChange"in i))return Mt.min();const u=i.targetChange;return u.targetIds&&u.targetIds.length?Mt.min():u.readTime?Yr(u.readTime):Mt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=Mh(this.It),t.addTarget=function(i,u){let c;const p=u.target;return c=bp(p)?{documents:PI(i,p)}:{query:m0(i,p)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?c.resumeToken=f0(i,u.resumeToken):u.snapshotVersion.compareTo(Mt.min())>0&&(c.readTime=Lp(i,u.snapshotVersion.toTimestamp())),c}(this.It,e);const r=function kI(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return et()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=Mh(this.It),t.removeTarget=e,this.Bo(t)}}class U0 extends Al{constructor(e,t,r,i,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.It=u,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(St(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function qS(n,e){return n&&n.length>0?(St(void 0!==e),n.map(t=>function(r,i){let u=Yr(r.updateTime?r.updateTime:i);return u.isEqual(Mt.min())&&(u=Yr(i)),new Da(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Yr(e.commitTime);return this.listener.Zo(r,t)}return St(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Mh(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>kc(this.It,r))};this.Bo(t)}}class B0 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.It=i,this.nu=!1}su(){if(this.nu)throw new Ne(ce.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.connection.ao(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ne(ce.UNKNOWN,i.toString())})}_o(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,c])=>this.connection._o(e,t,r,u,c,i)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ne(ce.UNKNOWN,u.toString())})}terminate(){this.nu=!0}}class H0{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Fn(t),this.ou=!1):Re("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class $0{constructor(e,t,r,i,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=u,this.mu.qr(p=>{r.enqueueAndForget((0,Ee.Z)(function*(){var _;Gc(c)&&(Re("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,Ee.Z)(function*(I){const T=Ge(I);T._u.add(4),yield My(T),T.gu.set("Unknown"),T._u.delete(4),yield $c(T)}),function(I){return _.apply(this,arguments)})(c))}))}),this.gu=new H0(r,i)}}function $c(n){return eg.apply(this,arguments)}function eg(){return eg=(0,Ee.Z)(function*(n){if(Gc(n))for(const e of n.wu)yield e(!0)}),eg.apply(this,arguments)}function My(n){return XC.apply(this,arguments)}function XC(){return XC=(0,Ee.Z)(function*(n){for(const e of n.wu)yield e(!1)}),XC.apply(this,arguments)}function yb(n,e){const t=Ge(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),nT(t)?tT(t):Ny(t).ko()&&eT(t,e))}function G0(n,e){const t=Ge(n),r=Ny(t);t.du.delete(e),r.ko()&&cM(t,e),0===t.du.size&&(r.ko()?r.Fo():Gc(t)&&t.gu.set("Unknown"))}function eT(n,e){n.yu.Mt(e.targetId),Ny(n).zo(e)}function cM(n,e){n.yu.Mt(e),Ny(n).Ho(e)}function tT(n){n.yu=new CC({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),Ny(n).start(),n.gu.uu()}function nT(n){return Gc(n)&&!Ny(n).No()&&n.du.size>0}function Gc(n){return 0===Ge(n)._u.size}function dM(n){n.yu=void 0}function _R(n){return rT.apply(this,arguments)}function rT(){return rT=(0,Ee.Z)(function*(n){n.du.forEach((e,t)=>{eT(n,e)})}),rT.apply(this,arguments)}function vR(n,e){return iT.apply(this,arguments)}function iT(){return iT=(0,Ee.Z)(function*(n,e){dM(n),nT(n)?(n.gu.hu(e),tT(n)):n.gu.set("Unknown")}),iT.apply(this,arguments)}function ER(n,e,t){return sT.apply(this,arguments)}function sT(){return sT=(0,Ee.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof vi&&2===e.state&&e.cause)try{yield(r=(0,Ee.Z)(function*(i,u){const c=u.cause;for(const p of u.targetIds)i.du.has(p)&&(yield i.remoteSyncer.rejectListen(p,c),i.du.delete(p),i.yu.removeTarget(p))}),function(i,u){return r.apply(this,arguments)})(n,e)}catch(r){Re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield _b(n,r)}else if(e instanceof kp?n.yu.Gt(e):e instanceof xI?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(Mt.min()))try{const r=yield mb(n.localStore);t.compareTo(r)>=0&&(yield function(i,u){const c=i.yu.te(u);return c.targetChanges.forEach((p,_)=>{if(p.resumeToken.approximateByteSize()>0){const I=i.du.get(_);I&&i.du.set(_,I.withResumeToken(p.resumeToken,u))}}),c.targetMismatches.forEach(p=>{const _=i.du.get(p);if(!_)return;i.du.set(p,_.withResumeToken(Ar.EMPTY_BYTE_STRING,_.snapshotVersion)),cM(i,p);const I=new Fc(_.target,p,1,_.sequenceNumber);eT(i,I)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Re("RemoteStore","Failed to raise snapshot:",r),yield _b(n,r)}var r}),sT.apply(this,arguments)}function _b(n,e,t){return oT.apply(this,arguments)}function oT(){return oT=(0,Ee.Z)(function*(n,e,t){if(!gl(e))throw e;n._u.add(1),yield My(n),n.gu.set("Offline"),t||(t=()=>mb(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ee.Z)(function*(){Re("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield $c(n)}))}),oT.apply(this,arguments)}function hM(n,e){return e().catch(t=>_b(n,t,e))}function xy(n){return aT.apply(this,arguments)}function aT(){return aT=(0,Ee.Z)(function*(n){const e=Ge(n),t=Uh(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;wR(e);)try{const i=yield lM(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,IR(e,i)}catch(i){yield _b(e,i)}fM(e)&&pM(e)}),aT.apply(this,arguments)}function wR(n){return Gc(n)&&n.fu.length<10}function IR(n,e){n.fu.push(e);const t=Uh(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function fM(n){return Gc(n)&&!Uh(n).No()&&n.fu.length>0}function pM(n){Uh(n).start()}function bR(n){return uT.apply(this,arguments)}function uT(){return uT=(0,Ee.Z)(function*(n){Uh(n).eu()}),uT.apply(this,arguments)}function DR(n){return lT.apply(this,arguments)}function lT(){return lT=(0,Ee.Z)(function*(n){const e=Uh(n);for(const t of n.fu)e.Xo(t.mutations)}),lT.apply(this,arguments)}function CR(n,e,t){return cT.apply(this,arguments)}function cT(){return cT=(0,Ee.Z)(function*(n,e,t){const r=n.fu.shift(),i=zI.from(r,e,t);yield hM(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield xy(n)}),cT.apply(this,arguments)}function TR(n,e){return dT.apply(this,arguments)}function dT(){return dT=(0,Ee.Z)(function*(n,e){var t;e&&Uh(n).Yo&&(yield(t=(0,Ee.Z)(function*(r,i){if(fy(u=i.code)&&u!==ce.ABORTED){const c=r.fu.shift();Uh(r).Mo(),yield hM(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield xy(r)}var u}),function(r,i){return t.apply(this,arguments)})(n,e)),fM(n)&&pM(n)}),dT.apply(this,arguments)}function gM(n,e){return hT.apply(this,arguments)}function hT(){return hT=(0,Ee.Z)(function*(n,e){const t=Ge(n);t.asyncQueue.verifyOperationInProgress(),Re("RemoteStore","RemoteStore received new credentials");const r=Gc(t);t._u.add(3),yield My(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield $c(t)}),hT.apply(this,arguments)}function fT(n,e){return pT.apply(this,arguments)}function pT(){return pT=(0,Ee.Z)(function*(n,e){const t=Ge(n);e?(t._u.delete(2),yield $c(t)):e||(t._u.add(2),yield My(t),t.gu.set("Unknown"))}),pT.apply(this,arguments)}function Ny(n){return n.pu||(n.pu=function(e,t,r){const i=Ge(e);return i.su(),new V0(t,i.connection,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:_R.bind(null,n),Zr:vR.bind(null,n),Wo:ER.bind(null,n)}),n.wu.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.pu.Mo(),nT(n)?tT(n):n.gu.set("Unknown")):(yield n.pu.stop(),dM(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Uh(n){return n.Iu||(n.Iu=function(e,t,r){const i=Ge(e);return i.su(),new U0(t,i.connection,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:bR.bind(null,n),Zr:TR.bind(null,n),tu:DR.bind(null,n),Zo:CR.bind(null,n)}),n.wu.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.Iu.Mo(),yield xy(n)):(yield n.Iu.stop(),n.fu.length>0&&(Re("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class gT{constructor(e,t,r,i,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=u,this.deferred=new _r,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,u){const c=Date.now()+r,p=new gT(e,t,c,i,u);return p.start(r),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ne(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ry(n,e){if(Fn("AsyncQueue",`${e}: ${n}`),gl(n))return new Ne(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class Oy{constructor(e){this.comparator=e?(t,r)=>e(t,r)||$e.comparator(t.key,r.key):(t,r)=>$e.comparator(t.key,r.key),this.keyedMap=Rp(),this.sortedSet=new Wn(this.comparator)}static emptySet(e){return new Oy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Oy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(!i.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Oy;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class mM{constructor(){this.Tu=new Wn($e.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):et():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Py{constructor(e,t,r,i,u,c,p,_,I){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=p,this.excludesMetadataChanges=_,this.hasCachedResults=I}static fromInitialDocuments(e,t,r,i,u){const c=[];return t.forEach(p=>{c.push({type:0,doc:p})}),new Py(e,t,Oy.emptySet(t),c,r,i,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ap(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class AR{constructor(){this.Au=void 0,this.listeners=[]}}class SR{constructor(){this.queries=new Ca(e=>_I(e),Ap),this.onlineState="Unknown",this.Ru=new Set}}function mT(n,e){return yT.apply(this,arguments)}function yT(){return yT=(0,Ee.Z)(function*(n,e){const t=Ge(n),r=e.query;let i=!1,u=t.queries.get(r);if(u||(i=!0,u=new AR),i)try{u.Au=yield t.onListen(r)}catch(c){const p=Ry(c,`Initialization of query '${e0(e.query)}' failed`);return void e.onError(p)}t.queries.set(r,u),u.listeners.push(e),e.bu(t.onlineState),u.Au&&e.Pu(u.Au)&&ET(t)}),yT.apply(this,arguments)}function _T(n,e){return vT.apply(this,arguments)}function vT(){return vT=(0,Ee.Z)(function*(n,e){const t=Ge(n),r=e.query;let i=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),i=0===u.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),vT.apply(this,arguments)}function MR(n,e){const t=Ge(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const p of c.listeners)p.Pu(i)&&(r=!0);c.Au=i}}r&&ET(t)}function xR(n,e,t){const r=Ge(n),i=r.queries.get(e);if(i)for(const u of i.listeners)u.onError(t);r.queries.delete(e)}function ET(n){n.Ru.forEach(e=>{e.next()})}class wT{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Py(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Py.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class NR{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class yM{constructor(e){this.It=e}Ji(e){return Ts(this.It,e)}Yi(e){return e.metadata.exists?Bp(this.It,e.document,!1):Nn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Yr(e)}}class RR{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=_M(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=Jt.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new yM(this.It);for(const i of e)if(i.metadata.queries){const u=r.Ji(i.metadata.name);for(const c of i.metadata.queries){const p=(t.get(c)||Ut()).add(u);t.set(c,p)}}return t}complete(){var e=this;return(0,Ee.Z)(function*(){const t=yield function s(n,e,t,r){return o.apply(this,arguments)}(e.localStore,new yM(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const i of e.queries)yield a(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function _M(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class vM{constructor(e){this.key=e}}class EM{constructor(e){this.key=e}}class wM{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Ut(),this.mutatedKeys=Ut(),this.Gu=EI(e),this.Qu=new Oy(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new mM,i=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,c=i,p=!1;const _="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,I="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((T,M)=>{const L=i.get(T),U=t0(this.query,M)?M:null,z=!!L&&this.mutatedKeys.has(L.key),de=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let Te=!1;L&&U?L.data.isEqual(U.data)?z!==de&&(r.track({type:3,doc:U}),Te=!0):this.Hu(L,U)||(r.track({type:2,doc:U}),Te=!0,(_&&this.Gu(U,_)>0||I&&this.Gu(U,I)<0)&&(p=!0)):!L&&U?(r.track({type:0,doc:U}),Te=!0):L&&!U&&(r.track({type:1,doc:L}),Te=!0,(_||I)&&(p=!0)),Te&&(U?(c=c.add(U),u=de?u.add(T):u.delete(T)):(c=c.delete(T),u=u.delete(T)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const T="F"===this.query.limitType?c.last():c.first();c=c.delete(T.key),u=u.delete(T.key),r.track({type:1,doc:T})}return{Qu:c,zu:r,$i:p,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Eu();u.sort((I,T)=>function(M,L){const U=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return et()}};return U(M)-U(L)}(I.type,T.type)||this.Gu(I.doc,T.doc)),this.Ju(r);const c=t?this.Yu():[],p=0===this.Ku.size&&this.current?1:0,_=p!==this.qu;return this.qu=p,0!==u.length||_?{snapshot:new Py(this.query,e.Qu,i,u,e.mutatedKeys,0===p,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:c}:{Xu:c}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new mM,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Ut(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new EM(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new vM(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=Ut();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return Py.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class OR{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class PR{constructor(e){this.key=e,this.nc=!1}}class kR{constructor(e,t,r,i,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.sc={},this.ic=new Ca(p=>_I(p),Ap),this.rc=new Map,this.oc=new Set,this.uc=new Wn($e.comparator),this.cc=new Map,this.ac=new lb,this.hc={},this.lc=new Map,this.fc=kh.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function FR(n,e){return IT.apply(this,arguments)}function IT(){return IT=(0,Ee.Z)(function*(n,e){const t=qT(n);let r,i;const u=t.ic.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),i=u.view.ec();else{const c=yield Qp(t.localStore,ki(e));t.isPrimaryClient&&yb(t.remoteStore,c);const p=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield bT(t,e,r,"current"===p,c.resumeToken)}return i}),IT.apply(this,arguments)}function bT(n,e,t,r,i){return DT.apply(this,arguments)}function DT(){return DT=(0,Ee.Z)(function*(n,e,t,r,i){n._c=(M,L,U)=>{return(z=(0,Ee.Z)(function*(de,Te,nt,ot){let gt=Te.view.Wu(nt);gt.$i&&(gt=yield L0(de.localStore,Te.query,!1).then(({documents:Nt})=>Te.view.Wu(Nt,gt)));const at=ot&&ot.targetChanges.get(Te.targetId),Ct=Te.view.applyChanges(gt,de.isPrimaryClient,at);return PT(de,Te.targetId,Ct.Xu),Ct.snapshot}),function(de,Te,nt,ot){return z.apply(this,arguments)})(n,M,L,U);var z};const u=yield L0(n.localStore,e,!0),c=new wM(e,u.Hi),p=c.Wu(u.documents),_=Pp.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),I=c.applyChanges(p,n.isPrimaryClient,_);PT(n,t,I.Xu);const T=new OR(e,t,c);return n.ic.set(e,T),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),I.snapshot}),DT.apply(this,arguments)}function LR(n,e){return CT.apply(this,arguments)}function CT(){return CT=(0,Ee.Z)(function*(n,e){const t=Ge(n),r=t.ic.get(e),i=t.rc.get(r.targetId);if(i.length>1)return t.rc.set(r.targetId,i.filter(u=>!Ap(u,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Jp(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),G0(t.remoteStore,r.targetId),ky(t,r.targetId)}).catch(pl))):(ky(t,r.targetId),yield Jp(t.localStore,r.targetId,!0))}),CT.apply(this,arguments)}function TT(){return TT=(0,Ee.Z)(function*(n,e,t){const r=zT(n);try{const i=yield function(u,c){const p=Ge(u),_=Ln.now(),I=c.reduce((L,U)=>L.add(U.key),Ut());let T,M;return p.persistence.runTransaction("Locally write mutations","readwrite",L=>{let U=os(),z=Ut();return p.Gi.getEntries(L,I).next(de=>{U=de,U.forEach((Te,nt)=>{nt.isValidDocument()||(z=z.add(Te))})}).next(()=>p.localDocuments.getOverlayedDocuments(L,U)).next(de=>{T=de;const Te=[];for(const nt of c){const ot=dy(nt,T.get(nt.key).overlayedDocument);null!=ot&&Te.push(new du(nt.key,ot,dI(ot.value.mapValue),Vn.exists(!0)))}return p.mutationQueue.addMutationBatch(L,_,Te,c)}).next(de=>{M=de;const Te=de.applyToLocalDocumentSet(T,z);return p.documentOverlayCache.saveOverlays(L,de.batchId,Te)})}).then(()=>({batchId:M.batchId,changes:SI(T)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,c,p){let _=u.hc[u.currentUser.toKey()];_||(_=new Wn(Vt)),_=_.insert(c,p),u.hc[u.currentUser.toKey()]=_}(r,i.batchId,t),yield qc(r,i.changes),yield xy(r.remoteStore)}catch(i){const u=Ry(i,"Failed to persist write");t.reject(u)}}),TT.apply(this,arguments)}function IM(n,e){return AT.apply(this,arguments)}function AT(){return AT=(0,Ee.Z)(function*(n,e){const t=Ge(n);try{const r=yield uM(t.localStore,e);e.targetChanges.forEach((i,u)=>{const c=t.cc.get(u);c&&(St(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.nc=!0:i.modifiedDocuments.size>0?St(c.nc):i.removedDocuments.size>0&&(St(c.nc),c.nc=!1))}),yield qc(t,r,e)}catch(r){yield pl(r)}}),AT.apply(this,arguments)}function bM(n,e,t){const r=Ge(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ic.forEach((u,c)=>{const p=c.view.bu(e);p.snapshot&&i.push(p.snapshot)}),function(u,c){const p=Ge(u);p.onlineState=c;let _=!1;p.queries.forEach((I,T)=>{for(const M of T.listeners)M.bu(c)&&(_=!0)}),_&&ET(p)}(r.eventManager,e),i.length&&r.sc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function UR(n,e,t){return ST.apply(this,arguments)}function ST(){return ST=(0,Ee.Z)(function*(n,e,t){const r=Ge(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.cc.get(e),u=i&&i.key;if(u){let c=new Wn($e.comparator);c=c.insert(u,Nn.newNoDocument(u,Mt.min()));const p=Ut().add(u),_=new Ah(Mt.min(),new Map,new vn(Vt),c,p);yield IM(r,_),r.uc=r.uc.remove(u),r.cc.delete(e),kT(r)}else yield Jp(r.localStore,e,!1).then(()=>ky(r,e,t)).catch(pl)}),ST.apply(this,arguments)}function BR(n,e){return MT.apply(this,arguments)}function MT(){return MT=(0,Ee.Z)(function*(n,e){const t=Ge(n),r=e.batch.batchId;try{const i=yield KC(t.localStore,e);OT(t,r,null),RT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield qc(t,i)}catch(i){yield pl(i)}}),MT.apply(this,arguments)}function jR(n,e,t){return xT.apply(this,arguments)}function xT(){return xT=(0,Ee.Z)(function*(n,e,t){const r=Ge(n);try{const i=yield function(u,c){const p=Ge(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let I;return p.mutationQueue.lookupMutationBatch(_,c).next(T=>(St(null!==T),I=T.keys(),p.mutationQueue.removeMutationBatch(_,T))).next(()=>p.mutationQueue.performConsistencyCheck(_)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(_,I,c)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,I)).next(()=>p.localDocuments.getDocuments(_,I))})}(r.localStore,e);OT(r,e,t),RT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield qc(r,i)}catch(i){yield pl(i)}}),xT.apply(this,arguments)}function NT(){return NT=(0,Ee.Z)(function*(n,e){const t=Ge(n);Gc(t.remoteStore)||Re("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=Ge(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",p=>c.mutationQueue.getHighestUnacknowledgedBatchId(p))}(t.localStore);if(-1===r)return void e.resolve();const i=t.lc.get(r)||[];i.push(e),t.lc.set(r,i)}catch(r){const i=Ry(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),NT.apply(this,arguments)}function RT(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function OT(n,e,t){const r=Ge(n);let i=r.hc[r.currentUser.toKey()];if(i){const u=i.get(e);u&&(t?u.reject(t):u.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function ky(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||DM(n,r)})}function DM(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(G0(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),kT(n))}function PT(n,e,t){for(const r of t)r instanceof vM?(n.ac.addReference(r.key,e),$R(n,r)):r instanceof EM?(Re("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||DM(n,r.key)):et()}function $R(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(Re("SyncEngine","New document in limbo: "+t),n.oc.add(r),kT(n))}function kT(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new $e(Jt.fromString(e)),r=n.fc.next();n.cc.set(r,new PR(t)),n.uc=n.uc.insert(t,r),yb(n.remoteStore,new Fc(ki(Eh(t.path)),r,2,Pi.at))}}function qc(n,e,t){return FT.apply(this,arguments)}function FT(){return FT=(0,Ee.Z)(function*(n,e,t){const r=Ge(n),i=[],u=[],c=[];var p;r.ic.isEmpty()||(r.ic.forEach((p,_)=>{c.push(r._c(_,e,t).then(I=>{if((I||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,(null==I?void 0:I.fromCache)?"not-current":"current"),I){i.push(I);const T=Ay.Ci(_.targetId,I);u.push(T)}}))}),yield Promise.all(c),r.sc.Wo(i),yield(p=(0,Ee.Z)(function*(_,I){const T=Ge(_);try{yield T.persistence.runTransaction("notifyLocalViewChanges","readwrite",M=>re.forEach(I,L=>re.forEach(L.Si,U=>T.persistence.referenceDelegate.addReference(M,L.targetId,U)).next(()=>re.forEach(L.Di,U=>T.persistence.referenceDelegate.removeReference(M,L.targetId,U)))))}catch(M){if(!gl(M))throw M;Re("LocalStore","Failed to update sequence numbers: "+M)}for(const M of I){const L=M.targetId;if(!M.fromCache){const U=T.Ui.get(L),de=U.withLastLimboFreeSnapshotVersion(U.snapshotVersion);T.Ui=T.Ui.insert(L,de)}}}),function(_,I){return p.apply(this,arguments)})(r.localStore,u))}),FT.apply(this,arguments)}function GR(n,e){return LT.apply(this,arguments)}function LT(){return LT=(0,Ee.Z)(function*(n,e){const t=Ge(n);if(!t.currentUser.isEqual(e)){Re("SyncEngine","User change. New user:",e.toKey());const r=yield WC(t.localStore,e);t.currentUser=e,(i=t).lc.forEach(c=>{c.forEach(p=>{p.reject(new Ne(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield qc(t,r.ji)}var i}),LT.apply(this,arguments)}function qR(n,e){const t=Ge(n),r=t.cc.get(e);if(r&&r.nc)return Ut().add(r.key);{let i=Ut();const u=t.rc.get(e);if(!u)return i;for(const c of u){const p=t.ic.get(c);i=i.unionWith(p.view.ju)}return i}}function zR(n,e){return VT.apply(this,arguments)}function VT(){return VT=(0,Ee.Z)(function*(n,e){const t=Ge(n),r=yield L0(t.localStore,e.query,!0),i=e.view.tc(r);return t.isPrimaryClient&&PT(t,e.targetId,i.Xu),i}),VT.apply(this,arguments)}function WR(n,e){return UT.apply(this,arguments)}function UT(){return UT=(0,Ee.Z)(function*(n,e){const t=Ge(n);return QC(t.localStore,e).then(r=>qc(t,r))}),UT.apply(this,arguments)}function KR(n,e,t,r){return BT.apply(this,arguments)}function BT(){return BT=(0,Ee.Z)(function*(n,e,t,r){const i=Ge(n),u=yield function(c,p){const _=Ge(c),I=Ge(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",T=>I.Tn(T,p).next(M=>M?_.localDocuments.getDocuments(T,M):re.resolve(null)))}(i.localStore,e);var p;null!==u?("pending"===t?yield xy(i.remoteStore):"acknowledged"===t||"rejected"===t?(OT(i,e,r||null),RT(i,e),p=e,Ge(Ge(i.localStore).mutationQueue).An(p)):et(),yield qc(i,u)):Re("SyncEngine","Cannot apply mutation batch with id: "+e)}),BT.apply(this,arguments)}function jT(){return jT=(0,Ee.Z)(function*(n,e){const t=Ge(n);if(qT(t),zT(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield CM(t,r.toArray());t.dc=!0,yield fT(t.remoteStore,!0);for(const u of i)yb(t.remoteStore,u)}else if(!1===e&&!1!==t.dc){const r=[];let i=Promise.resolve();t.rc.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(ky(t,c),Jp(t.localStore,c,!0))),G0(t.remoteStore,c)}),yield i,yield CM(t,r),function(u){const c=Ge(u);c.cc.forEach((p,_)=>{G0(c.remoteStore,_)}),c.ac.fs(),c.cc=new Map,c.uc=new Wn($e.comparator)}(t),t.dc=!1,yield fT(t.remoteStore,!1)}}),jT.apply(this,arguments)}function CM(n,e,t){return HT.apply(this,arguments)}function HT(){return HT=(0,Ee.Z)(function*(n,e,t){const r=Ge(n),i=[],u=[];for(const c of e){let p;const _=r.rc.get(c);if(_&&0!==_.length){p=yield Qp(r.localStore,ki(_[0]));for(const I of _){const T=r.ic.get(I),M=yield zR(r,T);M.snapshot&&u.push(M.snapshot)}}else{const I=yield YC(r.localStore,c);p=yield Qp(r.localStore,I),yield bT(r,TM(I),c,!1,p.resumeToken)}i.push(p)}return r.sc.Wo(u),i}),HT.apply(this,arguments)}function TM(n){return Xv(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function YR(n){const e=Ge(n);return Ge(Ge(e.localStore).persistence).vi()}function QR(n,e,t,r){return $T.apply(this,arguments)}function $T(){return $T=(0,Ee.Z)(function*(n,e,t,r){const i=Ge(n);if(i.dc)return void Re("SyncEngine","Ignoring unexpected query state notification.");const u=i.rc.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield QC(i.localStore,vI(u[0])),p=Ah.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Ar.EMPTY_BYTE_STRING);yield qc(i,c,p);break}case"rejected":yield Jp(i.localStore,e,!0),ky(i,e,r);break;default:et()}}),$T.apply(this,arguments)}function JR(n,e,t){return GT.apply(this,arguments)}function GT(){return GT=(0,Ee.Z)(function*(n,e,t){const r=qT(n);if(r.dc){for(const i of e){if(r.rc.has(i)){Re("SyncEngine","Adding an already active target "+i);continue}const u=yield YC(r.localStore,i),c=yield Qp(r.localStore,u);yield bT(r,TM(u),c.targetId,!1,c.resumeToken),yb(r.remoteStore,c)}for(const i of t)r.rc.has(i)&&(yield Jp(r.localStore,i,!1).then(()=>{G0(r.remoteStore,i),ky(r,i)}).catch(pl))}}),GT.apply(this,arguments)}function qT(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=IM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=qR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=UR.bind(null,e),e.sc.Wo=MR.bind(null,e.eventManager),e.sc.wc=xR.bind(null,e.eventManager),e}function zT(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=BR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jR.bind(null,e),e}class AM{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ee.Z)(function*(){t.It=tn(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return pb(this.persistence,new Sy,e.initialUser,this.It)}yc(e){return new db(Yp.Bs,this.It)}gc(e){return new Y}terminate(){var e=this;return(0,Ee.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class SM extends AM{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ee.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield zT(r.Ac.syncEngine),yield xy(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return pb(this.persistence,new Sy,e.initialUser,this.It)}Tc(e,t){return new rM(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new dC(t,this.persistence);return new nI(e.asyncQueue,r)}yc(e){const t=fb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?wi.withCacheSize(this.cacheSizeBytes):wi.DEFAULT;return new k0(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,mt(),qt(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new Y}}class eO extends SM{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ee.Z)(function*(){yield t().call(r,e);const i=r.Ac.syncEngine;r.sharedClientState instanceof H&&(r.sharedClientState.syncEngine={Fr:KR.bind(null,i),$r:QR.bind(null,i),Br:JR.bind(null,i),vi:YR.bind(null,i),Mr:WR.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var u=(0,Ee.Z)(function*(c){yield function ZR(n,e){return jT.apply(this,arguments)}(r.Ac.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}gc(e){const t=mt();if(!H.C(t))throw new Ne(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=fb(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new H(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class WT{initialize(e,t){var r=this;return(0,Ee.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>bM(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=GR.bind(null,r.syncEngine),yield fT(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new SR}createDatastore(e){const t=tn(e.databaseInfo.databaseId),r=new Me(e.databaseInfo);return new B0(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,u=p=>bM(this.syncEngine,p,0),c=Fe.C()?new Fe:new ye,new $0(t,r,i,u,c);var t,r,i,u,c}createSyncEngine(e,t){return function(r,i,u,c,p,_,I){const T=new kR(r,i,u,c,p,_);return I&&(T.dc=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ee.Z)(function*(t){const r=Ge(t);Re("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield My(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function KT(n,e,t){if(!t)throw new Ne(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function MM(n,e,t,r){if(!0===e&&!0===r)throw new Ne(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function xM(n){if(!$e.isDocumentKey(n))throw new Ne(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function NM(n){if($e.isDocumentKey(n))throw new Ne(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function vb(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":et()}function nn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ne(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=vb(n);throw new Ne(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function RM(n,e){if(e<=0)throw new Ne(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const OM=new Map;class PM{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ne(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ne(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,MM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class q0{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new PM({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ne(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ne(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new PM(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new oC;switch(t.type){case"gapi":return new lC(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ne(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=OM.get(e);t&&(Re("ComponentProvider","Removing Datastore"),OM.delete(e),t.terminate())}(this),Promise.resolve()}}class Kn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Sl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kn(this.firestore,e,this._key)}}class as{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new as(this.firestore,e,this._query)}}class Sl extends as{constructor(e,t,r){super(e,t,Eh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kn(this.firestore,null,new $e(e))}withConverter(e){return new Sl(this.firestore,e,this._path)}}function FM(n,e,...t){if(n=(0,cn.m9)(n),KT("collection","path",e),n instanceof q0){const r=Jt.fromString(e,...t);return NM(r),new Sl(n,null,r)}{if(!(n instanceof Kn||n instanceof Sl))throw new Ne(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jt.fromString(e,...t));return NM(r),new Sl(n.firestore,null,r)}}function Eb(n,e,...t){if(n=(0,cn.m9)(n),1===arguments.length&&(e=Lv.R()),KT("doc","path",e),n instanceof q0){const r=Jt.fromString(e,...t);return xM(r),new Kn(n,null,new $e(r))}{if(!(n instanceof Kn||n instanceof Sl))throw new Ne(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jt.fromString(e,...t));return xM(r),new Kn(n.firestore,n instanceof Sl?n.converter:null,new $e(r))}}function LM(n,e){return n=(0,cn.m9)(n),e=(0,cn.m9)(e),(n instanceof Kn||n instanceof Sl)&&(e instanceof Kn||e instanceof Sl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function ZT(n,e){return n=(0,cn.m9)(n),e=(0,cn.m9)(e),n instanceof as&&e instanceof as&&n.firestore===e.firestore&&Ap(n._query,e._query)&&n.converter===e.converter}function VM(n,e=10240){let t=0;return{read:()=>(0,Ee.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ee.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class wb{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Fn("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class nO{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new _r,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,Ee.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,Ee.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),i=Number(r);isNaN(i)&&e.Dc(`length string (${r}) is not valid number`);const u=yield e.Cc(i);return new NR(JSON.parse(u),t.length+i)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,Ee.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,Ee.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class sO{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ee.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ne(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Ee.Z)(function*(u,c){const p=Ge(u),_=Mh(p.It)+"/documents",I={documents:c.map(U=>Sh(p.It,U))},T=yield p._o("BatchGetDocuments",_,I,c.length),M=new Map;T.forEach(U=>{const z=function OI(n,e){return"found"in e?function(t,r){St(!!r.found);const i=Ts(t,r.found.name),u=Yr(r.found.updateTime),c=new lr({mapValue:{fields:r.found.fields}});return Nn.newFoundDocument(i,u,c)}(n,e):"missing"in e?function(t,r){St(!!r.missing),St(!!r.readTime);const i=Ts(t,r.missing),u=Yr(r.readTime);return Nn.newNoDocument(i,u)}(n,e):et()}(p.It,U);M.set(z.key.toString(),z)});const L=[];return c.forEach(U=>{const z=M.get(U.toString());St(!!z),L.push(z)}),L}),function(u,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Oc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ee.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const u=$e.fromPath(i);e.mutations.push(new l0(u,e.precondition(u)))}),yield(r=(0,Ee.Z)(function*(i,u){const c=Ge(i),p=Mh(c.It)+"/documents",_={writes:u.map(I=>kc(c.It,I))};yield c.ao("Commit",p,_)}),function(i,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw et();t=Mt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ne(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Mt.min())?Vn.exists(!1):Vn.updateTime(t):Vn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Mt.min()))throw new Ne(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Vn.updateTime(t)}return Vn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class oO{constructor(e,t,r,i,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=u,this.kc=r.maxAttempts,this.xo=new Li(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,Ee.Z)(function*(){const t=new sO(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(u=>{e.Fc(u)}))}).catch(i=>{e.Fc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!Ep(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!fy(t)}return!1}}class aO{constructor(e,t,r,i){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Zr.UNAUTHENTICATED,this.clientId=Lv.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,Ee.Z)(function*(p){Re("FirestoreClient","Received user=",p.uid),yield u.authCredentialListener(p),u.user=p});return function(p){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Re("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,Ee.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ne(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new _r;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Ry(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function UM(n,e){return YT.apply(this,arguments)}function YT(){return YT=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Re("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Ee.Z)(function*(u){r.isEqual(u)||(yield WC(e.localStore,u),r=u)});return function(u){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),YT.apply(this,arguments)}function BM(n,e){return QT.apply(this,arguments)}function QT(){return QT=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield JT(n);Re("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>gM(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,u)=>gM(e.remoteStore,u)),n.onlineComponents=e}),QT.apply(this,arguments)}function JT(n){return XT.apply(this,arguments)}function XT(){return XT=(0,Ee.Z)(function*(n){return n.offlineComponents||(Re("FirestoreClient","Using default OfflineComponentProvider"),yield UM(n,new AM)),n.offlineComponents}),XT.apply(this,arguments)}function Ib(n){return eA.apply(this,arguments)}function eA(){return eA=(0,Ee.Z)(function*(n){return n.onlineComponents||(Re("FirestoreClient","Using default OnlineComponentProvider"),yield BM(n,new WT)),n.onlineComponents}),eA.apply(this,arguments)}function jM(n){return JT(n).then(e=>e.persistence)}function bb(n){return JT(n).then(e=>e.localStore)}function tA(n){return Ib(n).then(e=>e.remoteStore)}function nA(n){return Ib(n).then(e=>e.syncEngine)}function Fy(n){return rA.apply(this,arguments)}function rA(){return rA=(0,Ee.Z)(function*(n){const e=yield Ib(n),t=e.eventManager;return t.onListen=FR.bind(null,e.syncEngine),t.onUnlisten=LR.bind(null,e.syncEngine),t}),rA.apply(this,arguments)}function $M(n,e,t={}){const r=new _r;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(i,u,c,p,_){const I=new wb({next:M=>{u.enqueueAndForget(()=>_T(i,T));const L=M.docs.has(c);!L&&M.fromCache?_.reject(new Ne(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&M.fromCache&&p&&"server"===p.source?_.reject(new Ne(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(M)},error:M=>_.reject(M)}),T=new wT(Eh(c.path),I,{includeMetadataChanges:!0,Nu:!0});return mT(i,T)}(yield Fy(n),n.asyncQueue,e,t,r)})),r.promise}function GM(n,e,t={}){const r=new _r;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(i,u,c,p,_){const I=new wb({next:M=>{u.enqueueAndForget(()=>_T(i,T)),M.fromCache&&"server"===p.source?_.reject(new Ne(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(M)},error:M=>_.reject(M)}),T=new wT(c,I,{includeMetadataChanges:!0,Nu:!0});return mT(i,T)}(yield Fy(n),n.asyncQueue,e,t,r)})),r.promise}class gO{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new Li(this,"async_queue_retry"),this.Wc=()=>{const t=qt();t&&Re("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=qt();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=qt();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new _r;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,Ee.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!gl(t))throw t;Re("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,Fn("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=gT.createAndSchedule(this,e,t,r,u=>this.Yc(u));return this.qc.push(i),i}zc(){this.Kc&&et()}verifyOperationInProgress(){}Xc(){var e=this;return(0,Ee.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function iA(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class mO{constructor(){this._progressObserver={},this._taskCompletionResolver=new _r,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Zn extends q0{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new gO,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||qM(this),this._firestoreClient.terminate()}}function Mr(n){return n._firestoreClient||qM(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function qM(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new uI(n._databaseId,u,n._persistenceKey,(p=t).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,p.useFetchStreams));var u,p;n._firestoreClient=new aO(n._authCredentials,n._appCheckCredentials,n._queue,r)}function zM(n,e,t){const r=new _r;return n.asyncQueue.enqueue((0,Ee.Z)(function*(){try{yield UM(n,t),yield BM(n,e),r.resolve()}catch(i){const u=i;if(!("FirebaseError"===(c=u).name?c.code===ce.FAILED_PRECONDITION||c.code===ce.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw u;_n("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var c})).then(()=>r.promise)}function WM(n){if(n._initialized||n._terminated)throw new Ne(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Ml{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ml(Ar.fromBase64String(e))}catch(t){throw new Ne(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Ml(Ar.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class zc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ne(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class tg{constructor(e){this._methodName=e}}class Db{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ne(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ne(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Vt(this._lat,e._lat)||Vt(this._long,e._long)}}const TO=/^__.*__$/;class AO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new du(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ch(e,this.data,t,this.fieldTransforms)}}class KM{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new du(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ZM(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw et()}}class Cb{constructor(e,t,r,i,u,c){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=i,void 0===u&&this.na(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new Cb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return Sb(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(ZM(this.sa)&&TO.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class SO{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||tn(e)}da(e,t,r,i=!1){return new Cb({sa:e,methodName:t,fa:r,path:zn.emptyPath(),oa:!1,la:i},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function ng(n){const e=n._freezeSettings(),t=tn(n._databaseId);return new SO(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Tb(n,e,t,r,i,u={}){const c=n.da(u.merge||u.mergeFields?2:0,e,t,i);uA("Data must be an object, but it was:",c,r);const p=JM(r,c);let _,I;if(u.merge)_=new Cs(c.fieldMask),I=c.fieldTransforms;else if(u.mergeFields){const T=[];for(const M of u.mergeFields){const L=lA(e,M,t);if(!c.contains(L))throw new Ne(ce.INVALID_ARGUMENT,`Field '${L}' is specified in your field mask but missing from your input data.`);ex(T,L)||T.push(L)}_=new Cs(T),I=c.fieldTransforms.filter(M=>_.covers(M.field))}else _=null,I=c.fieldTransforms;return new AO(new lr(p),_,I)}class z0 extends tg{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof z0}}function YM(n,e,t){return new Cb({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class sA extends tg{_toFieldTransform(e){return new Mp(e.path,new xc)}isEqual(e){return e instanceof sA}}class MO extends tg{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=YM(this,e,!0),r=this._a.map(u=>rg(u,t)),i=new Nc(r);return new Mp(e.path,i)}isEqual(e){return this===e}}class xO extends tg{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=YM(this,e,!0),r=this._a.map(u=>rg(u,t)),i=new Rc(r);return new Mp(e.path,i)}isEqual(e){return this===e}}class NO extends tg{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Ih(e.It,n0(e.It,this.wa));return new Mp(e.path,t)}isEqual(e){return this===e}}function oA(n,e,t,r){const i=n.da(1,e,t);uA("Data must be an object, but it was:",i,r);const u=[],c=lr.empty();au(r,(_,I)=>{const T=Ab(e,_,t);I=(0,cn.m9)(I);const M=i.ca(T);if(I instanceof z0)u.push(T);else{const L=rg(I,M);null!=L&&(u.push(T),c.set(T,L))}});const p=new Cs(u);return new KM(c,p,i.fieldTransforms)}function aA(n,e,t,r,i,u){const c=n.da(1,e,t),p=[lA(e,r,t)],_=[i];if(u.length%2!=0)throw new Ne(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let L=0;L<u.length;L+=2)p.push(lA(e,u[L])),_.push(u[L+1]);const I=[],T=lr.empty();for(let L=p.length-1;L>=0;--L)if(!ex(I,p[L])){const U=p[L];let z=_[L];z=(0,cn.m9)(z);const de=c.ca(U);if(z instanceof z0)I.push(U);else{const Te=rg(z,de);null!=Te&&(I.push(U),T.set(U,Te))}}const M=new Cs(I);return new KM(T,M,c.fieldTransforms)}function QM(n,e,t,r=!1){return rg(t,n.da(r?4:3,e))}function rg(n,e){if(XM(n=(0,cn.m9)(n)))return uA("Unsupported field value:",e,n),JM(n,e);if(n instanceof tg)return function(t,r){if(!ZM(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const i=[];let u=0;for(const c of t){let p=rg(c,r.aa(u));null==p&&(p={nullValue:"NULL_VALUE"}),i.push(p),u++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,cn.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return n0(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Ln.fromDate(t);return{timestampValue:Lp(r.It,i)}}if(t instanceof Ln){const i=new Ln(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Lp(r.It,i)}}if(t instanceof Db)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ml)return{bytesValue:f0(r.It,t._byteString)};if(t instanceof Kn){const i=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(i))throw r.ha(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Vp(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${vb(t)}`)}(n,e)}function JM(n,e){const t={};return iI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):au(n,(r,i)=>{const u=rg(i,e.ra(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function XM(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Ln||n instanceof Db||n instanceof Ml||n instanceof Kn||n instanceof tg)}function uA(n,e,t){if(!XM(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=vb(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function lA(n,e,t){if((e=(0,cn.m9)(e))instanceof zc)return e._internalPath;if("string"==typeof e)return Ab(n,e);throw Sb("Field path arguments must be of type string or ",n,!1,void 0,t)}const RO=new RegExp("[~\\*/\\[\\]]");function Ab(n,e,t){if(e.search(RO)>=0)throw Sb(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new zc(...e.split("."))._internalPath}catch(r){throw Sb(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Sb(n,e,t,r,i){const u=r&&!r.isEmpty(),c=void 0!==i;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let _="";return(u||c)&&(_+=" (found",u&&(_+=` in field ${r}`),c&&(_+=` in document ${i}`),_+=")"),new Ne(ce.INVALID_ARGUMENT,p+n+_)}function ex(n,e){return n.some(t=>t.isEqual(e))}class W0{constructor(e,t,r,i,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Kn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new OO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Mb("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class OO extends W0{data(){return super.data()}}function Mb(n,e){return"string"==typeof e?Ab(n,e):e instanceof zc?e._internalPath:e._delegate._internalPath}function tx(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ne(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class K0{}function Bh(n,...e){for(const t of e)n=t._apply(n);return n}class PO extends K0{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=ng(e.firestore),r=function(i,u,c,p,_,I,T){let M;if(_.isKeyField()){if("array-contains"===I||"array-contains-any"===I)throw new Ne(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${I}' queries on documentId().`);if("in"===I||"not-in"===I){ax(T,I);const U=[];for(const z of T)U.push(ox(p,i,z));M={arrayValue:{values:U}}}else M=ox(p,i,T)}else"in"!==I&&"not-in"!==I&&"array-contains-any"!==I||ax(T,I),M=QM(c,"where",T,"in"===I||"not-in"===I);const L=cr.create(_,I,M);return function(U,z){if(z.dt()){const Te=yI(U);if(null!==Te&&!Te.isEqual(z.field))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Te.toString()}' and '${z.field.toString()}'`);const nt=ly(U);null!==nt&&ux(0,z.field,nt)}const de=function(Te,nt){for(const ot of Te.filters)if(nt.indexOf(ot.op)>=0)return ot.op;return null}(U,function(Te){switch(Te){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(z.op));if(null!==de)throw new Ne(ce.INVALID_ARGUMENT,de===z.op?`Invalid query. You cannot use more than one '${z.op.toString()}' filter.`:`Invalid query. You cannot use '${z.op.toString()}' filters with '${de.toString()}' filters.`)}(i,L),L}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new as(e.firestore,e.converter,function(i,u){const c=i.filters.concat([u]);return new El(i.path,i.collectionGroup,i.explicitOrderBy.slice(),c,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class FO extends K0{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,i,u){if(null!==r.startAt)throw new Ne(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ne(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new _h(i,u);return function(p,_){if(null===ly(p)){const I=yI(p);null!==I&&ux(0,I,_.field)}}(r,c),c}(e._query,this.ma,this.pa);return new as(e.firestore,e.converter,function(r,i){const u=r.explicitOrderBy.concat([i]);return new El(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class nx extends K0{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new as(e.firestore,e.converter,Tp(e._query,this.Ia,this.Ta))}}class rx extends K0{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=sx(e,this.type,this.Ea,this.Aa);return new as(e.firestore,e.converter,(i=t,new El((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class ix extends K0{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=sx(e,this.type,this.Ea,this.Aa);return new as(e.firestore,e.converter,(i=t,new El((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function sx(n,e,t,r){if(t[0]=(0,cn.m9)(t[0]),t[0]instanceof W0)return function(i,u,c,p,_){if(!p)throw new Ne(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const I=[];for(const T of wl(i))if(T.field.isKeyField())I.push(cu(u,p.key));else{const M=p.data.field(T.field);if(zv(M))throw new Ne(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===M){const L=T.field.canonicalString();throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${L}' (used as the orderBy) does not exist.`)}I.push(M)}return new vl(I,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=ng(n.firestore);return function(u,c,p,_,I,T){const M=u.explicitOrderBy;if(I.length>M.length)throw new Ne(ce.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const L=[];for(let U=0;U<I.length;U++){const z=I[U];if(M[U].field.isKeyField()){if("string"!=typeof z)throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof z}`);if(!cy(u)&&-1!==z.indexOf("/"))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${z}' contains a slash.`);const de=u.path.child(Jt.fromString(z));if(!$e.isDocumentKey(de))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${de}' is not because it contains an odd number of segments.`);const Te=new $e(de);L.push(cu(c,Te))}else{const de=QM(p,_,z);L.push(de)}}return new vl(L,T)}(n._query,n.firestore._databaseId,i,e,t,r)}}function ox(n,e,t){if("string"==typeof(t=(0,cn.m9)(t))){if(""===t)throw new Ne(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cy(e)&&-1!==t.indexOf("/"))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Jt.fromString(t));if(!$e.isDocumentKey(r))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return cu(n,new $e(r))}if(t instanceof Kn)return cu(n,t._key);throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vb(t)}.`)}function ax(n,e){if(!Array.isArray(n)||0===n.length)throw new Ne(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ne(ce.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function ux(n,e,t){if(!t.isEqual(e))throw new Ne(ce.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class cA{convertValue(e,t="none"){switch(Cc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Dc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw et()}}convertObject(e,t){const r={};return au(e.fields,(i,u)=>{r[i]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new Db(tr(e.latitude),tr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=aI(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(vp(e));default:return null}}convertTimestamp(e){const t=yl(e);return new Ln(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Jt.fromString(e);St(_0(r));const i=new uu(r.get(1),r.get(3)),u=new $e(r.popFirst(5));return i.isEqual(t)||Fn(`Document ${u} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function xb(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class GO extends cA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ml(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Kn(this.firestore,null,t)}}class ig{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Wc extends W0{constructor(e,t,r,i,u,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Z0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Mb("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Z0 extends Wc{data(e={}){return super.data(e)}}class jh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ig(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Z0(this._firestore,this._userDataWriter,r.key,r,new ig(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ne(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new Z0(r._firestore,r._userDataWriter,c.doc.key,c.doc,new ig(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const p=new Z0(r._firestore,r._userDataWriter,c.doc.key,c.doc,new ig(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,I=-1;return 0!==c.type&&(_=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),I=u.indexOf(c.doc.key)),{type:qO(c.type),doc:p,oldIndex:_,newIndex:I}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function qO(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return et()}}function lx(n,e){return n instanceof Wc&&e instanceof Wc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof jh&&e instanceof jh&&n._firestore===e._firestore&&ZT(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Hh extends cA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ml(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Kn(this.firestore,null,t)}}function cx(n,e,t){n=nn(n,Kn);const r=nn(n.firestore,Zn),i=xb(n.converter,e,t);return Ly(r,[Tb(ng(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Vn.none())])}function dx(n,e,t,...r){n=nn(n,Kn);const i=nn(n.firestore,Zn),u=ng(i);let c;return c="string"==typeof(e=(0,cn.m9)(e))||e instanceof zc?aA(u,"updateDoc",n._key,e,t,r):oA(u,"updateDoc",n._key,e),Ly(i,[c.toMutation(n._key,Vn.exists(!0))])}function hx(n,...e){var t,r,i;n=(0,cn.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||iA(e[c])||(u=e[c],c++);const p={includeMetadataChanges:u.includeMetadataChanges};if(iA(e[c])){const M=e[c];e[c]=null===(t=M.next)||void 0===t?void 0:t.bind(M),e[c+1]=null===(r=M.error)||void 0===r?void 0:r.bind(M),e[c+2]=null===(i=M.complete)||void 0===i?void 0:i.bind(M)}let _,I,T;if(n instanceof Kn)I=nn(n.firestore,Zn),T=Eh(n._key.path),_={next:M=>{e[c]&&e[c](dA(I,n,M))},error:e[c+1],complete:e[c+2]};else{const M=nn(n,as);I=nn(M.firestore,Zn),T=M._query;const L=new Hh(I);_={next:U=>{e[c]&&e[c](new jh(I,L,M,U))},error:e[c+1],complete:e[c+2]},tx(n._query)}return function(M,L,U,z){const de=new wb(z),Te=new wT(L,de,U);return M.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return mT(yield Fy(M),Te)})),()=>{de.bc(),M.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return _T(yield Fy(M),Te)}))}}(Mr(I),T,p,_)}function Ly(n,e){return function(t,r){const i=new _r;return t.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function VR(n,e,t){return TT.apply(this,arguments)}(yield nA(t),r,i)})),i.promise}(Mr(n),e)}function dA(n,e,t){const r=t.docs.get(e._key),i=new Hh(n);return new Wc(n,i,e._key,r,new ig(t.hasPendingWrites,t.fromCache),e.converter)}const tP={maxAttempts:5};class fx{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ng(e)}set(e,t,r){this._verifyNotCommitted();const i=$h(e,this._firestore),u=xb(i.converter,t,r),c=Tb(this._dataReader,"WriteBatch.set",i._key,u,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,Vn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const u=$h(e,this._firestore);let c;return c="string"==typeof(t=(0,cn.m9)(t))||t instanceof zc?aA(this._dataReader,"WriteBatch.update",u._key,t,r,i):oA(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,Vn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=$h(e,this._firestore);return this._mutations=this._mutations.concat(new Oc(t._key,Vn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ne(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function $h(n,e){if((n=(0,cn.m9)(n)).firestore!==e)throw new Ne(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class nP extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ng(e)}get(e){const t=$h(e,this._firestore),r=new GO(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return et();const u=i[0];if(u.isFoundDocument())return new W0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new W0(this._firestore,r,t._key,null,t.converter);throw et()})}set(e,t,r){const i=$h(e,this._firestore),u=xb(i.converter,t,r),c=Tb(this._dataReader,"Transaction.set",i._key,u,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const u=$h(e,this._firestore);let c;return c="string"==typeof(t=(0,cn.m9)(t))||t instanceof zc?aA(this._dataReader,"Transaction.update",u._key,t,r,i):oA(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=$h(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=$h(e,this._firestore),r=new Hh(this._firestore);return super.get(e).then(i=>new Wc(this._firestore,r,t._key,i._document,new ig(!1,!1),t.converter))}}function hA(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ne("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function gx(){if("undefined"==typeof Uint8Array)throw new Ne("unimplemented","Uint8Arrays are not available in this environment.")}function mx(){if(!function oI(){return"undefined"!=typeof atob}())throw new Ne("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){ch=Ju.SDK_VERSION,(0,Ju._registerComponent)(new q_.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const u=t.getProvider("app").getImmediate(),c=new Zn(new fp(t.getProvider("auth-internal")),new ty(t.getProvider("app-check-internal")),function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Ne(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new uu(p.options.projectId,_)}(u,r),u);return i=Object.assign({useFetchStreams:e},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),(0,Ju.registerVersion)(bt,"3.7.3",n),(0,Ju.registerVersion)(bt,"3.7.3","esm2017")}();class Y0{constructor(e){this._delegate=e}static fromBase64String(e){return mx(),new Y0(Ml.fromBase64String(e))}static fromUint8Array(e){return gx(),new Y0(Ml.fromUint8Array(e))}toBase64(){return mx(),this._delegate.toBase64()}toUint8Array(){return gx(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function fA(n){return function dP(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class hP{enableIndexedDbPersistence(e,t){return function _O(n,e){WM(n=nn(n,Zn));const t=Mr(n),r=n._freezeSettings(),i=new WT;return zM(t,i,new SM(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function vO(n){WM(n=nn(n,Zn));const e=Mr(n),t=n._freezeSettings(),r=new WT;return zM(e,r,new eO(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function EO(n){if(n._initialized&&!n._terminated)throw new Ne(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new _r;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{yield(t=(0,Ee.Z)(function*(r){if(!jo.C())return Promise.resolve();const i=r+"main";yield jo.delete(i)}),function(r){return t.apply(this,arguments)})(fb(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class yx{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof uu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&_n("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function kM(n,e,t,r={}){var i;const u=(n=nn(n,q0))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&_n("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,p;if("string"==typeof r.mockUserToken)c=r.mockUserToken,p=Zr.MOCK_USER;else{c=(0,cn.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Ne(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Zr(_)}n._authCredentials=new aC(new Qw(c,p))}}(this._delegate,e,t,r)}enableNetwork(){return function IO(n){return function uO(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield jM(n),t=yield tA(n);return e.setNetworkEnabled(!0),function(r){const i=Ge(r);return i._u.delete(0),$c(i)}(t)}))}(Mr(n=nn(n,Zn)))}(this._delegate)}disableNetwork(){return function bO(n){return function lO(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield jM(n),t=yield tA(n);return e.setNetworkEnabled(!1),(r=(0,Ee.Z)(function*(i){const u=Ge(i);u._u.add(0),yield My(u),u.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Mr(n=nn(n,Zn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,MM("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function wO(n){return function(e){const t=new _r;return e.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function HR(n,e){return NT.apply(this,arguments)}(yield nA(e),t)})),t.promise}(Mr(n=nn(n,Zn)))}(this._delegate)}onSnapshotsInSync(e){return function eP(n,e){return function hO(n,e){const t=new wb(e);return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return r=yield Fy(n),i=t,Ge(r).Ru.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return r=yield Fy(n),i=t,void Ge(r).Ru.delete(i);var r,i}))}}(Mr(n=nn(n,Zn)),iA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ne("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Vy(this,FM(this._delegate,e))}catch(t){throw As(t,"collection()","Firestore.collection()")}}doc(e){try{return new Aa(this,Eb(this._delegate,e))}catch(t){throw As(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ss(this,function tO(n,e){if(n=nn(n,q0),KT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ne(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new as(n,null,(t=e,new El(Jt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw As(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function rP(n,e,t){n=nn(n,Zn);const r=Object.assign(Object.assign({},tP),t);return function(i){if(i.maxAttempts<1)throw new Ne(ce.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,u,c){const p=new _r;return i.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){const _=yield function HM(n){return Ib(n).then(e=>e.datastore)}(i);new oO(i.asyncQueue,_,c,u,p).run()})),p.promise}(Mr(n),i=>e(new nP(n,i)),r)}(this._delegate,t=>e(new _x(this,t)))}batch(){return Mr(this._delegate),new vx(new fx(this._delegate,e=>Ly(this._delegate,e)))}loadBundle(e){return function DO(n,e){const t=Mr(n=nn(n,Zn)),r=new mO;return function fO(n,e,t,r){const i=function(u,c){let p;return p="string"==typeof u?(new TextEncoder).encode(u):u,_=function(_,I){if(_ instanceof Uint8Array)return VM(_,I);if(_ instanceof ArrayBuffer)return VM(new Uint8Array(_),I);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(p),new nO(_,c);var _}(t,tn(e));n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){!function XR(n,e,t){const r=Ge(n);var i;(i=(0,Ee.Z)(function*(u,c,p){try{const _=yield c.getMetadata();if(yield function(L,U){const z=Ge(L),de=Yr(U.createTime);return z.persistence.runTransaction("hasNewerBundle","readonly",Te=>z.Ns.getBundleMetadata(Te,U.id)).then(Te=>!!Te&&Te.createTime.compareTo(de)>=0)}(u.localStore,_))return yield c.close(),p._completeWith({taskState:"Success",documentsLoaded:(L=_).totalDocuments,bytesLoaded:L.totalBytes,totalDocuments:L.totalDocuments,totalBytes:L.totalBytes}),Promise.resolve(new Set);p._updateProgress(_M(_));const I=new RR(_,u.localStore,c.It);let T=yield c.mc();for(;T;){const L=yield I.Fu(T);L&&p._updateProgress(L),T=yield c.mc()}const M=yield I.complete();return yield qc(u,M.Lu,void 0),yield function(L,U){const z=Ge(L);return z.persistence.runTransaction("Save bundle","readwrite",de=>z.Ns.saveBundleMetadata(de,U))}(u.localStore,_),p._completeWith(M.progress),Promise.resolve(M.Bu)}catch(_){return _n("SyncEngine",`Loading bundle failed with ${_}`),p._failWith(_),Promise.resolve(new Set)}var L}),function(u,c,p){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield nA(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function CO(n,e){return function pO(n,e){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){return function(t,r){const i=Ge(t);return i.persistence.runTransaction("Get named query","readonly",u=>i.Ns.getNamedQuery(u,r))}(yield bb(n),e)}))}(Mr(n=nn(n,Zn)),e).then(t=>t?new as(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ss(this,t):null)}}class Nb extends cA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Y0(new Ml(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Aa.forKey(t,this.firestore,null)}}class _x{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Nb(e)}get(e){const t=og(e);return this._delegate.get(t).then(r=>new Q0(this._firestore,new Wc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=og(e);return r?(hA("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=og(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=og(e);return this._delegate.delete(t),this}}class vx{constructor(e){this._delegate=e}set(e,t,r){const i=og(e);return r?(hA("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=og(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=og(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class sg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Z0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new J0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=sg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let u=i.get(t);return u||(u=new sg(e,new Nb(e),t),i.set(t,u)),u}}sg.INSTANCES=new WeakMap;class Aa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Nb(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ne("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Aa(t,new Kn(t._delegate,r,new $e(e)))}static forKey(e,t,r){return new Aa(t,new Kn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Vy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Vy(this.firestore,FM(this._delegate,e))}catch(t){throw As(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,cn.m9)(e))instanceof Kn&&LM(this._delegate,e)}set(e,t){t=hA("DocumentReference.set",t);try{return t?cx(this._delegate,e,t):cx(this._delegate,e)}catch(r){throw As(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?dx(this._delegate,e):dx(this._delegate,e,t,...r)}catch(i){throw As(i,"updateDoc()","DocumentReference.update()")}}delete(){return function JO(n){return Ly(nn(n.firestore,Zn),[new Oc(n._key,Vn.none())])}(this._delegate)}onSnapshot(...e){const t=Ex(e),r=wx(e,i=>new Q0(this.firestore,new Wc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return hx(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function WO(n){n=nn(n,Kn);const e=nn(n.firestore,Zn),t=Mr(e),r=new Hh(e);return function cO(n,e){const t=new _r;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(r=(0,Ee.Z)(function*(i,u,c){try{const p=yield function(_,I){const T=Ge(_);return T.persistence.runTransaction("read document","readonly",M=>T.localDocuments.getDocument(M,I))}(i,u);p.isFoundDocument()?c.resolve(p):p.isNoDocument()?c.resolve(null):c.reject(new Ne(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(p){const _=Ry(p,`Failed to get document '${u} from cache`);c.reject(_)}}),function(i,u,c){return r.apply(this,arguments)})(yield bb(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Wc(e,r,n._key,i,new ig(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function KO(n){n=nn(n,Kn);const e=nn(n.firestore,Zn);return $M(Mr(e),n._key,{source:"server"}).then(t=>dA(e,n,t))}(this._delegate):function zO(n){n=nn(n,Kn);const e=nn(n.firestore,Zn);return $M(Mr(e),n._key).then(t=>dA(e,n,t))}(this._delegate),t.then(r=>new Q0(this.firestore,new Wc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Aa(this.firestore,this._delegate.withConverter(e?sg.getInstance(this.firestore,e):null))}}function As(n,e,t){return n.message=n.message.replace(e,t),n}function Ex(n){for(const e of n)if("object"==typeof e&&!fA(e))return e;return{}}function wx(n,e){var t,r;let i;return i=fA(n[0])?n[0]:fA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{i.next&&i.next(e(u))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Q0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Aa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return lx(this._delegate,e._delegate)}}class J0 extends Q0{data(e){const t=this._delegate.data(e);return function sC(n,e){n||et()}(void 0!==t),t}}class Ss{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Nb(e)}where(e,t,r){try{return new Ss(this.firestore,Bh(this._delegate,function kO(n,e,t){const r=e,i=Mb("where",n);return new PO(i,r,t)}(e,t,r)))}catch(i){throw As(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ss(this.firestore,Bh(this._delegate,function LO(n,e="asc"){const t=e,r=Mb("orderBy",n);return new FO(r,t)}(e,t)))}catch(r){throw As(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ss(this.firestore,Bh(this._delegate,function VO(n){return RM("limit",n),new nx("limit",n,"F")}(e)))}catch(t){throw As(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ss(this.firestore,Bh(this._delegate,function UO(n){return RM("limitToLast",n),new nx("limitToLast",n,"L")}(e)))}catch(t){throw As(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ss(this.firestore,Bh(this._delegate,function BO(...n){return new rx("startAt",n,!0)}(...e)))}catch(t){throw As(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ss(this.firestore,Bh(this._delegate,function jO(...n){return new rx("startAfter",n,!1)}(...e)))}catch(t){throw As(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ss(this.firestore,Bh(this._delegate,function HO(...n){return new ix("endBefore",n,!1)}(...e)))}catch(t){throw As(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ss(this.firestore,Bh(this._delegate,function $O(...n){return new ix("endAt",n,!0)}(...e)))}catch(t){throw As(t,"endAt()","Query.endAt()")}}isEqual(e){return ZT(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function YO(n){n=nn(n,as);const e=nn(n.firestore,Zn),t=Mr(e),r=new Hh(e);return function dO(n,e){const t=new _r;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(r=(0,Ee.Z)(function*(i,u,c){try{const p=yield L0(i,u,!0),_=new wM(u,p.Hi),I=_.Wu(p.documents),T=_.applyChanges(I,!1);c.resolve(T.snapshot)}catch(p){const _=Ry(p,`Failed to execute query '${u} against cache`);c.reject(_)}}),function(i,u,c){return r.apply(this,arguments)})(yield bb(n),e,t);var r})),t.promise}(t,n._query).then(i=>new jh(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function QO(n){n=nn(n,as);const e=nn(n.firestore,Zn),t=Mr(e),r=new Hh(e);return GM(t,n._query,{source:"server"}).then(i=>new jh(e,r,n,i))}(this._delegate):function ZO(n){n=nn(n,as);const e=nn(n.firestore,Zn),t=Mr(e),r=new Hh(e);return tx(n._query),GM(t,n._query).then(i=>new jh(e,r,n,i))}(this._delegate),t.then(r=>new pA(this.firestore,new jh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Ex(e),r=wx(e,i=>new pA(this.firestore,new jh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return hx(this._delegate,t,r)}withConverter(e){return new Ss(this.firestore,this._delegate.withConverter(e?sg.getInstance(this.firestore,e):null))}}class pP{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new J0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class pA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ss(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new J0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new pP(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new J0(this._firestore,r))})}isEqual(e){return lx(this._delegate,e._delegate)}}class Vy extends Ss{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Aa(this.firestore,e):null}doc(e){try{return new Aa(this.firestore,void 0===e?Eb(this._delegate):Eb(this._delegate,e))}catch(t){throw As(t,"doc()","CollectionReference.doc()")}}add(e){return function XO(n,e){const t=nn(n.firestore,Zn),r=Eb(n),i=xb(n.converter,e);return Ly(t,[Tb(ng(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Vn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Aa(this.firestore,t))}isEqual(e){return LM(this._delegate,e._delegate)}withConverter(e){return new Vy(this.firestore,this._delegate.withConverter(e?sg.getInstance(this.firestore,e):null))}}function og(n){return nn(n,Kn)}class gA{constructor(...e){this._delegate=new zc(...e)}static documentId(){return new gA(zn.keyField().canonicalString())}isEqual(e){return(e=(0,cn.m9)(e))instanceof zc&&this._delegate._internalPath.isEqual(e._internalPath)}}class ag{constructor(e){this._delegate=e}static serverTimestamp(){const e=function sP(){return new sA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new ag(e)}static delete(){const e=function iP(){return new z0("deleteField")}();return e._methodName="FieldValue.delete",new ag(e)}static arrayUnion(...e){const t=function oP(...n){return new MO("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new ag(t)}static arrayRemove(...e){const t=function aP(...n){return new xO("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new ag(t)}static increment(e){const t=function uP(n){return new NO("increment",n)}(e);return t._methodName="FieldValue.increment",new ag(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const gP={Firestore:yx,GeoPoint:Db,Timestamp:Ln,Blob:Y0,Transaction:_x,WriteBatch:vx,DocumentReference:Aa,DocumentSnapshot:Q0,Query:Ss,QueryDocumentSnapshot:J0,QuerySnapshot:pA,CollectionReference:Vy,FieldPath:gA,FieldValue:ag,setLogLevel:function fP(n){!function iC(n){fl.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function yP(n){(function mP(n,e){n.INTERNAL.registerComponent(new q_.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},gP)))})(n,(e,t)=>new yx(e,t,new hP)),n.registerVersion("@firebase/firestore-compat","0.2.3")}(FD.Z);var _P=O(6451),Rb=O(5363),vP=O(6063);class EP extends Mn.x{constructor(e=1/0,t=1/0,r=vP.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:u,_windowTime:c}=this;t||(r.push(e),!i&&r.push(u.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,u=i.slice();for(let c=0;c<u.length&&!e.closed;c+=r?1:2)e.next(u[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,u=(i?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!i){const c=t.now();let p=0;for(let _=1;_<r.length&&r[_]<=c;_+=2)p=_;p&&r.splice(0,p+1)}}}var wP=O(3099);function Ix(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,wP.B)({connector:()=>new EP(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function bx(n,e){return(0,zs.m)(e)?Hn(()=>n,e):Hn(()=>n)}var mA=O(9468);O(5867);const _A=new Map,Cx={activated:!1,tokenObservers:[]},TP={initialized:!1,enabled:!1};function Vi(n){return _A.get(n)||Object.assign({},Cx)}function Pb(){return TP}class RP{constructor(e,t,r,i,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=i,i>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ee.Z)(function*(){t.stop();try{t.pending=new cn.BH,yield function OP(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new cn.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ms=new cn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Ax(n){if(!Vi(n).activated)throw Ms.create("use-before-activation",{appName:n.name})}function wA(n,e){return IA.apply(this,arguments)}function IA(){return IA=(0,Ee.Z)(function*({url:n,body:e},t){var r,i;const u={"Content-Type":"application/json"},c=t.getImmediate({optional:!0});if(c){const U=yield c.getHeartbeatsHeader();U&&(u["X-Firebase-Client"]=U)}const p={method:"POST",body:JSON.stringify(e),headers:u};let _,I;try{_=yield fetch(n,p)}catch(U){throw Ms.create("fetch-network-error",{originalErrorMessage:null===(r=U)||void 0===r?void 0:r.message})}if(200!==_.status)throw Ms.create("fetch-status-error",{httpStatus:_.status});try{I=yield _.json()}catch(U){throw Ms.create("fetch-parse-error",{originalErrorMessage:null===(i=U)||void 0===i?void 0:i.message})}const T=I.ttl.match(/^([\d.]+)(s)$/);if(!T||!T[2]||isNaN(Number(T[1])))throw Ms.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${I.ttl}`});const M=1e3*Number(T[1]),L=Date.now();return{token:I.token,expireTimeMillis:L+M,issuedAtTimeMillis:L}}),IA.apply(this,arguments)}function LP(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const X0="firebase-app-check-store";let Lb=null;function Mx(){return Lb||(Lb=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var u;e(Ms.create("storage-open",{originalErrorMessage:null===(u=i.target.error)||void 0===u?void 0:u.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(X0,{keyPath:"compositeKey"})}}catch(r){e(Ms.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),Lb)}function bA(){return bA=(0,Ee.Z)(function*(n,e){const r=(yield Mx()).transaction(X0,"readwrite"),u=r.objectStore(X0).put({compositeKey:n,value:e});return new Promise((c,p)=>{u.onsuccess=_=>{c()},r.onerror=_=>{var I;p(Ms.create("storage-set",{originalErrorMessage:null===(I=_.target.error)||void 0===I?void 0:I.message}))}})}),bA.apply(this,arguments)}const eE=new iu.Yd("@firebase/app-check");function TA(n,e){return(0,cn.hl)()?function jP(n,e){return function xx(n,e){return bA.apply(this,arguments)}(function Rx(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{eE.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Ox(){return Pb().enabled}function Px(){return SA.apply(this,arguments)}function SA(){return SA=(0,Ee.Z)(function*(){const n=Pb();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),SA.apply(this,arguments)}const WP={error:"UNKNOWN_ERROR"};function KP(n){return cn.US.encodeString(JSON.stringify(n),!1)}function Vb(n){return MA.apply(this,arguments)}function MA(){return MA=(0,Ee.Z)(function*(n,e=!1){const t=n.app;Ax(t);const r=Vi(t);let u,i=r.token;if(i&&!Uy(i)&&(r.token=void 0,i=void 0),!i){const _=yield r.cachedTokenPromise;_&&(Uy(_)?i=_:yield TA(t,void 0))}if(!e&&i&&Uy(i))return{token:i.token};let p,c=!1;if(Ox()){r.exchangeTokenPromise||(r.exchangeTokenPromise=wA(LP(t,yield Px()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),c=!0);const _=yield r.exchangeTokenPromise;return yield TA(t,_),r.token=_,{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),c=!0),i=yield Vi(t).exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?eE.warn(_.message):eE.error(_),u=_}return i?u?p=Uy(i)?{token:i.token,internalError:u}:Lx(u):(p={token:i.token},r.token=i,yield TA(t,i)):p=Lx(u),c&&Fx(t,p),p}),MA.apply(this,arguments)}function NA(n,e){const t=Vi(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function kx(n){const{app:e}=n,t=Vi(e);let r=t.tokenRefresher;r||(r=function ZP(n){const{app:e}=n;return new RP((0,Ee.Z)(function*(){let r;if(r=Vi(e).token?yield Vb(n,!0):yield Vb(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Vi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Fx(n,e){const t=Vi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function Uy(n){return n.expireTimeMillis-Date.now()>0}function Lx(n){return{token:KP(WP),error:n}}class YP{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Vi(this.app);for(const t of e)NA(this.app,t.next);return Promise.resolve()}}const qx="app-check-internal";!function c1(){(0,Ju._registerComponent)(new q_.wA("app-check",n=>function QP(n,e){return new YP(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(qx).initialize()})),(0,Ju._registerComponent)(new q_.wA(qx,n=>function JP(n){return{getToken:e=>Vb(n,e),addTokenListener:e=>function xA(n,e,t,r){const{app:i}=n,u=Vi(i);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&Uy(u.token)){const p=u.token;Promise.resolve().then(()=>{t({token:p.token}),kx(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>kx(n))}(n,"INTERNAL",e),removeTokenListener:e=>NA(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ju.registerVersion)("@firebase/app-check","0.5.17")}();class kA{constructor(){return(0,Kr.vb)("app-check")}}"undefined"!=typeof window&&window;var g1=O(127);const Wx=new f.OlP("angularfire2.auth.use-emulator"),Kx=new f.OlP("angularfire2.auth.settings"),Zx=new f.OlP("angularfire2.auth.tenant-id"),Yx=new f.OlP("angularfire2.auth.langugage-code"),Qx=new f.OlP("angularfire2.auth.use-device-language"),Jx=new f.OlP("angularfire.auth.persistence"),Xx=(n,e,t,r,i,u,c,p)=>(0,Uo.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,u&&_.useDeviceLanguage(),c)for(const[I,T]of Object.entries(c))_.settings[I]=T;return p&&_.setPersistence(p),_},[t,r,i,u,c,p]);let eN=(()=>{class n{constructor(t,r,i,u,c,p,_,I,T,M,L,U){const z=new Mn.x,de=st(void 0).pipe((0,Rb.Q)(c.outsideAngular),Hn(()=>u.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,1277)))),(0,Ot.U)(()=>(0,Uo.on)(t,u,r)),(0,Ot.U)(Te=>Xx(Te,u,p,I,T,M,_,L)),Ix({bufferSize:1,refCount:!1}));if(Yo(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=st(null);else{de.pipe(Ka()).subscribe();const nt=de.pipe(Hn(at=>at.getRedirectResult().then(Ct=>Ct,()=>null)),Kr.iC,Ix({bufferSize:1,refCount:!1})),ot=de.pipe(Hn(at=>new Xn.y(Ct=>({unsubscribe:u.runOutsideAngular(()=>at.onAuthStateChanged(Nt=>Ct.next(Nt),Nt=>Ct.error(Nt),()=>Ct.complete()))})))),gt=de.pipe(Hn(at=>new Xn.y(Ct=>({unsubscribe:u.runOutsideAngular(()=>at.onIdTokenChanged(Nt=>Ct.next(Nt),Nt=>Ct.error(Nt),()=>Ct.complete()))}))));this.authState=nt.pipe(bx(ot),(0,mA.R)(c.outsideAngular),(0,Rb.Q)(c.insideAngular)),this.user=nt.pipe(bx(gt),(0,mA.R)(c.outsideAngular),(0,Rb.Q)(c.insideAngular)),this.idToken=this.user.pipe(Hn(at=>at?(0,Cn.D)(at.getIdToken()):st(null))),this.idTokenResult=this.user.pipe(Hn(at=>at?(0,Cn.D)(at.getIdTokenResult()):st(null))),this.credential=(0,_P.T)(nt,z,this.authState.pipe(Tn(at=>!at))).pipe((0,Ot.U)(at=>(null==at?void 0:at.user)?at:null),(0,mA.R)(c.outsideAngular),(0,Rb.Q)(c.insideAngular))}return(0,Uo.pX)(this,de,u,{spy:{apply:(Te,nt,ot)=>{(Te.startsWith("signIn")||Te.startsWith("createUser"))&&ot.then(gt=>z.next(gt))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Uo.Dh),f.LFG(Uo.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Kr.HU),f.LFG(Wx,8),f.LFG(Kx,8),f.LFG(Zx,8),f.LFG(Yx,8),f.LFG(Qx,8),f.LFG(Jx,8),f.LFG(kA,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function tN(n,e){return function y1(n,e=G_.z){return new Xn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function LA(n,e){return tN(n,e).pipe((0,Ot.U)(t=>({payload:t,type:"query"})))}function Bb(n,e){return LA(n,e).pipe(Xi(void 0),bm(),(0,Ot.U)(([t,r])=>{const i=r.payload.docChanges(),u=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,p)=>{const _=i.find(T=>T.doc.ref.isEqual(c.ref)),I=null==t?void 0:t.payload.docs.find(T=>T.ref.isEqual(c.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(c.metadata)||!_&&I&&JSON.stringify(I.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:p,newIndex:p,type:"modified",doc:c}})}),u}))}function nN(n,e,t){return Bb(n,t).pipe(Si((r,i)=>function v1(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function E1(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return VA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return VA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return VA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(u=>u.payload),e),[]),function aw(n,e=Qi.y){return n=null!=n?n:uw,(0,sr.e)((t,r)=>{let i,u=!0;t.subscribe((0,br.x)(r,c=>{const p=e(c);(u||!n(i,p))&&(u=!1,i=p,r.next(c))}))})}(),(0,Ot.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function VA(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function rN(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class iN{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=Bb(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Ot.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Xi(void 0),bm(),Tn(([r,i])=>i.length>0||!r),(0,Ot.U)(([r,i])=>i),Kr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Si((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=rN(e);return nN(this.query,t,this.afs.schedulers.outsideAngular).pipe(Kr.iC)}valueChanges(e={}){return LA(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ot.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Kr.iC)}get(e){return(0,Cn.D)(this.query.get(e)).pipe(Kr.iC)}add(e){return this.ref.add(e)}doc(e){return new sN(this.ref.doc(e),this.afs)}}class sN{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:u}=uN(r,t);return new iN(i,u,this.afs)}snapshotChanges(){return function _1(n,e){return tN(n,e).pipe(Xi(void 0),bm(),(0,Ot.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Kr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ot.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Cn.D)(this.ref.get(e)).pipe(Kr.iC)}}class w1{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Bb(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ot.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Tn(t=>t.length>0),Kr.iC):Bb(this.query,this.afs.schedulers.outsideAngular).pipe(Kr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Si((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=rN(e);return nN(this.query,t,this.afs.schedulers.outsideAngular).pipe(Kr.iC)}valueChanges(e={}){return LA(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ot.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Kr.iC)}get(e){return(0,Cn.D)(this.query.get(e)).pipe(Kr.iC)}}const oN=new f.OlP("angularfire2.enableFirestorePersistence"),aN=new f.OlP("angularfire2.firestore.persistenceSettings"),I1=new f.OlP("angularfire2.firestore.settings"),b1=new f.OlP("angularfire2.firestore.use-emulator");function uN(n,e=(t=>t)){return{query:e(n),ref:n}}let lN=(()=>{class n{constructor(t,r,i,u,c,p,_,I,T,M,L,U,z,de,Te,nt,ot){this.schedulers=_;const gt=(0,Uo.on)(t,p,r),at=T;M&&Xx(gt,p,L,z,de,Te,U,nt),[this.firestore,this.persistenceEnabled$]=(0,Uo.cc)(`${gt.name}.firestore`,"AngularFirestore",gt.name,()=>{const Ct=p.runOutsideAngular(()=>gt.firestore());if(u&&Ct.settings(u),at&&Ct.useEmulator(...at),i&&!Yo(c)){const Nt=()=>{try{return(0,Cn.D)(Ct.enablePersistence(I||void 0).then(()=>!0,()=>!1))}catch(an){return"undefined"!=typeof console&&console.warn(an),st(!1)}};return[Ct,p.runOutsideAngular(Nt)]}return[Ct,st(!1)]},[u,at,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=uN(i,r),p=this.schedulers.ngZone.run(()=>u);return new iN(p,c,this)}collectionGroup(t,r){const i=r||(c=>c),u=this.firestore.collectionGroup(t);return new w1(i(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new sN(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Uo.Dh),f.LFG(Uo.xv,8),f.LFG(oN,8),f.LFG(I1,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Kr.HU),f.LFG(aN,8),f.LFG(b1,8),f.LFG(eN,8),f.LFG(Wx,8),f.LFG(Kx,8),f.LFG(Zx,8),f.LFG(Yx,8),f.LFG(Qx,8),f.LFG(Jx,8),f.LFG(kA,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),D1=(()=>{class n{constructor(){g1.Z.registerVersion("angularfire",Kr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:oN,useValue:!0},{provide:aN,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[lN]}),n})(),cN=(()=>{class n{constructor(t){this.firestore=t}agregarEmpleado(t){return this.firestore.collection("empleados").add(t)}getEmpleados(){return this.firestore.collection("empleados",t=>t.orderBy("fechaCreacion")).snapshotChanges()}eliminarEmpleados(t){return this.firestore.collection("empleados").doc(t).delete()}getEmpleado(t){return this.firestore.collection("empleados").doc(t).snapshotChanges()}updateEmployee(t,r){return this.firestore.collection("empleados").doc(t).update(r)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(lN))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class dN{}const Kc="*";function T1(n,e){return{type:7,name:n,definitions:e,options:{}}}function hN(n,e=null){return{type:4,styles:e,timings:n}}function fN(n,e=null){return{type:2,steps:n,options:e}}function tE(n){return{type:6,styles:n,offset:null}}function UA(n,e,t){return{type:0,name:n,styles:e,options:t}}function pN(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function gN(n){Promise.resolve(null).then(n)}class nE{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){gN(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class mN{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const u=this.players.length;0==u?gN(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==u&&this._onFinish()}),c.onDestroy(()=>{++r==u&&this._onDestroy()}),c.onStart(()=>{++i==u&&this._onStart()})}),this.totalTime=this.players.reduce((c,p)=>Math.max(c,p.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}const yN=["toast-component",""];function A1(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"button",5),f.NdJ("click",function(){return f.CHM(t),f.oxw().remove()}),f.TgZ(1,"span",6),f._uU(2,"\xd7"),f.qZA()()}}function S1(n,e){if(1&n&&(f.ynx(0),f._uU(1),f.BQk()),2&n){const t=f.oxw(2);f.xp6(1),f.hij("[",t.duplicatesCount+1,"]")}}function M1(n,e){if(1&n&&(f.TgZ(0,"div"),f._uU(1),f.YNc(2,S1,2,1,"ng-container",4),f.qZA()),2&n){const t=f.oxw();f.Tol(t.options.titleClass),f.uIk("aria-label",t.title),f.xp6(1),f.hij(" ",t.title," "),f.xp6(1),f.Q6J("ngIf",t.duplicatesCount)}}function x1(n,e){if(1&n&&f._UZ(0,"div",7),2&n){const t=f.oxw();f.Tol(t.options.messageClass),f.Q6J("innerHTML",t.message,f.oJD)}}function N1(n,e){if(1&n&&(f.TgZ(0,"div",8),f._uU(1),f.qZA()),2&n){const t=f.oxw();f.Tol(t.options.messageClass),f.uIk("aria-label",t.message),f.xp6(1),f.hij(" ",t.message," ")}}function R1(n,e){if(1&n&&(f.TgZ(0,"div"),f._UZ(1,"div",9),f.qZA()),2&n){const t=f.oxw();f.xp6(1),f.Udp("width",t.width+"%")}}function O1(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"button",5),f.NdJ("click",function(){return f.CHM(t),f.oxw().remove()}),f.TgZ(1,"span",6),f._uU(2,"\xd7"),f.qZA()()}}function P1(n,e){if(1&n&&(f.ynx(0),f._uU(1),f.BQk()),2&n){const t=f.oxw(2);f.xp6(1),f.hij("[",t.duplicatesCount+1,"]")}}function k1(n,e){if(1&n&&(f.TgZ(0,"div"),f._uU(1),f.YNc(2,P1,2,1,"ng-container",4),f.qZA()),2&n){const t=f.oxw();f.Tol(t.options.titleClass),f.uIk("aria-label",t.title),f.xp6(1),f.hij(" ",t.title," "),f.xp6(1),f.Q6J("ngIf",t.duplicatesCount)}}function F1(n,e){if(1&n&&f._UZ(0,"div",7),2&n){const t=f.oxw();f.Tol(t.options.messageClass),f.Q6J("innerHTML",t.message,f.oJD)}}function L1(n,e){if(1&n&&(f.TgZ(0,"div",8),f._uU(1),f.qZA()),2&n){const t=f.oxw();f.Tol(t.options.messageClass),f.uIk("aria-label",t.message),f.xp6(1),f.hij(" ",t.message," ")}}function V1(n,e){if(1&n&&(f.TgZ(0,"div"),f._UZ(1,"div",9),f.qZA()),2&n){const t=f.oxw();f.xp6(1),f.Udp("width",t.width+"%")}}class jb{constructor(e,t,r,i,u,c){this.toastId=e,this.config=t,this.message=r,this.title=i,this.toastType=u,this.toastRef=c,this._onTap=new Mn.x,this._onAction=new Mn.x,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(e){this._onAction.next(e)}onAction(){return this._onAction.asObservable()}}const jA={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing"},rE=new f.OlP("ToastConfig");class U1{constructor(e,t){this.component=e,this.injector=t}attach(e,t){return this._attachedHost=e,e.attach(this,t)}detach(){const e=this._attachedHost;if(e)return this._attachedHost=void 0,e.detach()}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class j1 extends class B1{attach(e,t){return this._attachedPortal=e,this.attachComponentPortal(e,t)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(e){this._disposeFn=e}}{constructor(e,t,r){super(),this._hostDomElement=e,this._componentFactoryResolver=t,this._appRef=r}attachComponentPortal(e,t){const r=this._componentFactoryResolver.resolveComponentFactory(e.component);let i;return i=r.create(e.injector),this._appRef.attachView(i.hostView),this.setDisposeFn(()=>{this._appRef.detachView(i.hostView),i.destroy()}),t?this._hostDomElement.insertBefore(this._getComponentRootNode(i),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(i)),i}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let _N=(()=>{class n{constructor(t){this._document=t}ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t=this._document.createElement("div");t.classList.add("overlay-container"),this._document.body.appendChild(t),this._containerElement=t}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(se))},n.\u0275prov=(0,f.Yz7)({factory:function(){return new n((0,f.LFG)(se))},token:n,providedIn:"root"}),n})();class H1{constructor(e){this._portalHost=e}attach(e,t=!0){return this._portalHost.attach(e,t)}detach(){return this._portalHost.detach()}}let vN=(()=>{class n{constructor(t,r,i,u){this._overlayContainer=t,this._componentFactoryResolver=r,this._appRef=i,this._document=u,this._paneElements=new Map}create(t,r){return this._createOverlayRef(this.getPaneElement(t,r))}getPaneElement(t="",r){return this._paneElements.get(r)||this._paneElements.set(r,{}),this._paneElements.get(r)[t]||(this._paneElements.get(r)[t]=this._createPaneElement(t,r)),this._paneElements.get(r)[t]}_createPaneElement(t,r){const i=this._document.createElement("div");return i.id="toast-container",i.classList.add(t),i.classList.add("toast-container"),r?r.getContainerElement().appendChild(i):this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalHost(t){return new j1(t,this._componentFactoryResolver,this._appRef)}_createOverlayRef(t){return new H1(this._createPortalHost(t))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(_N),f.LFG(f._Vd),f.LFG(f.z2F),f.LFG(se))},n.\u0275prov=(0,f.Yz7)({factory:function(){return new n((0,f.LFG)(_N),(0,f.LFG)(f._Vd),(0,f.LFG)(f.z2F),(0,f.LFG)(se))},token:n,providedIn:"root"}),n})();class $1{constructor(e){this._overlayRef=e,this.duplicatesCount=0,this._afterClosed=new Mn.x,this._activate=new Mn.x,this._manualClose=new Mn.x,this._resetTimeout=new Mn.x,this._countDuplicate=new Mn.x}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(e,t){e&&this._resetTimeout.next(),t&&this._countDuplicate.next(++this.duplicatesCount)}}class G1{constructor(e,t){this._toastPackage=e,this._parentInjector=t}get(e,t,r){return e===jb?this._toastPackage:this._parentInjector.get(e,t,r)}}let Hb=(()=>{class n{constructor(t,r,i,u,c){this.overlay=r,this._injector=i,this.sanitizer=u,this.ngZone=c,this.currentlyActive=0,this.toasts=[],this.index=0,this.toastrConfig=Object.assign(Object.assign({},t.default),t.config),t.config.iconClasses&&(this.toastrConfig.iconClasses=Object.assign(Object.assign({},t.default.iconClasses),t.config.iconClasses))}show(t,r,i={},u=""){return this._preBuildNotification(u,t,r,this.applyConfig(i))}success(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.success||"",t,r,this.applyConfig(i))}error(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.error||"",t,r,this.applyConfig(i))}info(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.info||"",t,r,this.applyConfig(i))}warning(t,r,i={}){return this._preBuildNotification(this.toastrConfig.iconClasses.warning||"",t,r,this.applyConfig(i))}clear(t){for(const r of this.toasts)if(void 0!==t){if(r.toastId===t)return void r.toastRef.manualClose()}else r.toastRef.manualClose()}remove(t){const r=this._findToast(t);if(!r||(r.activeToast.toastRef.close(),this.toasts.splice(r.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){const i=this.toasts[this.currentlyActive].toastRef;i.isInactive()||(this.currentlyActive=this.currentlyActive+1,i.activate())}return!0}findDuplicate(t="",r="",i,u){const{includeTitleDuplicates:c}=this.toastrConfig;for(const p of this.toasts){const _=c&&p.title===t;if((!c||_)&&p.message===r)return p.toastRef.onDuplicate(i,u),p}return null}applyConfig(t={}){return Object.assign(Object.assign({},this.toastrConfig),t)}_findToast(t){for(let r=0;r<this.toasts.length;r++)if(this.toasts[r].toastId===t)return{index:r,activeToast:this.toasts[r]};return null}_preBuildNotification(t,r,i,u){return u.onActivateTick?this.ngZone.run(()=>this._buildNotification(t,r,i,u)):this._buildNotification(t,r,i,u)}_buildNotification(t,r,i,u){if(!u.toastComponent)throw new Error("toastComponent required");const c=this.findDuplicate(i,r,this.toastrConfig.resetTimeoutOnDuplicate&&u.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&i||r)&&this.toastrConfig.preventDuplicates&&null!==c)return c;this.previousToastMessage=r;let p=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(p=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));const _=this.overlay.create(u.positionClass,this.overlayContainer);this.index=this.index+1;let I=r;r&&u.enableHtml&&(I=this.sanitizer.sanitize(f.q3G.HTML,r));const T=new $1(_),M=new jb(this.index,u,I,i,t,T),L=new G1(M,this._injector),U=new U1(u.toastComponent,L),z=_.attach(U,this.toastrConfig.newestOnTop);T.componentInstance=z.instance;const de={toastId:this.index,title:i||"",message:r||"",toastRef:T,onShown:T.afterActivate(),onHidden:T.afterClosed(),onTap:M.onTap(),onAction:M.onAction(),portal:z};return p||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{de.toastRef.activate()})),this.toasts.push(de),de}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(rE),f.LFG(vN),f.LFG(f.zs3),f.LFG(Wl),f.LFG(f.R0b))},n.\u0275prov=(0,f.Yz7)({factory:function(){return new n((0,f.LFG)(rE),(0,f.LFG)(vN),(0,f.LFG)(f.gxx),(0,f.LFG)(Wl),(0,f.LFG)(f.R0b))},token:n,providedIn:"root"}),n})(),q1=(()=>{class n{constructor(t,r,i){this.toastrService=t,this.toastPackage=r,this.ngZone=i,this.width=-1,this.toastClasses="",this.state={value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}},this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(u=>{this.duplicatesCount=u})}get displayStyle(){if("inactive"===this.state.value)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state=Object.assign(Object.assign({},this.state),{value:"active"}),!0!==this.options.disableTimeOut&&"timeOut"!==this.options.disableTimeOut&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state=Object.assign(Object.assign({},this.state),{value:"active"}),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.state=Object.assign(Object.assign({},this.state),{value:"removed"}),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){"removed"!==this.state.value&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state.value&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state.value||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(t),r)):this.timeout=setTimeout(()=>t(),r)}outsideInterval(t,r){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(t),r)):this.intervalId=setInterval(()=>t(),r)}runInsideAngular(t){this.ngZone?this.ngZone.run(()=>t()):t()}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Hb),f.Y36(jb),f.Y36(f.R0b))},n.\u0275cmp=f.Xpm({type:n,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(t,r){1&t&&f.NdJ("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),2&t&&(f.d8E("@flyInOut",r.state),f.Tol(r.toastClasses),f.Udp("display",r.displayStyle))},attrs:yN,decls:5,vars:5,consts:[["class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alertdialog","aria-live","polite",3,"class","innerHTML",4,"ngIf"],["role","alertdialog","aria-live","polite",3,"class",4,"ngIf"],[4,"ngIf"],["aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alertdialog","aria-live","polite",3,"innerHTML"],["role","alertdialog","aria-live","polite"],[1,"toast-progress"]],template:function(t,r){1&t&&(f.YNc(0,A1,3,0,"button",0),f.YNc(1,M1,3,5,"div",1),f.YNc(2,x1,1,3,"div",2),f.YNc(3,N1,2,4,"div",3),f.YNc(4,R1,2,2,"div",4)),2&t&&(f.Q6J("ngIf",r.options.closeButton),f.xp6(1),f.Q6J("ngIf",r.title),f.xp6(1),f.Q6J("ngIf",r.message&&r.options.enableHtml),f.xp6(1),f.Q6J("ngIf",r.message&&!r.options.enableHtml),f.xp6(1),f.Q6J("ngIf",r.options.progressBar))},directives:[jn],encapsulation:2,data:{animation:[T1("flyInOut",[UA("inactive",tE({opacity:0})),UA("active",tE({opacity:1})),UA("removed",tE({opacity:0})),pN("inactive => active",hN("{{ easeTime }}ms {{ easing }}")),pN("active => removed",hN("{{ easeTime }}ms {{ easing }}"))])]}}),n})();const z1=Object.assign(Object.assign({},jA),{toastComponent:q1});let EN=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[{provide:rE,useValue:{default:z1,config:t}}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[Pa]]}),n})(),W1=(()=>{class n{constructor(t,r,i){this.toastrService=t,this.toastPackage=r,this.appRef=i,this.width=-1,this.toastClasses="",this.state="inactive",this.message=r.message,this.title=r.title,this.options=r.config,this.originalTimeout=r.config.timeOut,this.toastClasses=`${r.toastType} ${r.config.toastClass}`,this.sub=r.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=r.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=r.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=r.toastRef.countDuplicate().subscribe(u=>{this.duplicatesCount=u})}get displayStyle(){if("inactive"===this.state)return"none"}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state="active",!(!0===this.options.disableTimeOut||"timeOut"===this.options.disableTimeOut)&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=(new Date).getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(0===this.width||100===this.width||!this.options.timeOut)return;const t=(new Date).getTime();this.width=(this.hideTime-t)/this.options.timeOut*100,"increasing"===this.options.progressAnimation&&(this.width=100-this.width),this.width<=0&&(this.width=0),this.width>=100&&(this.width=100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state="active",this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=(new Date).getTime()+(this.originalTimeout||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){"removed"!==this.state&&(clearTimeout(this.timeout),this.state="removed",this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){"removed"!==this.state&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){"removed"!==this.state&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width=0)}delayedHideToast(){!0===this.options.disableTimeOut||"extendedTimeOut"===this.options.disableTimeOut||0===this.options.extendedTimeOut||"removed"===this.state||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=(new Date).getTime()+(this.options.timeOut||0),this.width=-1,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Hb),f.Y36(jb),f.Y36(f.z2F))},n.\u0275cmp=f.Xpm({type:n,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(t,r){1&t&&f.NdJ("click",function(){return r.tapToast()})("mouseenter",function(){return r.stickAround()})("mouseleave",function(){return r.delayedHideToast()}),2&t&&(f.Tol(r.toastClasses),f.Udp("display",r.displayStyle))},attrs:yN,decls:5,vars:5,consts:[["class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert","aria-live","polite",3,"class","innerHTML",4,"ngIf"],["role","alert","aria-live","polite",3,"class",4,"ngIf"],[4,"ngIf"],["aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert","aria-live","polite",3,"innerHTML"],["role","alert","aria-live","polite"],[1,"toast-progress"]],template:function(t,r){1&t&&(f.YNc(0,O1,3,0,"button",0),f.YNc(1,k1,3,5,"div",1),f.YNc(2,F1,1,3,"div",2),f.YNc(3,L1,2,4,"div",3),f.YNc(4,V1,2,2,"div",4)),2&t&&(f.Q6J("ngIf",r.options.closeButton),f.xp6(1),f.Q6J("ngIf",r.title),f.xp6(1),f.Q6J("ngIf",r.message&&r.options.enableHtml),f.xp6(1),f.Q6J("ngIf",r.message&&!r.options.enableHtml),f.xp6(1),f.Q6J("ngIf",r.options.progressBar))},directives:[jn],encapsulation:2}),n})();function Z1(n,e){1&n&&(f.TgZ(0,"button",16),f._UZ(1,"span",17),f._uU(2," Saving... "),f.qZA())}function Y1(n,e){1&n&&(f.TgZ(0,"span",18),f._uU(1,"All FIELDS ARE REQUIRED"),f.qZA())}Object.assign(Object.assign({},jA),{toastComponent:W1});let wN=(()=>{class n{constructor(t,r,i,u,c){this.fb=t,this._empleadoService=r,this.router=i,this.toastr=u,this.aRoute=c,this.submitted=!1,this.loading=!1,this.textTitle="Add Employee",this.createEmploye=this.fb.group({nombre:["",rm.required],apellido:["",rm.required],documento:["",rm.required],salario:["",rm.required]}),this.id=this.aRoute.snapshot.paramMap.get("id"),console.log(this.id)}ngOnInit(){this.editEmployee()}agregarEditarEmpleado(){this.submitted=!0,!this.createEmploye.invalid&&(null===this.id?this.agregarEmpleado():this.editarEmployee(this.id))}agregarEmpleado(){const t={nombre:this.createEmploye.value.nombre,apellido:this.createEmploye.value.apellido,documento:this.createEmploye.value.documento,salario:this.createEmploye.value.salario,fechaCreacion:new Date,fechaActualizacion:new Date};this.loading=!0,this._empleadoService.agregarEmpleado(t).then(()=>{this.toastr.success("create suscefull","the epmloyee has been register susccesfully",{positionClass:"toast-bottom-right"}),this.loading=!1,this.router.navigate(["/list-employes"])}).catch(r=>{console.log(r),this.loading=!1})}editarEmployee(t){const r={nombre:this.createEmploye.value.nombre,apellido:this.createEmploye.value.apellido,documento:this.createEmploye.value.documento,salario:this.createEmploye.value.salario,fechaActualizacion:new Date};this.loading=!0,this._empleadoService.updateEmployee(t,r).then(()=>{this.loading=!1,this.toastr.info("Update Employee","The employeee has been update susccesfully")}),this.router.navigate(["/list-employes"])}editEmployee(){null!==this.id&&(this.loading=!0,this.textTitle="Edit Employee",this._empleadoService.getEmpleado(this.id).subscribe(t=>{this.loading=!1,this.createEmploye.setValue({nombre:t.payload.data().nombre,apellido:t.payload.data().apellido,documento:t.payload.data().documento,salario:t.payload.data().salario})}))}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(kD),f.Y36(cN),f.Y36(Cr),f.Y36(Hb),f.Y36(Ja))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-create-employees"]],decls:22,vars:4,consts:[[1,"container","pt-4"],[1,"row"],[1,"col-6","offset-lg-3"],[1,"card","text-center"],["class","btn btn-primary","type","button","disabled","",4,"ngIf"],[1,"car-body"],["class"," badge bg-danger",4,"ngIf"],[1,"m-4",3,"formGroup","ngSubmit"],[1,"col"],["type","text","placeholder","Name","formControlName","nombre",1,"form-control","form-control-lg"],["type","text","placeholder","Surname","formControlName","apellido",1,"form-control","form-control-lg"],["type","text","placeholder","Document","formControlName","documento",1,"form-control","form-control-lg","mt-4"],["type","number","placeholder","Salary","formControlName","salario",1,"form-control","form-control-lg","mt-4"],[1,"mt-3"],["type","text","routerLink","/list-employes",1,"btn","btn-outline-dark","m-1"],["type","submit",1,"btn","btn-outline-success","m-1"],["type","button","disabled","",1,"btn","btn-primary"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],[1,"badge","bg-danger"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),f.YNc(4,Z1,3,0,"button",4),f.TgZ(5,"div",5)(6,"h3"),f._uU(7),f.qZA(),f.YNc(8,Y1,2,0,"span",6),f.TgZ(9,"form",7),f.NdJ("ngSubmit",function(){return r.agregarEditarEmpleado()}),f.TgZ(10,"div",1)(11,"div",8),f._UZ(12,"input",9),f.qZA(),f.TgZ(13,"div",8),f._UZ(14,"input",10),f.qZA()(),f._UZ(15,"input",11)(16,"input",12),f.TgZ(17,"div",13)(18,"button",14),f._uU(19,"Back"),f.qZA(),f.TgZ(20,"button",15),f._uU(21,"Add"),f.qZA()()()()()()()()),2&t&&(f.xp6(4),f.Q6J("ngIf",r.loading),f.xp6(3),f.hij("",r.textTitle," "),f.xp6(1),f.Q6J("ngIf",r.submitted&&r.createEmploye.invalid),f.xp6(1),f.Q6J("formGroup",r.createEmploye))},directives:[jn,WE,OE,Kd,Df,RE,Ff,mm,Gu],styles:[""]}),n})();function Q1(n,e){1&n&&(f.TgZ(0,"h4",7),f._uU(1,"The database is clear"),f.qZA())}const J1=function(n){return["/edit-employee/",n]};function X1(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"tr")(1,"td"),f._uU(2),f.qZA(),f.TgZ(3,"td"),f._uU(4),f.qZA(),f.TgZ(5,"td"),f._uU(6),f.qZA(),f.TgZ(7,"td"),f._uU(8),f.ALo(9,"currency"),f.qZA(),f.TgZ(10,"td"),f._UZ(11,"i",10),f.TgZ(12,"i",11),f.NdJ("click",function(){const u=f.CHM(t).$implicit;return f.oxw(2).eliminarEmpleado(u.id)}),f.qZA()()()}if(2&n){const t=e.$implicit;f.xp6(2),f.Oqu(t.nombre),f.xp6(2),f.Oqu(t.apellido),f.xp6(2),f.Oqu(t.documento),f.xp6(2),f.Oqu(f.lcZ(9,5,t.salario)),f.xp6(3),f.Q6J("routerLink",f.VKq(7,J1,t.id))}}function ek(n,e){if(1&n&&(f.TgZ(0,"table",8)(1,"thead")(2,"tr")(3,"th"),f._uU(4,"Name"),f.qZA(),f.TgZ(5,"th"),f._uU(6,"Surname"),f.qZA(),f.TgZ(7,"th"),f._uU(8,"Document"),f.qZA(),f.TgZ(9,"th"),f._uU(10,"Salary"),f.qZA()()(),f.TgZ(11,"tbody"),f.YNc(12,X1,13,9,"tr",9),f.qZA()()),2&n){const t=f.oxw();f.xp6(12),f.Q6J("ngForOf",t.empleados)}}const tk=[{path:"",redirectTo:"list-employes",pathMatch:"full"},{path:"list-employes",component:(()=>{class n{constructor(t,r){this._empleadosService=t,this.toastr=r,this.empleados=[]}ngOnInit(){this.getEmpleados()}getEmpleados(){this._empleadosService.getEmpleados().subscribe(t=>{this.empleados=[],t.forEach(r=>{this.empleados.push(Object.assign({id:r.payload.doc.id},r.payload.doc.data()))})})}eliminarEmpleado(t){this._empleadosService.eliminarEmpleados(t).then(()=>{this.toastr.error("Employee delete suscefull","the employee to delete suscefull",{positionClass:"toast-up-right"})}).catch(r=>{})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(cN),f.Y36(Hb))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-list-empleados"]],decls:9,vars:2,consts:[[1,"container","mt-4"],[1,"card"],[1,"card-body"],[1,"h3"],["type","button","routerLink","/create-employes",1,"btn","btn-outline-dark","float-right"],["class","mt-5",4,"ngIf"],["class","table table-striped mt-3",4,"ngIf"],[1,"mt-5"],[1,"table","table-striped","mt-3"],[4,"ngFor","ngForOf"],[1,"fa-solid","fa-pen-to-square","fa-lg","text-info","m-3",3,"routerLink"],[1,"fa-solid","fa-trash","text-danger",3,"click"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),f._uU(4,"List of employes:"),f.qZA(),f.TgZ(5,"button",4),f._uU(6,"Add"),f.qZA(),f.YNc(7,Q1,2,0,"h4",5),f.YNc(8,ek,13,1,"table",6),f.qZA()()()),2&t&&(f.xp6(7),f.Q6J("ngIf",0==r.empleados.length),f.xp6(1),f.Q6J("ngIf",r.empleados.length>0))},directives:[Gu,jn,rr],pipes:[Us],styles:[".float-right[_ngcontent-%COMP%]{float:right}i[_ngcontent-%COMP%]{cursor:pointer}"]}),n})()},{path:"create-employes",component:wN},{path:"edit-employee/:id",component:wN},{path:"notfound",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-notfound"]],decls:5,vars:0,consts:[[1,"d-flex","justify-content-center"],["src","./assets/img/404.png"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0),f._UZ(1,"img",1),f.qZA(),f.TgZ(2,"div",0)(3,"span"),f._uU(4,"404 NotFound"),f.qZA()())},styles:["img[_ngcontent-%COMP%]{margin-top:50px;width:auto;height:50vh}span[_ngcontent-%COMP%]{font-size:50px;margin-left:15px;color:#fff}"]}),n})()},{path:"**",redirectTo:"notfound",pathMatch:"full"}];let nk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[mE.forRoot(tk)],mE]}),n})(),rk=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-navbar"]],decls:4,vars:0,consts:[[1,"navbar","navbar-dark","bg-dark"],[1,"container-fluid"],[1,"navbar-brand","mb-0","h1"]],template:function(t,r){1&t&&(f.TgZ(0,"nav",0)(1,"div",1)(2,"span",2),f._uU(3,"Aplication Employes - firebase"),f.qZA()()())},styles:[""]}),n})(),ik=(()=>{class n{constructor(){this.title="empleados"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,template:function(t,r){1&t&&f._UZ(0,"app-navbar")(1,"router-outlet")},directives:[rk,df],styles:[""]}),n})();const IN_firebase={apiKey:"AIzaSyB15YhUF-Y5xk3xqDEflsCt9-YXeyGqu7A",authDomain:"empleados-3c379.firebaseapp.com",projectId:"empleados-3c379",storageBucket:"empleados-3c379.appspot.com",messagingSenderId:"159300118062",appId:"1:159300118062:web:169b01f0f13c99250da1bf"},rn=!1;function bN(n){return new f.vHH(3e3,rn)}function Vk(){return"undefined"!=typeof window&&void 0!==window.document}function HA(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Gh(n){switch(n.length){case 0:return new nE;case 1:return n[0];default:return new mN(n)}}function DN(n,e,t,r,i={},u={}){const c=[],p=[];let _=-1,I=null;if(r.forEach(T=>{const M=T.offset,L=M==_,U=L&&I||{};Object.keys(T).forEach(z=>{let de=z,Te=T[z];if("offset"!==z)switch(de=e.normalizePropertyName(de,c),Te){case"!":Te=i[z];break;case Kc:Te=u[z];break;default:Te=e.normalizeStyleValue(z,de,Te,c)}U[de]=Te}),L||p.push(U),I=U,_=M}),c.length)throw function Ak(n){return new f.vHH(3502,rn)}();return p}function $A(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&GA(t,"start",n)));break;case"done":n.onDone(()=>r(t&&GA(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&GA(t,"destroy",n)))}}function GA(n,e,t){const r=t.totalTime,u=qA(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),c=n._data;return null!=c&&(u._data=c),u}function qA(n,e,t,r,i="",u=0,c){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:u,disabled:!!c}}function $o(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function CN(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let zA=(n,e)=>!1,TN=(n,e,t)=>[],AN=null;function WA(n){const e=n.parentNode||n.host;return e===AN?null:e}(HA()||"undefined"!=typeof Element)&&(Vk()?(AN=(()=>document.documentElement)(),zA=(n,e)=>{for(;e;){if(e===n)return!0;e=WA(e)}return!1}):zA=(n,e)=>n.contains(e),TN=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let ug=null,SN=!1;function MN(n){ug||(ug=function Bk(){return"undefined"!=typeof document?document.body:null}()||{},SN=!!ug.style&&"WebkitAppearance"in ug.style);let e=!0;return ug.style&&!function Uk(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in ug.style,!e&&SN&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in ug.style)),e}const xN=zA,NN=TN;let RN=(()=>{class n{validateStyleProperty(t){return MN(t)}matchesElement(t,r){return!1}containsElement(t,r){return xN(t,r)}getParentElement(t){return WA(t)}query(t,r,i){return NN(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,u,c,p=[],_){return new nE(i,u)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),KA=(()=>{class n{}return n.NOOP=new RN,n})();const ZA="ng-enter",Gb="ng-leave",qb="ng-trigger",zb=".ng-trigger",PN="ng-animating",YA=".ng-animating";function lg(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:QA(parseFloat(e[1]),e[2])}function QA(n,e){return"s"===e?1e3*n:n}function Wb(n,e,t){return n.hasOwnProperty("duration")?n:function $k(n,e,t){let i,u=0,c="";if("string"==typeof n){const p=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===p)return e.push(bN()),{duration:0,delay:0,easing:""};i=QA(parseFloat(p[1]),p[2]);const _=p[3];null!=_&&(u=QA(parseFloat(_),p[4]));const I=p[5];I&&(c=I)}else i=n;if(!t){let p=!1,_=e.length;i<0&&(e.push(function sk(){return new f.vHH(3100,rn)}()),p=!0),u<0&&(e.push(function ok(){return new f.vHH(3101,rn)}()),p=!0),p&&e.splice(_,0,bN())}return{duration:i,delay:u,easing:c}}(n,e,t)}function By(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function qh(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else By(n,t);return t}function FN(n,e,t){return t?e+":"+t+";":""}function LN(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=FN(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=FN(0,zk(t),n.style[t]));n.setAttribute("style",e)}function xl(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const i=XA(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[i]),n.style[i]=e[r]}),HA()&&LN(n))}function cg(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=XA(t);n.style[r]=""}),HA()&&LN(n))}function iE(n){return Array.isArray(n)?1==n.length?n[0]:fN(n):n}const JA=new RegExp("{{\\s*(.+?)\\s*}}","g");function VN(n){let e=[];if("string"==typeof n){let t;for(;t=JA.exec(n);)e.push(t[1]);JA.lastIndex=0}return e}function Kb(n,e,t){const r=n.toString(),i=r.replace(JA,(u,c)=>{let p=e[c];return e.hasOwnProperty(c)||(t.push(function uk(n){return new f.vHH(3003,rn)}()),p=""),p.toString()});return i==r?n:i}function Zb(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const qk=/-+([a-z0-9])/g;function XA(n){return n.replace(qk,(...e)=>e[1].toUpperCase())}function zk(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Go(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function lk(n){return new f.vHH(3004,rn)}()}}function UN(n,e){return window.getComputedStyle(n)[e]}function Jk(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function Xk(n,e,t){if(":"==n[0]){const _=function eF(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function bk(n){return new f.vHH(3016,rn)}()),"* => *"}}(n,t);if("function"==typeof _)return void e.push(_);n=_}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function Ik(n){return new f.vHH(3015,rn)}()),e;const i=r[1],u=r[2],c=r[3];e.push(BN(i,c));"<"==u[0]&&!("*"==i&&"*"==c)&&e.push(BN(c,i))}(r,t,e)):t.push(n),t}const Xb=new Set(["true","1"]),eD=new Set(["false","0"]);function BN(n,e){const t=Xb.has(n)||eD.has(n),r=Xb.has(e)||eD.has(e);return(i,u)=>{let c="*"==n||n==i,p="*"==e||e==u;return!c&&t&&"boolean"==typeof i&&(c=i?Xb.has(n):eD.has(n)),!p&&r&&"boolean"==typeof u&&(p=u?Xb.has(e):eD.has(e)),c&&p}}const tF=new RegExp("s*:selfs*,?","g");function eS(n,e,t,r){return new nF(n).build(e,t,r)}class nF{constructor(e){this._driver=e}build(e,t,r){const i=new sF(t);this._resetContextStyleTimingState(i);const u=Go(this,iE(e),i);return i.unsupportedCSSPropertiesFound.size&&i.unsupportedCSSPropertiesFound.keys(),u}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const u=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push(function dk(){return new f.vHH(3006,rn)}()),e.definitions.forEach(p=>{if(this._resetContextStyleTimingState(t),0==p.type){const _=p,I=_.name;I.toString().split(/\s*,\s*/).forEach(T=>{_.name=T,u.push(this.visitState(_,t))}),_.name=I}else if(1==p.type){const _=this.visitTransition(p,t);r+=_.queryCount,i+=_.depCount,c.push(_)}else t.errors.push(function hk(){return new f.vHH(3007,rn)}())}),{type:7,name:e.name,states:u,transitions:c,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const u=new Set,c=i||{};r.styles.forEach(p=>{if(tD(p)){const _=p;Object.keys(_).forEach(I=>{VN(_[I]).forEach(T=>{c.hasOwnProperty(T)||u.add(T)})})}}),u.size&&(Zb(u.values()),t.errors.push(function fk(n,e){return new f.vHH(3008,rn)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Go(this,iE(e.animation),t);return{type:1,matchers:Jk(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:dg(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Go(this,r,t)),options:dg(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const u=e.steps.map(c=>{t.currentTime=r;const p=Go(this,c,t);return i=Math.max(i,t.currentTime),p});return t.currentTime=i,{type:3,steps:u,options:dg(e.options)}}visitAnimate(e,t){const r=function aF(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return tS(Wb(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(u=>"{"==u.charAt(0)&&"{"==u.charAt(1))){const u=tS(0,0,"");return u.dynamic=!0,u.strValue=t,u}const i=Wb(t,e);return tS(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,u=e.styles?e.styles:tE({});if(5==u.type)i=this.visitKeyframes(u,t);else{let c=e.styles,p=!1;if(!c){p=!0;const I={};r.easing&&(I.easing=r.easing),c=tE(I)}t.currentTime+=r.duration+r.delay;const _=this.visitStyle(c,t);_.isEmptyStep=p,i=_}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(c=>{"string"==typeof c?c==Kc?r.push(c):t.errors.push(function pk(n){return new f.vHH(3002,rn)}()):r.push(c)}):r.push(e.styles);let i=!1,u=null;return r.forEach(c=>{if(tD(c)){const p=c,_=p.easing;if(_&&(u=_,delete p.easing),!i)for(let I in p)if(p[I].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:u,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,u=t.currentTime;r&&u>0&&(u-=r.duration+r.delay),e.styles.forEach(c=>{"string"!=typeof c&&Object.keys(c).forEach(p=>{if(!this._driver.validateStyleProperty(p))return delete c[p],void t.unsupportedCSSPropertiesFound.add(p);const _=t.collectedStyles[t.currentQuerySelector],I=_[p];let T=!0;I&&(u!=i&&u>=I.startTime&&i<=I.endTime&&(t.errors.push(function gk(n,e,t,r,i){return new f.vHH(3010,rn)}()),T=!1),u=I.startTime),T&&(_[p]={startTime:u,endTime:i}),t.options&&function Gk(n,e,t){const r=e.params||{},i=VN(n);i.length&&i.forEach(u=>{r.hasOwnProperty(u)||t.push(function ak(n){return new f.vHH(3001,rn)}())})}(c[p],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function mk(){return new f.vHH(3011,rn)}()),r;let u=0;const c=[];let p=!1,_=!1,I=0;const T=e.steps.map(nt=>{const ot=this._makeStyleAst(nt,t);let gt=null!=ot.offset?ot.offset:function oF(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(tD(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(tD(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(ot.styles),at=0;return null!=gt&&(u++,at=ot.offset=gt),_=_||at<0||at>1,p=p||at<I,I=at,c.push(at),ot});_&&t.errors.push(function yk(){return new f.vHH(3012,rn)}()),p&&t.errors.push(function _k(){return new f.vHH(3200,rn)}());const M=e.steps.length;let L=0;u>0&&u<M?t.errors.push(function vk(){return new f.vHH(3202,rn)}()):0==u&&(L=1/(M-1));const U=M-1,z=t.currentTime,de=t.currentAnimateTimings,Te=de.duration;return T.forEach((nt,ot)=>{const gt=L>0?ot==U?1:L*ot:c[ot],at=gt*Te;t.currentTime=z+de.delay+at,de.duration=at,this._validateStyleAst(nt,t),nt.offset=gt,r.styles.push(nt)}),r}visitReference(e,t){return{type:8,animation:Go(this,iE(e.animation),t),options:dg(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:dg(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:dg(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[u,c]=function rF(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(tF,"")),n=n.replace(/@\*/g,zb).replace(/@\w+/g,t=>zb+"-"+t.substr(1)).replace(/:animating/g,YA),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+u:u,$o(t.collectedStyles,t.currentQuerySelector,{});const p=Go(this,iE(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:u,limit:i.limit||0,optional:!!i.optional,includeSelf:c,animation:p,originalSelector:e.selector,options:dg(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function Ek(){return new f.vHH(3013,rn)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:Wb(e.timings,t.errors,!0);return{type:12,animation:Go(this,iE(e.animation),t),timings:r,options:null}}}class sF{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function tD(n){return!Array.isArray(n)&&"object"==typeof n}function dg(n){return n?(n=By(n)).params&&(n.params=function iF(n){return n?By(n):null}(n.params)):n={},n}function tS(n,e,t){return{duration:n,delay:e,easing:t}}function nS(n,e,t,r,i,u,c=null,p=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:u,totalTime:i+u,easing:c,subTimeline:p}}class nD{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const cF=new RegExp(":enter","g"),hF=new RegExp(":leave","g");function rS(n,e,t,r,i,u={},c={},p,_,I=[]){return(new fF).buildKeyframes(n,e,t,r,i,u,c,p,_,I)}class fF{buildKeyframes(e,t,r,i,u,c,p,_,I,T=[]){I=I||new nD;const M=new iS(e,t,I,i,u,T,[]);M.options=_,M.currentTimeline.setStyles([c],null,M.errors,_),Go(this,r,M);const L=M.timelines.filter(U=>U.containsAnimation());if(Object.keys(p).length){let U;for(let z=L.length-1;z>=0;z--){const de=L[z];if(de.element===t){U=de;break}}U&&!U.allowOnlyTimelineStyles()&&U.setStyles([p],null,M.errors,_)}return L.length?L.map(U=>U.buildKeyframes()):[nS(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),u=t.currentTimeline.currentTime,c=this._visitSubInstructions(r,i,i.options);u!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let u=t.currentTimeline.currentTime;const c=null!=r.duration?lg(r.duration):null,p=null!=r.delay?lg(r.delay):null;return 0!==c&&e.forEach(_=>{const I=t.appendInstructionToTimeline(_,c,p);u=Math.max(u,I.duration+I.delay)}),u}visitReference(e,t){t.updateOptions(e.options,!0),Go(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const u=e.options;if(u&&(u.params||u.delay)&&(i=t.createSubContext(u),i.transformIntoNewTimeline(),null!=u.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=rD);const c=lg(u.delay);i.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>Go(this,c,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const u=e.options&&e.options.delay?lg(e.options.delay):0;e.steps.forEach(c=>{const p=t.createSubContext(e.options);u&&p.delayNextStep(u),Go(this,c,p),i=Math.max(i,p.currentTimeline.currentTime),r.push(p.currentTimeline)}),r.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return Wb(t.params?Kb(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const u=e.style;5==u.type?this.visitKeyframes(u,t):(t.incrementTime(r.duration),this.visitStyle(u,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const u=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(u):r.setStyles(e.styles,u,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,u=r.duration,p=t.createSubContext().currentTimeline;p.easing=r.easing,e.styles.forEach(_=>{p.forwardTime((_.offset||0)*u),p.setStyles(_.styles,_.easing,t.errors,t.options),p.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(p),t.transformIntoNewTimeline(i+u),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},u=i.delay?lg(i.delay):0;u&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=rD);let c=r;const p=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=p.length;let _=null;p.forEach((I,T)=>{t.currentQueryIndex=T;const M=t.createSubContext(e.options,I);u&&M.delayNextStep(u),I===t.element&&(_=M.currentTimeline),Go(this,e.animation,M),M.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,M.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),_&&(t.currentTimeline.mergeTimelineCollectedStyles(_),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,u=e.timings,c=Math.abs(u.duration),p=c*(t.currentQueryTotal-1);let _=c*t.currentQueryIndex;switch(u.duration<0?"reverse":u.easing){case"reverse":_=p-_;break;case"full":_=r.currentStaggerTime}const T=t.currentTimeline;_&&T.delayNextStep(_);const M=T.currentTime;Go(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-M+(i.startTime-r.currentTimeline.startTime)}}const rD={};class iS{constructor(e,t,r,i,u,c,p,_){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=u,this.errors=c,this.timelines=p,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=rD,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=_||new iD(this._driver,t,0),p.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=lg(r.duration)),null!=r.delay&&(i.delay=lg(r.delay));const u=r.params;if(u){let c=i.params;c||(c=this.options.params={}),Object.keys(u).forEach(p=>{(!t||!c.hasOwnProperty(p))&&(c[p]=Kb(u[p],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,u=new iS(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return u.previousNode=this.previousNode,u.currentAnimateTimings=this.currentAnimateTimings,u.options=this._copyOptions(),u.updateOptions(e),u.currentQueryIndex=this.currentQueryIndex,u.currentQueryTotal=this.currentQueryTotal,u.parentContext=this,this.subContextCount++,u}transformIntoNewTimeline(e){return this.previousNode=rD,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},u=new pF(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(u),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,u,c){let p=[];if(i&&p.push(this.element),e.length>0){e=(e=e.replace(cF,"."+this._enterClassName)).replace(hF,"."+this._leaveClassName);let I=this._driver.query(this.element,e,1!=r);0!==r&&(I=r<0?I.slice(I.length+r,I.length):I.slice(0,r)),p.push(...I)}return!u&&0==p.length&&c.push(function wk(n){return new f.vHH(3014,rn)}()),p}}class iD{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new iD(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Kc,this._currentKeyframe[t]=Kc}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&(this._previousKeyframe.easing=t);const u=i&&i.params||{},c=function gF(n,e){const t={};let r;return n.forEach(i=>{"*"===i?(r=r||Object.keys(e),r.forEach(u=>{t[u]=Kc})):qh(i,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(c).forEach(p=>{const _=Kb(c[p],u,r);this._pendingStyles[p]=_,this._localTimelineStyles.hasOwnProperty(p)||(this._backFill[p]=this._globalTimelineStyles.hasOwnProperty(p)?this._globalTimelineStyles[p]:Kc),this._updateStyle(p,_)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],i=e._styleSummary[t];(!r||i.time>r.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((p,_)=>{const I=qh(p,!0);Object.keys(I).forEach(T=>{const M=I[T];"!"==M?e.add(T):M==Kc&&t.add(T)}),r||(I.offset=_/this.duration),i.push(I)});const u=e.size?Zb(e.values()):[],c=t.size?Zb(t.values()):[];if(r){const p=i[0],_=By(p);p.offset=0,_.offset=1,i=[p,_]}return nS(this.element,i,u,c,this.duration,this.startTime,this.easing,!1)}}class pF extends iD{constructor(e,t,r,i,u,c,p=!1){super(e,t,c.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=u,this._stretchStartingKeyframe=p,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const u=[],c=r+t,p=t/c,_=qh(e[0],!1);_.offset=0,u.push(_);const I=qh(e[0],!1);I.offset=$N(p),u.push(I);const T=e.length-1;for(let M=1;M<=T;M++){let L=qh(e[M],!1);L.offset=$N((t+L.offset*r)/c),u.push(L)}r=c,t=0,i="",e=u}return nS(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function $N(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class sS{}class mF extends sS{normalizePropertyName(e,t){return XA(e)}normalizeStyleValue(e,t,r,i){let u="";const c=r.toString().trim();if(yF[t]&&0!==r&&"0"!==r)if("number"==typeof r)u="px";else{const p=r.match(/^[+-]?[\d\.]+([a-z]*)$/);p&&0==p[1].length&&i.push(function ck(n,e){return new f.vHH(3005,rn)}())}return c+u}}const yF=(()=>function _F(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function GN(n,e,t,r,i,u,c,p,_,I,T,M,L){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:u,toState:r,toStyles:c,timelines:p,queriedElements:_,preStyleProps:I,postStyleProps:T,totalTime:M,errors:L}}const oS={};class qN{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function vF(n,e,t,r,i){return n.some(u=>u(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){const i=this._stateStyles["*"],u=this._stateStyles[e],c=i?i.buildStyles(t,r):{};return u?u.buildStyles(t,r):c}build(e,t,r,i,u,c,p,_,I,T){const M=[],L=this.ast.options&&this.ast.options.params||oS,z=this.buildStyles(r,p&&p.params||oS,M),de=_&&_.params||oS,Te=this.buildStyles(i,de,M),nt=new Set,ot=new Map,gt=new Map,at="void"===i,Ct={params:Object.assign(Object.assign({},L),de)},Nt=T?[]:rS(e,t,this.ast.animation,u,c,z,Te,Ct,I,M);let an=0;if(Nt.forEach(Zc=>{an=Math.max(Zc.duration+Zc.delay,an)}),M.length)return GN(t,this._triggerName,r,i,at,z,Te,[],[],ot,gt,an,M);Nt.forEach(Zc=>{const Yc=Zc.element,aR=$o(ot,Yc,{});Zc.preStyleProps.forEach(hg=>aR[hg]=!0);const oE=$o(gt,Yc,{});Zc.postStyleProps.forEach(hg=>oE[hg]=!0),Yc!==t&&nt.add(Yc)});const xs=Zb(nt.values());return GN(t,this._triggerName,r,i,at,z,Te,Nt,xs,ot,gt,an)}}class EF{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},i=By(this.defaultParams);return Object.keys(e).forEach(u=>{const c=e[u];null!=c&&(i[u]=c)}),this.styles.styles.forEach(u=>{if("string"!=typeof u){const c=u;Object.keys(c).forEach(p=>{let _=c[p];_.length>1&&(_=Kb(_,i,t));const I=this.normalizer.normalizePropertyName(p,t);_=this.normalizer.normalizeStyleValue(p,I,_,t),r[I]=_})}}),r}}class IF{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(i=>{this.states[i.name]=new EF(i.style,i.options&&i.options.params||{},r)}),zN(this.states,"true","1"),zN(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new qN(e,i,this.states))}),this.fallbackTransition=function bF(n,e,t){return new qN(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,p)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(c=>c.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function zN(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const DF=new nD;class CF{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],u=eS(this._driver,t,r,[]);if(r.length)throw function Sk(n){return new f.vHH(3503,rn)}();this._animations[e]=u}_buildPlayer(e,t,r){const i=e.element,u=DN(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,u,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],u=this._animations[e];let c;const p=new Map;if(u?(c=rS(this._driver,t,u,ZA,Gb,{},{},r,DF,i),c.forEach(T=>{const M=$o(p,T.element,{});T.postStyleProps.forEach(L=>M[L]=null)})):(i.push(function Mk(){return new f.vHH(3300,rn)}()),c=[]),i.length)throw function xk(n){return new f.vHH(3504,rn)}();p.forEach((T,M)=>{Object.keys(T).forEach(L=>{T[L]=this._driver.computeStyle(M,L,Kc)})});const I=Gh(c.map(T=>{const M=p.get(T.element);return this._buildPlayer(T,{},M)}));return this._playersById[e]=I,I.onDestroy(()=>this.destroy(e)),this.players.push(I),I}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function Nk(n){return new f.vHH(3301,rn)}();return t}listen(e,t,r,i){const u=qA(t,"","","");return $A(this._getPlayer(e),r,u,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const u=this._getPlayer(e);switch(r){case"play":u.play();break;case"pause":u.pause();break;case"reset":u.reset();break;case"restart":u.restart();break;case"finish":u.finish();break;case"init":u.init();break;case"setPosition":u.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const WN="ng-animate-queued",aS="ng-animate-disabled",xF=[],KN={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},NF={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Sa="__ng_removed";class uS{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function kF(n){return null!=n?n:null}(r?e.value:e),r){const u=By(e);delete u.value,this.options=u}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const sE="void",lS=new uS(sE);class RF{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Ma(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.hasOwnProperty(t))throw function Rk(n,e){return new f.vHH(3302,rn)}();if(null==r||0==r.length)throw function Ok(n){return new f.vHH(3303,rn)}();if(!function FF(n){return"start"==n||"done"==n}(r))throw function Pk(n,e){return new f.vHH(3400,rn)}();const u=$o(this._elementListeners,e,[]),c={name:t,phase:r,callback:i};u.push(c);const p=$o(this._engine.statesByElement,e,{});return p.hasOwnProperty(t)||(Ma(e,qb),Ma(e,qb+"-"+t),p[t]=lS),()=>{this._engine.afterFlush(()=>{const _=u.indexOf(c);_>=0&&u.splice(_,1),this._triggers[t]||delete p[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function kk(n){return new f.vHH(3401,rn)}();return t}trigger(e,t,r,i=!0){const u=this._getTrigger(t),c=new cS(this.id,t,e);let p=this._engine.statesByElement.get(e);p||(Ma(e,qb),Ma(e,qb+"-"+t),this._engine.statesByElement.set(e,p={}));let _=p[t];const I=new uS(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&_&&I.absorbOptions(_.options),p[t]=I,_||(_=lS),I.value!==sE&&_.value===I.value){if(!function UF(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const u=t[i];if(!e.hasOwnProperty(u)||n[u]!==e[u])return!1}return!0}(_.params,I.params)){const de=[],Te=u.matchStyles(_.value,_.params,de),nt=u.matchStyles(I.value,I.params,de);de.length?this._engine.reportError(de):this._engine.afterFlush(()=>{cg(e,Te),xl(e,nt)})}return}const L=$o(this._engine.playersByElement,e,[]);L.forEach(de=>{de.namespaceId==this.id&&de.triggerName==t&&de.queued&&de.destroy()});let U=u.matchTransition(_.value,I.value,e,I.params),z=!1;if(!U){if(!i)return;U=u.fallbackTransition,z=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:U,fromState:_,toState:I,player:c,isFallbackTransition:z}),z||(Ma(e,WN),c.onStart(()=>{jy(e,WN)})),c.onDone(()=>{let de=this.players.indexOf(c);de>=0&&this.players.splice(de,1);const Te=this._engine.playersByElement.get(e);if(Te){let nt=Te.indexOf(c);nt>=0&&Te.splice(nt,1)}}),this.players.push(c),L.push(c),c}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,zb,!0);r.forEach(i=>{if(i[Sa])return;const u=this._engine.fetchNamespacesByElement(i);u.size?u.forEach(c=>c.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const u=this._engine.statesByElement.get(e),c=new Map;if(u){const p=[];if(Object.keys(u).forEach(_=>{if(c.set(_,u[_].value),this._triggers[_]){const I=this.trigger(e,_,sE,i);I&&p.push(I)}}),p.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,c),r&&Gh(p).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(u=>{const c=u.name;if(i.has(c))return;i.add(c);const _=this._triggers[c].fallbackTransition,I=r[c]||lS,T=new uS(sE),M=new cS(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:_,fromState:I,toState:T,player:M,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const u=r.players.length?r.playersByQueriedElement.get(e):[];if(u&&u.length)i=!0;else{let c=e;for(;c=c.parentNode;)if(r.statesByElement.get(c)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const u=e[Sa];(!u||u===KN)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Ma(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const u=r.element,c=this._elementListeners.get(u);c&&c.forEach(p=>{if(p.name==r.triggerName){const _=qA(u,r.triggerName,r.fromState.value,r.toState.value);_._data=e,$A(r.player,p.phase,_,p.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const u=r.transition.ast.depCount,c=i.transition.ast.depCount;return 0==u||0==c?u-c:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class OF{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,u)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new RF(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement,u=r.length-1;if(u>=0){let c=!1;if(void 0!==this.driver.getParentElement){let p=this.driver.getParentElement(t);for(;p;){const _=i.get(p);if(_){const I=r.indexOf(_);r.splice(I+1,0,e),c=!0;break}p=this.driver.getParentElement(p)}}else for(let p=u;p>=0;p--)if(this.driver.containsElement(r[p].hostElement,t)){r.splice(p+1,0,e),c=!0;break}c||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const i=Object.keys(r);for(let u=0;u<i.length;u++){const c=r[i[u]].namespaceId;if(c){const p=this._fetchNamespace(c);p&&t.add(p)}}}return t}trigger(e,t,r,i){if(sD(t)){const u=this._fetchNamespace(e);if(u)return u.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!sD(t))return;const u=t[Sa];if(u&&u.setForRemoval){u.setForRemoval=!1,u.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ma(e,aS)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),jy(e,aS))}removeNode(e,t,r,i){if(sD(t)){const u=e?this._fetchNamespace(e):null;if(u?u.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,u){this.collectedLeaveElements.push(t),t[Sa]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:u}}listen(e,t,r,i,u){return sD(t)?this._fetchNamespace(e).listen(t,r,i,u):()=>{}}_buildInstruction(e,t,r,i,u){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,u)}destroyInnerAnimations(e){let t=this.driver.query(e,zb,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,YA,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Gh(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const r=e[Sa];if(r&&r.setForRemoval){if(e[Sa]=KN,r.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(r.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,r.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(aS))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Ma(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Gh(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function Fk(n){return new f.vHH(3402,rn)}()}_flushAnimations(e,t){const r=new nD,i=[],u=new Map,c=[],p=new Map,_=new Map,I=new Map,T=new Set;this.disabledNodes.forEach(ct=>{T.add(ct);const Tt=this.driver.query(ct,".ng-animate-queued",!0);for(let kt=0;kt<Tt.length;kt++)T.add(Tt[kt])});const M=this.bodyNode,L=Array.from(this.statesByElement.keys()),U=QN(L,this.collectedEnterElements),z=new Map;let de=0;U.forEach((ct,Tt)=>{const kt=ZA+de++;z.set(Tt,kt),ct.forEach(fn=>Ma(fn,kt))});const Te=[],nt=new Set,ot=new Set;for(let ct=0;ct<this.collectedLeaveElements.length;ct++){const Tt=this.collectedLeaveElements[ct],kt=Tt[Sa];kt&&kt.setForRemoval&&(Te.push(Tt),nt.add(Tt),kt.hasAnimation?this.driver.query(Tt,".ng-star-inserted",!0).forEach(fn=>nt.add(fn)):ot.add(Tt))}const gt=new Map,at=QN(L,Array.from(nt));at.forEach((ct,Tt)=>{const kt=Gb+de++;gt.set(Tt,kt),ct.forEach(fn=>Ma(fn,kt))}),e.push(()=>{U.forEach((ct,Tt)=>{const kt=z.get(Tt);ct.forEach(fn=>jy(fn,kt))}),at.forEach((ct,Tt)=>{const kt=gt.get(Tt);ct.forEach(fn=>jy(fn,kt))}),Te.forEach(ct=>{this.processLeaveNode(ct)})});const Ct=[],Nt=[];for(let ct=this._namespaceList.length-1;ct>=0;ct--)this._namespaceList[ct].drainQueuedTransitions(t).forEach(kt=>{const fn=kt.player,Ii=kt.element;if(Ct.push(fn),this.collectedEnterElements.length){const Ns=Ii[Sa];if(Ns&&Ns.setForMove){if(Ns.previousTriggersValues&&Ns.previousTriggersValues.has(kt.triggerName)){const fg=Ns.previousTriggersValues.get(kt.triggerName),Wh=this.statesByElement.get(kt.element);Wh&&Wh[kt.triggerName]&&(Wh[kt.triggerName].value=fg)}return void fn.destroy()}}const Nl=!M||!this.driver.containsElement(M,Ii),qo=gt.get(Ii),zh=z.get(Ii),dr=this._buildInstruction(kt,r,zh,qo,Nl);if(dr.errors&&dr.errors.length)return void Nt.push(dr);if(Nl)return fn.onStart(()=>cg(Ii,dr.fromStyles)),fn.onDestroy(()=>xl(Ii,dr.toStyles)),void i.push(fn);if(kt.isFallbackTransition)return fn.onStart(()=>cg(Ii,dr.fromStyles)),fn.onDestroy(()=>xl(Ii,dr.toStyles)),void i.push(fn);const cR=[];dr.timelines.forEach(Ns=>{Ns.stretchStartingKeyframe=!0,this.disabledNodes.has(Ns.element)||cR.push(Ns)}),dr.timelines=cR,r.append(Ii,dr.timelines),c.push({instruction:dr,player:fn,element:Ii}),dr.queriedElements.forEach(Ns=>$o(p,Ns,[]).push(fn)),dr.preStyleProps.forEach((Ns,fg)=>{const Wh=Object.keys(Ns);if(Wh.length){let pg=_.get(fg);pg||_.set(fg,pg=new Set),Wh.forEach(hS=>pg.add(hS))}}),dr.postStyleProps.forEach((Ns,fg)=>{const Wh=Object.keys(Ns);let pg=I.get(fg);pg||I.set(fg,pg=new Set),Wh.forEach(hS=>pg.add(hS))})});if(Nt.length){const ct=[];Nt.forEach(Tt=>{ct.push(function Lk(n,e){return new f.vHH(3505,rn)}())}),Ct.forEach(Tt=>Tt.destroy()),this.reportError(ct)}const an=new Map,xs=new Map;c.forEach(ct=>{const Tt=ct.element;r.has(Tt)&&(xs.set(Tt,Tt),this._beforeAnimationBuild(ct.player.namespaceId,ct.instruction,an))}),i.forEach(ct=>{const Tt=ct.element;this._getPreviousPlayers(Tt,!1,ct.namespaceId,ct.triggerName,null).forEach(fn=>{$o(an,Tt,[]).push(fn),fn.destroy()})});const Zc=Te.filter(ct=>XN(ct,_,I)),Yc=new Map;YN(Yc,this.driver,ot,I,Kc).forEach(ct=>{XN(ct,_,I)&&Zc.push(ct)});const oE=new Map;U.forEach((ct,Tt)=>{YN(oE,this.driver,new Set(ct),_,"!")}),Zc.forEach(ct=>{const Tt=Yc.get(ct),kt=oE.get(ct);Yc.set(ct,Object.assign(Object.assign({},Tt),kt))});const hg=[],uR=[],lR={};c.forEach(ct=>{const{element:Tt,player:kt,instruction:fn}=ct;if(r.has(Tt)){if(T.has(Tt))return kt.onDestroy(()=>xl(Tt,fn.toStyles)),kt.disabled=!0,kt.overrideTotalTime(fn.totalTime),void i.push(kt);let Ii=lR;if(xs.size>1){let qo=Tt;const zh=[];for(;qo=qo.parentNode;){const dr=xs.get(qo);if(dr){Ii=dr;break}zh.push(qo)}zh.forEach(dr=>xs.set(dr,Ii))}const Nl=this._buildAnimation(kt.namespaceId,fn,an,u,oE,Yc);if(kt.setRealPlayer(Nl),Ii===lR)hg.push(kt);else{const qo=this.playersByElement.get(Ii);qo&&qo.length&&(kt.parentPlayer=Gh(qo)),i.push(kt)}}else cg(Tt,fn.fromStyles),kt.onDestroy(()=>xl(Tt,fn.toStyles)),uR.push(kt),T.has(Tt)&&i.push(kt)}),uR.forEach(ct=>{const Tt=u.get(ct.element);if(Tt&&Tt.length){const kt=Gh(Tt);ct.setRealPlayer(kt)}}),i.forEach(ct=>{ct.parentPlayer?ct.syncPlayerEvents(ct.parentPlayer):ct.destroy()});for(let ct=0;ct<Te.length;ct++){const Tt=Te[ct],kt=Tt[Sa];if(jy(Tt,Gb),kt&&kt.hasAnimation)continue;let fn=[];if(p.size){let Nl=p.get(Tt);Nl&&Nl.length&&fn.push(...Nl);let qo=this.driver.query(Tt,YA,!0);for(let zh=0;zh<qo.length;zh++){let dr=p.get(qo[zh]);dr&&dr.length&&fn.push(...dr)}}const Ii=fn.filter(Nl=>!Nl.destroyed);Ii.length?LF(this,Tt,Ii):this.processLeaveNode(Tt)}return Te.length=0,hg.forEach(ct=>{this.players.push(ct),ct.onDone(()=>{ct.destroy();const Tt=this.players.indexOf(ct);this.players.splice(Tt,1)}),ct.play()}),hg}elementContainsData(e,t){let r=!1;const i=t[Sa];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,u){let c=[];if(t){const p=this.playersByQueriedElement.get(e);p&&(c=p)}else{const p=this.playersByElement.get(e);if(p){const _=!u||u==sE;p.forEach(I=>{I.queued||!_&&I.triggerName!=i||c.push(I)})}}return(r||i)&&(c=c.filter(p=>!(r&&r!=p.namespaceId||i&&i!=p.triggerName))),c}_beforeAnimationBuild(e,t,r){const u=t.element,c=t.isRemovalTransition?void 0:e,p=t.isRemovalTransition?void 0:t.triggerName;for(const _ of t.timelines){const I=_.element,T=I!==u,M=$o(r,I,[]);this._getPreviousPlayers(I,T,c,p,t.toState).forEach(U=>{const z=U.getRealPlayer();z.beforeDestroy&&z.beforeDestroy(),U.destroy(),M.push(U)})}cg(u,t.fromStyles)}_buildAnimation(e,t,r,i,u,c){const p=t.triggerName,_=t.element,I=[],T=new Set,M=new Set,L=t.timelines.map(z=>{const de=z.element;T.add(de);const Te=de[Sa];if(Te&&Te.removedBeforeQueried)return new nE(z.duration,z.delay);const nt=de!==_,ot=function VF(n){const e=[];return JN(n,e),e}((r.get(de)||xF).map(an=>an.getRealPlayer())).filter(an=>!!an.element&&an.element===de),gt=u.get(de),at=c.get(de),Ct=DN(0,this._normalizer,0,z.keyframes,gt,at),Nt=this._buildPlayer(z,Ct,ot);if(z.subTimeline&&i&&M.add(de),nt){const an=new cS(e,p,de);an.setRealPlayer(Nt),I.push(an)}return Nt});I.forEach(z=>{$o(this.playersByQueriedElement,z.element,[]).push(z),z.onDone(()=>function PF(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,z.element,z))}),T.forEach(z=>Ma(z,PN));const U=Gh(L);return U.onDestroy(()=>{T.forEach(z=>jy(z,PN)),xl(_,t.toStyles)}),M.forEach(z=>{$o(i,z,[]).push(U)}),U}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new nE(e.duration,e.delay)}}class cS{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new nE,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>$A(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){$o(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function sD(n){return n&&1===n.nodeType}function ZN(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function YN(n,e,t,r,i){const u=[];t.forEach(_=>u.push(ZN(_)));const c=[];r.forEach((_,I)=>{const T={};_.forEach(M=>{const L=T[M]=e.computeStyle(I,M,i);(!L||0==L.length)&&(I[Sa]=NF,c.push(I))}),n.set(I,T)});let p=0;return t.forEach(_=>ZN(_,u[p++])),c}function QN(n,e){const t=new Map;if(n.forEach(p=>t.set(p,[])),0==e.length)return t;const i=new Set(e),u=new Map;function c(p){if(!p)return 1;let _=u.get(p);if(_)return _;const I=p.parentNode;return _=t.has(I)?I:i.has(I)?1:c(I),u.set(p,_),_}return e.forEach(p=>{const _=c(p);1!==_&&t.get(_).push(p)}),t}function Ma(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function jy(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function LF(n,e,t){Gh(t).onDone(()=>n.processLeaveNode(e))}function JN(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof mN?JN(r.players,e):e.push(r)}}function XN(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(u=>i.add(u)):e.set(n,r),t.delete(n),!0}class oD{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,u)=>{},this._transitionEngine=new OF(e,t,r),this._timelineEngine=new CF(e,t,r),this._transitionEngine.onRemovalComplete=(i,u)=>this.onRemovalComplete(i,u)}registerTrigger(e,t,r,i,u){const c=e+"-"+i;let p=this._triggerCache[c];if(!p){const _=[],T=eS(this._driver,u,_,[]);if(_.length)throw function Tk(n,e){return new f.vHH(3404,rn)}();p=function wF(n,e,t){return new IF(n,e,t)}(i,T,this._normalizer),this._triggerCache[c]=p}this._transitionEngine.registerTrigger(t,i,p)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[u,c]=CN(r);this._timelineEngine.command(u,t,c,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,u){if("@"==r.charAt(0)){const[c,p]=CN(r);return this._timelineEngine.listen(c,t,p,u)}return this._transitionEngine.listen(e,t,r,i,u)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let jF=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let u=n.initialStylesByElement.get(t);u||n.initialStylesByElement.set(t,u={}),this._initialStyles=u}start(){this._state<1&&(this._startStyles&&xl(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(xl(this._element,this._initialStyles),this._endStyles&&(xl(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(cg(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(cg(this._element,this._endStyles),this._endStyles=null),xl(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function dS(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=t[r];HF(i)&&(e=e||{},e[i]=n[i])}return e}function HF(n){return"display"===n||"position"===n}class eR{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(r=>{"offset"!=r&&(e[r]=this._finished?t[r]:UN(this.element,r))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class $F{validateStyleProperty(e){return MN(e)}matchesElement(e,t){return!1}containsElement(e,t){return xN(e,t)}getParentElement(e){return WA(e)}query(e,t,r){return NN(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,u,c=[]){const _={duration:r,delay:i,fill:0==i?"both":"forwards"};u&&(_.easing=u);const I={},T=c.filter(L=>L instanceof eR);(function Wk(n,e){return 0===n||0===e})(r,i)&&T.forEach(L=>{let U=L.currentSnapshot;Object.keys(U).forEach(z=>I[z]=U[z])}),t=function Kk(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let u=e[0],c=[];if(r.forEach(p=>{u.hasOwnProperty(p)||c.push(p),u[p]=t[p]}),c.length)for(var i=1;i<e.length;i++){let p=e[i];c.forEach(function(_){p[_]=UN(n,_)})}}return e}(e,t=t.map(L=>qh(L,!1)),I);const M=function BF(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=dS(e[0]),e.length>1&&(r=dS(e[e.length-1]))):e&&(t=dS(e)),t||r?new jF(n,t,r):null}(e,t);return new eR(e,t,_,M)}}let GF=(()=>{class n extends dN{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:f.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?fN(t):t;return tR(this._renderer,null,r,"register",[i]),new qF(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.FYo),f.LFG(se))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class qF extends class C1{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new zF(this._id,e,t||{},this._renderer)}}class zF{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return tR(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function tR(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const nR="@.disabled";let WF=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(u,c)=>{const p=null==c?void 0:c.parentNode(u);p&&c.removeChild(p,u)}}createRenderer(t,r){const u=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let T=this._rendererCache.get(u);return T||(T=new rR("",u,this.engine),this._rendererCache.set(u,T)),T}const c=r.id,p=r.id+"-"+this._currentId;this._currentId++,this.engine.register(p,t);const _=T=>{Array.isArray(T)?T.forEach(_):this.engine.registerTrigger(c,p,t,T.name,T)};return r.data.animation.forEach(_),new KF(this,p,u,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(u=>{const[c,p]=u;c(p)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.FYo),f.LFG(oD),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class rR{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==nR?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class KF extends rR{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==nR?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function ZF(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let u=t.substr(1),c="";return"@"!=u.charAt(0)&&([u,c]=function YF(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(u)),this.engine.listen(this.namespaceId,i,u,c,p=>{this.factory.scheduleListenerCallback(p._data||-1,r,p)})}return this.delegate.listen(e,t,r)}}let QF=(()=>{class n extends oD{constructor(t,r,i){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(se),f.LFG(KA),f.LFG(sS))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const iR=new f.OlP("AnimationModuleType"),sR=[{provide:dN,useClass:GF},{provide:sS,useFactory:function JF(){return new mF}},{provide:oD,useClass:QF},{provide:f.FYo,useFactory:function XF(n,e,t){return new WF(n,e,t)},deps:[go,oD,f.R0b]}],oR=[{provide:KA,useFactory:()=>new $F},{provide:iR,useValue:"BrowserAnimations"},...sR],eL=[{provide:KA,useClass:RN},{provide:iR,useValue:"NoopAnimations"},...sR];let tL=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?eL:oR}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:oR,imports:[ea]}),n})(),nL=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[ik]}),n.\u0275inj=f.cJS({providers:[],imports:[[ea,nk,Uo.hO.initializeApp(IN_firebase),D1,ow,tL,EN.forRoot()]]}),n})();(0,f.G48)(),bu().bootstrapModule(nL).catch(n=>console.error(n))},5867:(Je,we,O)=>{O.d(we,{C6:()=>f.getApps,Mq:()=>f.getApp});var f=O(9681);(0,f.registerVersion)("firebase","9.14.0","app")},127:(Je,we,O)=>{O.d(we,{Z:()=>f.Z});var f=O(3942);f.Z.registerVersion("firebase","9.14.0","app-compat")},1277:(Je,we,O)=>{O.r(we);var f=O(5861),J=O(3942),P=O(2090),ue=O(9681),ie=O(1877),pe=O(655),se=O(4859);const Oe=function Le(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ue=function Ae(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},fe=new P.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),qe=new ie.Yd("@firebase/auth");function Ye(y,...h){qe.logLevel<=ie.in.ERROR&&qe.error(`Auth (${ue.SDK_VERSION}): ${y}`,...h)}function xe(y,...h){throw Be(y,...h)}function me(y,...h){return Be(y,...h)}function be(y,h,g){const E=Object.assign(Object.assign({},Ue()),{[h]:g});return new P.LL("auth","Firebase",E).create(h,{appName:y.name})}function Ve(y,h,g){if(!(h instanceof g))throw g.name!==h.constructor.name&&xe(y,"argument-error"),be(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Be(y,...h){if("string"!=typeof y){const g=h[0],E=[...h.slice(1)];return E[0]&&(E[0].appName=y.name),y._errorFactory.create(g,...E)}return fe.create(y,...h)}function G(y,h,...g){if(!y)throw Be(h,...g)}function _e(y){const h="INTERNAL ASSERTION FAILED: "+y;throw Ye(h),new Error(h)}function W(y,h){y||_e(h)}const ee=new Map;function Q(y){W(y instanceof Function,"Expected a class definition");let h=ee.get(y);return h?(W(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,ee.set(y,h),h)}function Pe(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function ut(){return"http:"===Qt()||"https:"===Qt()}function Qt(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class sn{constructor(h,g){this.shortDelay=h,this.longDelay=g,W(g>h,"Short delay should be less than long delay!"),this.isMobile=(0,P.uI)()||(0,P.b$)()}get(){return function Bt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ut()||(0,P.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function mn(y,h){W(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return h?`${g}${h.startsWith("/")?h.slice(1):h}`:g}class un{static initialize(h,g,E){this.fetchImpl=h,g&&(this.headersImpl=g),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void _e("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void _e("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void _e("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Xt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},xr=new sn(3e4,6e4);function Kt(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function zt(y,h,g,E){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,f.Z)(function*(y,h,g,E,A={}){return Ui(y,A,(0,f.Z)(function*(){let R={},q={};E&&("GET"===h?q=E:R={body:JSON.stringify(E)});const le=(0,P.xO)(Object.assign({key:y.config.apiKey},q)).slice(1),ke=yield y._getAdditionalHeaders();return ke["Content-Type"]="application/json",y.languageCode&&(ke["X-Firebase-Locale"]=y.languageCode),un.fetch()(ls(y,y.config.apiHost,g,le),Object.assign({method:h,headers:ke,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function Ui(y,h,g){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,f.Z)(function*(y,h,g){y._canInitEmulator=!1;const E=Object.assign(Object.assign({},Xt),h);try{const A=new oi(y),R=yield Promise.race([g(),A.promise]);A.clearNetworkTimeout();const q=yield R.json();if("needConfirmation"in q)throw bi(y,"account-exists-with-different-credential",q);if(R.ok&&!("errorMessage"in q))return q;{const le=R.ok?q.errorMessage:q.error.message,[ke,Ze]=le.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ke)throw bi(y,"credential-already-in-use",q);if("EMAIL_EXISTS"===ke)throw bi(y,"email-already-in-use",q);if("USER_DISABLED"===ke)throw bi(y,"user-disabled",q);const yt=E[ke]||ke.toLowerCase().replace(/[_\s]+/g,"-");if(Ze)throw be(y,yt,Ze);xe(y,yt)}}catch(A){if(A instanceof P.ZR)throw A;xe(y,"network-request-failed")}})).apply(this,arguments)}function Jr(y,h,g,E){return us.apply(this,arguments)}function us(){return(us=(0,f.Z)(function*(y,h,g,E,A={}){const R=yield zt(y,h,g,E,A);return"mfaPendingCredential"in R&&xe(y,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function ls(y,h,g,E){const A=`${h}${g}?${E}`;return y.config.emulator?mn(y.config,A):`${y.config.apiScheme}://${A}`}class oi{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((g,E)=>{this.timer=setTimeout(()=>E(me(this.auth,"network-request-failed")),xr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function bi(y,h,g){const E={appName:y.name};g.email&&(E.email=g.email),g.phoneNumber&&(E.phoneNumber=g.phoneNumber);const A=me(y,h,E);return A.customData._tokenResponse=g,A}function Rr(){return(Rr=(0,f.Z)(function*(y,h){return zt(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function bn(y,h){return nr.apply(this,arguments)}function nr(){return(nr=(0,f.Z)(function*(y,h){return zt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Rs(y,h){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,f.Z)(function*(y,h){return zt(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function Yn(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch(h){}}function oo(){return(oo=(0,f.Z)(function*(y,h=!1){const g=(0,P.m9)(y),E=yield g.getIdToken(h),A=it(E);G(A&&A.exp&&A.auth_time&&A.iat,g.auth,"internal-error");const R="object"==typeof A.firebase?A.firebase:void 0,q=null==R?void 0:R.sign_in_provider;return{claims:A,token:E,authTime:Yn(Zt(A.auth_time)),issuedAtTime:Yn(Zt(A.iat)),expirationTime:Yn(Zt(A.exp)),signInProvider:q||null,signInSecondFactor:(null==R?void 0:R.sign_in_second_factor)||null}})).apply(this,arguments)}function Zt(y){return 1e3*Number(y)}function it(y){var h;const[g,E,A]=y.split(".");if(void 0===g||void 0===E||void 0===A)return Ye("JWT malformed, contained fewer than 3 sections"),null;try{const R=(0,P.tV)(E);return R?JSON.parse(R):(Ye("Failed to decode base64 JWT payload"),null)}catch(R){return Ye("Caught error parsing JWT payload as JSON",null===(h=R)||void 0===h?void 0:h.toString()),null}}function Or(y,h){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,f.Z)(function*(y,h,g=!1){if(g)return h;try{return yield h}catch(E){throw E instanceof P.ZR&&Wt(E)&&y.auth.currentUser===y&&(yield y.auth.signOut()),E}})).apply(this,arguments)}function Wt({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class ao{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var g;if(h){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const A=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(h=!1){var g=this;if(!this.isRunning)return;const E=this.getInterval(h);this.timerId=setTimeout((0,f.Z)(function*(){yield g.iteration()}),E)}iteration(){var h=this;return(0,f.Z)(function*(){var g;try{yield h.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===(null===(g=E)||void 0===g?void 0:g.code)&&h.schedule(!0))}h.schedule()})()}}class kr{constructor(h,g){this.createdAt=h,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yn(this.lastLoginAt),this.creationTime=Yn(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Fr(y){return pt.apply(this,arguments)}function pt(){return(pt=(0,f.Z)(function*(y){var h;const g=y.auth,E=yield y.getIdToken(),A=yield Or(y,Rs(g,{idToken:E}));G(null==A?void 0:A.users.length,g,"internal-error");const R=A.users[0];y._notifyReloadListener(R);const q=(null===(h=R.providerUserInfo)||void 0===h?void 0:h.length)?Qe(R.providerUserInfo):[],le=cs(y.providerData,q),yt=!!y.isAnonymous&&!(y.email&&R.passwordHash||(null==le?void 0:le.length)),ft={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:le,metadata:new kr(R.createdAt,R.lastLoginAt),isAnonymous:yt};Object.assign(y,ft)})).apply(this,arguments)}function jt(){return(jt=(0,f.Z)(function*(y){const h=(0,P.m9)(y);yield Fr(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function cs(y,h){return[...y.filter(E=>!h.some(A=>A.providerId===E.providerId)),...h]}function Qe(y){return y.map(h=>{var{providerId:g}=h,E=(0,pe._T)(h,["providerId"]);return{providerId:g,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function ze(){return(ze=(0,f.Z)(function*(y,h){const g=yield Ui(y,{},(0,f.Z)(function*(){const E=(0,P.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:A,apiKey:R}=y.config,q=ls(y,A,"/v1/token",`key=${R}`),le=yield y._getAdditionalHeaders();return le["Content-Type"]="application/x-www-form-urlencoded",un.fetch()(q,{method:"POST",headers:le,body:E})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class At{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){G(h.idToken,"internal-error"),G(void 0!==h.idToken,"internal-error"),G(void 0!==h.refreshToken,"internal-error");const g="expiresIn"in h&&void 0!==h.expiresIn?Number(h.expiresIn):function _t(y){const h=it(y);return G(h,"internal-error"),G(void 0!==h.exp,"internal-error"),G(void 0!==h.iat,"internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,g)}getToken(h,g=!1){var E=this;return(0,f.Z)(function*(){return G(!E.accessToken||E.refreshToken,h,"user-token-expired"),g||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(h,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,g){var E=this;return(0,f.Z)(function*(){const{accessToken:A,refreshToken:R,expiresIn:q}=yield function De(y,h){return ze.apply(this,arguments)}(h,g);E.updateTokensAndExpiration(A,R,Number(q))})()}updateTokensAndExpiration(h,g,E){this.refreshToken=g||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(h,g){const{refreshToken:E,accessToken:A,expirationTime:R}=g,q=new At;return E&&(G("string"==typeof E,"internal-error",{appName:h}),q.refreshToken=E),A&&(G("string"==typeof A,"internal-error",{appName:h}),q.accessToken=A),R&&(G("number"==typeof R,"internal-error",{appName:h}),q.expirationTime=R),q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new At,this.toJSON())}_performRefresh(){return _e("not implemented")}}function wt(y,h){G("string"==typeof y||void 0===y,"internal-error",{appName:h})}class Ht{constructor(h){var{uid:g,auth:E,stsTokenManager:A}=h,R=(0,pe._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ao(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=E,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new kr(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(h){var g=this;return(0,f.Z)(function*(){const E=yield Or(g,g.stsTokenManager.getToken(g.auth,h));return G(E,g.auth,"internal-error"),g.accessToken!==E&&(g.accessToken=E,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),E})()}getIdTokenResult(h){return function ai(y){return oo.apply(this,arguments)}(this,h)}reload(){return function uo(y){return jt.apply(this,arguments)}(this)}_assign(h){this!==h&&(G(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(g=>Object.assign({},g)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new Ht(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){G(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,g=!1){var E=this;return(0,f.Z)(function*(){let A=!1;h.idToken&&h.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(h),A=!0),g&&(yield Fr(E)),yield E.auth._persistUserIfCurrent(E),A&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var h=this;return(0,f.Z)(function*(){const g=yield h.getIdToken();return yield Or(h,function Et(y,h){return Rr.apply(this,arguments)}(h.auth,{idToken:g})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,g){var E,A,R,q,le,ke,Ze,yt;const ft=null!==(E=g.displayName)&&void 0!==E?E:void 0,gr=null!==(A=g.email)&&void 0!==A?A:void 0,Wr=null!==(R=g.phoneNumber)&&void 0!==R?R:void 0,tu=null!==(q=g.photoURL)&&void 0!==q?q:void 0,wf=null!==(le=g.tenantId)&&void 0!==le?le:void 0,If=null!==(ke=g._redirectEventId)&&void 0!==ke?ke:void 0,Cr=null!==(Ze=g.createdAt)&&void 0!==Ze?Ze:void 0,Zg=null!==(yt=g.lastLoginAt)&&void 0!==yt?yt:void 0,{uid:Hd,emailVerified:Gu,isAnonymous:$d,providerData:fa,stsTokenManager:Yg}=g;G(Hd&&Yg,h,"internal-error");const Qg=At.fromJSON(this.name,Yg);G("string"==typeof Hd,h,"internal-error"),wt(ft,h.name),wt(gr,h.name),G("boolean"==typeof Gu,h,"internal-error"),G("boolean"==typeof $d,h,"internal-error"),wt(Wr,h.name),wt(tu,h.name),wt(wf,h.name),wt(If,h.name),wt(Cr,h.name),wt(Zg,h.name);const qu=new Ht({uid:Hd,auth:h,email:gr,emailVerified:Gu,displayName:ft,isAnonymous:$d,photoURL:tu,phoneNumber:Wr,tenantId:wf,stsTokenManager:Qg,createdAt:Cr,lastLoginAt:Zg});return fa&&Array.isArray(fa)&&(qu.providerData=fa.map(Jg=>Object.assign({},Jg))),If&&(qu._redirectEventId=If),qu}static _fromIdTokenResponse(h,g,E=!1){return(0,f.Z)(function*(){const A=new At;A.updateFromServerResponse(g);const R=new Ht({uid:g.localId,auth:h,stsTokenManager:A,isAnonymous:E});return yield Fr(R),R})()}}const V=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(g,E){var A=this;return(0,f.Z)(function*(){A.storage[g]=E})()}_get(g){var E=this;return(0,f.Z)(function*(){const A=E.storage[g];return void 0===A?null:A})()}_remove(g){var E=this;return(0,f.Z)(function*(){delete E.storage[g]})()}_addListener(g,E){}_removeListener(g,E){}}return y.type="NONE",y})();function K(y,h,g){return`firebase:${y}:${h}:${g}`}class ve{constructor(h,g,E){this.persistence=h,this.auth=g,this.userKey=E;const{config:A,name:R}=this.auth;this.fullUserKey=K(this.userKey,A.apiKey,R),this.fullPersistenceKey=K("persistence",A.apiKey,R),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,f.Z)(function*(){const g=yield h.persistence._get(h.fullUserKey);return g?Ht._fromJSON(h.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var g=this;return(0,f.Z)(function*(){if(g.persistence===h)return;const E=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=h,E?g.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,g,E="authUser"){return(0,f.Z)(function*(){if(!g.length)return new ve(Q(V),h,E);const A=(yield Promise.all(g.map(function(){var Ze=(0,f.Z)(function*(yt){if(yield yt._isAvailable())return yt});return function(yt){return Ze.apply(this,arguments)}}()))).filter(Ze=>Ze);let R=A[0]||Q(V);const q=K(E,h.config.apiKey,h.name);let le=null;for(const Ze of g)try{const yt=yield Ze._get(q);if(yt){const ft=Ht._fromJSON(h,yt);Ze!==R&&(le=ft),R=Ze;break}}catch(yt){}const ke=A.filter(Ze=>Ze._shouldAllowMigration);return R._shouldAllowMigration&&ke.length?(R=ke[0],le&&(yield R._set(q,le.toJSON())),yield Promise.all(g.map(function(){var Ze=(0,f.Z)(function*(yt){if(yt!==R)try{yield yt._remove(q)}catch(ft){}});return function(yt){return Ze.apply(this,arguments)}}())),new ve(R,h,E)):new ve(R,h,E)})()}}function ne(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(en(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(Xe(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Qn(h))return"Blackberry";if(Dt(h))return"Webos";if(Rt(h))return"Safari";if((h.includes("chrome/")||dn(h))&&!h.includes("edge/"))return"Chrome";if(ln(h))return"Android";{const E=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function Xe(y=(0,P.z$)()){return/firefox\//i.test(y)}function Rt(y=(0,P.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function dn(y=(0,P.z$)()){return/crios\//i.test(y)}function en(y=(0,P.z$)()){return/iemobile/i.test(y)}function ln(y=(0,P.z$)()){return/android/i.test(y)}function Qn(y=(0,P.z$)()){return/blackberry/i.test(y)}function Dt(y=(0,P.z$)()){return/webos/i.test(y)}function En(y=(0,P.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function Os(y=(0,P.z$)()){return En(y)||ln(y)||Dt(y)||Qn(y)||/windows phone/i.test(y)||en(y)}function zo(y,h=[]){let g;switch(y){case"Browser":g=ne((0,P.z$)());break;case"Worker":g=`${ne((0,P.z$)())}-${y}`;break;default:g=y}const E=h.length?h.join(","):"FirebaseCore-web";return`${g}/JsCore/${ue.SDK_VERSION}/${E}`}class Xr{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,g){const E=R=>new Promise((q,le)=>{try{q(h(R))}catch(ke){le(ke)}});E.onAbort=g,this.queue.push(E);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(h){var g=this;return(0,f.Z)(function*(){var E;if(g.auth.currentUser===h)return;const A=[];try{for(const R of g.queue)yield R(h),R.onAbort&&A.push(R.onAbort)}catch(R){A.reverse();for(const q of A)try{q()}catch(le){}throw g.auth._errorFactory.create("login-blocked",{originalMessage:null===(E=R)||void 0===E?void 0:E.message})}})()}}class We{constructor(h,g,E){this.app=h,this.heartbeatServiceProvider=g,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hn(this),this.idTokenSubscription=new hn(this),this.beforeStateQueue=new Xr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(h,g){var E=this;return g&&(this._popupRedirectResolver=Q(g)),this._initializationPromise=this.queue((0,f.Z)(function*(){var A,R;if(!E._deleted&&(E.persistenceManager=yield ve.create(E,h),!E._deleted)){if(null===(A=E._popupRedirectResolver)||void 0===A?void 0:A._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(q){}yield E.initializeCurrentUser(g),E.lastNotifiedUid=(null===(R=E.currentUser)||void 0===R?void 0:R.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,f.Z)(function*(){if(h._deleted)return;const g=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||g){if(h.currentUser&&g&&h.currentUser.uid===g.uid)return h._currentUser._assign(g),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(g,!0)}})()}initializeCurrentUser(h){var g=this;return(0,f.Z)(function*(){var E;const A=yield g.assertedPersistence.getCurrentUser();let R=A,q=!1;if(h&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const le=null===(E=g.redirectUser)||void 0===E?void 0:E._redirectEventId,ke=null==R?void 0:R._redirectEventId,Ze=yield g.tryRedirectSignIn(h);(!le||le===ke)&&(null==Ze?void 0:Ze.user)&&(R=Ze.user,q=!0)}if(!R)return g.directlySetCurrentUser(null);if(!R._redirectEventId){if(q)try{yield g.beforeStateQueue.runMiddleware(R)}catch(le){R=A,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(le))}return R?g.reloadAndSetCurrentUserOrClear(R):g.directlySetCurrentUser(null)}return G(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===R._redirectEventId?g.directlySetCurrentUser(R):g.reloadAndSetCurrentUserOrClear(R)})()}tryRedirectSignIn(h){var g=this;return(0,f.Z)(function*(){let E=null;try{E=yield g._popupRedirectResolver._completeRedirectFn(g,h,!0)}catch(A){yield g._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(h){var g=this;return(0,f.Z)(function*(){var E;try{yield Fr(h)}catch(A){if("auth/network-request-failed"!==(null===(E=A)||void 0===E?void 0:E.code))return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function Ke(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,f.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var g=this;return(0,f.Z)(function*(){const E=h?(0,P.m9)(h):null;return E&&G(E.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(E&&E._clone(g))})()}_updateCurrentUser(h,g=!1){var E=this;return(0,f.Z)(function*(){if(!E._deleted)return h&&G(E.tenantId===h.tenantId,E,"tenant-id-mismatch"),g||(yield E.beforeStateQueue.runMiddleware(h)),E.queue((0,f.Z)(function*(){yield E.directlySetCurrentUser(h),E.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,f.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var g=this;return this.queue((0,f.Z)(function*(){yield g.assertedPersistence.setPersistence(Q(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new P.LL("auth","Firebase",h())}onAuthStateChanged(h,g,E){return this.registerStateListener(this.authStateSubscription,h,g,E)}beforeAuthStateChanged(h,g){return this.beforeStateQueue.pushCallback(h,g)}onIdTokenChanged(h,g,E){return this.registerStateListener(this.idTokenSubscription,h,g,E)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,g){var E=this;return(0,f.Z)(function*(){const A=yield E.getOrInitRedirectPersistenceManager(g);return null===h?A.removeCurrentUser():A.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var g=this;return(0,f.Z)(function*(){if(!g.redirectPersistenceManager){const E=h&&Q(h)||g._popupRedirectResolver;G(E,g,"argument-error"),g.redirectPersistenceManager=yield ve.create(g,[Q(E._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(h){var g=this;return(0,f.Z)(function*(){var E,A;return g._isInitialized&&(yield g.queue((0,f.Z)(function*(){}))),(null===(E=g._currentUser)||void 0===E?void 0:E._redirectEventId)===h?g._currentUser:(null===(A=g.redirectUser)||void 0===A?void 0:A._redirectEventId)===h?g.redirectUser:null})()}_persistUserIfCurrent(h){var g=this;return(0,f.Z)(function*(){if(h===g.currentUser)return g.queue((0,f.Z)(function*(){return g.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(g=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,g,E,A){if(this._deleted)return()=>{};const R="function"==typeof g?g:g.next.bind(g),q=this._isInitialized?Promise.resolve():this._initializationPromise;return G(q,this,"internal-error"),q.then(()=>R(this.currentUser)),"function"==typeof g?h.addObserver(g,E,A):h.addObserver(g)}directlySetCurrentUser(h){var g=this;return(0,f.Z)(function*(){g.currentUser&&g.currentUser!==h&&g._currentUser._stopProactiveRefresh(),h&&g.isProactiveRefreshEnabled&&h._startProactiveRefresh(),g.currentUser=h,h?yield g.assertedPersistence.setCurrentUser(h):yield g.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return G(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=zo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,f.Z)(function*(){var g;const E={"X-Client-Version":h.clientVersion};h.app.options.appId&&(E["X-Firebase-gmpid"]=h.app.options.appId);const A=yield null===(g=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return A&&(E["X-Firebase-Client"]=A),E})()}}function dt(y){return(0,P.m9)(y)}class hn{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,P.ne)(g=>this.observer=g)}get next(){return G(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ji(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function Hi(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class Di{constructor(h,g){this.providerId=h,this.signInMethod=g}toJSON(){return _e("not implemented")}_getIdTokenResponse(h){return _e("not implemented")}_linkToIdToken(h,g){return _e("not implemented")}_getReauthenticationResolver(h){return _e("not implemented")}}function Rn(y,h){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,f.Z)(function*(y,h){return zt(y,"POST","/v1/accounts:resetPassword",Kt(y,h))})).apply(this,arguments)}function Na(y,h){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,f.Z)(function*(y,h){return zt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function fu(y,h){return ks.apply(this,arguments)}function ks(){return(ks=(0,f.Z)(function*(y,h){return zt(y,"POST","/v1/accounts:update",Kt(y,h))})).apply(this,arguments)}function co(){return(co=(0,f.Z)(function*(y,h){return Jr(y,"POST","/v1/accounts:signInWithPassword",Kt(y,h))})).apply(this,arguments)}function Fs(y,h){return jn.apply(this,arguments)}function jn(){return(jn=(0,f.Z)(function*(y,h){return zt(y,"POST","/v1/accounts:sendOobCode",Kt(y,h))})).apply(this,arguments)}function pn(y,h){return pu.apply(this,arguments)}function pu(){return(pu=(0,f.Z)(function*(y,h){return Fs(y,h)})).apply(this,arguments)}function Ra(y,h){return ei.apply(this,arguments)}function ei(){return(ei=(0,f.Z)(function*(y,h){return Fs(y,h)})).apply(this,arguments)}function $i(y,h){return gu.apply(this,arguments)}function gu(){return(gu=(0,f.Z)(function*(y,h){return Fs(y,h)})).apply(this,arguments)}function Qc(y,h){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,f.Z)(function*(y,h){return Fs(y,h)})).apply(this,arguments)}function Rl(){return(Rl=(0,f.Z)(function*(y,h){return Jr(y,"POST","/v1/accounts:signInWithEmailLink",Kt(y,h))})).apply(this,arguments)}function Jc(){return(Jc=(0,f.Z)(function*(y,h){return Jr(y,"POST","/v1/accounts:signInWithEmailLink",Kt(y,h))})).apply(this,arguments)}class Er extends Di{constructor(h,g,E,A=null){super("password",E),this._email=h,this._password=g,this._tenantId=A}static _fromEmailAndPassword(h,g){return new Er(h,g,"password")}static _fromEmailAndCode(h,g,E=null){return new Er(h,g,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(h){var g=this;return(0,f.Z)(function*(){switch(g.signInMethod){case"password":return function rr(y,h){return co.apply(this,arguments)}(h,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function qi(y,h){return Rl.apply(this,arguments)}(h,{email:g._email,oobCode:g._password});default:xe(h,"internal-error")}})()}_linkToIdToken(h,g){var E=this;return(0,f.Z)(function*(){switch(E.signInMethod){case"password":return Na(h,{idToken:g,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function gg(y,h){return Jc.apply(this,arguments)}(h,{idToken:g,email:E._email,oobCode:E._password});default:xe(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Ls(y,h){return Xc.apply(this,arguments)}function Xc(){return(Xc=(0,f.Z)(function*(y,h){return Jr(y,"POST","/v1/accounts:signInWithIdp",Kt(y,h))})).apply(this,arguments)}class hs extends Di{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const g=new hs(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(g.idToken=h.idToken),h.accessToken&&(g.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(g.nonce=h.nonce),h.pendingToken&&(g.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(g.accessToken=h.oauthToken,g.secret=h.oauthTokenSecret):xe("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:E,signInMethod:A}=g,R=(0,pe._T)(g,["providerId","signInMethod"]);if(!E||!A)return null;const q=new hs(E,A);return q.idToken=R.idToken||void 0,q.accessToken=R.accessToken||void 0,q.secret=R.secret,q.nonce=R.nonce,q.pendingToken=R.pendingToken||null,q}_getIdTokenResponse(h){return Ls(h,this.buildRequest())}_linkToIdToken(h,g){const E=this.buildRequest();return E.idToken=g,Ls(h,E)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,Ls(h,g)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),h.postBody=(0,P.xO)(g)}return h}}function yg(y,h){return ed.apply(this,arguments)}function ed(){return(ed=(0,f.Z)(function*(y,h){return zt(y,"POST","/v1/accounts:sendVerificationCode",Kt(y,h))})).apply(this,arguments)}function Vs(){return(Vs=(0,f.Z)(function*(y,h){return Jr(y,"POST","/v1/accounts:signInWithPhoneNumber",Kt(y,h))})).apply(this,arguments)}function td(){return(td=(0,f.Z)(function*(y,h){const g=yield Jr(y,"POST","/v1/accounts:signInWithPhoneNumber",Kt(y,h));if(g.temporaryProof)throw bi(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const vg={USER_NOT_FOUND:"user-not-found"};function nd(){return(nd=(0,f.Z)(function*(y,h){return Jr(y,"POST","/v1/accounts:signInWithPhoneNumber",Kt(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),vg)})).apply(this,arguments)}class Wo extends Di{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,g){return new Wo({verificationId:h,verificationCode:g})}static _fromTokenResponse(h,g){return new Wo({phoneNumber:h,temporaryProof:g})}_getIdTokenResponse(h){return function Ol(y,h){return Vs.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,g){return function _g(y,h){return td.apply(this,arguments)}(h,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function Eg(y,h){return nd.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:g,verificationId:E,verificationCode:A}=this.params;return h&&g?{temporaryProof:h,phoneNumber:g}:{sessionInfo:E,code:A}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:g,verificationCode:E,phoneNumber:A,temporaryProof:R}=h;return E||g||A||R?new Wo({verificationId:g,verificationCode:E,phoneNumber:A,temporaryProof:R}):null}}class mu{constructor(h){var g,E,A,R,q,le;const ke=(0,P.zd)((0,P.pd)(h)),Ze=null!==(g=ke.apiKey)&&void 0!==g?g:null,yt=null!==(E=ke.oobCode)&&void 0!==E?E:null,ft=function Kh(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=ke.mode)&&void 0!==A?A:null);G(Ze&&yt&&ft,"argument-error"),this.apiKey=Ze,this.operation=ft,this.code=yt,this.continueUrl=null!==(R=ke.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(q=ke.languageCode)&&void 0!==q?q:null,this.tenantId=null!==(le=ke.tenantId)&&void 0!==le?le:null}static parseLink(h){const g=function Oa(y){const h=(0,P.zd)((0,P.pd)(y)).link,g=h?(0,P.zd)((0,P.pd)(h)).deep_link_id:null,E=(0,P.zd)((0,P.pd)(y)).deep_link_id;return(E?(0,P.zd)((0,P.pd)(E)).link:null)||E||g||h||y}(h);try{return new mu(g)}catch(E){return null}}}let id=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,E){return Er._fromEmailAndPassword(g,E)}static credentialWithLink(g,E){const A=mu.parseLink(E);return G(A,"argument-error"),Er._fromEmailAndCode(g,A.code,A.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class wr{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Us extends wr{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class zi extends Us{static credentialFromJSON(h){const g="string"==typeof h?JSON.parse(h):h;return G("providerId"in g&&"signInMethod"in g,"argument-error"),hs._fromParams(g)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return G(h.idToken||h.accessToken,"argument-error"),hs._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return zi.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return zi.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:g,oauthAccessToken:E,oauthTokenSecret:A,pendingToken:R,nonce:q,providerId:le}=h;if(!E&&!A&&!g&&!R||!le)return null;try{return new zi(le)._credential({idToken:g,accessToken:E,nonce:q,pendingToken:R})}catch(ke){return null}}}let Ko=(()=>{class y extends Us{constructor(){super("facebook.com")}static credential(g){return hs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(E){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),sd=(()=>{class y extends Us{constructor(){super("google.com"),this.addScope("profile")}static credential(g,E){return hs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:E})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:E,oauthAccessToken:A}=g;if(!E&&!A)return null;try{return y.credential(E,A)}catch(R){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Zh=(()=>{class y extends Us{constructor(){super("github.com")}static credential(g){return hs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(E){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class ho extends Di{constructor(h,g){super(h,h),this.pendingToken=g}_getIdTokenResponse(h){return Ls(h,this.buildRequest())}_linkToIdToken(h,g){const E=this.buildRequest();return E.idToken=g,Ls(h,E)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,Ls(h,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:E,signInMethod:A,pendingToken:R}=g;return E&&A&&R&&E===A?new ho(E,R):null}static _create(h,g){return new ho(h,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Vr extends wr{constructor(h){G(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return Vr.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return Vr.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const g=ho.fromJSON(h);return G(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:g,providerId:E}=h;if(!g||!E)return null;try{return ho._create(E,g)}catch(A){return null}}}let od=(()=>{class y extends Us{constructor(){super("twitter.com")}static credential(g,E){return hs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:E})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:E,oauthTokenSecret:A}=g;if(!E||!A)return null;try{return y.credential(E,A)}catch(R){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Ur(y,h){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,f.Z)(function*(y,h){return Jr(y,"POST","/v1/accounts:signUp",Kt(y,h))})).apply(this,arguments)}class ui{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,g,E,A=!1){return(0,f.Z)(function*(){const R=yield Ht._fromIdTokenResponse(h,E,A),q=Pl(E);return new ui({user:R,providerId:q,_tokenResponse:E,operationType:g})})()}static _forOperation(h,g,E){return(0,f.Z)(function*(){yield h._updateTokensIfNecessary(E,!0);const A=Pl(E);return new ui({user:h,providerId:A,_tokenResponse:E,operationType:g})})()}}function Pl(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function kl(){return(kl=(0,f.Z)(function*(y){var h;const g=dt(y);if(yield g._initializationPromise,null===(h=g.currentUser)||void 0===h?void 0:h.isAnonymous)return new ui({user:g.currentUser,providerId:null,operationType:"signIn"});const E=yield Ur(g,{returnSecureToken:!0}),A=yield ui._fromIdTokenResponse(g,"signIn",E,!0);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class Qo extends P.ZR{constructor(h,g,E,A){var R;super(g.code,g.message),this.operationType=E,this.user=A,Object.setPrototypeOf(this,Qo.prototype),this.customData={appName:h.name,tenantId:null!==(R=h.tenantId)&&void 0!==R?R:void 0,_serverResponse:g.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(h,g,E,A){return new Qo(h,g,E,A)}}function Fl(y,h,g,E){return("reauthenticate"===h?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?Qo._fromErrorAndOperation(y,R,h,E):R})}function Wi(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function gn(){return(gn=(0,f.Z)(function*(y,h){const g=(0,P.m9)(y);yield on(!0,g,h);const{providerUserInfo:E}=yield bn(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[h]}),A=Wi(E||[]);return g.providerData=g.providerData.filter(R=>A.has(R.providerId)),A.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function ka(y,h){return fo.apply(this,arguments)}function fo(){return(fo=(0,f.Z)(function*(y,h,g=!1){const E=yield Or(y,h._linkToIdToken(y.auth,yield y.getIdToken()),g);return ui._forOperation(y,"link",E)})).apply(this,arguments)}function on(y,h,g){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,f.Z)(function*(y,h,g){yield Fr(h);const A=!1===y?"provider-already-linked":"no-such-provider";G(Wi(h.providerData).has(g)===y,h.auth,A)})).apply(this,arguments)}function yu(y,h){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,f.Z)(function*(y,h,g=!1){var E;const{auth:A}=y,R="reauthenticate";try{const q=yield Or(y,Fl(A,R,h,y),g);G(q.idToken,A,"internal-error");const le=it(q.idToken);G(le,A,"internal-error");const{sub:ke}=le;return G(y.uid===ke,A,"user-mismatch"),ui._forOperation(y,R,q)}catch(q){throw"auth/user-not-found"===(null===(E=q)||void 0===E?void 0:E.code)&&xe(A,"user-mismatch"),q}})).apply(this,arguments)}function fr(y,h){return Ll.apply(this,arguments)}function Ll(){return(Ll=(0,f.Z)(function*(y,h,g=!1){const E="signIn",A=yield Fl(y,E,h),R=yield ui._fromIdTokenResponse(y,E,A);return g||(yield y._updateCurrentUser(R.user)),R})).apply(this,arguments)}function Dn(y,h){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,f.Z)(function*(y,h){return fr(dt(y),h)})).apply(this,arguments)}function pr(y,h){return po.apply(this,arguments)}function po(){return(po=(0,f.Z)(function*(y,h){const g=(0,P.m9)(y);return yield on(!1,g,h.providerId),ka(g,h)})).apply(this,arguments)}function fs(y,h){return La.apply(this,arguments)}function La(){return(La=(0,f.Z)(function*(y,h){return yu((0,P.m9)(y),h)})).apply(this,arguments)}function Ci(y,h){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,f.Z)(function*(y,h){return Jr(y,"POST","/v1/accounts:signInWithCustomToken",Kt(y,h))})).apply(this,arguments)}function vt(){return(vt=(0,f.Z)(function*(y,h){const g=dt(y),E=yield Ci(g,{token:h,returnSecureToken:!0}),A=yield ui._fromIdTokenResponse(g,"signIn",E);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class js{constructor(h,g){this.factorId=h,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(h,g){return"phoneInfo"in g?Vl._fromServerResponse(h,g):xe(h,"internal-error")}}class Vl extends js{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,g){return new Vl(g)}}function Va(y,h,g){var E;G((null===(E=g.url)||void 0===E?void 0:E.length)>0,y,"invalid-continue-uri"),G(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=g.url,h.dynamicLinkDomain=g.dynamicLinkDomain,h.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(G(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=g.iOS.bundleId),g.android&&(G(g.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=g.android.installApp,h.androidMinimumVersionCode=g.android.minimumVersion,h.androidPackageName=g.android.packageName)}function _u(){return(_u=(0,f.Z)(function*(y,h,g){const E=(0,P.m9)(y),A={requestType:"PASSWORD_RESET",email:h};g&&Va(E,A,g),yield Ra(E,A)})).apply(this,arguments)}function Bl(){return(Bl=(0,f.Z)(function*(y,h,g){yield Rn((0,P.m9)(y),{oobCode:h,newPassword:g})})).apply(this,arguments)}function Se(){return(Se=(0,f.Z)(function*(y,h){yield fu((0,P.m9)(y),{oobCode:h})})).apply(this,arguments)}function Gt(y,h){return go.apply(this,arguments)}function go(){return(go=(0,f.Z)(function*(y,h){const g=(0,P.m9)(y),E=yield Rn(g,{oobCode:h}),A=E.requestType;switch(G(A,g,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":G(E.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":G(E.mfaInfo,g,"internal-error");default:G(E.email,g,"internal-error")}let R=null;return E.mfaInfo&&(R=js._fromServerResponse(dt(g),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:R},operation:A}})).apply(this,arguments)}function Eu(){return(Eu=(0,f.Z)(function*(y,h){const{data:g}=yield Gt((0,P.m9)(y),h);return g.email})).apply(this,arguments)}function li(){return(li=(0,f.Z)(function*(y,h,g){const E=dt(y),A=yield Ur(E,{returnSecureToken:!0,email:h,password:g}),R=yield ui._fromIdTokenResponse(E,"signIn",A);return yield E._updateCurrentUser(R.user),R})).apply(this,arguments)}function $l(){return($l=(0,f.Z)(function*(y,h,g){const E=(0,P.m9)(y),A={requestType:"EMAIL_SIGNIN",email:h};G(g.handleCodeInApp,E,"argument-error"),g&&Va(E,A,g),yield $i(E,A)})).apply(this,arguments)}function ps(){return(ps=(0,f.Z)(function*(y,h,g){const E=(0,P.m9)(y),A=id.credentialWithLink(h,g||Pe());return G(A._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Dn(E,A)})).apply(this,arguments)}function Ir(y,h){return ci.apply(this,arguments)}function ci(){return(ci=(0,f.Z)(function*(y,h){return zt(y,"POST","/v1/accounts:createAuthUri",Kt(y,h))})).apply(this,arguments)}function Hs(){return(Hs=(0,f.Z)(function*(y,h){const E={identifier:h,continueUri:ut()?Pe():"http://localhost"},{signinMethods:A}=yield Ir((0,P.m9)(y),E);return A||[]})).apply(this,arguments)}function Gl(){return(Gl=(0,f.Z)(function*(y,h){const g=(0,P.m9)(y),A={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&Va(g.auth,A,h);const{email:R}=yield pn(g.auth,A);R!==y.email&&(yield y.reload())})).apply(this,arguments)}function bu(){return(bu=(0,f.Z)(function*(y,h,g){const E=(0,P.m9)(y),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};g&&Va(E.auth,R,g);const{email:q}=yield Qc(E.auth,R);q!==y.email&&(yield y.reload())})).apply(this,arguments)}function ql(y,h){return ea.apply(this,arguments)}function ea(){return(ea=(0,f.Z)(function*(y,h){return zt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Cu(){return(Cu=(0,f.Z)(function*(y,{displayName:h,photoURL:g}){if(void 0===h&&void 0===g)return;const E=(0,P.m9)(y),R={idToken:yield E.getIdToken(),displayName:h,photoUrl:g,returnSecureToken:!0},q=yield Or(E,ql(E.auth,R));E.displayName=q.displayName||null,E.photoURL=q.photoUrl||null;const le=E.providerData.find(({providerId:ke})=>"password"===ke);le&&(le.displayName=E.displayName,le.photoURL=E.photoURL),yield E._updateTokensIfNecessary(q)})).apply(this,arguments)}function Tu(y,h,g){return yo.apply(this,arguments)}function yo(){return(yo=(0,f.Z)(function*(y,h,g){const{auth:E}=y,R={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(R.email=h),g&&(R.password=g);const q=yield Or(y,Na(E,R));yield y._updateTokensIfNecessary(q,!0)})).apply(this,arguments)}class ta{constructor(h,g,E={}){this.isNewUser=h,this.providerId=g,this.profile=E}}class hd extends ta{constructor(h,g,E,A){super(h,g,E),this.username=A}}class Au extends ta{constructor(h,g){super(h,"facebook.com",g)}}class ti extends hd{constructor(h,g){super(h,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class Qh extends ta{constructor(h,g){super(h,"google.com",g)}}class zl extends hd{constructor(h,g,E){super(h,"twitter.com",g,E)}}function ir(y){const{user:h,_tokenResponse:g}=y;return h.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function dd(y){var h,g;if(!y)return null;const{providerId:E}=y,A=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},R=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!E&&(null==y?void 0:y.idToken)){const q=null===(g=null===(h=it(y.idToken))||void 0===h?void 0:h.firebase)||void 0===g?void 0:g.sign_in_provider;if(q)return new ta(R,"anonymous"!==q&&"custom"!==q?q:null)}if(!E)return null;switch(E){case"facebook.com":return new Au(R,A);case"github.com":return new ti(R,A);case"google.com":return new Qh(R,A);case"twitter.com":return new zl(R,A,y.screenName||null);case"custom":case"anonymous":return new ta(R,null);default:return new ta(R,E,A)}}(g)}class gs{constructor(h,g,E){this.type=h,this.credential=g,this.auth=E}static _fromIdtoken(h,g){return new gs("enroll",h,g)}static _fromMfaPendingCredential(h){return new gs("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var g,E;if(null==h?void 0:h.multiFactorSession){if(null===(g=h.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return gs._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null===(E=h.multiFactorSession)||void 0===E?void 0:E.idToken)return gs._fromIdtoken(h.multiFactorSession.idToken)}return null}}class vo{constructor(h,g,E){this.session=h,this.hints=g,this.signInResolver=E}static _fromError(h,g){const E=dt(h),A=g.customData._serverResponse,R=(A.mfaInfo||[]).map(le=>js._fromServerResponse(E,le));G(A.mfaPendingCredential,E,"internal-error");const q=gs._fromMfaPendingCredential(A.mfaPendingCredential);return new vo(q,R,function(){var le=(0,f.Z)(function*(ke){const Ze=yield ke._process(E,q);delete A.mfaInfo,delete A.mfaPendingCredential;const yt=Object.assign(Object.assign({},A),{idToken:Ze.idToken,refreshToken:Ze.refreshToken});switch(g.operationType){case"signIn":const ft=yield ui._fromIdTokenResponse(E,g.operationType,yt);return yield E._updateCurrentUser(ft.user),ft;case"reauthenticate":return G(g.user,E,"internal-error"),ui._forOperation(g.user,g.operationType,yt);default:xe(E,"internal-error")}});return function(ke){return le.apply(this,arguments)}}())}resolveSignIn(h){var g=this;return(0,f.Z)(function*(){return g.signInResolver(h)})()}}function gd(y,h){return zt(y,"POST","/v2/accounts/mfaEnrollment:start",Kt(y,h))}class na{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(E=>js._fromServerResponse(h.auth,E)))})}static _fromUser(h){return new na(h)}getSession(){var h=this;return(0,f.Z)(function*(){return gs._fromIdtoken(yield h.user.getIdToken(),h.user.auth)})()}enroll(h,g){var E=this;return(0,f.Z)(function*(){const A=h,R=yield E.getSession(),q=yield Or(E.user,A._process(E.user.auth,R,g));return yield E.user._updateTokensIfNecessary(q),E.user.reload()})()}unenroll(h){var g=this;return(0,f.Z)(function*(){var E;const A="string"==typeof h?h:h.uid,R=yield g.user.getIdToken(),q=yield Or(g.user,function Eo(y,h){return zt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",Kt(y,h))}(g.user.auth,{idToken:R,mfaEnrollmentId:A}));g.enrolledFactors=g.enrolledFactors.filter(({uid:le})=>le!==A),yield g.user._updateTokensIfNecessary(q);try{yield g.user.reload()}catch(le){if("auth/user-token-expired"!==(null===(E=le)||void 0===E?void 0:E.code))throw le}})()}}const Su=new WeakMap,Yi="__sak";class Ba{constructor(h,g){this.storageRetriever=h,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(Yi,"1"),this.storage.removeItem(Yi),Promise.resolve(!0)):Promise.resolve(!1)}catch(h){return Promise.resolve(!1)}}_set(h,g){return this.storage.setItem(h,JSON.stringify(g)),Promise.resolve()}_get(h){const g=this.storage.getItem(h);return Promise.resolve(g?JSON.parse(g):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const Mn=(()=>{class y extends Ba{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,E)=>this.onStorageEvent(g,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Dg(){const y=(0,P.z$)();return Rt(y)||En(y)}()&&function hr(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=Os(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const E of Object.keys(this.listeners)){const A=this.storage.getItem(E),R=this.localCache[E];A!==R&&g(E,R,A)}}onStorageEvent(g,E=!1){if(!g.key)return void this.forAllChangedKeys((le,ke,Ze)=>{this.notifyListeners(le,Ze)});const A=g.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const le=this.storage.getItem(A);if(g.newValue!==le)null!==g.newValue?this.storage.setItem(A,g.newValue):this.storage.removeItem(A);else if(this.localCache[A]===g.newValue&&!E)return}const R=()=>{const le=this.storage.getItem(A);!E&&this.localCache[A]===le||this.notifyListeners(A,le)},q=this.storage.getItem(A);!function xa(){return(0,P.w1)()&&10===document.documentMode}()||q===g.newValue||g.newValue===g.oldValue?R():setTimeout(R,10)}notifyListeners(g,E){this.localCache[g]=E;const A=this.listeners[g];if(A)for(const R of Array.from(A))R(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,E,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:E,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(E)}_removeListener(g,E){this.listeners[g]&&(this.listeners[g].delete(E),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,E){var A=()=>super._set,R=this;return(0,f.Z)(function*(){yield A().call(R,g,E),R.localCache[g]=JSON.stringify(E)})()}_get(g){var E=()=>super._get,A=this;return(0,f.Z)(function*(){const R=yield E().call(A,g);return A.localCache[g]=JSON.stringify(R),R})()}_remove(g){var E=()=>super._remove,A=this;return(0,f.Z)(function*(){yield E().call(A,g),delete A.localCache[g]})()}}return y.type="LOCAL",y})(),Xn=(()=>{class y extends Ba{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,E){}_removeListener(g,E){}}return y.type="SESSION",y})();let md=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const E=this.receivers.find(R=>R.isListeningto(g));if(E)return E;const A=new y(g);return this.receivers.push(A),A}isListeningto(g){return this.eventTarget===g}handleEvent(g){var E=this;return(0,f.Z)(function*(){const A=g,{eventId:R,eventType:q,data:le}=A.data,ke=E.handlersMap[q];if(!(null==ke?void 0:ke.size))return;A.ports[0].postMessage({status:"ack",eventId:R,eventType:q});const Ze=Array.from(ke).map(function(){var ft=(0,f.Z)(function*(gr){return gr(A.origin,le)});return function(gr){return ft.apply(this,arguments)}}()),yt=yield function Ha(y){return Promise.all(y.map(function(){var h=(0,f.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(E){return{fulfilled:!1,reason:E}}});return function(g){return h.apply(this,arguments)}}()))}(Ze);A.ports[0].postMessage({status:"done",eventId:R,eventType:q,response:yt})})()}_subscribe(g,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(E)}_unsubscribe(g,E){this.handlersMap[g]&&E&&this.handlersMap[g].delete(E),(!E||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function ra(y="",h=10){let g="";for(let E=0;E<h;E++)g+=Math.floor(10*Math.random());return y+g}class $s{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,g,E=50){var A=this;return(0,f.Z)(function*(){const R="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let q,le;return new Promise((ke,Ze)=>{const yt=ra("",20);R.port1.start();const ft=setTimeout(()=>{Ze(new Error("unsupported_event"))},E);le={messageChannel:R,onMessage(gr){const Wr=gr;if(Wr.data.eventId===yt)switch(Wr.data.status){case"ack":clearTimeout(ft),q=setTimeout(()=>{Ze(new Error("timeout"))},3e3);break;case"done":clearTimeout(q),ke(Wr.data.response);break;default:clearTimeout(ft),clearTimeout(q),Ze(new Error("invalid_response"))}}},A.handlers.add(le),R.port1.addEventListener("message",le.onMessage),A.target.postMessage({eventType:h,eventId:yt,data:g},[R.port2])}).finally(()=>{le&&A.removeMessageHandler(le)})})()}}function Pn(){return window}function Qi(){return void 0!==Pn().WorkerGlobalScope&&"function"==typeof Pn().importScripts}function yd(){return(yd=(0,f.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const $a="firebaseLocalStorageDb",Ji="firebaseLocalStorage",Mu="fbase_key";class ms{constructor(h){this.request=h}toPromise(){return new Promise((h,g)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function qs(y,h){return y.transaction([Ji],h?"readwrite":"readonly").objectStore(Ji)}function ia(){const y=indexedDB.open($a,1);return new Promise((h,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const E=y.result;try{E.createObjectStore(Ji,{keyPath:Mu})}catch(A){g(A)}}),y.addEventListener("success",(0,f.Z)(function*(){const E=y.result;E.objectStoreNames.contains(Ji)?h(E):(E.close(),yield function zs(){const y=indexedDB.deleteDatabase($a);return new ms(y).toPromise()}(),h(yield ia()))}))})}function Ga(y,h,g){return wo.apply(this,arguments)}function wo(){return(wo=(0,f.Z)(function*(y,h,g){const E=qs(y,!0).put({[Mu]:h,value:g});return new ms(E).toPromise()})).apply(this,arguments)}function sa(){return(sa=(0,f.Z)(function*(y,h){const g=qs(y,!1).get(h),E=yield new ms(g).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function qa(y,h){const g=qs(y,!0).delete(h);return new ms(g).toPromise()}const bo=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,f.Z)(function*(){return g.db||(g.db=yield ia()),g.db})()}_withRetries(g){var E=this;return(0,f.Z)(function*(){let A=0;for(;;)try{const R=yield E._openDb();return yield g(R)}catch(R){if(A++>3)throw R;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,f.Z)(function*(){return Qi()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,f.Z)(function*(){g.receiver=md._getInstance(function Kl(){return Qi()?self:null}()),g.receiver._subscribe("keyChanged",function(){var E=(0,f.Z)(function*(A,R){return{keyProcessed:(yield g._poll()).includes(R.key)}});return function(A,R){return E.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var E=(0,f.Z)(function*(A,R){return["keyChanged"]});return function(A,R){return E.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,f.Z)(function*(){var E,A;if(g.activeServiceWorker=yield function Ot(){return yd.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new $s(g.activeServiceWorker);const R=yield g.sender._send("ping",{},800);!R||(null===(E=R[0])||void 0===E?void 0:E.fulfilled)&&(null===(A=R[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var E=this;return(0,f.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function _d(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:g},E.serviceWorkerReceiverAvailable?800:50)}catch(A){}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const g=yield ia();return yield Ga(g,Yi,"1"),yield qa(g,Yi),!0}catch(g){}return!1})()}_withPendingWrite(g){var E=this;return(0,f.Z)(function*(){E.pendingWrites++;try{yield g()}finally{E.pendingWrites--}})()}_set(g,E){var A=this;return(0,f.Z)(function*(){return A._withPendingWrite((0,f.Z)(function*(){return yield A._withRetries(R=>Ga(R,g,E)),A.localCache[g]=E,A.notifyServiceWorker(g)}))})()}_get(g){var E=this;return(0,f.Z)(function*(){const A=yield E._withRetries(R=>function Io(y,h){return sa.apply(this,arguments)}(R,g));return E.localCache[g]=A,A})()}_remove(g){var E=this;return(0,f.Z)(function*(){return E._withPendingWrite((0,f.Z)(function*(){return yield E._withRetries(A=>qa(A,g)),delete E.localCache[g],E.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,f.Z)(function*(){const E=yield g._withRetries(q=>{const le=qs(q,!1).getAll();return new ms(le).toPromise()});if(!E)return[];if(0!==g.pendingWrites)return[];const A=[],R=new Set;for(const{fbase_key:q,value:le}of E)R.add(q),JSON.stringify(g.localCache[q])!==JSON.stringify(le)&&(g.notifyListeners(q,le),A.push(q));for(const q of Object.keys(g.localCache))g.localCache[q]&&!R.has(q)&&(g.notifyListeners(q,null),A.push(q));return A})()}notifyListeners(g,E){this.localCache[g]=E;const A=this.listeners[g];if(A)for(const R of Array.from(A))R(E)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(E)}_removeListener(g,E){this.listeners[g]&&(this.listeners[g].delete(E),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function sr(y,h){return zt(y,"POST","/v2/accounts/mfaSignIn:start",Kt(y,h))}function Hn(){return(Hn=(0,f.Z)(function*(y){return(yield zt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Xi(y){return new Promise((h,g)=>{const E=document.createElement("script");E.setAttribute("src",y),E.onload=h,E.onerror=A=>{const R=me("internal-error");R.customData=A,g(R)},E.type="text/javascript",E.charset="UTF-8",function oa(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(E)})}function Ws(y){return`__${y}${Math.floor(1e6*Math.random())}`}const jr=1e12;class or{constructor(h){this.auth=h,this.counter=jr,this._widgets=new Map}render(h,g){const E=this.counter;return this._widgets.set(E,new es(h,this.auth.name,g||{})),this.counter++,E}reset(h){var g;const E=h||jr;null===(g=this._widgets.get(E))||void 0===g||g.delete(),this._widgets.delete(E)}getResponse(h){var g;return(null===(g=this._widgets.get(h||jr))||void 0===g?void 0:g.getResponse())||""}execute(h){var g=this;return(0,f.Z)(function*(){var E;return null===(E=g._widgets.get(h||jr))||void 0===E||E.execute(),""})()}}class es{constructor(h,g,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof h?document.getElementById(h):h;G(A,"argument-error",{appName:g}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function vd(y){const h=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<y;E++)h.push(g.charAt(Math.floor(Math.random()*g.length)));return h.join("")}(50);const{callback:h,"expired-callback":g}=this.params;if(h)try{h(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Yl=Ws("rcb"),An=new sn(3e4,6e4);class wd{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(h=Pn().grecaptcha)||void 0===h?void 0:h.render)}load(h,g=""){return G(function Ka(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),h,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(Pn().grecaptcha):new Promise((E,A)=>{const R=Pn().setTimeout(()=>{A(me(h,"network-request-failed"))},An.get());Pn()[Yl]=()=>{Pn().clearTimeout(R),delete Pn()[Yl];const le=Pn().grecaptcha;if(!le)return void A(me(h,"internal-error"));const ke=le.render;le.render=(Ze,yt)=>{const ft=ke(Ze,yt);return this.counter++,ft},this.hostLanguage=g,E(le)},Xi(`https://www.google.com/recaptcha/api.js??${(0,P.xO)({onload:Yl,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(R),A(me(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var g;return!!(null===(g=Pn().grecaptcha)||void 0===g?void 0:g.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Mi{load(h){return(0,f.Z)(function*(){return new or(h)})()}clearedOneInstance(){}}const Cg="recaptcha",Do={theme:"light",type:"image"};class Jh{constructor(h,g=Object.assign({},Do),E){this.parameters=g,this.type=Cg,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=dt(E),this.isInvisible="invisible"===this.parameters.size,G("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof h?document.getElementById(h):h;G(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Mi:new wd,this.validateStartingState()}verify(){var h=this;return(0,f.Z)(function*(){h.assertNotDestroyed();const g=yield h.render(),E=h.getAssertedRecaptcha();return E.getResponse(g)||new Promise(R=>{const q=le=>{!le||(h.tokenChangeListeners.delete(q),R(le))};h.tokenChangeListeners.add(q),h.isInvisible&&E.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){G(!this.parameters.sitekey,this.auth,"argument-error"),G(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),G("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return g=>{if(this.tokenChangeListeners.forEach(E=>E(g)),"function"==typeof h)h(g);else if("string"==typeof h){const E=Pn()[h];"function"==typeof E&&E(g)}}}assertNotDestroyed(){G(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,f.Z)(function*(){if(yield h.init(),!h.widgetId){let g=h.container;if(!h.isInvisible){const E=document.createElement("div");g.appendChild(E),g=E}h.widgetId=h.getAssertedRecaptcha().render(g,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,f.Z)(function*(){G(ut()&&!Qi(),h.auth,"internal-error"),yield function ys(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const g=yield function Br(y){return Hn.apply(this,arguments)}(h.auth);G(g,h.auth,"internal-error"),h.parameters.sitekey=g})()}getAssertedRecaptcha(){return G(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Id{constructor(h,g){this.verificationId=h,this.onConfirmation=g}confirm(h){const g=Wo._fromVerification(this.verificationId,h);return this.onConfirmation(g)}}function aa(){return(aa=(0,f.Z)(function*(y,h,g){const E=dt(y),A=yield $r(E,h,(0,P.m9)(g));return new Id(A,R=>Dn(E,R))})).apply(this,arguments)}function bd(){return(bd=(0,f.Z)(function*(y,h,g){const E=(0,P.m9)(y);yield on(!1,E,"phone");const A=yield $r(E.auth,h,(0,P.m9)(g));return new Id(A,R=>pr(E,R))})).apply(this,arguments)}function Hr(){return(Hr=(0,f.Z)(function*(y,h,g){const E=(0,P.m9)(y),A=yield $r(E.auth,h,(0,P.m9)(g));return new Id(A,R=>fs(E,R))})).apply(this,arguments)}function $r(y,h,g){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,f.Z)(function*(y,h,g){var E;const A=yield g.verify();try{let R;if(G("string"==typeof A,y,"argument-error"),G(g.type===Cg,y,"argument-error"),R="string"==typeof h?{phoneNumber:h}:h,"session"in R){const q=R.session;if("phoneNumber"in R)return G("enroll"===q.type,y,"internal-error"),(yield gd(y,{idToken:q.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{G("signin"===q.type,y,"internal-error");const le=(null===(E=R.multiFactorHint)||void 0===E?void 0:E.uid)||R.multiFactorUid;return G(le,y,"missing-multi-factor-info"),(yield sr(y,{mfaPendingCredential:q.credential,mfaEnrollmentId:le,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:q}=yield yg(y,{phoneNumber:R.phoneNumber,recaptchaToken:A});return q}}finally{g._reset()}})).apply(this,arguments)}function Co(){return(Co=(0,f.Z)(function*(y,h){yield ka((0,P.m9)(y),h)})).apply(this,arguments)}let ua=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=dt(g)}verifyPhoneNumber(g,E){return $r(this.auth,g,(0,P.m9)(E))}static credential(g,E){return Wo._fromVerification(g,E)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:E,temporaryProof:A}=g;return E&&A?Wo._fromTokenResponse(E,A):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function To(y,h){return h?Q(h):(G(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class xu extends Di{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Ls(h,this._buildIdpRequest())}_linkToIdToken(h,g){return Ls(h,this._buildIdpRequest(g))}_getReauthenticationResolver(h){return Ls(h,this._buildIdpRequest())}_buildIdpRequest(h){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(g.idToken=h),g}}function $t(y){return fr(y.auth,new xu(y),y.bypassAuthState)}function Dd(y){const{auth:h,user:g}=y;return G(g,h,"internal-error"),yu(g,new xu(y),y.bypassAuthState)}function _s(y){return er.apply(this,arguments)}function er(){return(er=(0,f.Z)(function*(y){const{auth:h,user:g}=y;return G(g,h,"internal-error"),ka(g,new xu(y),y.bypassAuthState)})).apply(this,arguments)}class Ks{constructor(h,g,E,A,R=!1){this.auth=h,this.resolver=E,this.user=A,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var h=this;return new Promise(function(){var g=(0,f.Z)(function*(E,A){h.pendingPromise={resolve:E,reject:A};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(R){h.reject(R)}});return function(E,A){return g.apply(this,arguments)}}())}onAuthEvent(h){var g=this;return(0,f.Z)(function*(){const{urlResponse:E,sessionId:A,postBody:R,tenantId:q,error:le,type:ke}=h;if(le)return void g.reject(le);const Ze={auth:g.auth,requestUri:E,sessionId:A,tenantId:q||void 0,postBody:R||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(ke)(Ze))}catch(yt){g.reject(yt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return $t;case"linkViaPopup":case"linkViaRedirect":return _s;case"reauthViaPopup":case"reauthViaRedirect":return Dd;default:xe(this.auth,"internal-error")}}resolve(h){W(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){W(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Zs=new sn(2e3,1e4);function la(){return(la=(0,f.Z)(function*(y,h,g){const E=dt(y);Ve(y,h,wr);const A=To(E,g);return new Td(E,"signInViaPopup",h,A).executeNotNull()})).apply(this,arguments)}function Jl(){return(Jl=(0,f.Z)(function*(y,h,g){const E=(0,P.m9)(y);Ve(E.auth,h,wr);const A=To(E.auth,g);return new Td(E.auth,"reauthViaPopup",h,A,E).executeNotNull()})).apply(this,arguments)}function Nu(){return(Nu=(0,f.Z)(function*(y,h,g){const E=(0,P.m9)(y);Ve(E.auth,h,wr);const A=To(E.auth,g);return new Td(E.auth,"linkViaPopup",h,A,E).executeNotNull()})).apply(this,arguments)}let Td=(()=>{class y extends Ks{constructor(g,E,A,R,q){super(g,E,R,q),this.provider=A,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,f.Z)(function*(){const E=yield g.execute();return G(E,g.auth,"internal-error"),E})()}onExecution(){var g=this;return(0,f.Z)(function*(){W(1===g.filter.length,"Popup operations only handle one event");const E=ra();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],E),g.authWindow.associatedEvent=E,g.resolver._originValidation(g.auth).catch(A=>{g.reject(A)}),g.resolver._isIframeWebStorageSupported(g.auth,A=>{A||g.reject(me(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(me(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var E,A;this.pollId=(null===(A=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===A?void 0:A.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(me(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,Zs.get())};g()}}return y.currentPopupAction=null,y})();const ar=new Map;class Ru extends Ks{constructor(h,g,E=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,E),this.eventId=null}execute(){var h=()=>super.execute,g=this;return(0,f.Z)(function*(){let E=ar.get(g.auth._key());if(!E){try{const R=(yield function Tg(y,h){return Gr.apply(this,arguments)}(g.resolver,g.auth))?yield h().call(g):null;E=()=>Promise.resolve(R)}catch(A){E=()=>Promise.reject(A)}ar.set(g.auth._key(),E)}return g.bypassAuthState||ar.set(g.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(h){var g=()=>super.onAuthEvent,E=this;return(0,f.Z)(function*(){if("signInViaRedirect"===h.type)return g().call(E,h);if("unknown"!==h.type){if(h.eventId){const A=yield E.auth._redirectUserForId(h.eventId);if(A)return E.user=A,g().call(E,h);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function Gr(){return(Gr=(0,f.Z)(function*(y,h){const g=Pu(h),E=Ou(y);if(!(yield E._isAvailable()))return!1;const A="true"===(yield E._get(g));return yield E._remove(g),A})).apply(this,arguments)}function ca(y,h){return hi.apply(this,arguments)}function hi(){return(hi=(0,f.Z)(function*(y,h){return Ou(y)._set(Pu(h),"true")})).apply(this,arguments)}function Ad(y,h){ar.set(y._key(),h)}function Ou(y){return Q(y._redirectPersistence)}function Pu(y){return K("pendingRedirect",y.config.apiKey,y.name)}function b(){return(b=(0,f.Z)(function*(y,h,g){const E=dt(y);Ve(y,h,wr);const A=To(E,g);return yield ca(A,E),A._openRedirect(E,h,"signInViaRedirect")})).apply(this,arguments)}function F(){return(F=(0,f.Z)(function*(y,h,g){const E=(0,P.m9)(y);Ve(E.auth,h,wr);const A=To(E.auth,g);yield ca(A,E.auth);const R=yield rt(E);return A._openRedirect(E.auth,h,"reauthViaRedirect",R)})).apply(this,arguments)}function Ce(){return(Ce=(0,f.Z)(function*(y,h,g){const E=(0,P.m9)(y);Ve(E.auth,h,wr);const A=To(E.auth,g);yield on(!1,E,h.providerId),yield ca(A,E.auth);const R=yield rt(E);return A._openRedirect(E.auth,h,"linkViaRedirect",R)})).apply(this,arguments)}function lt(){return(lt=(0,f.Z)(function*(y,h){return yield dt(y)._initializationPromise,It(y,h,!1)})).apply(this,arguments)}function It(y,h){return xt.apply(this,arguments)}function xt(){return(xt=(0,f.Z)(function*(y,h,g=!1){const E=dt(y),A=To(E,h),q=yield new Ru(E,A,g).execute();return q&&!g&&(delete q.user._redirectEventId,yield E._persistUserIfCurrent(q.user),yield E._setRedirectUser(null,h)),q})).apply(this,arguments)}function rt(y){return $n.apply(this,arguments)}function $n(){return($n=(0,f.Z)(function*(y){const h=ra(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class Ys{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let g=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(h,E)&&(g=!0,this.sendToConsumer(h,E),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Fu(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ns(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=h,g=!0)),g}sendToConsumer(h,g){var E;if(h.error&&!ns(h)){const A=(null===(E=h.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";g.onError(me(this.auth,A))}else g.onAuthEvent(h)}isEventForConsumer(h,g){const E=null===g.eventId||!!h.eventId&&h.eventId===g.eventId;return g.filter.includes(h.type)&&E}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Qs(h))}saveEventToCache(h){this.cachedEventUids.add(Qs(h)),this.lastProcessedEventTime=Date.now()}}function Qs(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function ns({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===(null==h?void 0:h.code)}function Qa(y){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,f.Z)(function*(y,h={}){return zt(y,"GET","/v1/projects",h)})).apply(this,arguments)}const rs=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xi=/^https?/;function nf(){return(nf=(0,f.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield Qa(y);for(const g of h)try{if(uE(g))return}catch(E){}xe(y,"unauthorized-domain")})).apply(this,arguments)}function uE(y){const h=Pe(),{protocol:g,hostname:E}=new URL(h);if(y.startsWith("chrome-extension://")){const q=new URL(y);return""===q.hostname&&""===E?"chrome-extension:"===g&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===g&&q.hostname===E}if(!xi.test(g))return!1;if(rs.test(y))return E===y;const A=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(E)}const Ag=new sn(3e4,6e4);function rf(){const y=Pn().___jsl;if(null==y?void 0:y.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let Lu=null;function So(y){return Lu=Lu||function Sg(y){return new Promise((h,g)=>{var E,A,R;function q(){rf(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{rf(),g(me(y,"network-request-failed"))},timeout:Ag.get()})}if(null===(A=null===(E=Pn().gapi)||void 0===E?void 0:E.iframes)||void 0===A?void 0:A.Iframe)h(gapi.iframes.getContext());else{if(!(null===(R=Pn().gapi)||void 0===R?void 0:R.load)){const le=Ws("iframefcb");return Pn()[le]=()=>{gapi.load?q():g(me(y,"network-request-failed"))},Xi(`https://apis.google.com/js/api.js?onload=${le}`).catch(ke=>g(ke))}q()}}).catch(h=>{throw Lu=null,h})}(y),Lu}const Vu=new sn(5e3,15e3),Uu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ja=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Mg(y){const h=y.config;G(h.authDomain,y,"auth-domain-config-required");const g=h.emulator?mn(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,E={apiKey:h.apiKey,appName:y.name,v:ue.SDK_VERSION},A=Ja.get(y.config.apiHost);A&&(E.eid=A);const R=y._getFrameworks();return R.length&&(E.fw=R.join(",")),`${g}?${(0,P.xO)(E).slice(1)}`}function Mo(){return Mo=(0,f.Z)(function*(y){const h=yield So(y),g=Pn().gapi;return G(g,y,"internal-error"),h.open({where:document.body,url:Mg(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Uu,dontclear:!0},E=>new Promise(function(){var A=(0,f.Z)(function*(R,q){yield E.restyle({setHideOnLeave:!1});const le=me(y,"network-request-failed"),ke=Pn().setTimeout(()=>{q(le)},Vu.get());function Ze(){Pn().clearTimeout(ke),R(E)}E.ping(Ze).then(Ze,()=>{q(le)})});return function(R,q){return A.apply(this,arguments)}}()))}),Mo.apply(this,arguments)}const Md={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class xg{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(h){}}}function fi(y,h,g,E,A,R){G(y.config.authDomain,y,"auth-domain-config-required"),G(y.config.apiKey,y,"invalid-api-key");const q={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:E,v:ue.SDK_VERSION,eventId:A};if(h instanceof wr){h.setDefaultLanguage(y.languageCode),q.providerId=h.providerId||"",(0,P.xb)(h.getCustomParameters())||(q.customParameters=JSON.stringify(h.getCustomParameters()));for(const[ke,Ze]of Object.entries(R||{}))q[ke]=Ze}if(h instanceof Us){const ke=h.getScopes().filter(Ze=>""!==Ze);ke.length>0&&(q.scopes=ke.join(","))}y.tenantId&&(q.tid=y.tenantId);const le=q;for(const ke of Object.keys(le))void 0===le[ke]&&delete le[ke];return`${function Js({config:y}){return y.emulator?mn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,P.xO)(le).slice(1)}`}const Bu="webStorageSupport";class tc extends class Wy{constructor(h){this.factorId=h}_process(h,g,E){switch(g.type){case"enroll":return this._finalizeEnroll(h,g.credential,E);case"signin":return this._finalizeSignIn(h,g.credential);default:return _e("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new tc(h)}_finalizeEnroll(h,g,E){return function bg(y,h){return zt(y,"POST","/v2/accounts/mfaEnrollment:finalize",Kt(y,h))}(h,{idToken:g,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,g){return function Zl(y,h){return zt(y,"POST","/v2/accounts/mfaSignIn:finalize",Kt(y,h))}(h,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Ky=(()=>{class y{constructor(){}static assertion(g){return tc._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var af="@firebase/auth",Rg="0.20.11";class Og{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var g=this;return(0,f.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const g=this.auth.onIdTokenChanged(E=>{var A;h((null===(A=E)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,g),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const g=this.internalListeners.get(h);!g||(this.internalListeners.delete(h),g(),this.updateProactiveRefresh())}assertAuthConfigured(){G(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Es(){return window}function ws(){return(ws=(0,f.Z)(function*(y,h,g){var E;const{BuildInfo:A}=Es();W(h.sessionId,"AuthEvent did not contain a session ID");const R=yield Pd(h.sessionId),q={};return En()?q.ibi=A.packageName:ln()?q.apn=A.packageName:xe(y,"operation-not-supported-in-this-environment"),A.displayName&&(q.appDisplayName=A.displayName),q.sessionId=R,fi(y,g,h.type,void 0,null!==(E=h.eventId)&&void 0!==E?E:void 0,q)})).apply(this,arguments)}function ha(){return(ha=(0,f.Z)(function*(y){const{BuildInfo:h}=Es(),g={};En()?g.iosBundleId=h.packageName:ln()?g.androidPackageName=h.packageName:xe(y,"operation-not-supported-in-this-environment"),yield Qa(y,g)})).apply(this,arguments)}function nc(){return(nc=(0,f.Z)(function*(y,h,g){const{cordova:E}=Es();let A=()=>{};try{yield new Promise((R,q)=>{let le=null;function ke(){var ft;R();const gr=null===(ft=E.plugins.browsertab)||void 0===ft?void 0:ft.close;"function"==typeof gr&&gr(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function Ze(){le||(le=window.setTimeout(()=>{q(me(y,"redirect-cancelled-by-user"))},2e3))}function yt(){"visible"===(null==document?void 0:document.visibilityState)&&Ze()}h.addPassiveListener(ke),document.addEventListener("resume",Ze,!1),ln()&&document.addEventListener("visibilitychange",yt,!1),A=()=>{h.removePassiveListener(ke),document.removeEventListener("resume",Ze,!1),document.removeEventListener("visibilitychange",yt,!1),le&&window.clearTimeout(le)}})}finally{A()}})).apply(this,arguments)}function Pd(y){return ju.apply(this,arguments)}function ju(){return(ju=(0,f.Z)(function*(y){const h=Fg(y),g=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(g)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Fg(y){if(W(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),g=new Uint8Array(h);for(let E=0;E<y.length;E++)g[E]=y.charCodeAt(E);return g}(0,P.Pz)("authIdTokenMaxAge"),function Zy(y){(0,ue._registerComponent)(new se.wA("auth",(h,{options:g})=>{const E=h.getProvider("app").getImmediate(),A=h.getProvider("heartbeat"),{apiKey:R,authDomain:q}=E.options;return((le,ke)=>{G(R&&!R.includes(":"),"invalid-api-key",{appName:le.name}),G(!(null==q?void 0:q.includes(":")),"argument-error",{appName:le.name});const Ze={apiKey:R,authDomain:q,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zo(y)},yt=new We(le,ke,Ze);return function ae(y,h){const g=(null==h?void 0:h.persistence)||[],E=(Array.isArray(g)?g:[g]).map(Q);(null==h?void 0:h.errorMap)&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(E,null==h?void 0:h.popupRedirectResolver)}(yt,g),yt})(E,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,g,E)=>{h.getProvider("auth-internal").initialize()})),(0,ue._registerComponent)(new se.wA("auth-internal",h=>{const g=dt(h.getProvider("auth").getImmediate());return new Og(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ue.registerVersion)(af,Rg,function Rd(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ue.registerVersion)(af,Rg,"esm2017")}("Browser");class df extends Ys{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(h)),super.onEvent(h)}initialized(){var h=this;return(0,f.Z)(function*(){yield h.initPromise})()}}function kd(y){return Hu.apply(this,arguments)}function Hu(){return(Hu=(0,f.Z)(function*(y){const h=yield pi()._get(Sn(y));return h&&(yield pi()._remove(Sn(y))),h})).apply(this,arguments)}function ic(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const E=Math.floor(Math.random()*h.length);y.push(h.charAt(E))}return y.join("")}function pi(){return Q(Mn)}function Sn(y){return K("authEvent",y.config.apiKey,y.name)}function Ro(y){if(!(null==y?void 0:y.includes("?")))return{};const[h,...g]=y.split("?");return(0,P.zd)(g.join("?"))}function Bg(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:me("no-auth-event")}}function Xs(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function sc(y=(0,P.z$)()){return!("file:"!==Xs()&&"ionic:"!==Xs()&&"capacitor:"!==Xs()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Vd(){try{const y=self.localStorage,h=ra();if(y)return y.setItem(h,"1"),y.removeItem(h),!function oc(y=(0,P.z$)()){return function $g(){return(0,P.w1)()&&11===(null==document?void 0:document.documentMode)}()||function qr(y=(0,P.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,P.hl)()}catch(y){return ac()&&(0,P.hl)()}return!1}function ac(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function pf(){return(function ur(){return"http:"===Xs()||"https:"===Xs()}()||(0,P.ru)()||sc())&&!function Hg(){return(0,P.b$)()||(0,P.UG)()}()&&Vd()&&!ac()}function Ud(){return sc()&&"undefined"!=typeof document}function jd(){return(jd=(0,f.Z)(function*(){return!!Ud()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const Dr={LOCAL:"local",NONE:"none",SESSION:"session"},uc=G,$u="persistence";function mf(y){return eu.apply(this,arguments)}function eu(){return(eu=(0,f.Z)(function*(y){yield y._initializationPromise;const h=Gg(),g=K($u,y.config.apiKey,y.name);h&&h.setItem(g,y._getPersistence())})).apply(this,arguments)}function Gg(){var y;try{return(null===(y=function t_(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(h){return null}}const n_=G;class Is{constructor(){this.browserResolver=Q(class Ng{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Xn,this._completeRedirectFn=It,this._overrideRedirectResult=Ad}_openPopup(h,g,E,A){var R=this;return(0,f.Z)(function*(){var q;W(null===(q=R.eventManagers[h._key()])||void 0===q?void 0:q.manager,"_initialize() not called before _openPopup()");const le=fi(h,g,E,Pe(),A);return function ec(y,h,g,E=500,A=600){const R=Math.max((window.screen.availHeight-A)/2,0).toString(),q=Math.max((window.screen.availWidth-E)/2,0).toString();let le="";const ke=Object.assign(Object.assign({},Md),{width:E.toString(),height:A.toString(),top:R,left:q}),Ze=(0,P.z$)().toLowerCase();g&&(le=dn(Ze)?"_blank":g),Xe(Ze)&&(h=h||"http://localhost",ke.scrollbars="yes");const yt=Object.entries(ke).reduce((gr,[Wr,tu])=>`${gr}${Wr}=${tu},`,"");if(function ds(y=(0,P.z$)()){var h;return En(y)&&!!(null===(h=window.navigator)||void 0===h?void 0:h.standalone)}(Ze)&&"_self"!==le)return function Gy(y,h){const g=document.createElement("a");g.href=y,g.target=h;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(E)}(h||"",le),new xg(null);const ft=window.open(h||"",le,yt);G(ft,y,"popup-blocked");try{ft.focus()}catch(gr){}return new xg(ft)}(h,le,ra())})()}_openRedirect(h,g,E,A){var R=this;return(0,f.Z)(function*(){return yield R._originValidation(h),function Gs(y){Pn().location.href=y}(fi(h,g,E,Pe(),A)),new Promise(()=>{})})()}_initialize(h){const g=h._key();if(this.eventManagers[g]){const{manager:A,promise:R}=this.eventManagers[g];return A?Promise.resolve(A):(W(R,"If manager is not set, promise should be"),R)}const E=this.initAndGetManager(h);return this.eventManagers[g]={promise:E},E.catch(()=>{delete this.eventManagers[g]}),E}initAndGetManager(h){var g=this;return(0,f.Z)(function*(){const E=yield function lE(y){return Mo.apply(this,arguments)}(h),A=new Ys(h);return E.register("authEvent",R=>(G(null==R?void 0:R.authEvent,h,"invalid-auth-event"),{status:A.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[h._key()]={manager:A},g.iframes[h._key()]=E,A})()}_isIframeWebStorageSupported(h,g){this.iframes[h._key()].send(Bu,{type:Bu},A=>{var R;const q=null===(R=null==A?void 0:A[0])||void 0===R?void 0:R[Bu];void 0!==q&&g(!!q),xe(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function da(y){return nf.apply(this,arguments)}(h)),this.originValidationPromises[g]}get _shouldInitProactively(){return Os()||Rt()||En()}}),this.cordovaResolver=Q(class Jy{constructor(){this._redirectPersistence=Xn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=It,this._overrideRedirectResult=Ad}_initialize(h){var g=this;return(0,f.Z)(function*(){const E=h._key();let A=g.eventManagers.get(E);return A||(A=new df(h),g.eventManagers.set(E,A),g.attachCallbackListeners(h,A)),A})()}_openPopup(h){xe(h,"operation-not-supported-in-this-environment")}_openRedirect(h,g,E,A){var R=this;return(0,f.Z)(function*(){!function cf(y){var h,g,E,A,R,q,le,ke,Ze,yt;const ft=Es();G("function"==typeof(null===(h=null==ft?void 0:ft.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),G(void 0!==(null===(g=null==ft?void 0:ft.BuildInfo)||void 0===g?void 0:g.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),G("function"==typeof(null===(R=null===(A=null===(E=null==ft?void 0:ft.cordova)||void 0===E?void 0:E.plugins)||void 0===A?void 0:A.browsertab)||void 0===R?void 0:R.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),G("function"==typeof(null===(ke=null===(le=null===(q=null==ft?void 0:ft.cordova)||void 0===q?void 0:q.plugins)||void 0===le?void 0:le.browsertab)||void 0===ke?void 0:ke.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),G("function"==typeof(null===(yt=null===(Ze=null==ft?void 0:ft.cordova)||void 0===Ze?void 0:Ze.InAppBrowser)||void 0===yt?void 0:yt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const q=yield R._initialize(h);yield q.initialized(),q.resetRedirect(),function tf(){ar.clear()}(),yield R._originValidation(h);const le=function Qy(y,h,g=null){return{type:h,eventId:g,urlResponse:null,sessionId:ic(),postBody:null,tenantId:y.tenantId,error:me(y,"no-auth-event")}}(h,E,A);yield function Lg(y,h){return pi()._set(Sn(y),h)}(h,le);const ke=yield function Od(y,h,g){return ws.apply(this,arguments)}(h,le,g),Ze=yield function dE(y){const{cordova:h}=Es();return new Promise(g=>{h.plugins.browsertab.isAvailable(E=>{let A=null;E?h.plugins.browsertab.openUrl(y):A=h.InAppBrowser.open(y,function lo(y=(0,P.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(A)})})}(ke);return function lf(y,h,g){return nc.apply(this,arguments)}(h,q,Ze)})()}_isIframeWebStorageSupported(h,g){throw new Error("Method not implemented.")}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function cE(y){return ha.apply(this,arguments)}(h)),this.originValidationPromises[g]}attachCallbackListeners(h,g){const{universalLinks:E,handleOpenURL:A,BuildInfo:R}=Es(),q=setTimeout((0,f.Z)(function*(){yield kd(h),g.onEvent(Bg())}),500),le=function(){var yt=(0,f.Z)(function*(ft){clearTimeout(q);const gr=yield kd(h);let Wr=null;gr&&(null==ft?void 0:ft.url)&&(Wr=function Vg(y,h){var g,E;const A=function Fd(y){const h=Ro(y),g=h.link?decodeURIComponent(h.link):void 0,E=Ro(g).link,A=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return Ro(A).link||A||E||g||y}(h);if(A.includes("/__/auth/callback")){const R=Ro(A),q=R.firebaseError?function hf(y){try{return JSON.parse(y)}catch(h){return null}}(decodeURIComponent(R.firebaseError)):null,le=null===(E=null===(g=null==q?void 0:q.code)||void 0===g?void 0:g.split("auth/"))||void 0===E?void 0:E[1],ke=le?me(le):null;return ke?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:ke,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:A,postBody:null}}return null}(gr,ft.url)),g.onEvent(Wr||Bg())});return function(gr){return yt.apply(this,arguments)}}();void 0!==E&&"function"==typeof E.subscribe&&E.subscribe(null,le);const ke=A,Ze=`${R.packageName.toLowerCase()}://`;Es().handleOpenURL=function(){var yt=(0,f.Z)(function*(ft){if(ft.toLowerCase().startsWith(Ze)&&le({url:ft}),"function"==typeof ke)try{ke(ft)}catch(gr){console.error(gr)}});return function(ft){return yt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Xn,this._completeRedirectFn=It,this._overrideRedirectResult=Ad}_initialize(h){var g=this;return(0,f.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,g,E,A){var R=this;return(0,f.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(h,g,E,A)})()}_openRedirect(h,g,E,A){var R=this;return(0,f.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(h,g,E,A)})()}_isIframeWebStorageSupported(h,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,g)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return Ud()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return n_(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,f.Z)(function*(){if(h.underlyingResolver)return;const g=yield function Bd(){return jd.apply(this,arguments)}();h.underlyingResolver=g?h.cordovaResolver:h.browserResolver})()}}function qg(y){return y.unwrap()}function i_(y){return zg(y)}function zg(y){const{_tokenResponse:h}=y instanceof P.ZR?y.customData:y;if(!h)return null;if(!(y instanceof P.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return ua.credentialFromResult(y);const g=h.providerId;if(!g||"password"===g)return null;let E;switch(g){case"google.com":E=sd;break;case"facebook.com":E=Ko;break;case"github.com":E=Zh;break;case"twitter.com":E=od;break;default:const{oauthIdToken:A,oauthAccessToken:R,oauthTokenSecret:q,pendingToken:le,nonce:ke}=h;return R||q||A||le?le?g.startsWith("saml.")?ho._create(g,le):hs._fromParams({providerId:g,signInMethod:g,pendingToken:le,idToken:A,accessToken:R}):new zi(g).credential({idToken:A,accessToken:R,rawNonce:ke}):null}return y instanceof P.ZR?E.credentialFromError(y):E.credentialFromResult(y)}function zr(y,h){return h.catch(g=>{throw g instanceof P.ZR&&function s_(y,h){var g,E;const A=null===(g=h.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===(null===(E=h)||void 0===E?void 0:E.code))h.resolver=new o_(y,function Jn(y,h){var g;const E=(0,P.m9)(y),A=h;return G(h.customData.operationType,E,"argument-error"),G(null===(g=A.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,E,"argument-error"),vo._fromError(E,A)}(y,h));else if(A){const R=zg(h),q=h;R&&(q.credential=R,q.tenantId=A.tenantId||void 0,q.email=A.email||void 0,q.phoneNumber=A.phoneNumber||void 0)}}(y,g),g}).then(g=>{const A=g.user;return{operationType:g.operationType,credential:i_(g),additionalUserInfo:ir(g),user:Oo.getOrCreate(A)}})}function _f(y,h){return vf.apply(this,arguments)}function vf(){return(vf=(0,f.Z)(function*(y,h){const g=yield h;return{verificationId:g.verificationId,confirm:E=>zr(y,g.confirm(E))}})).apply(this,arguments)}class o_{constructor(h,g){this.resolver=g,this.auth=function r_(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return zr(qg(this.auth),this.resolver.resolveSignIn(h))}}class Oo{constructor(h){this._delegate=h,this.multiFactor=function Wl(y){const h=(0,P.m9)(y);return Su.has(h)||Su.set(h,na._fromUser(h)),Su.get(h)}(h)}static getOrCreate(h){return Oo.USER_MAP.has(h)||Oo.USER_MAP.set(h,new Oo(h)),Oo.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var g=this;return(0,f.Z)(function*(){return zr(g.auth,pr(g._delegate,h))})()}linkWithPhoneNumber(h,g){var E=this;return(0,f.Z)(function*(){return _f(E.auth,function Za(y,h,g){return bd.apply(this,arguments)}(E._delegate,h,g))})()}linkWithPopup(h){var g=this;return(0,f.Z)(function*(){return zr(g.auth,function ef(y,h,g){return Nu.apply(this,arguments)}(g._delegate,h,Is))})()}linkWithRedirect(h){var g=this;return(0,f.Z)(function*(){return yield mf(dt(g.auth)),function Z(y,h,g){return function te(y,h,g){return Ce.apply(this,arguments)}(y,h,g)}(g._delegate,h,Is)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var g=this;return(0,f.Z)(function*(){return zr(g.auth,fs(g._delegate,h))})()}reauthenticateWithPhoneNumber(h,g){return _f(this.auth,function Xh(y,h,g){return Hr.apply(this,arguments)}(this._delegate,h,g))}reauthenticateWithPopup(h){return zr(this.auth,function vs(y,h,g){return Jl.apply(this,arguments)}(this._delegate,h,Is))}reauthenticateWithRedirect(h){var g=this;return(0,f.Z)(function*(){return yield mf(dt(g.auth)),function C(y,h,g){return function x(y,h,g){return F.apply(this,arguments)}(y,h,g)}(g._delegate,h,Is)})()}sendEmailVerification(h){return function Ti(y,h){return Gl.apply(this,arguments)}(this._delegate,h)}unlink(h){var g=this;return(0,f.Z)(function*(){return yield function Yh(y,h){return gn.apply(this,arguments)}(g._delegate,h),g})()}updateEmail(h){return function ld(y,h){return Tu((0,P.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function cd(y,h){return Tu((0,P.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function Ql(y,h){return Co.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function Du(y,h){return Cu.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,g){return function Iu(y,h,g){return bu.apply(this,arguments)}(this._delegate,h,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Oo.USER_MAP=new WeakMap;const lc=G;let Ef=(()=>{class y{constructor(g,E){if(this.app=g,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=g.options;lc(A,"invalid-api-key",{appName:g.name}),lc(A,"invalid-api-key",{appName:g.name});const R="undefined"!=typeof window?Is:void 0;this._delegate=E.initialize({options:{persistence:Wg(A,g.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(Oe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Oo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,E){!function Lr(y,h,g){const E=dt(y);G(E._canInitEmulator,E,"emulator-config-failed"),G(/^https?:\/\//.test(h),E,"invalid-emulator-scheme");const A=!!(null==g?void 0:g.disableWarnings),R=ji(h),{host:q,port:le}=function Bn(y){const h=ji(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!g)return{host:"",port:null};const E=g[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(E);if(A){const R=A[1];return{host:R,port:Hi(E.substr(R.length+1))}}{const[R,q]=E.split(":");return{host:R,port:Hi(q)}}}(h);E.config.emulator={url:`${R}//${q}${null===le?"":`:${le}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:q,port:le,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function yn(){function y(){const h=document.createElement("p"),g=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,E)}applyActionCode(g){return function Xo(y,h){return Se.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return Gt(this._delegate,g)}confirmPasswordReset(g,E){return function vu(y,h,g){return Bl.apply(this,arguments)}(this._delegate,g,E)}createUserWithEmailAndPassword(g,E){var A=this;return(0,f.Z)(function*(){return zr(A._delegate,function mo(y,h,g){return li.apply(this,arguments)}(A._delegate,g,E))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function wu(y,h){return Hs.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function ud(y,h){const g=mu.parseLink(h);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,f.Z)(function*(){lc(pf(),g._delegate,"operation-not-supported-in-this-environment");const E=yield function je(y,h){return lt.apply(this,arguments)}(g._delegate,Is);return E?zr(g._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function Ld(y,h){dt(y)._logFramework(h)}(this._delegate,g)}onAuthStateChanged(g,E,A){const{next:R,error:q,complete:le}=a_(g,E,A);return this._delegate.onAuthStateChanged(R,q,le)}onIdTokenChanged(g,E,A){const{next:R,error:q,complete:le}=a_(g,E,A);return this._delegate.onIdTokenChanged(R,q,le)}sendSignInLinkToEmail(g,E){return function Hl(y,h,g){return $l.apply(this,arguments)}(this._delegate,g,E)}sendPasswordResetEmail(g,E){return function Ul(y,h,g){return _u.apply(this,arguments)}(this._delegate,g,E||void 0)}setPersistence(g){var E=this;return(0,f.Z)(function*(){let A;switch(function gf(y,h){uc(Object.values(Dr).includes(h),y,"invalid-persistence-type"),(0,P.b$)()?uc(h!==Dr.SESSION,y,"unsupported-persistence-type"):(0,P.UG)()?uc(h===Dr.NONE,y,"unsupported-persistence-type"):ac()?uc(h===Dr.NONE||h===Dr.LOCAL&&(0,P.hl)(),y,"unsupported-persistence-type"):uc(h===Dr.NONE||Vd(),y,"unsupported-persistence-type")}(E._delegate,g),g){case Dr.SESSION:A=Xn;break;case Dr.LOCAL:A=(yield Q(bo)._isAvailable())?bo:Mn;break;case Dr.NONE:A=V;break;default:return xe("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return zr(this._delegate,function ad(y){return kl.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return zr(this._delegate,Dn(this._delegate,g))}signInWithCustomToken(g){return zr(this._delegate,function Jo(y,h){return vt.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,E){return zr(this._delegate,function jl(y,h,g){return Dn((0,P.m9)(y),id.credential(h,g))}(this._delegate,g,E))}signInWithEmailLink(g,E){return zr(this._delegate,function wg(y,h,g){return ps.apply(this,arguments)}(this._delegate,g,E))}signInWithPhoneNumber(g,E){return _f(this._delegate,function kn(y,h,g){return aa.apply(this,arguments)}(this._delegate,g,E))}signInWithPopup(g){var E=this;return(0,f.Z)(function*(){return lc(pf(),E._delegate,"operation-not-supported-in-this-environment"),zr(E._delegate,function Cd(y,h,g){return la.apply(this,arguments)}(E._delegate,g,Is))})()}signInWithRedirect(g){var E=this;return(0,f.Z)(function*(){return lc(pf(),E._delegate,"operation-not-supported-in-this-environment"),yield mf(E._delegate),function ku(y,h,g){return function ts(y,h,g){return b.apply(this,arguments)}(y,h,g)}(E._delegate,g,Is)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function wn(y,h){return Eu.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Dr,y})();function a_(y,h,g){let E=y;"function"!=typeof y&&({next:E,error:h,complete:g}=y);const A=E;return{next:q=>A(q&&Oo.getOrCreate(q)),error:h,complete:g}}function Wg(y,h){const g=function yf(y,h){const g=Gg();if(!g)return[];const E=K($u,y,h);switch(g.getItem(E)){case Dr.NONE:return[V];case Dr.LOCAL:return[bo,Xn];case Dr.SESSION:return[Xn];default:return[]}}(y,h);if("undefined"!=typeof self&&!g.includes(bo)&&g.push(bo),"undefined"!=typeof window)for(const E of[Mn,Xn])g.includes(E)||g.push(E);return g.includes(V)||g.push(V),g}class Po{constructor(){this.providerId="phone",this._delegate=new ua(qg(J.Z.auth()))}static credential(h,g){return ua.credential(h,g)}verifyPhoneNumber(h,g){return this._delegate.verifyPhoneNumber(h,g)}unwrap(){return this._delegate}}Po.PHONE_SIGN_IN_METHOD=ua.PHONE_SIGN_IN_METHOD,Po.PROVIDER_ID=ua.PROVIDER_ID;const bs=G;class u_{constructor(h,g,E=J.Z.app()){var A;bs(null===(A=E.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new Jh(h,g,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Kg(y){y.INTERNAL.registerComponent(new se.wA("auth-compat",h=>{const g=h.getProvider("app-compat").getImmediate(),E=h.getProvider("auth");return new Ef(g,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:id,FacebookAuthProvider:Ko,GithubAuthProvider:Zh,GoogleAuthProvider:sd,OAuthProvider:zi,SAMLAuthProvider:Vr,PhoneAuthProvider:Po,PhoneMultiFactorGenerator:Ky,RecaptchaVerifier:u_,TwitterAuthProvider:od,Auth:Ef,AuthCredential:Di,Error:P.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.24")}(J.Z)},8306:(Je,we,O)=>{O.d(we,{y:()=>$});var f=O(2961),J=O(727),P=O(8822),ue=O(4671);var se=O(2416),oe=O(576),he=O(2806);let $=(()=>{class Ae{constructor(Ue){Ue&&(this._subscribe=Ue)}lift(Ue){const fe=new Ae;return fe.source=this,fe.operator=Ue,fe}subscribe(Ue,fe,Ie){const qe=function Le(Ae){return Ae&&Ae instanceof f.Lv||function X(Ae){return Ae&&(0,oe.m)(Ae.next)&&(0,oe.m)(Ae.error)&&(0,oe.m)(Ae.complete)}(Ae)&&(0,J.Nn)(Ae)}(Ue)?Ue:new f.Hp(Ue,fe,Ie);return(0,he.x)(()=>{const{operator:Ye,source:xe}=this;qe.add(Ye?Ye.call(qe,xe):xe?this._subscribe(qe):this._trySubscribe(qe))}),qe}_trySubscribe(Ue){try{return this._subscribe(Ue)}catch(fe){Ue.error(fe)}}forEach(Ue,fe){return new(fe=B(fe))((Ie,qe)=>{const Ye=new f.Hp({next:xe=>{try{Ue(xe)}catch(me){qe(me),Ye.unsubscribe()}},error:qe,complete:Ie});this.subscribe(Ye)})}_subscribe(Ue){var fe;return null===(fe=this.source)||void 0===fe?void 0:fe.subscribe(Ue)}[P.L](){return this}pipe(...Ue){return function pe(Ae){return 0===Ae.length?ue.y:1===Ae.length?Ae[0]:function(Ue){return Ae.reduce((fe,Ie)=>Ie(fe),Ue)}}(Ue)(this)}toPromise(Ue){return new(Ue=B(Ue))((fe,Ie)=>{let qe;this.subscribe(Ye=>qe=Ye,Ye=>Ie(Ye),()=>fe(qe))})}}return Ae.create=Oe=>new Ae(Oe),Ae})();function B(Ae){var Oe;return null!==(Oe=null!=Ae?Ae:se.v.Promise)&&void 0!==Oe?Oe:Promise}},7579:(Je,we,O)=>{O.d(we,{x:()=>se});var f=O(8306),J=O(727);const ue=(0,O(3888).d)(he=>function(){he(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ie=O(8737),pe=O(2806);let se=(()=>{class he extends f.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(B){const X=new oe(this,this);return X.operator=B,X}_throwIfClosed(){if(this.closed)throw new ue}next(B){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const X of this.currentObservers)X.next(B)}})}error(B){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=B;const{observers:X}=this;for(;X.length;)X.shift().error(B)}})}complete(){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:B}=this;for(;B.length;)B.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var B;return(null===(B=this.observers)||void 0===B?void 0:B.length)>0}_trySubscribe(B){return this._throwIfClosed(),super._trySubscribe(B)}_subscribe(B){return this._throwIfClosed(),this._checkFinalizedStatuses(B),this._innerSubscribe(B)}_innerSubscribe(B){const{hasError:X,isStopped:Le,observers:Ae}=this;return X||Le?J.Lc:(this.currentObservers=null,Ae.push(B),new J.w0(()=>{this.currentObservers=null,(0,ie.P)(Ae,B)}))}_checkFinalizedStatuses(B){const{hasError:X,thrownError:Le,isStopped:Ae}=this;X?B.error(Le):Ae&&B.complete()}asObservable(){const B=new f.y;return B.source=this,B}}return he.create=($,B)=>new oe($,B),he})();class oe extends se{constructor($,B){super(),this.destination=$,this.source=B}next($){var B,X;null===(X=null===(B=this.destination)||void 0===B?void 0:B.next)||void 0===X||X.call(B,$)}error($){var B,X;null===(X=null===(B=this.destination)||void 0===B?void 0:B.error)||void 0===X||X.call(B,$)}complete(){var $,B;null===(B=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===B||B.call($)}_subscribe($){var B,X;return null!==(X=null===(B=this.source)||void 0===B?void 0:B.subscribe($))&&void 0!==X?X:J.Lc}}},2961:(Je,we,O)=>{O.d(we,{Hp:()=>Ue,Lv:()=>X});var f=O(576),J=O(727),P=O(2416),ue=O(7849);function ie(){}const pe=he("C",void 0,void 0);function he(xe,me,be){return{kind:xe,value:me,error:be}}var $=O(3410),B=O(2806);class X extends J.w0{constructor(me){super(),this.isStopped=!1,me?(this.destination=me,(0,J.Nn)(me)&&me.add(this)):this.destination=Ye}static create(me,be,Ve){return new Ue(me,be,Ve)}next(me){this.isStopped?qe(function oe(xe){return he("N",xe,void 0)}(me),this):this._next(me)}error(me){this.isStopped?qe(function se(xe){return he("E",void 0,xe)}(me),this):(this.isStopped=!0,this._error(me))}complete(){this.isStopped?qe(pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(me){this.destination.next(me)}_error(me){try{this.destination.error(me)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Le=Function.prototype.bind;function Ae(xe,me){return Le.call(xe,me)}class Oe{constructor(me){this.partialObserver=me}next(me){const{partialObserver:be}=this;if(be.next)try{be.next(me)}catch(Ve){fe(Ve)}}error(me){const{partialObserver:be}=this;if(be.error)try{be.error(me)}catch(Ve){fe(Ve)}else fe(me)}complete(){const{partialObserver:me}=this;if(me.complete)try{me.complete()}catch(be){fe(be)}}}class Ue extends X{constructor(me,be,Ve){let Be;if(super(),(0,f.m)(me)||!me)Be={next:null!=me?me:void 0,error:null!=be?be:void 0,complete:null!=Ve?Ve:void 0};else{let G;this&&P.v.useDeprecatedNextContext?(G=Object.create(me),G.unsubscribe=()=>this.unsubscribe(),Be={next:me.next&&Ae(me.next,G),error:me.error&&Ae(me.error,G),complete:me.complete&&Ae(me.complete,G)}):Be=me}this.destination=new Oe(Be)}}function fe(xe){P.v.useDeprecatedSynchronousErrorHandling?(0,B.O)(xe):(0,ue.h)(xe)}function qe(xe,me){const{onStoppedNotification:be}=P.v;be&&$.z.setTimeout(()=>be(xe,me))}const Ye={closed:!0,next:ie,error:function Ie(xe){throw xe},complete:ie}},727:(Je,we,O)=>{O.d(we,{Lc:()=>pe,w0:()=>ie,Nn:()=>se});var f=O(576);const P=(0,O(3888).d)(he=>function(B){he(this),this.message=B?`${B.length} errors occurred during unsubscription:\n${B.map((X,Le)=>`${Le+1}) ${X.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=B});var ue=O(8737);class ie{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:B}=this;if(B)if(this._parentage=null,Array.isArray(B))for(const Ae of B)Ae.remove(this);else B.remove(this);const{initialTeardown:X}=this;if((0,f.m)(X))try{X()}catch(Ae){$=Ae instanceof P?Ae.errors:[Ae]}const{_finalizers:Le}=this;if(Le){this._finalizers=null;for(const Ae of Le)try{oe(Ae)}catch(Oe){$=null!=$?$:[],Oe instanceof P?$=[...$,...Oe.errors]:$.push(Oe)}}if($)throw new P($)}}add($){var B;if($&&$!==this)if(this.closed)oe($);else{if($ instanceof ie){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._finalizers=null!==(B=this._finalizers)&&void 0!==B?B:[]).push($)}}_hasParent($){const{_parentage:B}=this;return B===$||Array.isArray(B)&&B.includes($)}_addParent($){const{_parentage:B}=this;this._parentage=Array.isArray(B)?(B.push($),B):B?[B,$]:$}_removeParent($){const{_parentage:B}=this;B===$?this._parentage=null:Array.isArray(B)&&(0,ue.P)(B,$)}remove($){const{_finalizers:B}=this;B&&(0,ue.P)(B,$),$ instanceof ie&&$._removeParent(this)}}ie.EMPTY=(()=>{const he=new ie;return he.closed=!0,he})();const pe=ie.EMPTY;function se(he){return he instanceof ie||he&&"closed"in he&&(0,f.m)(he.remove)&&(0,f.m)(he.add)&&(0,f.m)(he.unsubscribe)}function oe(he){(0,f.m)(he)?he():he.unsubscribe()}},2416:(Je,we,O)=>{O.d(we,{v:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Je,we,O)=>{O.d(we,{E:()=>J});const J=new(O(8306).y)(ie=>ie.complete())},8996:(Je,we,O)=>{O.d(we,{D:()=>me});var f=O(8421),J=O(5363),P=O(9468),pe=O(8306),oe=O(2202),he=O(576),$=O(9672);function X(be,Ve){if(!be)throw new Error("Iterable cannot be null");return new pe.y(Be=>{(0,$.f)(Be,Ve,()=>{const G=be[Symbol.asyncIterator]();(0,$.f)(Be,Ve,()=>{G.next().then(_e=>{_e.done?Be.complete():Be.next(_e.value)})},0,!0)})})}var Le=O(3670),Ae=O(8239),Oe=O(1144),Ue=O(6495),fe=O(2206),Ie=O(4532),qe=O(3260);function me(be,Ve){return Ve?function xe(be,Ve){if(null!=be){if((0,Le.c)(be))return function ue(be,Ve){return(0,f.Xf)(be).pipe((0,P.R)(Ve),(0,J.Q)(Ve))}(be,Ve);if((0,Oe.z)(be))return function se(be,Ve){return new pe.y(Be=>{let G=0;return Ve.schedule(function(){G===be.length?Be.complete():(Be.next(be[G++]),Be.closed||this.schedule())})})}(be,Ve);if((0,Ae.t)(be))return function ie(be,Ve){return(0,f.Xf)(be).pipe((0,P.R)(Ve),(0,J.Q)(Ve))}(be,Ve);if((0,fe.D)(be))return X(be,Ve);if((0,Ue.T)(be))return function B(be,Ve){return new pe.y(Be=>{let G;return(0,$.f)(Be,Ve,()=>{G=be[oe.h](),(0,$.f)(Be,Ve,()=>{let _e,W;try{({value:_e,done:W}=G.next())}catch(ee){return void Be.error(ee)}W?Be.complete():Be.next(_e)},0,!0)}),()=>(0,he.m)(null==G?void 0:G.return)&&G.return()})}(be,Ve);if((0,qe.L)(be))return function Ye(be,Ve){return X((0,qe.Q)(be),Ve)}(be,Ve)}throw(0,Ie.z)(be)}(be,Ve):(0,f.Xf)(be)}},8421:(Je,we,O)=>{O.d(we,{Xf:()=>Le});var f=O(655),J=O(1144),P=O(8239),ue=O(8306),ie=O(3670),pe=O(2206),se=O(4532),oe=O(6495),he=O(3260),$=O(576),B=O(7849),X=O(8822);function Le(xe){if(xe instanceof ue.y)return xe;if(null!=xe){if((0,ie.c)(xe))return function Ae(xe){return new ue.y(me=>{const be=xe[X.L]();if((0,$.m)(be.subscribe))return be.subscribe(me);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(xe);if((0,J.z)(xe))return function Oe(xe){return new ue.y(me=>{for(let be=0;be<xe.length&&!me.closed;be++)me.next(xe[be]);me.complete()})}(xe);if((0,P.t)(xe))return function Ue(xe){return new ue.y(me=>{xe.then(be=>{me.closed||(me.next(be),me.complete())},be=>me.error(be)).then(null,B.h)})}(xe);if((0,pe.D)(xe))return Ie(xe);if((0,oe.T)(xe))return function fe(xe){return new ue.y(me=>{for(const be of xe)if(me.next(be),me.closed)return;me.complete()})}(xe);if((0,he.L)(xe))return function qe(xe){return Ie((0,he.Q)(xe))}(xe)}throw(0,se.z)(xe)}function Ie(xe){return new ue.y(me=>{(function Ye(xe,me){var be,Ve,Be,G;return(0,f.mG)(this,void 0,void 0,function*(){try{for(be=(0,f.KL)(xe);!(Ve=yield be.next()).done;)if(me.next(Ve.value),me.closed)return}catch(_e){Be={error:_e}}finally{try{Ve&&!Ve.done&&(G=be.return)&&(yield G.call(be))}finally{if(Be)throw Be.error}}me.complete()})})(xe,me).catch(be=>me.error(be))})}},6451:(Je,we,O)=>{O.d(we,{T:()=>pe});var f=O(8189),J=O(8421),P=O(515),ue=O(7669),ie=O(8996);function pe(...se){const oe=(0,ue.yG)(se),he=(0,ue._6)(se,1/0),$=se;return $.length?1===$.length?(0,J.Xf)($[0]):(0,f.J)(he)((0,ie.D)($,oe)):P.E}},5403:(Je,we,O)=>{O.d(we,{x:()=>J});var f=O(2961);function J(ue,ie,pe,se,oe){return new P(ue,ie,pe,se,oe)}class P extends f.Lv{constructor(ie,pe,se,oe,he,$){super(ie),this.onFinalize=he,this.shouldUnsubscribe=$,this._next=pe?function(B){try{pe(B)}catch(X){ie.error(X)}}:super._next,this._error=oe?function(B){try{oe(B)}catch(X){ie.error(X)}finally{this.unsubscribe()}}:super._error,this._complete=se?function(){try{se()}catch(B){ie.error(B)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ie;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:pe}=this;super.unsubscribe(),!pe&&(null===(ie=this.onFinalize)||void 0===ie||ie.call(this))}}}},4004:(Je,we,O)=>{O.d(we,{U:()=>P});var f=O(4482),J=O(5403);function P(ue,ie){return(0,f.e)((pe,se)=>{let oe=0;pe.subscribe((0,J.x)(se,he=>{se.next(ue.call(ie,he,oe++))}))})}},8189:(Je,we,O)=>{O.d(we,{J:()=>P});var f=O(5577),J=O(4671);function P(ue=1/0){return(0,f.z)(J.y,ue)}},5577:(Je,we,O)=>{O.d(we,{z:()=>oe});var f=O(4004),J=O(8421),P=O(4482),ue=O(9672),ie=O(5403),se=O(576);function oe(he,$,B=1/0){return(0,se.m)($)?oe((X,Le)=>(0,f.U)((Ae,Oe)=>$(X,Ae,Le,Oe))((0,J.Xf)(he(X,Le))),B):("number"==typeof $&&(B=$),(0,P.e)((X,Le)=>function pe(he,$,B,X,Le,Ae,Oe,Ue){const fe=[];let Ie=0,qe=0,Ye=!1;const xe=()=>{Ye&&!fe.length&&!Ie&&$.complete()},me=Ve=>Ie<X?be(Ve):fe.push(Ve),be=Ve=>{Ae&&$.next(Ve),Ie++;let Be=!1;(0,J.Xf)(B(Ve,qe++)).subscribe((0,ie.x)($,G=>{null==Le||Le(G),Ae?me(G):$.next(G)},()=>{Be=!0},void 0,()=>{if(Be)try{for(Ie--;fe.length&&Ie<X;){const G=fe.shift();Oe?(0,ue.f)($,Oe,()=>be(G)):be(G)}xe()}catch(G){$.error(G)}}))};return he.subscribe((0,ie.x)($,me,()=>{Ye=!0,xe()})),()=>{null==Ue||Ue()}}(X,Le,he,B)))}},5363:(Je,we,O)=>{O.d(we,{Q:()=>ue});var f=O(9672),J=O(4482),P=O(5403);function ue(ie,pe=0){return(0,J.e)((se,oe)=>{se.subscribe((0,P.x)(oe,he=>(0,f.f)(oe,ie,()=>oe.next(he),pe),()=>(0,f.f)(oe,ie,()=>oe.complete(),pe),he=>(0,f.f)(oe,ie,()=>oe.error(he),pe)))})}},3099:(Je,we,O)=>{O.d(we,{B:()=>ie});var f=O(8421),J=O(7579),P=O(2961),ue=O(4482);function ie(se={}){const{connector:oe=(()=>new J.x),resetOnError:he=!0,resetOnComplete:$=!0,resetOnRefCountZero:B=!0}=se;return X=>{let Le,Ae,Oe,Ue=0,fe=!1,Ie=!1;const qe=()=>{null==Ae||Ae.unsubscribe(),Ae=void 0},Ye=()=>{qe(),Le=Oe=void 0,fe=Ie=!1},xe=()=>{const me=Le;Ye(),null==me||me.unsubscribe()};return(0,ue.e)((me,be)=>{Ue++,!Ie&&!fe&&qe();const Ve=Oe=null!=Oe?Oe:oe();be.add(()=>{Ue--,0===Ue&&!Ie&&!fe&&(Ae=pe(xe,B))}),Ve.subscribe(be),!Le&&Ue>0&&(Le=new P.Hp({next:Be=>Ve.next(Be),error:Be=>{Ie=!0,qe(),Ae=pe(Ye,he,Be),Ve.error(Be)},complete:()=>{fe=!0,qe(),Ae=pe(Ye,$),Ve.complete()}}),(0,f.Xf)(me).subscribe(Le))})(X)}}function pe(se,oe,...he){if(!0===oe)return void se();if(!1===oe)return;const $=new P.Hp({next:()=>{$.unsubscribe(),se()}});return oe(...he).subscribe($)}},9468:(Je,we,O)=>{O.d(we,{R:()=>J});var f=O(4482);function J(P,ue=0){return(0,f.e)((ie,pe)=>{pe.add(P.schedule(()=>ie.subscribe(pe),ue))})}},8505:(Je,we,O)=>{O.d(we,{b:()=>ie});var f=O(576),J=O(4482),P=O(5403),ue=O(4671);function ie(pe,se,oe){const he=(0,f.m)(pe)||se||oe?{next:pe,error:se,complete:oe}:pe;return he?(0,J.e)(($,B)=>{var X;null===(X=he.subscribe)||void 0===X||X.call(he);let Le=!0;$.subscribe((0,P.x)(B,Ae=>{var Oe;null===(Oe=he.next)||void 0===Oe||Oe.call(he,Ae),B.next(Ae)},()=>{var Ae;Le=!1,null===(Ae=he.complete)||void 0===Ae||Ae.call(he),B.complete()},Ae=>{var Oe;Le=!1,null===(Oe=he.error)||void 0===Oe||Oe.call(he,Ae),B.error(Ae)},()=>{var Ae,Oe;Le&&(null===(Ae=he.unsubscribe)||void 0===Ae||Ae.call(he)),null===(Oe=he.finalize)||void 0===Oe||Oe.call(he)}))}):ue.y}},4408:(Je,we,O)=>{O.d(we,{o:()=>ie});var f=O(727);class J extends f.w0{constructor(se,oe){super()}schedule(se,oe=0){return this}}const P={setInterval(pe,se,...oe){const{delegate:he}=P;return(null==he?void 0:he.setInterval)?he.setInterval(pe,se,...oe):setInterval(pe,se,...oe)},clearInterval(pe){const{delegate:se}=P;return((null==se?void 0:se.clearInterval)||clearInterval)(pe)},delegate:void 0};var ue=O(8737);class ie extends J{constructor(se,oe){super(se,oe),this.scheduler=se,this.work=oe,this.pending=!1}schedule(se,oe=0){var he;if(this.closed)return this;this.state=se;const $=this.id,B=this.scheduler;return null!=$&&(this.id=this.recycleAsyncId(B,$,oe)),this.pending=!0,this.delay=oe,this.id=null!==(he=this.id)&&void 0!==he?he:this.requestAsyncId(B,this.id,oe),this}requestAsyncId(se,oe,he=0){return P.setInterval(se.flush.bind(se,this),he)}recycleAsyncId(se,oe,he=0){if(null!=he&&this.delay===he&&!1===this.pending)return oe;null!=oe&&P.clearInterval(oe)}execute(se,oe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const he=this._execute(se,oe);if(he)return he;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(se,oe){let $,he=!1;try{this.work(se)}catch(B){he=!0,$=B||new Error("Scheduled action threw falsy error")}if(he)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:se,scheduler:oe}=this,{actions:he}=oe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ue.P)(he,this),null!=se&&(this.id=this.recycleAsyncId(oe,se,null)),this.delay=null,super.unsubscribe()}}}},7565:(Je,we,O)=>{O.d(we,{v:()=>P});var f=O(6063);class J{constructor(ie,pe=J.now){this.schedulerActionCtor=ie,this.now=pe}schedule(ie,pe=0,se){return new this.schedulerActionCtor(this,ie).schedule(se,pe)}}J.now=f.l.now;class P extends J{constructor(ie,pe=J.now){super(ie,pe),this.actions=[],this._active=!1}flush(ie){const{actions:pe}=this;if(this._active)return void pe.push(ie);let se;this._active=!0;do{if(se=ie.execute(ie.state,ie.delay))break}while(ie=pe.shift());if(this._active=!1,se){for(;ie=pe.shift();)ie.unsubscribe();throw se}}}},4986:(Je,we,O)=>{O.d(we,{z:()=>P});var f=O(4408);const P=new(O(7565).v)(f.o)},6063:(Je,we,O)=>{O.d(we,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},3410:(Je,we,O)=>{O.d(we,{z:()=>f});const f={setTimeout(J,P,...ue){const{delegate:ie}=f;return(null==ie?void 0:ie.setTimeout)?ie.setTimeout(J,P,...ue):setTimeout(J,P,...ue)},clearTimeout(J){const{delegate:P}=f;return((null==P?void 0:P.clearTimeout)||clearTimeout)(J)},delegate:void 0}},2202:(Je,we,O)=>{O.d(we,{h:()=>J});const J=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Je,we,O)=>{O.d(we,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(Je,we,O)=>{O.d(we,{_6:()=>pe,jO:()=>ue,yG:()=>ie});var f=O(576);function P(se){return se[se.length-1]}function ue(se){return(0,f.m)(P(se))?se.pop():void 0}function ie(se){return function J(se){return se&&(0,f.m)(se.schedule)}(P(se))?se.pop():void 0}function pe(se,oe){return"number"==typeof P(se)?se.pop():oe}},8737:(Je,we,O)=>{function f(J,P){if(J){const ue=J.indexOf(P);0<=ue&&J.splice(ue,1)}}O.d(we,{P:()=>f})},3888:(Je,we,O)=>{function f(J){const ue=J(ie=>{Error.call(ie),ie.stack=(new Error).stack});return ue.prototype=Object.create(Error.prototype),ue.prototype.constructor=ue,ue}O.d(we,{d:()=>f})},2806:(Je,we,O)=>{O.d(we,{O:()=>ue,x:()=>P});var f=O(2416);let J=null;function P(ie){if(f.v.useDeprecatedSynchronousErrorHandling){const pe=!J;if(pe&&(J={errorThrown:!1,error:null}),ie(),pe){const{errorThrown:se,error:oe}=J;if(J=null,se)throw oe}}else ie()}function ue(ie){f.v.useDeprecatedSynchronousErrorHandling&&J&&(J.errorThrown=!0,J.error=ie)}},9672:(Je,we,O)=>{function f(J,P,ue,ie=0,pe=!1){const se=P.schedule(function(){ue(),pe?J.add(this.schedule(null,ie)):this.unsubscribe()},ie);if(J.add(se),!pe)return se}O.d(we,{f:()=>f})},4671:(Je,we,O)=>{function f(J){return J}O.d(we,{y:()=>f})},1144:(Je,we,O)=>{O.d(we,{z:()=>f});const f=J=>J&&"number"==typeof J.length&&"function"!=typeof J},2206:(Je,we,O)=>{O.d(we,{D:()=>J});var f=O(576);function J(P){return Symbol.asyncIterator&&(0,f.m)(null==P?void 0:P[Symbol.asyncIterator])}},576:(Je,we,O)=>{function f(J){return"function"==typeof J}O.d(we,{m:()=>f})},3670:(Je,we,O)=>{O.d(we,{c:()=>P});var f=O(8822),J=O(576);function P(ue){return(0,J.m)(ue[f.L])}},6495:(Je,we,O)=>{O.d(we,{T:()=>P});var f=O(2202),J=O(576);function P(ue){return(0,J.m)(null==ue?void 0:ue[f.h])}},8239:(Je,we,O)=>{O.d(we,{t:()=>J});var f=O(576);function J(P){return(0,f.m)(null==P?void 0:P.then)}},3260:(Je,we,O)=>{O.d(we,{L:()=>ue,Q:()=>P});var f=O(655),J=O(576);function P(ie){return(0,f.FC)(this,arguments,function*(){const se=ie.getReader();try{for(;;){const{value:oe,done:he}=yield(0,f.qq)(se.read());if(he)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(oe)}}finally{se.releaseLock()}})}function ue(ie){return(0,J.m)(null==ie?void 0:ie.getReader)}},4482:(Je,we,O)=>{O.d(we,{A:()=>J,e:()=>P});var f=O(576);function J(ue){return(0,f.m)(null==ue?void 0:ue.lift)}function P(ue){return ie=>{if(J(ie))return ie.lift(function(pe){try{return ue(pe,this)}catch(se){this.error(se)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(Je,we,O)=>{O.d(we,{h:()=>P});var f=O(2416),J=O(3410);function P(ue){J.z.setTimeout(()=>{const{onUnhandledError:ie}=f.v;if(!ie)throw ue;ie(ue)})}},4532:(Je,we,O)=>{function f(J){return new TypeError(`You provided ${null!==J&&"object"==typeof J?"an invalid object":`'${J}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(we,{z:()=>f})},655:(Je,we,O)=>{function ue(W,ee){var Q={};for(var ge in W)Object.prototype.hasOwnProperty.call(W,ge)&&ee.indexOf(ge)<0&&(Q[ge]=W[ge]);if(null!=W&&"function"==typeof Object.getOwnPropertySymbols){var ae=0;for(ge=Object.getOwnPropertySymbols(W);ae<ge.length;ae++)ee.indexOf(ge[ae])<0&&Object.prototype.propertyIsEnumerable.call(W,ge[ae])&&(Q[ge[ae]]=W[ge[ae]])}return Q}function oe(W,ee,Q,ge){return new(Q||(Q=Promise))(function(Pe,ut){function Qt(sn){try{Ke(ge.next(sn))}catch(mn){ut(mn)}}function Bt(sn){try{Ke(ge.throw(sn))}catch(mn){ut(mn)}}function Ke(sn){sn.done?Pe(sn.value):function ae(Pe){return Pe instanceof Q?Pe:new Q(function(ut){ut(Pe)})}(sn.value).then(Qt,Bt)}Ke((ge=ge.apply(W,ee||[])).next())})}function fe(W){return this instanceof fe?(this.v=W,this):new fe(W)}function Ie(W,ee,Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ae,ge=Q.apply(W,ee||[]),Pe=[];return ae={},ut("next"),ut("throw"),ut("return"),ae[Symbol.asyncIterator]=function(){return this},ae;function ut(un){ge[un]&&(ae[un]=function(Xt){return new Promise(function(xr,Kt){Pe.push([un,Xt,xr,Kt])>1||Qt(un,Xt)})})}function Qt(un,Xt){try{!function Bt(un){un.value instanceof fe?Promise.resolve(un.value.v).then(Ke,sn):mn(Pe[0][2],un)}(ge[un](Xt))}catch(xr){mn(Pe[0][3],xr)}}function Ke(un){Qt("next",un)}function sn(un){Qt("throw",un)}function mn(un,Xt){un(Xt),Pe.shift(),Pe.length&&Qt(Pe[0][0],Pe[0][1])}}function Ye(W){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Q,ee=W[Symbol.asyncIterator];return ee?ee.call(W):(W=function X(W){var ee="function"==typeof Symbol&&Symbol.iterator,Q=ee&&W[ee],ge=0;if(Q)return Q.call(W);if(W&&"number"==typeof W.length)return{next:function(){return W&&ge>=W.length&&(W=void 0),{value:W&&W[ge++],done:!W}}};throw new TypeError(ee?"Object is not iterable.":"Symbol.iterator is not defined.")}(W),Q={},ge("next"),ge("throw"),ge("return"),Q[Symbol.asyncIterator]=function(){return this},Q);function ge(Pe){Q[Pe]=W[Pe]&&function(ut){return new Promise(function(Qt,Bt){!function ae(Pe,ut,Qt,Bt){Promise.resolve(Bt).then(function(Ke){Pe({value:Ke,done:Qt})},ut)}(Qt,Bt,(ut=W[Pe](ut)).done,ut.value)})}}}O.d(we,{FC:()=>Ie,KL:()=>Ye,_T:()=>ue,mG:()=>oe,qq:()=>fe})},5e3:(Je,we,O)=>{O.d(we,{$8M:()=>Xi,$Z:()=>lv,AFp:()=>GI,ALo:()=>xc,AaK:()=>oe,BQk:()=>Jf,CHM:()=>go,CRH:()=>Ut,CZH:()=>v0,CqO:()=>ep,EJc:()=>D0,EiD:()=>Vg,EpF:()=>Fm,F4k:()=>Lm,FYo:()=>hI,FiY:()=>rt,G48:()=>Ph,GfV:()=>bp,Gpc:()=>B,JOm:()=>h,JVY:()=>Ng,L6k:()=>of,LAX:()=>tc,LFG:()=>x,LSH:()=>Ro,Lbi:()=>PC,NdJ:()=>Ec,OlP:()=>An,Oqu:()=>Zm,PXZ:()=>nb,Q6J:()=>vc,QGY:()=>Xf,Qsj:()=>fI,R0b:()=>Fi,RDi:()=>Fl,Rgc:()=>Il,SBq:()=>lr,Sil:()=>LC,Suo:()=>MI,TTD:()=>zi,TgZ:()=>Yf,Tol:()=>yv,Udp:()=>$m,VKq:()=>Tp,VLi:()=>VC,X6Q:()=>bl,XFs:()=>Et,Xpm:()=>wt,Y36:()=>sl,YKP:()=>Jv,YNc:()=>xm,Yjl:()=>dn,Yz7:()=>Xt,ZZ4:()=>Vh,_Bn:()=>mh,_UZ:()=>nh,_Vd:()=>ay,_c5:()=>KC,_uU:()=>qn,aQg:()=>Sy,c2e:()=>FC,cJS:()=>Kt,cg1:()=>Fv,d8E:()=>ey,dDg:()=>Gp,deG:()=>Ed,dqk:()=>Wt,eBb:()=>Wy,eFA:()=>rb,ekj:()=>ll,g9A:()=>w0,gxx:()=>Vf,h0i:()=>vh,hGG:()=>mb,hij:()=>Ym,iGM:()=>Th,ifc:()=>Zt,ip1:()=>$I,kL8:()=>Zw,kYT:()=>ne,lG2:()=>Rt,lcZ:()=>s0,mCW:()=>Xa,n5z:()=>Hn,oAB:()=>ve,oJD:()=>hf,oxw:()=>hv,pB0:()=>Ky,q3G:()=>Sn,q4F:()=>Dp,qLn:()=>Is,qOj:()=>z_,qZA:()=>ol,qzn:()=>Js,sBO:()=>Fh,sIi:()=>qf,s_b:()=>Np,soG:()=>vr,tBr:()=>xt,tb:()=>I0,tp0:()=>Gn,uIk:()=>zf,vHH:()=>Oe,vpe:()=>Da,wAp:()=>bt,xp6:()=>y_,yhl:()=>Bu,ynx:()=>Qf,z2F:()=>wy,z3N:()=>fi,zSh:()=>wm,zs3:()=>ru});var f=O(7579),J=O(727),P=O(8306),ue=O(6451),ie=O(3099);function pe(s){for(let o in s)if(s[o]===pe)return o;throw Error("Could not find renamed property on target object.")}function se(s,o){for(const a in o)o.hasOwnProperty(a)&&!s.hasOwnProperty(a)&&(s[a]=o[a])}function oe(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(oe).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function he(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const $=pe({__forward_ref__:pe});function B(s){return s.__forward_ref__=B,s.toString=function(){return oe(this())},s}function X(s){return Le(s)?s():s}function Le(s){return"function"==typeof s&&s.hasOwnProperty($)&&s.__forward_ref__===B}class Oe extends Error{constructor(o,a){super(function Ue(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,a)),this.code=o}}function fe(s){return"string"==typeof s?s:null==s?"":String(s)}function Ie(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():fe(s)}function me(s,o){const a=o?` in ${o}`:"";throw new Oe(-201,`No provider for ${Ie(s)} found${a}`)}function Bt(s,o){null==s&&function Ke(s,o,a,l){throw new Error(`ASSERTION ERROR: ${s}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,s,null,"!=")}function Xt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Kt(s){return{providers:s.providers||[],imports:s.imports||[]}}function zt(s){return Qr(s,us)||Qr(s,oi)}function Qr(s,o){return s.hasOwnProperty(o)?s[o]:null}function Jr(s){return s&&(s.hasOwnProperty(ls)||s.hasOwnProperty(bi))?s[ls]:null}const us=pe({\u0275prov:pe}),ls=pe({\u0275inj:pe}),oi=pe({ngInjectableDef:pe}),bi=pe({ngInjectorDef:pe});var Et=(()=>((Et=Et||{})[Et.Default=0]="Default",Et[Et.Host=1]="Host",Et[Et.Self=2]="Self",Et[Et.SkipSelf=4]="SkipSelf",Et[Et.Optional=8]="Optional",Et))();let Rr;function nr(s){const o=Rr;return Rr=s,o}function Rs(s,o,a){const l=zt(s);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&Et.Optional?null:void 0!==o?o:void me(oe(s),"Injector")}function Yn(s){return{toString:s}.toString()}var Un=(()=>((Un=Un||{})[Un.OnPush=0]="OnPush",Un[Un.Default=1]="Default",Un))(),Zt=(()=>{return(s=Zt||(Zt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Zt;var s})();const it="undefined"!=typeof globalThis&&globalThis,_t="undefined"!=typeof window&&window,Or="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Wt=it||"undefined"!=typeof global&&global||_t||Or,Fr={},pt=[],uo=pe({\u0275cmp:pe}),jt=pe({\u0275dir:pe}),cs=pe({\u0275pipe:pe}),Qe=pe({\u0275mod:pe}),De=pe({\u0275fac:pe}),ze=pe({__NG_ELEMENT_ID__:pe});let At=0;function wt(s){return Yn(()=>{const a={},l={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Un.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||pt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||Zt.Emulated,id:"c",styles:s.styles||pt,_:null,setInput:null,schemas:s.schemas||null,tView:null},d=s.directives,m=s.features,v=s.pipes;return l.id+=At++,l.inputs=Xe(s.inputs,a),l.outputs=Xe(s.outputs),m&&m.forEach(w=>w(l)),l.directiveDefs=d?()=>("function"==typeof d?d():d).map(j):null,l.pipeDefs=v?()=>("function"==typeof v?v():v).map(V):null,l})}function j(s){return en(s)||function ln(s){return s[jt]||null}(s)}function V(s){return function Qn(s){return s[cs]||null}(s)}const K={};function ve(s){return Yn(()=>{const o={type:s.type,bootstrap:s.bootstrap||pt,declarations:s.declarations||pt,imports:s.imports||pt,exports:s.exports||pt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(K[s.id]=s.type),o})}function ne(s,o){return Yn(()=>{const a=Dt(s,!0);a.declarations=o.declarations||pt,a.imports=o.imports||pt,a.exports=o.exports||pt})}function Xe(s,o){if(null==s)return Fr;const a={};for(const l in s)if(s.hasOwnProperty(l)){let d=s[l],m=d;Array.isArray(d)&&(m=d[1],d=d[0]),a[d]=l,o&&(o[d]=m)}return a}const Rt=wt;function dn(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function en(s){return s[uo]||null}function Dt(s,o){const a=s[Qe]||null;if(!a&&!0===o)throw new Error(`Type ${oe(s)} does not have '\u0275mod' property.`);return a}function ei(s){return Array.isArray(s)&&"object"==typeof s[1]}function $i(s){return Array.isArray(s)&&!0===s[1]}function gu(s){return 0!=(8&s.flags)}function Qc(s){return 2==(2&s.flags)}function Gi(s){return 1==(1&s.flags)}function qi(s){return null!==s.template}function Rl(s){return 0!=(512&s[2])}function wr(s,o){return s.hasOwnProperty(De)?s[De]:null}class Us{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function zi(){return Ko}function Ko(s){return s.type.prototype.ngOnChanges&&(s.setInput=Zh),sd}function sd(){const s=ho(this),o=null==s?void 0:s.current;if(o){const a=s.previous;if(a===Fr)s.previous=o;else for(let l in o)a[l]=o[l];s.current=null,this.ngOnChanges(o)}}function Zh(s,o,a,l){const d=ho(s)||function Zo(s,o){return s[Pa]=o}(s,{previous:Fr,current:null}),m=d.current||(d.current={}),v=d.previous,w=this.declaredInputs[a],D=v[w];m[w]=new Us(D&&D.currentValue,o,v===Fr),s[l]=o}zi.ngInherit=!0;const Pa="__ngSimpleChanges__";function ho(s){return s[Pa]||null}let Qo;function Fl(s){Qo=s}function Wi(){return void 0!==Qo?Qo:"undefined"!=typeof document?document:void 0}function gn(s){return!!s.listen}const ka={createRenderer:(s,o)=>Wi()};function on(s){for(;Array.isArray(s);)s=s[0];return s}function Bs(s,o){return on(o[s])}function fr(s,o){return on(o[s.index])}function Dn(s,o){return s.data[o]}function pr(s,o){const a=o[s];return ei(a)?a:a[0]}function po(s){return 4==(4&s[2])}function fs(s){return 128==(128&s[2])}function Ci(s,o){return null==o?null:s[o]}function Zi(s){s[18]=0}function Jo(s,o){s[5]+=o;let a=s,l=s[3];for(;null!==l&&(1===o&&1===a[5]||-1===o&&0===a[5]);)l[5]+=o,a=l,l=l[3]}const vt={lFrame:ta(null),bindingsEnabled:!0};function vu(){return vt.bindingsEnabled}function Se(){return vt.lFrame.lView}function Gt(){return vt.lFrame.tView}function go(s){return vt.lFrame.contextLView=s,s[8]}function wn(){let s=Eu();for(;null!==s&&64===s.type;)s=s.parent;return s}function Eu(){return vt.lFrame.currentTNode}function li(s,o){const a=vt.lFrame;a.currentTNode=s,a.isParent=o}function jl(){return vt.lFrame.isParent}function Hl(){vt.lFrame.isParent=!1}function Ir(){const s=vt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}function Hs(){return vt.lFrame.bindingIndex++}function Ti(s){const o=vt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,a}function bu(s,o){const a=vt.lFrame;a.bindingIndex=a.bindingRootIndex=s,ea(o)}function ea(s){vt.lFrame.currentDirectiveIndex=s}function Du(s){const o=vt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}function Cu(){return vt.lFrame.currentQueryIndex}function ld(s){vt.lFrame.currentQueryIndex=s}function cd(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Tu(s,o,a){if(a&Et.SkipSelf){let d=o,m=s;for(;!(d=d.parent,null!==d||a&Et.Host||(d=cd(m),null===d||(m=m[15],10&d.type))););if(null===d)return!1;o=d,s=m}const l=vt.lFrame=dd();return l.currentTNode=o,l.lView=s,!0}function yo(s){const o=dd(),a=s[1];vt.lFrame=o,o.currentTNode=a.firstChild,o.lView=s,o.tView=a,o.contextLView=s,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function dd(){const s=vt.lFrame,o=null===s?null:s.child;return null===o?ta(s):o}function ta(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function hd(){const s=vt.lFrame;return vt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Au=hd;function ti(){const s=hd();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function ir(){return vt.lFrame.selectedIndex}function _o(s){vt.lFrame.selectedIndex=s}function On(){const s=vt.lFrame;return Dn(s.tView,s.selectedIndex)}function Ua(s,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const m=s.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:w,ngAfterViewInit:D,ngAfterViewChecked:S,ngOnDestroy:N}=m;v&&(s.contentHooks||(s.contentHooks=[])).push(-a,v),w&&((s.contentHooks||(s.contentHooks=[])).push(a,w),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(a,w)),D&&(s.viewHooks||(s.viewHooks=[])).push(-a,D),S&&((s.viewHooks||(s.viewHooks=[])).push(a,S),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(a,S)),null!=N&&(s.destroyHooks||(s.destroyHooks=[])).push(a,N)}}function gs(s,o,a){gd(s,o,3,a)}function vo(s,o,a,l){(3&s[2])===a&&gd(s,o,a,l)}function Jn(s,o){let a=s[2];(3&a)===o&&(a&=2047,a+=1,s[2]=a)}function gd(s,o,a,l){const m=null!=l?l:-1,v=o.length-1;let w=0;for(let D=void 0!==l?65535&s[18]:0;D<v;D++)if("number"==typeof o[D+1]){if(w=o[D],null!=l&&w>=l)break}else o[D]<0&&(s[18]+=65536),(w<m||-1==m)&&(bg(s,a,o,D),s[18]=(4294901760&s[18])+D+2),D++}function bg(s,o,a,l){const d=a[l]<0,m=a[l+1],w=s[d?-a[l]:a[l]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{m.call(w)}finally{}}}else try{m.call(w)}finally{}}class na{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function Mn(s,o,a){const l=gn(s);let d=0;for(;d<a.length;){const m=a[d];if("number"==typeof m){if(0!==m)break;d++;const v=a[d++],w=a[d++],D=a[d++];l?s.setAttribute(o,w,D,v):o.setAttributeNS(v,w,D)}else{const v=m,w=a[++d];Xn(v)?l&&s.setProperty(o,v,w):l?s.setAttribute(o,v,w):o.setAttribute(v,w),d++}}return d}function Ai(s){return 3===s||4===s||6===s}function Xn(s){return 64===s.charCodeAt(0)}function Ha(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?a=d:0===a||md(s,a,d,null,-1===a||2===a?o[++l]:null)}}return s}function md(s,o,a,l,d){let m=0,v=s.length;if(-1===o)v=-1;else for(;m<s.length;){const w=s[m++];if("number"==typeof w){if(w===o){v=-1;break}if(w>o){v=m-1;break}}}for(;m<s.length;){const w=s[m];if("number"==typeof w)break;if(w===a){if(null===l)return void(null!==d&&(s[m+1]=d));if(l===s[m+1])return void(s[m+2]=d)}m++,null!==l&&m++,null!==d&&m++}-1!==v&&(s.splice(v,0,o),m=v+1),s.splice(m++,0,a),null!==l&&s.splice(m++,0,l),null!==d&&s.splice(m++,0,d)}function ra(s){return-1!==s}function $s(s){return 32767&s}function Gs(s,o){let a=function Pn(s){return s>>16}(s),l=o;for(;a>0;)l=l[15],a--;return l}let Qi=!0;function Ot(s){const o=Qi;return Qi=s,o}let $a=0;function Ji(s,o){const a=ms(s,o);if(-1!==a)return a;const l=o[1];l.firstCreatePass&&(s.injectorIndex=o.length,Mu(l.data,s),Mu(o,null),Mu(l.blueprint,null));const d=qs(s,o),m=s.injectorIndex;if(ra(d)){const v=$s(d),w=Gs(d,o),D=w[1].data;for(let S=0;S<8;S++)o[m+S]=w[v+S]|D[v+S]}return o[m+8]=d,m}function Mu(s,o){s.push(0,0,0,0,0,0,0,0,o)}function ms(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function qs(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let a=0,l=null,d=o;for(;null!==d;){const m=d[1],v=m.type;if(l=2===v?m.declTNode:1===v?d[6]:null,null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function zs(s,o,a){!function br(s,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(ze)&&(l=a[ze]),null==l&&(l=a[ze]=$a++);const d=255&l;o.data[s+(d>>5)]|=1<<d}(s,o,a)}function Ga(s,o,a){if(a&Et.Optional)return s;me(o,"NodeInjector")}function wo(s,o,a,l){if(a&Et.Optional&&void 0===l&&(l=null),0==(a&(Et.Self|Et.Host))){const d=s[9],m=nr(void 0);try{return d?d.get(o,l,a&Et.Optional):Rs(o,l,a&Et.Optional)}finally{nr(m)}}return Ga(l,o,a)}function Io(s,o,a,l=Et.Default,d){if(null!==s){const m=function bo(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(ze)?s[ze]:void 0;return"number"==typeof o?o>=0?255&o:qa:o}(a);if("function"==typeof m){if(!Tu(o,s,l))return l&Et.Host?Ga(d,a,l):wo(o,a,l,d);try{const v=m(l);if(null!=v||l&Et.Optional)return v;me(a)}finally{Au()}}else if("number"==typeof m){let v=null,w=ms(s,o),D=-1,S=l&Et.Host?o[16][6]:null;for((-1===w||l&Et.SkipSelf)&&(D=-1===w?qs(s,o):o[w+8],-1!==D&&Zl(l,!1)?(v=o[1],w=$s(D),o=Gs(D,o)):w=-1);-1!==w;){const N=o[1];if(sr(m,w,N.data)){const k=za(w,o,a,v,l,S);if(k!==sa)return k}D=o[w+8],-1!==D&&Zl(l,o[1].data[w+8]===S)&&sr(m,w,o)?(v=N,w=$s(D),o=Gs(D,o)):w=-1}}}return wo(o,a,l,d)}const sa={};function qa(){return new Br(wn(),Se())}function za(s,o,a,l,d,m){const v=o[1],w=v.data[s+8],N=Wa(w,v,a,null==l?Qc(w)&&Qi:l!=v&&0!=(3&w.type),d&Et.Host&&m===w);return null!==N?di(o,v,N,w):sa}function Wa(s,o,a,l,d){const m=s.providerIndexes,v=o.data,w=1048575&m,D=s.directiveStart,N=m>>20,H=d?w+N:s.directiveEnd;for(let Y=l?w:w+N;Y<H;Y++){const ye=v[Y];if(Y<D&&a===ye||Y>=D&&ye.type===a)return Y}if(d){const Y=v[D];if(Y&&qi(Y)&&Y.type===a)return D}return null}function di(s,o,a,l){let d=s[a];const m=o.data;if(function Su(s){return s instanceof na}(d)){const v=d;v.resolving&&function qe(s,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Oe(-200,`Circular dependency in DI detected for ${s}${a}`)}(Ie(m[a]));const w=Ot(v.canSeeViewProviders);v.resolving=!0;const D=v.injectImpl?nr(v.injectImpl):null;Tu(s,l,Et.Default);try{d=s[a]=v.factory(void 0,m,s,l),o.firstCreatePass&&a>=l.directiveStart&&function $y(s,o,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:m}=o.type.prototype;if(l){const v=Ko(o);(a.preOrderHooks||(a.preOrderHooks=[])).push(s,v),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,v)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-s,d),m&&((a.preOrderHooks||(a.preOrderHooks=[])).push(s,m),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(s,m))}(a,m[a],o)}finally{null!==D&&nr(D),Ot(w),v.resolving=!1,Au()}}return d}function sr(s,o,a){return!!(a[o+(s>>5)]&1<<s)}function Zl(s,o){return!(s&Et.Self||s&Et.Host&&o)}class Br{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return Io(this._tNode,this._lView,o,l,a)}}function Hn(s){return Yn(()=>{const o=s.prototype.constructor,a=o[De]||oa(o),l=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==l;){const m=d[De]||oa(d);if(m&&m!==a)return m;d=Object.getPrototypeOf(d)}return m=>new m})}function oa(s){return Le(s)?()=>{const o=oa(X(s));return o&&o()}:wr(s)}function Xi(s){return function ia(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const a=s.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const m=a[d];if(Ai(m))break;if(0===m)d+=2;else if("number"==typeof m)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(m===o)return a[d+1];d+=2}}}return null}(wn(),s)}const Si="__parameters__";function es(s,o,a){return Yn(()=>{const l=function or(s){return function(...a){if(s){const l=s(...a);for(const d in l)this[d]=l[d]}}}(o);function d(...m){if(this instanceof d)return l.apply(this,m),this;const v=new d(...m);return w.annotation=v,w;function w(D,S,N){const k=D.hasOwnProperty(Si)?D[Si]:Object.defineProperty(D,Si,{value:[]})[Si];for(;k.length<=N;)k.push(null);return(k[N]=k[N]||[]).push(v),D}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class An{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Xt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Ed=new An("AnalyzeForEntryComponents");function Hr(s,o){void 0===o&&(o=s);for(let a=0;a<s.length;a++){let l=s[a];Array.isArray(l)?(o===s&&(o=s.slice(0,a)),Hr(l,o)):o!==s&&o.push(l)}return o}function $r(s,o){s.forEach(a=>Array.isArray(a)?$r(a,o):o(a))}function Ya(s,o,a){o>=s.length?s.push(a):s.splice(o,0,a)}function Ql(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function er(s,o,a){let l=Zs(s,o);return l>=0?s[1|l]=a:(l=~l,function xu(s,o,a,l){let d=s.length;if(d==o)s.push(a,l);else if(1===d)s.push(l,s[0]),s[0]=a;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=a,s[o+1]=l}}(s,l,o,a)),l}function Ks(s,o){const a=Zs(s,o);if(a>=0)return s[1|a]}function Zs(s,o){return function la(s,o,a){let l=0,d=s.length>>a;for(;d!==l;){const m=l+(d-l>>1),v=s[m<<a];if(o===v)return m<<a;v>o?d=m:l=m+1}return~(d<<a)}(s,o,1)}const Gr={},ca="__NG_DI_FLAG__",hi="ngTempTokenPath",Ad=/\n/gm,Pu="__source",ku=pe({provide:String,useValue:pe});let ts;function b(s){const o=ts;return ts=s,o}function C(s,o=Et.Default){if(void 0===ts)throw new Oe(203,"");return null===ts?Rs(s,void 0,o):ts.get(s,o&Et.Optional?null:void 0,o)}function x(s,o=Et.Default){return(function bn(){return Rr}()||C)(X(s),o)}const Z=x;function te(s){const o=[];for(let a=0;a<s.length;a++){const l=X(s[a]);if(Array.isArray(l)){if(0===l.length)throw new Oe(900,"");let d,m=Et.Default;for(let v=0;v<l.length;v++){const w=l[v],D=je(w);"number"==typeof D?-1===D?d=w.token:m|=D:d=w}o.push(x(d,m))}else o.push(x(l))}return o}function Ce(s,o){return s[ca]=o,s.prototype[ca]=o,s}function je(s){return s[ca]}const xt=Ce(es("Inject",s=>({token:s})),-1),rt=Ce(es("Optional"),8),Gn=Ce(es("SkipSelf"),4);let Xl,Mo;function Uu(s){var o;return(null===(o=function Sd(){if(void 0===Xl&&(Xl=null,Wt.trustedTypes))try{Xl=Wt.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch(s){}return Xl}())||void 0===o?void 0:o.createHTML(s))||s}function xd(s){var o;return(null===(o=function Md(){if(void 0===Mo&&(Mo=null,Wt.trustedTypes))try{Mo=Wt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch(s){}return Mo}())||void 0===o?void 0:o.createHTML(s))||s}class xo{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class xg extends xo{getTypeName(){return"HTML"}}class ec extends xo{getTypeName(){return"Style"}}class Gy extends xo{getTypeName(){return"Script"}}class qy extends xo{getTypeName(){return"URL"}}class zy extends xo{getTypeName(){return"ResourceURL"}}function fi(s){return s instanceof xo?s.changingThisBreaksApplicationSecurity:s}function Js(s,o){const a=Bu(s);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===o}function Bu(s){return s instanceof xo&&s.getTypeName()||null}function Ng(s){return new xg(s)}function of(s){return new ec(s)}function Wy(s){return new Gy(s)}function tc(s){return new qy(s)}function Ky(s){return new zy(s)}class Rg{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const a=(new window.DOMParser).parseFromString(Uu(o),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(o):(a.removeChild(a.firstChild),a)}catch(a){return null}}}class Og{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const a=this.inertDocument.createElement("html");this.inertDocument.appendChild(a);const l=this.inertDocument.createElement("body");a.appendChild(l)}}getInertBodyElement(o){const a=this.inertDocument.createElement("template");if("content"in a)return a.innerHTML=Uu(o),a;const l=this.inertDocument.createElement("body");return l.innerHTML=Uu(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(l),l}stripCustomNsAttrs(o){const a=o.attributes;for(let d=a.length-1;0<d;d--){const v=a.item(d).name;("xmlns:ns1"===v||0===v.indexOf("ns1:"))&&o.removeAttribute(v)}let l=o.firstChild;for(;l;)l.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(l),l=l.nextSibling}}const Zy=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Yy=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Xa(s){return(s=String(s)).match(Zy)||s.match(Yy)?s:"unsafe:"+s}function No(s){const o={};for(const a of s.split(","))o[a]=!0;return o}function Es(...s){const o={};for(const a of s)for(const l in a)a.hasOwnProperty(l)&&(o[l]=!0);return o}const kg=No("area,br,col,hr,img,wbr"),Od=No("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ws=No("rp,rt"),lf=Es(kg,Es(Od,No("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Es(ws,No("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Es(ws,Od)),nc=No("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),cf=No("srcset"),Fg=Es(nc,cf,No("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),No("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),rc=No("script,style,template");class df{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let a=o.firstChild,l=!0;for(;a;)if(a.nodeType===Node.ELEMENT_NODE?l=this.startElement(a):a.nodeType===Node.TEXT_NODE?this.chars(a.nodeValue):this.sanitizedSomething=!0,l&&a.firstChild)a=a.firstChild;else for(;a;){a.nodeType===Node.ELEMENT_NODE&&this.endElement(a);let d=this.checkClobberedElement(a,a.nextSibling);if(d){a=d;break}a=this.checkClobberedElement(a,a.parentNode)}return this.buf.join("")}startElement(o){const a=o.nodeName.toLowerCase();if(!lf.hasOwnProperty(a))return this.sanitizedSomething=!0,!rc.hasOwnProperty(a);this.buf.push("<"),this.buf.push(a);const l=o.attributes;for(let d=0;d<l.length;d++){const m=l.item(d),v=m.name,w=v.toLowerCase();if(!Fg.hasOwnProperty(w)){this.sanitizedSomething=!0;continue}let D=m.value;nc[w]&&(D=Xa(D)),cf[w]&&(s=D,D=(s=String(s)).split(",").map(o=>Xa(o.trim())).join(", ")),this.buf.push(" ",v,'="',kd(D),'"')}var s;return this.buf.push(">"),!0}endElement(o){const a=o.nodeName.toLowerCase();lf.hasOwnProperty(a)&&!kg.hasOwnProperty(a)&&(this.buf.push("</"),this.buf.push(a),this.buf.push(">"))}chars(o){this.buf.push(kd(o))}checkClobberedElement(o,a){if(a&&(o.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return a}}const Qy=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Lg=/([^\#-~ |!])/g;function kd(s){return s.replace(/&/g,"&amp;").replace(Qy,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(Lg,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Hu;function Vg(s,o){let a=null;try{Hu=Hu||function af(s){const o=new Og(s);return function Rd(){try{return!!(new window.DOMParser).parseFromString(Uu(""),"text/html")}catch(s){return!1}}()?new Rg(o):o}(s);let l=o?String(o):"";a=Hu.getInertBodyElement(l);let d=5,m=l;do{if(0===d)throw new Error("Failed to sanitize html because the input is unstable");d--,l=m,m=a.innerHTML,a=Hu.getInertBodyElement(l)}while(l!==m);return Uu((new df).sanitizeChildren(ic(a)||a))}finally{if(a){const l=ic(a)||a;for(;l.firstChild;)l.removeChild(l.firstChild)}}}function ic(s){return"content"in s&&function pi(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var Sn=(()=>((Sn=Sn||{})[Sn.NONE=0]="NONE",Sn[Sn.HTML=1]="HTML",Sn[Sn.STYLE=2]="STYLE",Sn[Sn.SCRIPT=3]="SCRIPT",Sn[Sn.URL=4]="URL",Sn[Sn.RESOURCE_URL=5]="RESOURCE_URL",Sn))();function hf(s){const o=Xs();return o?xd(o.sanitize(Sn.HTML,s)||""):Js(s,"HTML")?xd(fi(s)):Vg(Wi(),fe(s))}function Ro(s){const o=Xs();return o?o.sanitize(Sn.URL,s)||"":Js(s,"URL")?fi(s):Xa(fe(s))}function Xs(){const s=Se();return s&&s[12]}const $g="__ngContext__";function qr(s,o){s[$g]=o}function Vd(s){const o=function oc(s){return s[$g]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function yf(s){return s.ngOriginalError}function n_(s,...o){s.error(...o)}class Is{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o),l=function Gg(s){return s&&s.ngErrorLogger||n_}(o);l(this._console,"ERROR",o),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&yf(o);for(;a&&yf(a);)a=yf(a);return a||null}}const lc=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Wt))();function bs(s){return s instanceof Function?s():s}var h=(()=>((h=h||{})[h.Important=1]="Important",h[h.DashCase=2]="DashCase",h))();function E(s,o){return undefined(s,o)}function q(s){const o=s[3];return $i(o)?o[3]:o}function Ze(s){return ft(s[13])}function yt(s){return ft(s[4])}function ft(s){for(;null!==s&&!$i(s);)s=s[4];return s}function Wr(s,o,a,l,d){if(null!=l){let m,v=!1;$i(l)?m=l:ei(l)&&(v=!0,l=l[0]);const w=on(l);0===s&&null!==a?null==d?pE(o,a,w):Wu(o,a,w,d||null,!0):1===s&&null!==a?Wu(o,a,w,d||null,!0):2===s?function wE(s,o,a){const l=em(s,o);l&&function mE(s,o,a,l){gn(s)?s.removeChild(o,a,l):o.removeChild(a)}(s,l,o,a)}(o,w,v):3===s&&o.destroyNode(w),null!=m&&function pa(s,o,a,l,d){const m=a[7];m!==on(a)&&Wr(o,s,l,m,d);for(let w=10;w<a.length;w++){const D=a[w];bf(D[1],D,s,o,l,m)}}(o,s,m,a,d)}}function Cr(s,o,a){if(gn(s))return s.createElement(o,a);{const l=null!==a?function kl(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?s.createElement(o):s.createElementNS(l,o)}}function Qg(s,o){const a=s[9],l=a.indexOf(o),d=o[3];1024&o[2]&&(o[2]&=-1025,Jo(d,-1)),a.splice(l,1)}function qu(s,o){if(s.length<=10)return;const a=10+o,l=s[a];if(l){const d=l[17];null!==d&&d!==s&&Qg(d,l),o>0&&(s[a-1][4]=l[4]);const m=Ql(s,10+o);!function Zg(s,o){bf(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(l[1],l);const v=m[19];null!==v&&v.detachView(m[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function Jg(s,o){if(!(256&o[2])){const a=o[11];gn(a)&&a.destroyNode&&bf(s,o,a,3,null,null),function $d(s){let o=s[13];if(!o)return Xg(s[1],s);for(;o;){let a=null;if(ei(o))a=o[13];else{const l=o[10];l&&(a=l)}if(!a){for(;o&&!o[4]&&o!==s;)ei(o)&&Xg(o[1],o),o=o[3];null===o&&(o=s),ei(o)&&Xg(o[1],o),a=o&&o[4]}o=a}}(o)}}function Xg(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function l_(s,o){let a;if(null!=s&&null!=(a=s.destroyHooks))for(let l=0;l<a.length;l+=2){const d=o[a[l]];if(!(d instanceof na)){const m=a[l+1];if(Array.isArray(m))for(let v=0;v<m.length;v+=2){const w=d[m[v]],D=m[v+1];try{D.call(w)}finally{}}else try{m.call(d)}finally{}}}}(s,o),function fE(s,o){const a=s.cleanup,l=o[7];let d=-1;if(null!==a)for(let m=0;m<a.length-1;m+=2)if("string"==typeof a[m]){const v=a[m+1],w="function"==typeof v?v(o):on(o[v]),D=l[d=a[m+2]],S=a[m+3];"boolean"==typeof S?w.removeEventListener(a[m],D,S):S>=0?l[d=S]():l[d=-S].unsubscribe(),m+=2}else{const v=l[d=a[m+1]];a[m].call(v)}if(null!==l){for(let m=d+1;m<l.length;m++)l[m]();o[7]=null}}(s,o),1===o[1].type&&gn(o[11])&&o[11].destroy();const a=o[17];if(null!==a&&$i(o[3])){a!==o[3]&&Qg(a,o);const l=o[19];null!==l&&l.detachView(s)}}}function uD(s,o,a){return function zu(s,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[0];if(2&l.flags){const d=s.data[l.directiveStart].encapsulation;if(d===Zt.None||d===Zt.Emulated)return null}return fr(l,a)}(s,o.parent,a)}function Wu(s,o,a,l,d){gn(s)?s.insertBefore(o,a,l,d):o.insertBefore(a,l,d)}function pE(s,o,a){gn(s)?s.appendChild(o,a):o.appendChild(a)}function gE(s,o,a,l,d){null!==l?Wu(s,o,a,l,d):pE(s,o,a)}function em(s,o){return gn(s)?s.parentNode(o):o.parentNode}let _E=function c_(s,o,a){return 40&s.type?fr(s,a):null};function Gd(s,o,a,l){const d=uD(s,l,o),m=o[11],w=function yE(s,o,a){return _E(s,o,a)}(l.parent||o[6],l,o);if(null!=d)if(Array.isArray(a))for(let D=0;D<a.length;D++)gE(m,d,a[D],w,!1);else gE(m,d,a,w,!1)}function tm(s,o){if(null!==o){const a=o.type;if(3&a)return fr(o,s);if(4&a)return nm(-1,s[o.index]);if(8&a){const l=o.child;if(null!==l)return tm(s,l);{const d=s[o.index];return $i(d)?nm(-1,d):on(d)}}if(32&a)return E(o,s)()||on(s[o.index]);{const l=EE(s,o);return null!==l?Array.isArray(l)?l[0]:tm(q(s[16]),l):tm(s,o.next)}}return null}function EE(s,o){return null!==o?s[16][6].projection[o.projection]:null}function nm(s,o){const a=10+s+1;if(a<o.length){const l=o[a],d=l[1].firstChild;if(null!==d)return tm(l,d)}return o[7]}function IE(s,o,a,l,d,m,v){for(;null!=a;){const w=l[a.index],D=a.type;if(v&&0===o&&(w&&qr(on(w),l),a.flags|=4),64!=(64&a.flags))if(8&D)IE(s,o,a.child,l,d,m,!1),Wr(o,s,d,w,m);else if(32&D){const S=E(a,l);let N;for(;N=S();)Wr(o,s,d,N,m);Wr(o,s,d,w,m)}else 16&D?Ku(s,o,l,a,d,m):Wr(o,s,d,w,m);a=v?a.projectionNext:a.next}}function bf(s,o,a,l,d,m){IE(a,l,s.firstChild,o,d,m,!1)}function Ku(s,o,a,l,d,m){const v=a[16],D=v[6].projection[l.projection];if(Array.isArray(D))for(let S=0;S<D.length;S++)Wr(o,s,d,D[S],m);else IE(s,o,D,v[3],d,m,!0)}function h_(s,o,a){gn(s)?s.setAttribute(o,"style",a):o.style.cssText=a}function f_(s,o,a){gn(s)?""===a?s.removeAttribute(o,"class"):s.setAttribute(o,"class",a):o.className=a}function DE(s,o,a){let l=s.length;for(;;){const d=s.indexOf(o,a);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const m=o.length;if(d+m===l||s.charCodeAt(d+m)<=32)return d}a=d+1}}const Df="ng-template";function Zu(s,o,a){let l=0;for(;l<s.length;){let d=s[l++];if(a&&"class"===d){if(d=s[l],-1!==DE(d.toLowerCase(),o,0))return!0}else if(1===d){for(;l<s.length&&"string"==typeof(d=s[l++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function p_(s){return 4===s.type&&s.value!==Df}function gi(s,o,a){return o===(4!==s.type||a?s.value:Df)}function Yu(s,o,a){let l=4;const d=s.attrs||[],m=function TE(s){for(let o=0;o<s.length;o++)if(Ai(s[o]))return o;return s.length}(d);let v=!1;for(let w=0;w<o.length;w++){const D=o[w];if("number"!=typeof D){if(!v)if(4&l){if(l=2|1&l,""!==D&&!gi(s,D,a)||""===D&&1===o.length){if(ko(l))return!1;v=!0}}else{const S=8&l?D:o[++w];if(8&l&&null!==s.attrs){if(!Zu(s.attrs,S,a)){if(ko(l))return!1;v=!0}continue}const k=rm(8&l?"class":D,d,p_(s),a);if(-1===k){if(ko(l))return!1;v=!0;continue}if(""!==S){let H;H=k>m?"":d[k+1].toLowerCase();const Y=8&l?H:null;if(Y&&-1!==DE(Y,S,0)||2&l&&S!==H){if(ko(l))return!1;v=!0}}}}else{if(!v&&!ko(l)&&!ko(D))return!1;if(v&&ko(D))continue;v=!1,l=D|1&l}}return ko(l)||v}function ko(s){return 0==(1&s)}function rm(s,o,a,l){if(null===o)return-1;let d=0;if(l||!a){let m=!1;for(;d<o.length;){const v=o[d];if(v===s)return d;if(3===v||6===v)m=!0;else{if(1===v||2===v){let w=o[++d];for(;"string"==typeof w;)w=o[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=m?1:2}return-1}return function AE(s,o){let a=s.indexOf(4);if(a>-1)for(a++;a<s.length;){const l=s[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,s)}function g_(s,o,a=!1){for(let l=0;l<o.length;l++)if(Yu(s,o[l],a))return!0;return!1}function m_(s,o){return s?":not("+o.trim()+")":o}function ME(s){let o=s[0],a=1,l=2,d="",m=!1;for(;a<s.length;){let v=s[a];if("string"==typeof v)if(2&l){const w=s[++a];d+="["+v+(w.length>0?'="'+w+'"':"")+"]"}else 8&l?d+="."+v:4&l&&(d+=" "+v);else""!==d&&!ko(v)&&(o+=m_(m,d),d=""),l=v,m=m||!ko(l);a++}return""!==d&&(o+=m_(m,d)),o}const Ft={};function y_(s){__(Gt(),Se(),ir()+s,!1)}function __(s,o,a,l){if(!l)if(3==(3&o[2])){const m=s.preOrderCheckHooks;null!==m&&gs(o,m,a)}else{const m=s.preOrderHooks;null!==m&&vo(o,m,0,a)}_o(a)}function sm(s,o){return s<<17|o<<2}function eo(s){return s>>17&32767}function om(s){return 2|s}function Fo(s){return(131068&s)>>2}function am(s,o){return-131069&s|o<<2}function um(s){return 1|s}function mD(s,o){const a=s.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const d=a[l],m=a[l+1];if(-1!==m){const v=s.data[m];ld(d),v.contentQueries(2,o[m],m)}}}function qd(s,o,a,l,d,m,v,w,D,S){const N=o.blueprint.slice();return N[0]=d,N[2]=140|l,Zi(N),N[3]=N[15]=s,N[8]=a,N[10]=v||s&&s[10],N[11]=w||s&&s[11],N[12]=D||s&&s[12]||null,N[9]=S||s&&s[9]||null,N[6]=m,N[16]=2==o.type?s[16]:N,N}function Qu(s,o,a,l,d){let m=s.data[o];if(null===m)m=function xf(s,o,a,l,d){const m=Eu(),v=jl(),D=s.data[o]=function BE(s,o,a,l,d,m){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?m:m&&m.parent,a,o,l,d);return null===s.firstChild&&(s.firstChild=D),null!==m&&(v?null==m.child&&null!==D.parent&&(m.child=D):null===m.next&&(m.next=D)),D}(s,o,a,l,d),function Gl(){return vt.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=a,m.value=l,m.attrs=d;const v=function mo(){const s=vt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();m.injectorIndex=null===v?-1:v.injectorIndex}return li(m,!0),m}function Nf(s,o,a,l){if(0===a)return-1;const d=o.length;for(let m=0;m<a;m++)o.push(l),s.blueprint.push(l),s.data.push(null);return d}function cc(s,o,a){yo(o);try{const l=s.viewQuery;null!==l&&Lf(1,l,a);const d=s.template;null!==d&&dc(s,o,d,1,a),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&mD(s,o),s.staticViewQueries&&Lf(2,s.viewQuery,a);const m=s.components;null!==m&&function yD(s,o){for(let a=0;a<o.length;a++)TD(s,o[a])}(o,m)}catch(l){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),l}finally{o[2]&=-5,ti()}}function ma(s,o,a,l){const d=o[2];if(256!=(256&d)){yo(o);try{Zi(o),function wu(s){return vt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==a&&dc(s,o,a,2,l);const v=3==(3&d);if(v){const S=s.preOrderCheckHooks;null!==S&&gs(o,S,null)}else{const S=s.preOrderHooks;null!==S&&vo(o,S,0,null),Jn(o,0)}if(function YE(s){for(let o=Ze(s);null!==o;o=yt(o)){if(!o[2])continue;const a=o[9];for(let l=0;l<a.length;l++){const d=a[l],m=d[3];0==(1024&d[2])&&Jo(m,1),d[2]|=1024}}}(o),function DD(s){for(let o=Ze(s);null!==o;o=yt(o))for(let a=10;a<o.length;a++){const l=o[a],d=l[1];fs(l)&&ma(d,l,d.template,l[8])}}(o),null!==s.contentQueries&&mD(s,o),v){const S=s.contentCheckHooks;null!==S&&gs(o,S)}else{const S=s.contentHooks;null!==S&&vo(o,S,1),Jn(o,1)}!function LE(s,o){const a=s.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)_o(~d);else{const m=d,v=a[++l],w=a[++l];bu(v,m),w(2,o[m])}}}finally{_o(-1)}}(s,o);const w=s.components;null!==w&&function N_(s,o){for(let a=0;a<o.length;a++)CD(s,o[a])}(o,w);const D=s.viewQuery;if(null!==D&&Lf(2,D,l),v){const S=s.viewCheckHooks;null!==S&&gs(o,S)}else{const S=s.viewHooks;null!==S&&vo(o,S,2),Jn(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-73,1024&o[2]&&(o[2]&=-1025,Jo(o[3],-1))}finally{ti()}}}function hm(s,o,a,l){const d=o[10],v=po(o);try{!v&&d.begin&&d.begin(),v&&cc(s,o,l),ma(s,o,a,l)}finally{!v&&d.end&&d.end()}}function dc(s,o,a,l,d){const m=ir(),v=2&l;try{_o(-1),v&&o.length>20&&__(s,o,20,!1),a(l,d)}finally{_o(m)}}function zd(s,o,a){if(gu(o)){const d=o.directiveEnd;for(let m=o.directiveStart;m<d;m++){const v=s.data[m];v.contentQueries&&v.contentQueries(1,a[m],m)}}}function R_(s,o,a){!vu()||(function ED(s,o,a,l){const d=a.directiveStart,m=a.directiveEnd;s.firstCreatePass||Ji(a,o),qr(l,o);const v=a.initialInputs;for(let w=d;w<m;w++){const D=s.data[w],S=qi(D);S&&TS(o,a,D);const N=di(o,s,w,a);qr(N,o),null!==v&&ZE(0,w-d,N,D,0,v),S&&(pr(a.index,o)[8]=N)}}(s,o,a,fr(a,o)),128==(128&a.flags)&&function GE(s,o,a){const l=a.directiveStart,d=a.directiveEnd,v=a.index,w=function ql(){return vt.lFrame.currentDirectiveIndex}();try{_o(v);for(let D=l;D<d;D++){const S=s.data[D],N=o[D];ea(D),(null!==S.hostBindings||0!==S.hostVars||null!==S.hostAttrs)&&qE(S,N)}}finally{_o(-1),ea(w)}}(s,o,a))}function Rf(s,o,a=fr){const l=o.localNames;if(null!==l){let d=o.index+1;for(let m=0;m<l.length;m+=2){const v=l[m+1],w=-1===v?a(o,s):s[v];s[d++]=w}}}function O_(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Wd(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Wd(s,o,a,l,d,m,v,w,D,S){const N=20+l,k=N+d,H=function VE(s,o){const a=[];for(let l=0;l<o;l++)a.push(l<s?null:Ft);return a}(N,k),Y="function"==typeof S?S():S;return H[1]={type:s,blueprint:H,template:a,queries:null,viewQuery:w,declTNode:o,data:H.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:D,consts:Y,incompleteFirstPass:!1}}function P_(s,o,a,l){const d=j_(o);null===a?d.push(l):(d.push(a),s.firstCreatePass&&XE(s).push(l,d.length-1))}function k_(s,o,a){for(let l in s)if(s.hasOwnProperty(l)){const d=s[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(o,d):a[l]=[o,d]}return a}function Ni(s,o,a,l,d,m,v,w){const D=fr(o,a);let N,S=o.inputs;!w&&null!=S&&(N=S[l])?(ew(s,a,N,l,d),Qc(o)&&function fm(s,o){const a=pr(o,s);16&a[2]||(a[2]|=64)}(a,o.index)):3&o.type&&(l=function F_(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(l),d=null!=v?v(d,o.value||"",l):d,gn(m)?m.setProperty(D,l,d):Xn(l)||(D.setProperty?D.setProperty(l,d):D[l]=d))}function $E(s,o,a,l){let d=!1;if(vu()){const m=function zE(s,o,a){const l=s.directiveRegistry;let d=null;if(l)for(let m=0;m<l.length;m++){const v=l[m];g_(a,v.selectors,!1)&&(d||(d=[]),zs(Ji(a,o),s,v.type),qi(v)?(L_(s,a),d.unshift(v)):d.push(v))}return d}(s,o,a),v=null===l?null:{"":-1};if(null!==m){d=!0,mm(a,s.data.length,m.length);for(let N=0;N<m.length;N++){const k=m[N];k.providersResolver&&k.providersResolver(k)}let w=!1,D=!1,S=Nf(s,o,m.length,null);for(let N=0;N<m.length;N++){const k=m[N];a.mergedAttrs=Ha(a.mergedAttrs,k.hostAttrs),KE(s,a,o,S,k),wD(S,k,v),null!==k.contentQueries&&(a.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(a.flags|=128);const H=k.type.prototype;!w&&(H.ngOnChanges||H.ngOnInit||H.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(a.index),w=!0),!D&&(H.ngOnChanges||H.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(a.index),D=!0),S++}!function jE(s,o){const l=o.directiveEnd,d=s.data,m=o.attrs,v=[];let w=null,D=null;for(let S=o.directiveStart;S<l;S++){const N=d[S],k=N.inputs,H=null===m||p_(o)?null:ID(k,m);v.push(H),w=k_(k,S,w),D=k_(N.outputs,S,D)}null!==w&&(w.hasOwnProperty("class")&&(o.flags|=16),w.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=w,o.outputs=D}(s,a)}v&&function WE(s,o,a){if(o){const l=s.localNames=[];for(let d=0;d<o.length;d+=2){const m=a[o[d+1]];if(null==m)throw new Oe(-301,!1);l.push(o[d],m)}}}(a,l,v)}return a.mergedAttrs=Ha(a.mergedAttrs,a.attrs),d}function vD(s,o,a,l,d,m){const v=m.hostBindings;if(v){let w=s.hostBindingOpCodes;null===w&&(w=s.hostBindingOpCodes=[]);const D=~o.index;(function CS(s){let o=s.length;for(;o>0;){const a=s[--o];if("number"==typeof a&&a<0)return a}return 0})(w)!=D&&w.push(D),w.push(l,d,v)}}function qE(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function L_(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function wD(s,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=s;qi(o)&&(a[""]=s)}}function mm(s,o,a){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+a,s.providerIndexes=o}function KE(s,o,a,l,d){s.data[l]=d;const m=d.factory||(d.factory=wr(d.type)),v=new na(m,qi(d),null);s.blueprint[l]=v,a[l]=v,vD(s,o,0,l,Nf(s,a,d.hostVars,Ft),d)}function TS(s,o,a){const l=fr(o,s),d=O_(a),m=s[10],v=_m(s,qd(s,d,null,a.onPush?64:16,l,o,m,m.createRenderer(l,a),null,null));s[o.index]=v}function Vo(s,o,a,l,d,m){const v=fr(s,o);!function V_(s,o,a,l,d,m,v){if(null==m)gn(s)?s.removeAttribute(o,d,a):o.removeAttribute(d);else{const w=null==v?fe(m):v(m,l||"",d);gn(s)?s.setAttribute(o,d,w,a):a?o.setAttributeNS(a,d,w):o.setAttribute(d,w)}}(o[11],v,m,s.value,a,l,d)}function ZE(s,o,a,l,d,m){const v=m[o];if(null!==v){const w=l.setInput;for(let D=0;D<v.length;){const S=v[D++],N=v[D++],k=v[D++];null!==w?l.setInput(a,k,S,N):a[N]=k}}}function ID(s,o){let a=null,l=0;for(;l<o.length;){const d=o[l];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,s[d],o[l+1])),l+=2}else l+=2;else l+=4}return a}function ym(s,o,a,l){return new Array(s,!0,!1,o,null,0,l,a,null,null)}function CD(s,o){const a=pr(o,s);if(fs(a)){const l=a[1];80&a[2]?ma(l,a,l.template,a[8]):a[5]>0&&Kd(a)}}function Kd(s){for(let l=Ze(s);null!==l;l=yt(l))for(let d=10;d<l.length;d++){const m=l[d];if(1024&m[2]){const v=m[1];ma(v,m,v.template,m[8])}else m[5]>0&&Kd(m)}const a=s[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=pr(a[l],s);fs(d)&&d[5]>0&&Kd(d)}}function TD(s,o){const a=pr(o,s),l=a[1];(function U_(s,o){for(let a=o.length;a<s.blueprint.length;a++)o.push(s.blueprint[a])})(l,a),cc(l,a,a[8])}function _m(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function kf(s){for(;s;){s[2]|=64;const o=q(s);if(Rl(s)&&!o)return s;s=o}return null}function JE(s){!function B_(s){for(let o=0;o<s.components.length;o++){const a=s.components[o],l=Vd(a),d=l[1];hm(d,l,d.template,a)}}(s[8])}function Lf(s,o,a){ld(0),o(s,a)}const SD=(()=>Promise.resolve(null))();function j_(s){return s[7]||(s[7]=[])}function XE(s){return s.cleanup||(s.cleanup=[])}function vm(s,o){const a=s[9],l=a?a.get(Is,null):null;l&&l.handleError(o)}function ew(s,o,a,l,d){for(let m=0;m<a.length;){const v=a[m++],w=a[m++],D=o[v],S=s.data[v];null!==S.setInput?S.setInput(D,d,l,w):D[w]=d}}function ya(s,o,a){const l=Bs(o,s);!function wf(s,o,a){gn(s)?s.setValue(o,a):o.textContent=a}(s[11],l,a)}function Em(s,o,a){let l=a?s.styles:null,d=a?s.classes:null,m=0;if(null!==o)for(let v=0;v<o.length;v++){const w=o[v];"number"==typeof w?m=w:1==m?d=he(d,w):2==m&&(l=he(l,w+": "+o[++v]+";"))}a?s.styles=l:s.stylesWithoutHost=l,a?s.classes=d:s.classesWithoutHost=d}const Vf=new An("INJECTOR",-1);class nw{get(o,a=Gr){if(a===Gr){const l=new Error(`NullInjectorError: No provider for ${oe(o)}!`);throw l.name="NullInjectorError",l}return a}}const wm=new An("Set Injector scope."),Uf={},xD={};let Bf;function H_(){return void 0===Bf&&(Bf=new nw),Bf}function rw(s,o=null,a=null,l){const d=$_(s,o,a,l);return d._resolveInjectorDefTypes(),d}function $_(s,o=null,a=null,l){return new ND(s,a,o||H_(),l)}class ND{constructor(o,a,l,d=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const m=[];a&&$r(a,w=>this.processProvider(w,o,a)),$r([o],w=>this.processInjectorType(w,[],m)),this.records.set(Vf,fc(void 0,this));const v=this.records.get(wm);this.scope=null!=v?v.value:null,this.source=d||("object"==typeof o?null:oe(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,a=Gr,l=Et.Default){this.assertNotDestroyed();const d=b(this),m=nr(void 0);try{if(!(l&Et.SkipSelf)){let w=this.records.get(o);if(void 0===w){const D=function kD(s){return"function"==typeof s||"object"==typeof s&&s instanceof An}(o)&&zt(o);w=D&&this.injectableDefInScope(D)?fc(Im(o),Uf):null,this.records.set(o,w)}if(null!=w)return this.hydrate(o,w)}return(l&Et.Self?H_():this.parent).get(o,a=l&Et.Optional&&a===Gr?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[hi]=v[hi]||[]).unshift(oe(o)),d)throw v;return function lt(s,o,a,l){const d=s[hi];throw o[Pu]&&d.unshift(o[Pu]),s.message=function It(s,o,a,l=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let d=oe(o);if(Array.isArray(o))d=o.map(oe).join(" -> ");else if("object"==typeof o){let m=[];for(let v in o)if(o.hasOwnProperty(v)){let w=o[v];m.push(v+":"+("string"==typeof w?JSON.stringify(w):oe(w)))}d=`{${m.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${s.replace(Ad,"\n  ")}`}("\n"+s.message,d,a,l),s.ngTokenPath=d,s[hi]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{nr(m),b(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((l,d)=>o.push(oe(d))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Oe(205,!1)}processInjectorType(o,a,l){if(!(o=X(o)))return!1;let d=Jr(o);const m=null==d&&o.ngModule||void 0,v=void 0===m?o:m,w=-1!==l.indexOf(v);if(void 0!==m&&(d=Jr(m)),null==d)return!1;if(null!=d.imports&&!w){let N;l.push(v);try{$r(d.imports,k=>{this.processInjectorType(k,a,l)&&(void 0===N&&(N=[]),N.push(k))})}finally{}if(void 0!==N)for(let k=0;k<N.length;k++){const{ngModule:H,providers:Y}=N[k];$r(Y,ye=>this.processProvider(ye,H,Y||pt))}}this.injectorDefTypes.add(v);const D=wr(v)||(()=>new v);this.records.set(v,fc(D,Uf));const S=d.providers;if(null!=S&&!w){const N=o;$r(S,k=>this.processProvider(k,N,S))}return void 0!==m&&void 0!==o.providers}processProvider(o,a,l){let d=Zd(o=X(o))?o:X(o&&o.provide);const m=function iw(s,o,a){return OD(s)?fc(void 0,s.useValue):fc(sw(s),Uf)}(o);if(Zd(o)||!0!==o.multi)this.records.get(d);else{let v=this.records.get(d);v||(v=fc(void 0,Uf,!0),v.factory=()=>te(v.multi),this.records.set(d,v)),d=o,v.multi.push(o)}this.records.set(d,m)}hydrate(o,a){return a.value===Uf&&(a.value=xD,a.value=a.factory()),"object"==typeof a.value&&a.value&&function PD(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=X(o.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function Im(s){const o=zt(s),a=null!==o?o.factory:wr(s);if(null!==a)return a;if(s instanceof An)throw new Oe(204,!1);if(s instanceof Function)return function RD(s){const o=s.length;if(o>0)throw function Co(s,o){const a=[];for(let l=0;l<s;l++)a.push(o);return a}(o,"?"),new Oe(204,!1);const a=function Ui(s){const o=s&&(s[us]||s[oi]);if(o){const a=function Nr(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),o}return null}(s);return null!==a?()=>a.factory(s):()=>new s}(s);throw new Oe(204,!1)}function sw(s,o,a){let l;if(Zd(s)){const d=X(s);return wr(d)||Im(d)}if(OD(s))l=()=>X(s.useValue);else if(function NS(s){return!(!s||!s.useFactory)}(s))l=()=>s.useFactory(...te(s.deps||[]));else if(function xS(s){return!(!s||!s.useExisting)}(s))l=()=>x(X(s.useExisting));else{const d=X(s&&(s.useClass||s.provide));if(!function ow(s){return!!s.deps}(s))return wr(d)||Im(d);l=()=>new d(...te(s.deps))}return l}function fc(s,o,a=!1){return{factory:s,value:o,multi:a?[]:void 0}}function OD(s){return null!==s&&"object"==typeof s&&ku in s}function Zd(s){return"function"==typeof s}let ru=(()=>{class s{static create(a,l){var d;if(Array.isArray(a))return rw({name:""},l,a,"");{const m=null!==(d=a.name)&&void 0!==d?d:"";return rw({name:m},a.parent,a.providers,m)}}}return s.THROW_IF_NOT_FOUND=Gr,s.NULL=new nw,s.\u0275prov=Xt({token:s,providedIn:"any",factory:()=>x(Vf)}),s.__NG_ELEMENT_ID__=-1,s})();function Cm(s,o){Ua(Vd(s)[1],wn())}function z_(s){let o=function su(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),a=!0;const l=[s];for(;o;){let d;if(qi(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Oe(903,"");d=o.\u0275dir}if(d){if(a){l.push(d);const v=s;v.inputs=Gf(s.inputs),v.declaredInputs=Gf(s.declaredInputs),v.outputs=Gf(s.outputs);const w=d.hostBindings;w&&VD(s,w);const D=d.viewQuery,S=d.contentQueries;if(D&&fw(s,D),S&&yi(s,S),se(s.inputs,d.inputs),se(s.declaredInputs,d.declaredInputs),se(s.outputs,d.outputs),qi(d)&&d.data.animation){const N=s.data;N.animation=(N.animation||[]).concat(d.data.animation)}}const m=d.features;if(m)for(let v=0;v<m.length;v++){const w=m[v];w&&w.ngInherit&&w(s),w===z_&&(a=!1)}}o=Object.getPrototypeOf(o)}!function hw(s){let o=0,a=null;for(let l=s.length-1;l>=0;l--){const d=s[l];d.hostVars=o+=d.hostVars,d.hostAttrs=Ha(d.hostAttrs,a=Ha(a,d.hostAttrs))}}(l)}function Gf(s){return s===Fr?{}:s===pt?[]:s}function fw(s,o){const a=s.viewQuery;s.viewQuery=a?(l,d)=>{o(l,d),a(l,d)}:o}function yi(s,o){const a=s.contentQueries;s.contentQueries=a?(l,d,m)=>{o(l,d,m),a(l,d,m)}:o}function VD(s,o){const a=s.hostBindings;s.hostBindings=a?(l,d)=>{o(l,d),a(l,d)}:o}let pc=null;function Ri(){if(!pc){const s=Wt.Symbol;if(s&&s.iterator)pc=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<o.length;++a){const l=o[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(pc=l)}}}return pc}function qf(s){return!!Am(s)&&(Array.isArray(s)||!(s instanceof Map)&&Ri()in s)}function Am(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function _i(s,o,a){return!Object.is(s[o],a)&&(s[o]=a,!0)}function zf(s,o,a,l){const d=Se();return _i(d,Hs(),o)&&(Gt(),Vo(On(),d,s,o,a,l)),zf}function xm(s,o,a,l,d,m,v,w){const D=Se(),S=Gt(),N=s+20,k=S.firstCreatePass?function J_(s,o,a,l,d,m,v,w,D){const S=o.consts,N=Qu(o,s,4,v||null,Ci(S,w));$E(o,a,N,Ci(S,D)),Ua(o,N);const k=N.tViews=Wd(2,N,l,d,m,o.directiveRegistry,o.pipeRegistry,null,o.schemas,S);return null!==o.queries&&(o.queries.template(o,N),k.queries=o.queries.embeddedTView(N)),N}(N,S,D,o,a,l,d,m,v):S.data[N];li(k,!1);const H=D[11].createComment("");Gd(S,D,H,k),qr(H,D),_m(D,D[N]=ym(H,D,H,k)),Gi(k)&&R_(S,D,k),null!=v&&Rf(D,k,w)}function sl(s,o=Et.Default){const a=Se();return null===a?x(s,o):Io(wn(),a,X(s),o)}function lv(){throw new Error("invalid")}function vc(s,o,a){const l=Se();return _i(l,Hs(),o)&&Ni(Gt(),On(),l,s,o,l[11],a,!1),vc}function km(s,o,a,l,d){const v=d?"class":"style";ew(s,a,o.inputs[v],v,l)}function Yf(s,o,a,l){const d=Se(),m=Gt(),v=20+s,w=d[11],D=d[v]=Cr(w,o,function Ig(){return vt.lFrame.currentNamespace}()),S=m.firstCreatePass?function Oi(s,o,a,l,d,m,v){const w=o.consts,S=Qu(o,s,2,d,Ci(w,m));return $E(o,a,S,Ci(w,v)),null!==S.attrs&&Em(S,S.attrs,!1),null!==S.mergedAttrs&&Em(S,S.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,S),S}(v,m,d,0,o,a,l):m.data[v];li(S,!0);const N=S.mergedAttrs;null!==N&&Mn(w,D,N);const k=S.classes;null!==k&&f_(w,D,k);const H=S.styles;return null!==H&&h_(w,D,H),64!=(64&S.flags)&&Gd(m,d,D,S),0===function Va(){return vt.lFrame.elementDepthCount}()&&qr(D,d),function Ul(){vt.lFrame.elementDepthCount++}(),Gi(S)&&(R_(m,d,S),zd(m,S,d)),null!==l&&Rf(d,S),Yf}function ol(){let s=wn();jl()?Hl():(s=s.parent,li(s,!1));const o=s;!function _u(){vt.lFrame.elementDepthCount--}();const a=Gt();return a.firstCreatePass&&(Ua(a,s),gu(s)&&a.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Dg(s){return 0!=(16&s.flags)}(o)&&km(a,o,Se(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Cn(s){return 0!=(32&s.flags)}(o)&&km(a,o,Se(),o.stylesWithoutHost,!1),ol}function nh(s,o,a,l){return Yf(s,o,a,l),ol(),nh}function Qf(s,o,a){const l=Se(),d=Gt(),m=s+20,v=d.firstCreatePass?function cv(s,o,a,l,d){const m=o.consts,v=Ci(m,l),w=Qu(o,s,8,"ng-container",v);return null!==v&&Em(w,v,!0),$E(o,a,w,Ci(m,d)),null!==o.queries&&o.queries.elementStart(o,w),w}(m,d,l,o,a):d.data[m];li(v,!0);const w=l[m]=l[11].createComment("");return Gd(d,l,w,v),qr(w,l),Gi(v)&&(R_(d,l,v),zd(d,v,l)),null!=a&&Rf(l,v),Qf}function Jf(){let s=wn();const o=Gt();return jl()?Hl():(s=s.parent,li(s,!1)),o.firstCreatePass&&(Ua(o,s),gu(s)&&o.queries.elementEnd(s)),Jf}function Fm(){return Se()}function Xf(s){return!!s&&"function"==typeof s.then}function Lm(s){return!!s&&"function"==typeof s.subscribe}const ep=Lm;function Ec(s,o,a,l){const d=Se(),m=Gt(),v=wn();return function Vm(s,o,a,l,d,m,v,w){const D=Gi(l),N=s.firstCreatePass&&XE(s),k=o[8],H=j_(o);let Y=!0;if(3&l.type||w){const He=fr(l,o),tt=w?w(He):He,Me=H.length,mt=w?qt=>w(on(qt[l.index])):l.index;if(gn(a)){let qt=null;if(!w&&D&&(qt=function zD(s,o,a,l){const d=s.cleanup;if(null!=d)for(let m=0;m<d.length-1;m+=2){const v=d[m];if(v===a&&d[m+1]===l){const w=o[7],D=d[m+2];return w.length>D?w[D]:null}"string"==typeof v&&(m+=2)}return null}(s,o,d,l.index)),null!==qt)(qt.__ngLastListenerFn__||qt).__ngNextListenerFn__=m,qt.__ngLastListenerFn__=m,Y=!1;else{m=np(l,o,k,m,!1);const tn=a.listen(tt,d,m);H.push(m,tn),N&&N.push(d,mt,Me,Me+1)}}else m=np(l,o,k,m,!0),tt.addEventListener(d,m,v),H.push(m),N&&N.push(d,mt,Me,v)}else m=np(l,o,k,m,!1);const ye=l.outputs;let Fe;if(Y&&null!==ye&&(Fe=ye[d])){const He=Fe.length;if(He)for(let tt=0;tt<He;tt+=2){const Li=o[Fe[tt]][Fe[tt+1]].subscribe(m),Al=H.length;H.push(m,Li),N&&N.push(d,l.index,Al,-(Al+1))}}}(m,d,d[11],v,s,o,!!a,l),Ec}function tp(s,o,a,l){try{return!1!==a(l)}catch(d){return vm(s,d),!1}}function np(s,o,a,l,d){return function m(v){if(v===Function)return l;const w=2&s.flags?pr(s.index,o):o;0==(32&o[2])&&kf(w);let D=tp(o,0,l,v),S=m.__ngNextListenerFn__;for(;S;)D=tp(o,0,S,v)&&D,S=S.__ngNextListenerFn__;return d&&!1===D&&(v.preventDefault(),v.returnValue=!1),D}}function hv(s=1){return function Qh(s){return(vt.lFrame.contextLView=function zl(s,o){for(;s>0;)o=o[15],s--;return o}(s,vt.lFrame.contextLView))[8]}(s)}function ip(s,o,a,l,d){const m=s[a+1],v=null===o;let w=l?eo(m):Fo(m),D=!1;for(;0!==w&&(!1===D||v);){const N=s[w+1];jm(s[w],o)&&(D=!0,s[w+1]=l?um(N):om(N)),w=l?eo(N):Fo(N)}D&&(s[a+1]=l?om(m):um(m))}function jm(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Zs(s,o)>=0}const yr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function xn(s){return s.substring(yr.key,yr.keyEnd)}function oh(s,o){const a=yr.textEnd;return a===o?-1:(o=yr.keyEnd=function ZD(s,o,a){for(;o<a&&s.charCodeAt(o)>32;)o++;return o}(s,yr.key=o,a),ah(s,o,a))}function ah(s,o,a){for(;o<a&&s.charCodeAt(o)<=32;)o++;return o}function $m(s,o,a){return no(s,o,a,!1),$m}function ll(s,o){return no(s,o,null,!0),ll}function yv(s){!function ro(s,o,a,l){const d=Gt(),m=Ti(2);d.firstUpdatePass&&qm(d,null,m,l);const v=Se();if(a!==Ft&&_i(v,m,a)){const w=d.data[ir()];if(Vw(w,l)&&!Gm(d,m)){let D=l?w.classesWithoutHost:w.stylesWithoutHost;null!==D&&(a=he(D,a||"")),km(d,w,v,a,l)}else!function Wm(s,o,a,l,d,m,v,w){d===Ft&&(d=pt);let D=0,S=0,N=0<d.length?d[0]:null,k=0<m.length?m[0]:null;for(;null!==N||null!==k;){const H=D<d.length?d[D+1]:void 0,Y=S<m.length?m[S+1]:void 0;let Fe,ye=null;N===k?(D+=2,S+=2,H!==Y&&(ye=k,Fe=Y)):null===k||null!==N&&N<k?(D+=2,ye=N):(S+=2,ye=k,Fe=Y),null!==ye&&Km(s,o,a,l,ye,Fe,v,w),N=D<d.length?d[D]:null,k=S<m.length?m[S]:null}}(d,w,v,v[11],v[m+1],v[m+1]=function zm(s,o,a){if(null==a||""===a)return pt;const l=[],d=fi(a);if(Array.isArray(d))for(let m=0;m<d.length;m++)s(l,d[m],!0);else if("object"==typeof d)for(const m in d)d.hasOwnProperty(m)&&s(l,m,d[m]);else"string"==typeof d&&o(l,d);return l}(s,o,a),l,m)}}(er,wa,s,!0)}function wa(s,o){for(let a=function sp(s){return function kw(s){yr.key=0,yr.keyEnd=0,yr.value=0,yr.valueEnd=0,yr.textEnd=s.length}(s),oh(s,ah(s,0,yr.textEnd))}(o);a>=0;a=oh(o,a))er(s,xn(o),!0)}function no(s,o,a,l){const d=Se(),m=Gt(),v=Ti(2);m.firstUpdatePass&&qm(m,s,v,l),o!==Ft&&_i(d,v,o)&&Km(m,m.data[ir()],d,d[11],s,d[v+1]=function ap(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=oe(fi(s)))),s}(o,a),l,v)}function Gm(s,o){return o>=s.expandoStartIndex}function qm(s,o,a,l){const d=s.data;if(null===d[a+1]){const m=d[ir()],v=Gm(s,a);Vw(m,l)&&null===o&&!v&&(o=!1),o=function Fw(s,o,a,l){const d=Du(s);let m=l?o.residualClasses:o.residualStyles;if(null===d)0===(l?o.classBindings:o.styleBindings)&&(a=op(a=vv(null,s,o,a,l),o.attrs,l),m=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==d)if(a=vv(d,s,o,a,l),null===m){let D=function Lw(s,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==Fo(l))return s[eo(l)]}(s,o,l);void 0!==D&&Array.isArray(D)&&(D=vv(null,s,o,D[1],l),D=op(D,o.attrs,l),function _v(s,o,a,l){s[eo(a?o.classBindings:o.styleBindings)]=l}(s,o,l,D))}else m=function XD(s,o,a){let l;const d=o.directiveEnd;for(let m=1+o.directiveStylingLast;m<d;m++)l=op(l,s[m].hostAttrs,a);return op(l,o.attrs,a)}(s,o,l)}return void 0!==m&&(l?o.residualClasses=m:o.residualStyles=m),a}(d,m,o,l),function wc(s,o,a,l,d,m){let v=m?o.classBindings:o.styleBindings,w=eo(v),D=Fo(v);s[l]=a;let N,S=!1;if(Array.isArray(a)){const k=a;N=k[1],(null===N||Zs(k,N)>0)&&(S=!0)}else N=a;if(d)if(0!==D){const H=eo(s[w+1]);s[l+1]=sm(H,w),0!==H&&(s[H+1]=am(s[H+1],l)),s[w+1]=function w_(s,o){return 131071&s|o<<17}(s[w+1],l)}else s[l+1]=sm(w,0),0!==w&&(s[w+1]=am(s[w+1],l)),w=l;else s[l+1]=sm(D,0),0===w?w=l:s[D+1]=am(s[D+1],l),D=l;S&&(s[l+1]=om(s[l+1])),ip(s,N,l,!0),ip(s,N,l,!1),function ou(s,o,a,l,d){const m=d?s.residualClasses:s.residualStyles;null!=m&&"string"==typeof o&&Zs(m,o)>=0&&(a[l+1]=um(a[l+1]))}(o,N,s,l,m),v=sm(w,D),m?o.classBindings=v:o.styleBindings=v}(d,m,o,a,v,l)}}function vv(s,o,a,l,d){let m=null;const v=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<v&&(m=o[w],l=op(l,m.hostAttrs,d),m!==s);)w++;return null!==s&&(a.directiveStylingLast=w),l}function op(s,o,a){const l=a?1:2;let d=-1;if(null!==o)for(let m=0;m<o.length;m++){const v=o[m];"number"==typeof v?d=v:d===l&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),er(s,v,!!a||o[++m]))}return void 0===s?null:s}function Km(s,o,a,l,d,m,v,w){if(!(3&o.type))return;const D=s.data,S=D[w+1];cl(function I_(s){return 1==(1&s)}(S)?Ev(D,o,a,d,Fo(S),v):void 0)||(cl(m)||function E_(s){return 2==(2&s)}(S)&&(m=Ev(D,null,a,d,w,v)),function cD(s,o,a,l,d){const m=gn(s);if(o)d?m?s.addClass(a,l):a.classList.add(l):m?s.removeClass(a,l):a.classList.remove(l);else{let v=-1===l.indexOf("-")?void 0:h.DashCase;if(null==d)m?s.removeStyle(a,l,v):a.style.removeProperty(l);else{const w="string"==typeof d&&d.endsWith("!important");w&&(d=d.slice(0,-10),v|=h.Important),m?s.setStyle(a,l,d,v):a.style.setProperty(l,d,w?"important":"")}}}(l,v,Bs(ir(),a),d,m))}function Ev(s,o,a,l,d,m){const v=null===o;let w;for(;d>0;){const D=s[d],S=Array.isArray(D),N=S?D[1]:D,k=null===N;let H=a[d+1];H===Ft&&(H=k?pt:void 0);let Y=k?Ks(H,l):N===l?H:void 0;if(S&&!cl(Y)&&(Y=Ks(D,l)),cl(Y)&&(w=Y,v))return w;const ye=s[d+1];d=v?eo(ye):Fo(ye)}if(null!==o){let D=m?o.residualClasses:o.residualStyles;null!=D&&(w=Ks(D,l))}return w}function cl(s){return void 0!==s}function Vw(s,o){return 0!=(s.flags&(o?16:32))}function qn(s,o=""){const a=Se(),l=Gt(),d=s+20,m=l.firstCreatePass?Qu(l,d,1,o,null):l.data[d],v=a[d]=function tu(s,o){return gn(s)?s.createText(o):s.createTextNode(o)}(a[11],o);Gd(l,a,v,m),li(m,!1)}function Zm(s){return Ym("",s,""),Zm}function Ym(s,o,a){const l=Se(),d=function Jd(s,o,a,l){return _i(s,Hs(),a)?o+fe(a)+l:Ft}(l,s,o,a);return d!==Ft&&ya(l,ir(),d),Ym}function ey(s,o,a){const l=Se();if(_i(l,Hs(),o)){const m=Gt(),v=On();Ni(m,v,l,s,o,function MD(s,o,a){return(null===s||qi(s))&&(a=function Fa(s){for(;Array.isArray(s);){if("object"==typeof s[1])return s;s=s[0]}return null}(a[o.index])),a[11]}(Du(m.data),v,l),a,!0)}return ey}const io=void 0;var nC=["en",[["a","p"],["AM","PM"],io],[["AM","PM"],io,io],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],io,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],io,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",io,"{1} 'at' {0}",io],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function tC(s){const a=Math.floor(Math.abs(s)),l=s.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let hl={};function Fv(s){const o=function Zr(s){return s.toLowerCase().replace(/_/g,"-")}(s);let a=hp(o);if(a)return a;const l=o.split("-")[0];if(a=hp(l),a)return a;if("en"===l)return nC;throw new Error(`Missing locale data for the locale "${s}".`)}function Zw(s){return Fv(s)[bt.PluralCase]}function hp(s){return s in hl||(hl[s]=Wt.ng&&Wt.ng.common&&Wt.ng.common.locales&&Wt.ng.common.locales[s]),hl[s]}var bt=(()=>((bt=bt||{})[bt.LocaleId=0]="LocaleId",bt[bt.DayPeriodsFormat=1]="DayPeriodsFormat",bt[bt.DayPeriodsStandalone=2]="DayPeriodsStandalone",bt[bt.DaysFormat=3]="DaysFormat",bt[bt.DaysStandalone=4]="DaysStandalone",bt[bt.MonthsFormat=5]="MonthsFormat",bt[bt.MonthsStandalone=6]="MonthsStandalone",bt[bt.Eras=7]="Eras",bt[bt.FirstDayOfWeek=8]="FirstDayOfWeek",bt[bt.WeekendRange=9]="WeekendRange",bt[bt.DateFormat=10]="DateFormat",bt[bt.TimeFormat=11]="TimeFormat",bt[bt.DateTimeFormat=12]="DateTimeFormat",bt[bt.NumberSymbols=13]="NumberSymbols",bt[bt.NumberFormats=14]="NumberFormats",bt[bt.CurrencyCode=15]="CurrencyCode",bt[bt.CurrencySymbol=16]="CurrencySymbol",bt[bt.CurrencyName=17]="CurrencyName",bt[bt.Currencies=18]="Currencies",bt[bt.Directionality=19]="Directionality",bt[bt.PluralCase=20]="PluralCase",bt[bt.ExtraData=21]="ExtraData",bt))();const dh="en-US";let et=dh;function so(s,o,a,l,d){if(s=X(s),Array.isArray(s))for(let m=0;m<s.length;m++)so(s[m],o,a,l,d);else{const m=Gt(),v=Se();let w=Zd(s)?s:X(s.provide),D=sw(s);const S=wn(),N=1048575&S.providerIndexes,k=S.directiveStart,H=S.providerIndexes>>20;if(Zd(s)||!s.multi){const Y=new na(D,d,sl),ye=sy(w,o,d?N:N+H,k);-1===ye?(zs(Ji(S,v),m,w),Tc(m,s,o.length),o.push(w),S.directiveStart++,S.directiveEnd++,d&&(S.providerIndexes+=1048576),a.push(Y),v.push(Y)):(a[ye]=Y,v[ye]=Y)}else{const Y=sy(w,o,N+H,k),ye=sy(w,o,N,N+H),Fe=Y>=0&&a[Y],He=ye>=0&&a[ye];if(d&&!He||!d&&!Fe){zs(Ji(S,v),m,w);const tt=function Zv(s,o,a,l,d){const m=new na(s,a,sl);return m.multi=[],m.index=o,m.componentProviders=0,lu(m,d,l&&!a),m}(d?Kv:gh,a.length,d,l,D);!d&&He&&(a[ye].providerFactory=tt),Tc(m,s,o.length,0),o.push(w),S.directiveStart++,S.directiveEnd++,d&&(S.providerIndexes+=1048576),a.push(tt),v.push(tt)}else Tc(m,s,Y>-1?Y:ye,lu(a[d?ye:Y],D,!d&&l));!d&&l&&He&&a[ye].componentProviders++}}}function Tc(s,o,a,l){const d=Zd(o),m=function RS(s){return!!s.useClass}(o);if(d||m){const D=(m?X(o.useClass):o).prototype.ngOnDestroy;if(D){const S=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const N=S.indexOf(a);-1===N?S.push(a,[l,D]):S[N+1].push(l,D)}else S.push(a,D)}}}function lu(s,o,a){return a&&s.componentProviders++,s.multi.push(o)-1}function sy(s,o,a,l){for(let d=a;d<l;d++)if(o[d]===s)return d;return-1}function gh(s,o,a,l){return cu(this.multi,[])}function Kv(s,o,a,l){const d=this.multi;let m;if(this.providerFactory){const v=this.providerFactory.componentProviders,w=di(a,a[1],this.providerFactory.index,l);m=w.slice(0,v),cu(d,m);for(let D=v;D<w.length;D++)m.push(w[D])}else m=[],cu(d,m);return m}function cu(s,o){for(let a=0;a<s.length;a++)o.push((0,s[a])());return o}function mh(s,o=[]){return a=>{a.providersResolver=(l,d)=>function Cc(s,o,a){const l=Gt();if(l.firstCreatePass){const d=qi(s);so(a,l.data,l.blueprint,d,!0),so(o,l.data,l.blueprint,d,!1)}}(l,d?d(s):s,o)}}class Yv{}class pC{resolveComponentFactory(o){throw function oy(s){const o=Error(`No component factory found for ${oe(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let ay=(()=>{class s{}return s.NULL=new pC,s})();function cI(){return Ac(wn(),Se())}function Ac(s,o){return new lr(fr(s,o))}let lr=(()=>{class s{constructor(a){this.nativeElement=a}}return s.__NG_ELEMENT_ID__=cI,s})();function dI(s){return s instanceof lr?s.nativeElement:s}class hI{}let fI=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function gC(){const s=Se(),a=pr(wn().index,s);return function Sc(s){return s[11]}(ei(a)?a:s)}(),s})(),Ip=(()=>{class s{}return s.\u0275prov=Xt({token:s,providedIn:"root",factory:()=>null}),s})();class bp{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const Dp=new bp("13.3.11"),uy={};function Cp(s,o,a,l,d=!1){for(;null!==a;){const m=o[a.index];if(null!==m&&l.push(on(m)),$i(m))for(let w=10;w<m.length;w++){const D=m[w],S=D[1].firstChild;null!==S&&Cp(D[1],D,S,l)}const v=a.type;if(8&v)Cp(s,o,a.child,l);else if(32&v){const w=E(a,o);let D;for(;D=w();)l.push(D)}else if(16&v){const w=EE(o,a);if(Array.isArray(w))l.push(...w);else{const D=q(o[16]);Cp(D[1],D,w,l,!0)}}a=d?a.projectionNext:a.next}return l}class cr{constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,a=o[1];return Cp(a,o,a.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if($i(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(qu(o,l),Ql(a,l))}this._attachedToViewContainer=!1}Jg(this._lView[1],this._lView)}onDestroy(o){P_(this._lView[1],this._lView,null,o)}markForCheck(){kf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function Ff(s,o,a){const l=o[10];l.begin&&l.begin();try{ma(s,o,s.template,a)}catch(d){throw vm(o,d),d}finally{l.end&&l.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Oe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Gu(s,o){bf(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Oe(902,"");this._appRef=o}}class mC extends cr{constructor(o){super(o),this._view=o}detectChanges(){JE(this._view)}checkNoChanges(){}get context(){return null}}class pI extends ay{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=en(o);return new Qv(a,this.ngModule)}}function gI(s){const o=[];for(let a in s)s.hasOwnProperty(a)&&o.push({propName:s[a],templateName:a});return o}class Qv extends Yv{constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function xE(s){return s.map(ME).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return gI(this.componentDef.inputs)}get outputs(){return gI(this.componentDef.outputs)}create(o,a,l,d){const m=(d=d||this.ngModule)?function yC(s,o){return{get:(a,l,d)=>{const m=s.get(a,uy,d);return m!==uy||l===uy?m:o.get(a,l,d)}}}(o,d.injector):o,v=m.get(hI,ka),w=m.get(Ip,null),D=v.createRenderer(null,this.componentDef),S=this.componentDef.selectors[0][0]||"div",N=l?function Pf(s,o,a){if(gn(s))return s.selectRootElement(o,a===Zt.ShadowDom);let l="string"==typeof o?s.querySelector(o):o;return l.textContent="",l}(D,l,this.componentDef.encapsulation):Cr(v.createRenderer(null,this.componentDef),S,function mI(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(S)),k=this.componentDef.onPush?576:528,H=function ri(s,o){return{components:[],scheduler:s||lc,clean:SD,playerHandler:o||null,flags:0}}(),Y=Wd(0,null,null,1,0,null,null,null,null,null),ye=qd(null,Y,H,k,null,null,v,D,w,m);let Fe,He;yo(ye);try{const tt=function cw(s,o,a,l,d,m){const v=a[1];a[20]=s;const D=Qu(v,20,2,"#host",null),S=D.mergedAttrs=o.hostAttrs;null!==S&&(Em(D,S,!0),null!==s&&(Mn(d,s,S),null!==D.classes&&f_(d,s,D.classes),null!==D.styles&&h_(d,s,D.styles)));const N=l.createRenderer(s,o),k=qd(a,O_(o),null,o.onPush?64:16,a[20],D,l,N,m||null,null);return v.firstCreatePass&&(zs(Ji(D,a),v,o.type),L_(v,D),mm(D,a.length,1)),_m(a,k),a[20]=k}(N,this.componentDef,ye,v,D);if(N)if(l)Mn(D,N,["ng-version",Dp.full]);else{const{attrs:Me,classes:mt}=function im(s){const o=[],a=[];let l=1,d=2;for(;l<s.length;){let m=s[l];if("string"==typeof m)2===d?""!==m&&o.push(m,s[++l]):8===d&&a.push(m);else{if(!ko(d))break;d=m}l++}return{attrs:o,classes:a}}(this.componentDef.selectors[0]);Me&&Mn(D,N,Me),mt&&mt.length>0&&f_(D,N,mt.join(" "))}if(He=Dn(Y,20),void 0!==a){const Me=He.projection=[];for(let mt=0;mt<this.ngContentSelectors.length;mt++){const qt=a[mt];Me.push(null!=qt?Array.from(qt):null)}}Fe=function dw(s,o,a,l,d){const m=a[1],v=function DS(s,o,a){const l=wn();s.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),KE(s,l,o,Nf(s,o,1,null),a));const d=di(o,s,l.directiveStart,l);qr(d,o);const m=fr(l,o);return m&&qr(m,o),d}(m,a,o);if(l.components.push(v),s[8]=v,d&&d.forEach(D=>D(v,o)),o.contentQueries){const D=wn();o.contentQueries(1,v,D.directiveStart)}const w=wn();return!m.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(_o(w.index),vD(a[1],w,0,w.directiveStart,w.directiveEnd,o),qE(o,v)),v}(tt,this.componentDef,ye,H,[Cm]),cc(Y,ye,null)}finally{ti()}return new vl(this.componentType,Fe,Ac(He,ye),ye,He)}}class vl extends class lI{}{constructor(o,a,l,d,m){super(),this.location=l,this._rootLView=d,this._tNode=m,this.instance=a,this.hostView=this.changeDetectorRef=new mC(d),this.componentType=o}get injector(){return new Br(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class vh{}class Jv{}const Mc=new Map;class cy extends vh{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new pI(this);const l=Dt(o);this._bootstrapComponents=bs(l.bootstrap),this._r3Injector=$_(o,a,[{provide:vh,useValue:this},{provide:ay,useValue:this.componentFactoryResolver}],oe(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,a=ru.THROW_IF_NOT_FOUND,l=Et.Default){return o===ru||o===vh||o===Vf?this:this._r3Injector.get(o,a,l)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class wl extends Jv{constructor(o){super(),this.moduleType=o,null!==Dt(o)&&function Eh(s){const o=new Set;!function a(l){const d=Dt(l,!0),m=d.id;null!==m&&(function Xv(s,o,a){if(o&&o!==a)throw new Error(`Duplicate module registered for ${s} - ${oe(o)} vs ${oe(o.name)}`)}(m,Mc.get(m),l),Mc.set(m,l));const v=bs(d.imports);for(const w of v)o.has(w)||(o.add(w),a(w))}(s)}(o)}create(o){return new cy(this.moduleType,o)}}function Tp(s,o,a,l){return n0(Se(),Ir(),s,o,a,l)}function n0(s,o,a,l,d,m){const v=o+a;return _i(s,v,d)?function to(s,o,a){return s[o]=a}(s,v+1,m?l.call(m,d):l(d)):function wh(s,o){const a=s[o];return a===Ft?void 0:a}(s,v+1)}function xc(s,o){const a=Gt();let l;const d=s+20;a.firstCreatePass?(l=function Nc(s,o){if(o)for(let a=o.length-1;a>=0;a--){const l=o[a];if(s===l.name)return l}}(o,a.pipeRegistry),a.data[d]=l,l.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(d,l.onDestroy)):l=a.data[d];const m=l.factory||(l.factory=wr(l.type)),v=nr(sl);try{const w=Ot(!1),D=m();return Ot(w),function X_(s,o,a,l){a>=s.data.length&&(s.data[a]=null,s.blueprint[a]=null),o[a]=l}(a,Se(),d,D),D}finally{nr(v)}}function s0(s,o,a){const l=s+20,d=Se(),m=function Ki(s,o){return s[o]}(d,l);return function bh(s,o){return s[1].data[o].pure}(d,l)?n0(d,Ir(),o,m.transform,a,m):m.transform(a)}function o0(s){return o=>{setTimeout(s,void 0,o)}}const Da=class Mp extends f.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){var d,m,v;let w=o,D=a||(()=>null),S=l;if(o&&"object"==typeof o){const k=o;w=null===(d=k.next)||void 0===d?void 0:d.bind(k),D=null===(m=k.error)||void 0===m?void 0:m.bind(k),S=null===(v=k.complete)||void 0===v?void 0:v.bind(k)}this.__isAsync&&(D=o0(D),w&&(w=o0(w)),S&&(S=o0(S)));const N=super.subscribe({next:w,error:D,complete:S});return o instanceof J.w0&&o.add(N),N}};function Vn(){return this._results[Ri()]()}class Dh{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Ri(),l=Dh.prototype;l[a]||(l[a]=Vn)}get changes(){return this._changes||(this._changes=new Da)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const d=Hr(o);(this._changesDetected=!function Xh(s,o,a){if(s.length!==o.length)return!1;for(let l=0;l<s.length;l++){let d=s[l],m=o[l];if(a&&(d=a(d),m=a(m)),m!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Il=(()=>{class s{}return s.__NG_ELEMENT_ID__=xp,s})();const TI=Il,wC=class extends TI{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(o){const a=this._declarationTContainer.tViews,l=qd(this._declarationLView,a,o,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(l[19]=m.createEmbeddedView(a)),cc(a,l,o),new cr(l)}};function xp(){return dy(wn(),Se())}function dy(s,o){return 4&s.type?new wC(o,s,Ac(s,o)):null}let Np=(()=>{class s{}return s.__NG_ELEMENT_ID__=Ch,s})();function Ch(){return Oc(wn(),Se())}const du=Np,a0=class extends du{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return Ac(this._hostTNode,this._hostLView)}get injector(){return new Br(this._hostTNode,this._hostLView)}get parentInjector(){const o=qs(this._hostTNode,this._hostLView);if(ra(o)){const a=Gs(o,this._hostLView),l=$s(o);return new Br(a[1].data[l+8],a)}return new Br(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=u0(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,a,l){const d=o.createEmbeddedView(a||{});return this.insert(d,l),d}createComponent(o,a,l,d,m){const v=o&&!function Za(s){return"function"==typeof s}(o);let w;if(v)w=a;else{const k=a||{};w=k.index,l=k.injector,d=k.projectableNodes,m=k.ngModuleRef}const D=v?o:new Qv(en(o)),S=l||this.parentInjector;if(!m&&null==D.ngModule){const H=(v?S:this.parentInjector).get(vh,null);H&&(m=H)}const N=D.create(S,d,void 0,m);return this.insert(N.hostView,w),N}insert(o,a){const l=o._lView,d=l[1];if(function La(s){return $i(s[3])}(l)){const N=this.indexOf(o);if(-1!==N)this.detach(N);else{const k=l[3],H=new a0(k,k[6],k[3]);H.detach(H.indexOf(o))}}const m=this._adjustIndex(a),v=this._lContainer;!function fa(s,o,a,l){const d=10+l,m=a.length;l>0&&(a[d-1][4]=o),l<m-10?(o[4]=a[d],Ya(a,10+l,o)):(a.push(o),o[4]=null),o[3]=a;const v=o[17];null!==v&&a!==v&&function Yg(s,o){const a=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===a?s[9]=[o]:a.push(o)}(v,o);const w=o[19];null!==w&&w.insertView(s),o[2]|=128}(d,l,v,m);const w=nm(m,v),D=l[11],S=em(D,v[7]);return null!==S&&function Hd(s,o,a,l,d,m){l[0]=d,l[6]=o,bf(s,l,a,1,d,m)}(d,v[6],D,l,S,w),o.attachToViewContainerRef(),Ya(hy(v),m,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=u0(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=qu(this._lContainer,a);l&&(Ql(hy(this._lContainer),a),Jg(l[1],l))}detach(o){const a=this._adjustIndex(o,-1),l=qu(this._lContainer,a);return l&&null!=Ql(hy(this._lContainer),a)?new cr(l):null}_adjustIndex(o,a=0){return null==o?this.length+a:o}};function u0(s){return s[8]}function hy(s){return s[8]||(s[8]=[])}function Oc(s,o){let a;const l=o[s.index];if($i(l))a=l;else{let d;if(8&s.type)d=on(l);else{const m=o[11];d=m.createComment("");const v=fr(s,o);Wu(m,em(m,v),d,function lD(s,o){return gn(s)?s.nextSibling(o):o.nextSibling}(m,v),!1)}o[s.index]=a=ym(l,o,d,s),_m(o,a)}return new a0(a,s,o)}class Yt{constructor(o){this.queryList=o,this.matches=null}clone(){return new Yt(this.queryList)}setDirty(){this.queryList.setDirty()}}class fy{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let m=0;m<l;m++){const v=a.getByIndex(m);d.push(this.queries[v.indexInDeclarationView].clone())}return new fy(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==kp(o,a).matches&&this.queries[a].setDirty()}}class c0{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class Ca{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,m=this.getByIndex(l).embeddedTView(o,d);m&&(m.indexInDeclarationView=l,null!==a?a.push(m):a=[m])}return null!==a?new Ca(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class d0{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new d0(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const m=l[d];this.matchTNodeWithReadOption(o,a,os(a,m)),this.matchTNodeWithReadOption(o,a,Wa(a,o,m,!1,!1))}else l===Il?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,Wa(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===lr||d===Np||d===Il&&4&a.type)this.addMatch(a.index,-2);else{const m=Wa(a,o,d,!1,!1);null!==m&&this.addMatch(a.index,m)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function os(s,o){const a=s.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function Rp(s,o,a,l){return-1===a?function AI(s,o){return 11&s.type?Ac(s,o):4&s.type?dy(s,o):null}(o,s):-2===a?function SI(s,o,a){return a===lr?Ac(o,s):a===Il?dy(o,s):a===Np?Oc(o,s):void 0}(s,o,l):di(s,s[1],a,o)}function Ho(s,o,a,l){const d=o[19].queries[l];if(null===d.matches){const m=s.data,v=a.matches,w=[];for(let D=0;D<v.length;D+=2){const S=v[D];w.push(S<0?null:Rp(o,m[S],v[D+1],a.metadata.read))}d.matches=w}return d.matches}function py(s,o,a,l){const d=s.queries.getByIndex(a),m=d.matches;if(null!==m){const v=Ho(s,o,d,a);for(let w=0;w<m.length;w+=2){const D=m[w];if(D>0)l.push(v[w/2]);else{const S=m[w+1],N=o[-D];for(let k=10;k<N.length;k++){const H=N[k];H[17]===H[3]&&py(H[1],H,S,l)}if(null!==N[9]){const k=N[9];for(let H=0;H<k.length;H++){const Y=k[H];py(Y[1],Y,S,l)}}}}}return l}function Th(s){const o=Se(),a=Gt(),l=Cu();ld(l+1);const d=kp(a,l);if(s.dirty&&po(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const m=d.crossesNgTemplate?py(a,o,l,[]):Ho(a,o,d,l);s.reset(m,dI),s.notifyOnChanges()}return!0}return!1}function MI(s,o,a,l){const d=Gt();if(d.firstCreatePass){const m=wn();(function Ah(s,o,a){null===s.queries&&(s.queries=new Ca),s.queries.track(new d0(o,a))})(d,new c0(o,a,l),m.index),function Pp(s,o){const a=s.contentQueries||(s.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(s.queries.length-1,o)}(d,s),2==(2&a)&&(d.staticContentQueries=!0)}!function Op(s,o,a){const l=new Dh(4==(4&a));P_(s,o,l,l.destroy),null===o[19]&&(o[19]=new fy),o[19].queries.push(new Yt(l))}(d,Se(),a)}function Ut(){return function DC(s,o){return s[19].queries[o].queryList}(Se(),Cu())}function kp(s,o){return s.queries.getByIndex(o)}function gy(...s){}const $I=new An("Application Initializer");let v0=(()=>{class s{constructor(a){this.appInits=a,this.resolve=gy,this.reject=gy,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const m=this.appInits[d]();if(Xf(m))a.push(m);else if(ep(m)){const v=new Promise((w,D)=>{m.subscribe({complete:w,error:D})});a.push(v)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return s.\u0275fac=function(a){return new(a||s)(x($I,8))},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const GI=new An("AppId",{providedIn:"root",factory:function qI(){return`${E0()}${E0()}${E0()}`}});function E0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const w0=new An("Platform Initializer"),PC=new An("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),I0=new An("appBootstrapListener");let FC=(()=>{class s{log(a){console.log(a)}warn(a){console.warn(a)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const vr=new An("LocaleId",{providedIn:"root",factory:()=>Z(vr,Et.Optional|Et.SkipSelf)||function b0(){return"undefined"!=typeof $localize&&$localize.locale||dh}()}),D0=new An("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class KI{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let LC=(()=>{class s{compileModuleSync(a){return new wl(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),m=bs(Dt(a).declarations).reduce((v,w)=>{const D=en(w);return D&&v.push(new Qv(D)),v},[]);return new KI(l,m)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Lc=(()=>Promise.resolve(0))();function hu(s){"undefined"==typeof Zone?Lc.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Fi{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Da(!1),this.onMicrotaskEmpty=new Da(!1),this.onStable=new Da(!1),this.onError=new Da(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function Vc(){let s=Wt.requestAnimationFrame,o=Wt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const a=s[Zone.__symbol__("OriginalDelegate")];a&&(s=a);const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function QI(s){const o=()=>{!function T0(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Wt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,my(s),s.isCheckStableRunning=!0,$p(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),my(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,m,v,w)=>{try{return JI(s),a.invokeTask(d,m,v,w)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||s.shouldCoalesceRunChangeDetection)&&o(),A0(s)}},onInvoke:(a,l,d,m,v,w,D)=>{try{return JI(s),a.invoke(d,m,v,w,D)}finally{s.shouldCoalesceRunChangeDetection&&o(),A0(s)}},onHasTask:(a,l,d,m)=>{a.hasTask(d,m),l===d&&("microTask"==m.change?(s._hasPendingMicrotasks=m.microTask,my(s),$p(s)):"macroTask"==m.change&&(s.hasPendingMacrotasks=m.macroTask))},onHandleError:(a,l,d,m)=>(a.handleError(d,m),s.runOutsideAngular(()=>s.onError.emit(m)),!1)})}(d)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Fi.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Fi.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,d){const m=this._inner,v=m.scheduleEventTask("NgZoneEvent: "+d,o,YI,gy,gy);try{return m.runTask(v,a,l)}finally{m.cancelTask(v)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const YI={};function $p(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function my(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function JI(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function A0(s){s._nesting--,$p(s)}class XI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Da,this.onMicrotaskEmpty=new Da,this.onStable=new Da,this.onError=new Da}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,d){return o.apply(a,l)}}let Gp=(()=>{class s{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Fi.assertNotInAngularZone(),hu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())hu(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let m=-1;l&&l>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==m),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:m,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,d){return[]}}return s.\u0275fac=function(a){return new(a||s)(x(Fi))},s.\u0275prov=Xt({token:s,factory:s.\u0275fac}),s})(),qp=(()=>{class s{constructor(){this._applications=new Map,yy.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return yy.findTestabilityInTree(this,a,l)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();class Uc{addToWindow(o){}findTestabilityInTree(o,a,l){return null}}function VC(s){yy=s}let yy=new Uc,Bc=null;const eb=new An("AllowMultipleToken"),tb=new An("PlatformOnDestroy");class nb{constructor(o,a){this.name=o,this.token=a}}function rb(s,o,a=[]){const l=`Platform: ${o}`,d=new An(l);return(m=[])=>{let v=vy();if(!v||v.injector.get(eb,!1)){const w=[...a,...m,{provide:d,useValue:!0}];s?s(w):function UC(s){if(Bc&&!Bc.get(eb,!1))throw new Oe(400,"");Bc=s;const o=s.get(Oh),a=s.get(w0,null);a&&a.forEach(l=>l())}(function _y(s=[],o){return ru.create({name:o,providers:[{provide:wm,useValue:"platform"},{provide:tb,useValue:()=>Bc=null},...s]})}(w,l))}return function S0(s){const o=vy();if(!o)throw new Oe(401,"");return o}()}}function vy(){var s;return null!==(s=null==Bc?void 0:Bc.get(Oh))&&void 0!==s?s:null}let Oh=(()=>{class s{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const w=function Ey(s,o){let a;return a="noop"===s?new XI:("zone.js"===s?void 0:s)||new Fi({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),D=[{provide:Fi,useValue:w}];return w.run(()=>{const S=ru.create({providers:D,parent:this.injector,name:a.moduleType.name}),N=a.create(S),k=N.injector.get(Is,null);if(!k)throw new Oe(402,"");return w.runOutsideAngular(()=>{const H=w.onError.subscribe({next:Y=>{k.handleError(Y)}});N.onDestroy(()=>{wi(this._modules,N),H.unsubscribe()})}),function Wp(s,o,a){try{const l=a();return Xf(l)?l.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>s.handleError(l)),l}}(k,w,()=>{const H=N.injector.get(v0);return H.runInitializers(),H.donePromise.then(()=>(function St(s){Bt(s,"Expected localeId to be defined"),"string"==typeof s&&(et=s.toLowerCase().replace(/_/g,"-"))}(N.injector.get(vr,dh)||dh),this._moduleDoBootstrap(N),N))})})}bootstrapModule(a,l=[]){const d=M0({},l);return function zp(s,o,a){const l=new wl(a);return Promise.resolve(l)}(0,0,a).then(m=>this.bootstrapModuleFactory(m,d))}_moduleDoBootstrap(a){const l=a.injector.get(wy);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Oe(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Oe(404,"");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(tb,null);null==a||a(),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(a){return new(a||s)(x(ru))},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function M0(s,o){return Array.isArray(o)?o.reduce(M0,s):Object.assign(Object.assign({},s),o)}let wy=(()=>{class s{constructor(a,l,d,m){this._zone=a,this._injector=l,this._exceptionHandler=d,this._initStatus=m,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new P.y(D=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{D.next(this._stable),D.complete()})}),w=new P.y(D=>{let S;this._zone.runOutsideAngular(()=>{S=this._zone.onStable.subscribe(()=>{Fi.assertNotInAngularZone(),hu(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,D.next(!0))})})});const N=this._zone.onUnstable.subscribe(()=>{Fi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{D.next(!1)}))});return()=>{S.unsubscribe(),N.unsubscribe()}});this.isStable=(0,ue.T)(v,w.pipe((0,ie.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new Oe(405,"");let d;d=a instanceof Yv?a:this._injector.get(ay).resolveComponentFactory(a),this.componentTypes.push(d.componentType);const m=function jc(s){return s.isBoundToModule}(d)?void 0:this._injector.get(vh),w=d.create(ru.NULL,[],l||d.selector,m),D=w.location.nativeElement,S=w.injector.get(Gp,null),N=S&&w.injector.get(qp);return S&&N&&N.registerApplication(D,S),w.onDestroy(()=>{this.detachView(w.hostView),wi(this.components,w),N&&N.unregisterApplication(D)}),this._loadComponent(w),w}tick(){if(this._runningTick)throw new Oe(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;wi(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(I0,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(a){return new(a||s)(x(Fi),x(ru),x(Is),x(v0))},s.\u0275prov=Xt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function wi(s,o){const a=s.indexOf(o);a>-1&&s.splice(a,1)}let Kp=!0,N0=!1;function bl(){return N0=!0,Kp}function Ph(){if(N0)throw new Error("Cannot enable prod mode after platform setup.");Kp=!1}let Fh=(()=>{class s{}return s.__NG_ELEMENT_ID__=sb,s})();function sb(s){return function Dl(s,o,a){if(Qc(s)&&!a){const l=pr(s.index,o);return new cr(l,l)}return 47&s.type?new cr(o[16],o):null}(wn(),Se(),16==(16&s))}class cb{constructor(){}supports(o){return qf(o)}create(o){return new GC(o)}}const $C=(s,o)=>o;class GC{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||$C}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,d=0,m=null;for(;a||l;){const v=!l||a&&a.currentIndex<hb(l,d,m)?a:l,w=hb(v,d,m),D=v.currentIndex;if(v===l)d--,l=l._nextRemoved;else if(a=a._next,null==v.previousIndex)d++;else{m||(m=[]);const S=w-d,N=D-d;if(S!=N){for(let H=0;H<S;H++){const Y=H<m.length?m[H]:m[H]=0,ye=Y+H;N<=ye&&ye<S&&(m[H]=Y+1)}m[v.previousIndex]=N-S}}w!==D&&o(v,w,D)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!qf(o))throw new Oe(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,m,v,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let w=0;w<this.length;w++)m=o[w],v=this._trackByFn(w,m),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,m,v,w)),Object.is(a.item,m)||this._addIdentityChange(a,m)):(a=this._mismatch(a,m,v,w),l=!0),a=a._next}else d=0,function Yd(s,o){if(Array.isArray(s))for(let a=0;a<s.length;a++)o(s[a]);else{const a=s[Ri()]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,w=>{v=this._trackByFn(d,w),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,w,v,d)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,v,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,d){let m;return null===o?m=this._itTail:(m=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,m,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,m,d)):o=this._addAfter(new db(a,l),m,d),o}_verifyReinsertion(o,a,l,d){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==m?o=this._reinsertAfter(m,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,m=o._nextRemoved;return null===d?this._removalsHead=m:d._nextRemoved=m,null===m?this._removalsTail=d:m._prevRemoved=d,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new Yp),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Yp),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class db{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class qC{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class Yp{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new qC,this.map.set(a,l)),l.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function hb(s,o,a){const l=s.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+o+d}class O0{constructor(){}supports(o){return o instanceof Map||Am(o)}create(){return new P0}}class P0{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||Am(o)))throw new Oe(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const m=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,m)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const m=d._prev,v=d._next;return m&&(m._next=v),v&&(v._prev=m),d._next=null,d._prev=null,d}const l=new k0(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class k0{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Lh(){return new Vh([new cb])}let Vh=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||Lh()),deps:[[s,new Gn,new rt]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new Oe(901,"")}}return s.\u0275prov=Xt({token:s,providedIn:"root",factory:Lh}),s})();function Ay(){return new Sy([new O0])}let Sy=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||Ay()),deps:[[s,new Gn,new rt]]}}find(a){const l=this.factories.find(m=>m.supports(a));if(l)return l;throw new Oe(901,"")}}return s.\u0275prov=Xt({token:s,providedIn:"root",factory:Ay}),s})();const KC=rb(null,"core",[]);let mb=(()=>{class s{constructor(a){}}return s.\u0275fac=function(a){return new(a||s)(x(wy))},s.\u0275mod=ve({type:s}),s.\u0275inj=Kt({}),s})()},3942:(Je,we,O)=>{O.d(we,{Z:()=>Oe});var f=O(2090),J=O(4859),P=O(9681),ue=O(1877);class ie{constructor(fe,Ie){this._delegate=fe,this.firebase=Ie,(0,P._addComponent)(fe,new J.wA("app-compat",()=>this,"PUBLIC")),this.container=fe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(fe){this._delegate.automaticDataCollectionEnabled=fe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(fe=>{this._delegate.checkDestroyed(),fe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(fe,Ie=P._DEFAULT_ENTRY_NAME){var qe;this._delegate.checkDestroyed();const Ye=this._delegate.container.getProvider(fe);return!Ye.isInitialized()&&"EXPLICIT"===(null===(qe=Ye.getComponent())||void 0===qe?void 0:qe.instantiationMode)&&Ye.initialize(),Ye.getImmediate({identifier:Ie})}_removeServiceInstance(fe,Ie=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(fe).clearInstance(Ie)}_addComponent(fe){(0,P._addComponent)(this._delegate,fe)}_addOrOverwriteComponent(fe){(0,P._addOrOverwriteComponent)(this._delegate,fe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const se=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function he(){const Ue=function oe(Ue){const fe={},Ie={__esModule:!0,initializeApp:function xe(Be,G={}){const _e=P.initializeApp(Be,G);if((0,f.r3)(fe,_e.name))return fe[_e.name];const W=new Ue(_e,Ie);return fe[_e.name]=W,W},app:Ye,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function be(Be){const G=Be.name,_e=G.replace("-compat","");if(P._registerComponent(Be)&&"PUBLIC"===Be.type){const W=(ee=Ye())=>{if("function"!=typeof ee[_e])throw se.create("invalid-app-argument",{appName:G});return ee[_e]()};void 0!==Be.serviceProps&&(0,f.ZB)(W,Be.serviceProps),Ie[_e]=W,Ue.prototype[_e]=function(...ee){return this._getService.bind(this,G).apply(this,Be.multipleInstances?ee:[])}}return"PUBLIC"===Be.type?Ie[_e]:null},removeApp:function qe(Be){delete fe[Be]},useAsService:function Ve(Be,G){return"serverAuth"===G?null:G},modularAPIs:P}};function Ye(Be){if(!(0,f.r3)(fe,Be=Be||P._DEFAULT_ENTRY_NAME))throw se.create("no-app",{appName:Be});return fe[Be]}return Ie.default=Ie,Object.defineProperty(Ie,"apps",{get:function me(){return Object.keys(fe).map(Be=>fe[Be])}}),Ye.App=Ue,Ie}(ie);return Ue.INTERNAL=Object.assign(Object.assign({},Ue.INTERNAL),{createFirebaseNamespace:he,extendNamespace:function fe(Ie){(0,f.ZB)(Ue,Ie)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),Ue}(),B=new ue.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){B.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ue=self.firebase.SDK_VERSION;Ue&&Ue.indexOf("LITE")>=0&&B.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Oe=$;!function Ae(Ue){(0,P.registerVersion)("@firebase/app-compat","0.1.39",Ue)}()},9681:(Je,we,O)=>{O.r(we),O.d(we,{FirebaseError:()=>ue.ZR,SDK_VERSION:()=>us,_DEFAULT_ENTRY_NAME:()=>Bt,_addComponent:()=>un,_addOrOverwriteComponent:()=>Xt,_apps:()=>sn,_clearComponents:()=>Qr,_components:()=>mn,_getProvider:()=>Kt,_registerComponent:()=>xr,_removeServiceInstance:()=>zt,deleteApp:()=>Et,getApp:()=>oi,getApps:()=>bi,initializeApp:()=>ls,onLog:()=>nr,registerVersion:()=>bn,setLogLevel:()=>Rs});var f=O(5861),J=O(4859),P=O(1877),ue=O(2090),ie=O(8766);class pe{constructor(De){this.container=De}getPlatformInfoString(){return this.container.getProviders().map(ze=>{if(function se(Qe){const De=Qe.getComponent();return"VERSION"===(null==De?void 0:De.type)}(ze)){const At=ze.getImmediate();return`${At.library}/${At.version}`}return null}).filter(ze=>ze).join(" ")}}const oe="@firebase/app",$=new P.Yd("@firebase/app"),Bt="[DEFAULT]",Ke={[oe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},sn=new Map,mn=new Map;function un(Qe,De){try{Qe.container.addComponent(De)}catch(ze){$.debug(`Component ${De.name} failed to register with FirebaseApp ${Qe.name}`,ze)}}function Xt(Qe,De){Qe.container.addOrOverwriteComponent(De)}function xr(Qe){const De=Qe.name;if(mn.has(De))return $.debug(`There were multiple attempts to register component ${De}.`),!1;mn.set(De,Qe);for(const ze of sn.values())un(ze,Qe);return!0}function Kt(Qe,De){const ze=Qe.container.getProvider("heartbeat").getImmediate({optional:!0});return ze&&ze.triggerHeartbeat(),Qe.container.getProvider(De)}function zt(Qe,De,ze=Bt){Kt(Qe,De).clearInstance(ze)}function Qr(){mn.clear()}const Nr=new ue.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Jr{constructor(De,ze,At){this._isDeleted=!1,this._options=Object.assign({},De),this._config=Object.assign({},ze),this._name=ze.name,this._automaticDataCollectionEnabled=ze.automaticDataCollectionEnabled,this._container=At,this.container.addComponent(new J.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(De){this.checkDestroyed(),this._automaticDataCollectionEnabled=De}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(De){this._isDeleted=De}checkDestroyed(){if(this.isDeleted)throw Nr.create("app-deleted",{appName:this._name})}}const us="9.14.0";function ls(Qe,De={}){let ze=Qe;"object"!=typeof De&&(De={name:De});const At=Object.assign({name:Bt,automaticDataCollectionEnabled:!1},De),wt=At.name;if("string"!=typeof wt||!wt)throw Nr.create("bad-app-name",{appName:String(wt)});if(ze||(ze=(0,ue.aH)()),!ze)throw Nr.create("no-options");const Ht=sn.get(wt);if(Ht){if((0,ue.vZ)(ze,Ht.options)&&(0,ue.vZ)(At,Ht.config))return Ht;throw Nr.create("duplicate-app",{appName:wt})}const j=new J.H0(wt);for(const K of mn.values())j.addComponent(K);const V=new Jr(ze,At,j);return sn.set(wt,V),V}function oi(Qe=Bt){const De=sn.get(Qe);if(!De&&Qe===Bt)return ls();if(!De)throw Nr.create("no-app",{appName:Qe});return De}function bi(){return Array.from(sn.values())}function Et(Qe){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,f.Z)(function*(Qe){const De=Qe.name;sn.has(De)&&(sn.delete(De),yield Promise.all(Qe.container.getProviders().map(ze=>ze.delete())),Qe.isDeleted=!0)})).apply(this,arguments)}function bn(Qe,De,ze){var At;let wt=null!==(At=Ke[Qe])&&void 0!==At?At:Qe;ze&&(wt+=`-${ze}`);const Ht=wt.match(/\s|\//),j=De.match(/\s|\//);if(Ht||j){const V=[`Unable to register library "${wt}" with version "${De}":`];return Ht&&V.push(`library name "${wt}" contains illegal characters (whitespace or "/")`),Ht&&j&&V.push("and"),j&&V.push(`version name "${De}" contains illegal characters (whitespace or "/")`),void $.warn(V.join(" "))}xr(new J.wA(`${wt}-version`,()=>({library:wt,version:De}),"VERSION"))}function nr(Qe,De){if(null!==Qe&&"function"!=typeof Qe)throw Nr.create("invalid-log-argument");(0,P.Am)(Qe,De)}function Rs(Qe){(0,P.Ub)(Qe)}const Un="firebase-heartbeat-store";let ai=null;function oo(){return ai||(ai=(0,ie.X3)("firebase-heartbeat-database",1,{upgrade:(Qe,De)=>{0===De&&Qe.createObjectStore(Un)}}).catch(Qe=>{throw Nr.create("idb-open",{originalErrorMessage:Qe.message})})),ai}function it(){return(it=(0,f.Z)(function*(Qe){var De;try{return(yield oo()).transaction(Un).objectStore(Un).get(Pr(Qe))}catch(ze){if(ze instanceof ue.ZR)$.warn(ze.message);else{const At=Nr.create("idb-get",{originalErrorMessage:null===(De=ze)||void 0===De?void 0:De.message});$.warn(At.message)}}})).apply(this,arguments)}function _t(Qe,De){return Or.apply(this,arguments)}function Or(){return(Or=(0,f.Z)(function*(Qe,De){var ze;try{const wt=(yield oo()).transaction(Un,"readwrite");return yield wt.objectStore(Un).put(De,Pr(Qe)),wt.done}catch(At){if(At instanceof ue.ZR)$.warn(At.message);else{const wt=Nr.create("idb-set",{originalErrorMessage:null===(ze=At)||void 0===ze?void 0:ze.message});$.warn(wt.message)}}})).apply(this,arguments)}function Pr(Qe){return`${Qe.name}!${Qe.options.appId}`}class kr{constructor(De){this.container=De,this._heartbeatsCache=null;const ze=this.container.getProvider("app").getImmediate();this._storage=new uo(ze),this._heartbeatsCachePromise=this._storage.read().then(At=>(this._heartbeatsCache=At,At))}triggerHeartbeat(){var De=this;return(0,f.Z)(function*(){const At=De.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),wt=Fr();if(null===De._heartbeatsCache&&(De._heartbeatsCache=yield De._heartbeatsCachePromise),De._heartbeatsCache.lastSentHeartbeatDate!==wt&&!De._heartbeatsCache.heartbeats.some(Ht=>Ht.date===wt))return De._heartbeatsCache.heartbeats.push({date:wt,agent:At}),De._heartbeatsCache.heartbeats=De._heartbeatsCache.heartbeats.filter(Ht=>{const j=new Date(Ht.date).valueOf();return Date.now()-j<=2592e6}),De._storage.overwrite(De._heartbeatsCache)})()}getHeartbeatsHeader(){var De=this;return(0,f.Z)(function*(){if(null===De._heartbeatsCache&&(yield De._heartbeatsCachePromise),null===De._heartbeatsCache||0===De._heartbeatsCache.heartbeats.length)return"";const ze=Fr(),{heartbeatsToSend:At,unsentEntries:wt}=function pt(Qe,De=1024){const ze=[];let At=Qe.slice();for(const wt of Qe){const Ht=ze.find(j=>j.agent===wt.agent);if(Ht){if(Ht.dates.push(wt.date),jt(ze)>De){Ht.dates.pop();break}}else if(ze.push({agent:wt.agent,dates:[wt.date]}),jt(ze)>De){ze.pop();break}At=At.slice(1)}return{heartbeatsToSend:ze,unsentEntries:At}}(De._heartbeatsCache.heartbeats),Ht=(0,ue.L)(JSON.stringify({version:2,heartbeats:At}));return De._heartbeatsCache.lastSentHeartbeatDate=ze,wt.length>0?(De._heartbeatsCache.heartbeats=wt,yield De._storage.overwrite(De._heartbeatsCache)):(De._heartbeatsCache.heartbeats=[],De._storage.overwrite(De._heartbeatsCache)),Ht})()}}function Fr(){return(new Date).toISOString().substring(0,10)}class uo{constructor(De){this.app=De,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,ue.hl)()&&(0,ue.eu)().then(()=>!0).catch(()=>!1)})()}read(){var De=this;return(0,f.Z)(function*(){return(yield De._canUseIndexedDBPromise)&&(yield function Zt(Qe){return it.apply(this,arguments)}(De.app))||{heartbeats:[]}})()}overwrite(De){var ze=this;return(0,f.Z)(function*(){var At;if(yield ze._canUseIndexedDBPromise){const Ht=yield ze.read();return _t(ze.app,{lastSentHeartbeatDate:null!==(At=De.lastSentHeartbeatDate)&&void 0!==At?At:Ht.lastSentHeartbeatDate,heartbeats:De.heartbeats})}})()}add(De){var ze=this;return(0,f.Z)(function*(){var At;if(yield ze._canUseIndexedDBPromise){const Ht=yield ze.read();return _t(ze.app,{lastSentHeartbeatDate:null!==(At=De.lastSentHeartbeatDate)&&void 0!==At?At:Ht.lastSentHeartbeatDate,heartbeats:[...Ht.heartbeats,...De.heartbeats]})}})()}}function jt(Qe){return(0,ue.L)(JSON.stringify({version:2,heartbeats:Qe})).length}!function cs(Qe){xr(new J.wA("platform-logger",De=>new pe(De),"PRIVATE")),xr(new J.wA("heartbeat",De=>new kr(De),"PRIVATE")),bn(oe,"0.8.4",Qe),bn(oe,"0.8.4","esm2017"),bn("fire-js","")}("")},4859:(Je,we,O)=>{O.d(we,{H0:()=>oe,wA:()=>P});var f=O(5861),J=O(2090);class P{constructor($,B,X){this.name=$,this.instanceFactory=B,this.type=X,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const ue="[DEFAULT]";class ie{constructor($,B){this.name=$,this.container=B,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const B=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(B)){const X=new J.BH;if(this.instancesDeferred.set(B,X),this.isInitialized(B)||this.shouldAutoInitialize())try{const Le=this.getOrInitializeService({instanceIdentifier:B});Le&&X.resolve(Le)}catch(Le){}}return this.instancesDeferred.get(B).promise}getImmediate($){var B;const X=this.normalizeInstanceIdentifier(null==$?void 0:$.identifier),Le=null!==(B=null==$?void 0:$.optional)&&void 0!==B&&B;if(!this.isInitialized(X)&&!this.shouldAutoInitialize()){if(Le)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:X})}catch(Ae){if(Le)return null;throw Ae}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function se(he){return"EAGER"===he.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:ue})}catch(B){}for(const[B,X]of this.instancesDeferred.entries()){const Le=this.normalizeInstanceIdentifier(B);try{const Ae=this.getOrInitializeService({instanceIdentifier:Le});X.resolve(Ae)}catch(Ae){}}}}clearInstance($=ue){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,f.Z)(function*(){const B=Array.from($.instances.values());yield Promise.all([...B.filter(X=>"INTERNAL"in X).map(X=>X.INTERNAL.delete()),...B.filter(X=>"_delete"in X).map(X=>X._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=ue){return this.instances.has($)}getOptions($=ue){return this.instancesOptions.get($)||{}}initialize($={}){const{options:B={}}=$,X=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(X))throw Error(`${this.name}(${X}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Le=this.getOrInitializeService({instanceIdentifier:X,options:B});for(const[Ae,Oe]of this.instancesDeferred.entries())X===this.normalizeInstanceIdentifier(Ae)&&Oe.resolve(Le);return Le}onInit($,B){var X;const Le=this.normalizeInstanceIdentifier(B),Ae=null!==(X=this.onInitCallbacks.get(Le))&&void 0!==X?X:new Set;Ae.add($),this.onInitCallbacks.set(Le,Ae);const Oe=this.instances.get(Le);return Oe&&$(Oe,Le),()=>{Ae.delete($)}}invokeOnInitCallbacks($,B){const X=this.onInitCallbacks.get(B);if(X)for(const Le of X)try{Le($,B)}catch(Ae){}}getOrInitializeService({instanceIdentifier:$,options:B={}}){let X=this.instances.get($);if(!X&&this.component&&(X=this.component.instanceFactory(this.container,{instanceIdentifier:(he=$,he===ue?void 0:he),options:B}),this.instances.set($,X),this.instancesOptions.set($,B),this.invokeOnInitCallbacks(X,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,X)}catch(Le){}var he;return X||null}normalizeInstanceIdentifier($=ue){return this.component?this.component.multipleInstances?$:ue:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class oe{constructor($){this.name=$,this.providers=new Map}addComponent($){const B=this.getProvider($.name);if(B.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);B.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const B=new ie($,this);return this.providers.set($,B),B}getProviders(){return Array.from(this.providers.values())}}},1877:(Je,we,O)=>{O.d(we,{Am:()=>he,Ub:()=>oe,Yd:()=>se,in:()=>J});const f=[];var J=(()=>{return($=J||(J={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",J;var $})();const P={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},ue=J.INFO,ie={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},pe=($,B,...X)=>{if(B<$.logLevel)return;const Le=(new Date).toISOString(),Ae=ie[B];if(!Ae)throw new Error(`Attempted to log a message with an invalid logType (value: ${B})`);console[Ae](`[${Le}]  ${$.name}:`,...X)};class se{constructor(B){this.name=B,this._logLevel=ue,this._logHandler=pe,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(B){if(!(B in J))throw new TypeError(`Invalid value "${B}" assigned to \`logLevel\``);this._logLevel=B}setLogLevel(B){this._logLevel="string"==typeof B?P[B]:B}get logHandler(){return this._logHandler}set logHandler(B){if("function"!=typeof B)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=B}get userLogHandler(){return this._userLogHandler}set userLogHandler(B){this._userLogHandler=B}debug(...B){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...B),this._logHandler(this,J.DEBUG,...B)}log(...B){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...B),this._logHandler(this,J.VERBOSE,...B)}info(...B){this._userLogHandler&&this._userLogHandler(this,J.INFO,...B),this._logHandler(this,J.INFO,...B)}warn(...B){this._userLogHandler&&this._userLogHandler(this,J.WARN,...B),this._logHandler(this,J.WARN,...B)}error(...B){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...B),this._logHandler(this,J.ERROR,...B)}}function oe($){f.forEach(B=>{B.setLogLevel($)})}function he($,B){for(const X of f){let Le=null;B&&B.level&&(Le=P[B.level]),X.userLogHandler=null===$?null:(Ae,Oe,...Ue)=>{const fe=Ue.map(Ie=>{if(null==Ie)return null;if("string"==typeof Ie)return Ie;if("number"==typeof Ie||"boolean"==typeof Ie)return Ie.toString();if(Ie instanceof Error)return Ie.message;try{return JSON.stringify(Ie)}catch(qe){return null}}).filter(Ie=>Ie).join(" ");Oe>=(null!=Le?Le:Ae.logLevel)&&$({level:J[Oe].toLowerCase(),message:fe,args:Ue,type:Ae.name})}}}},8766:(Je,we,O)=>{O.d(we,{Lj:()=>xe,X3:()=>Ye});var f=O(5861);let P,ue;const se=new WeakMap,oe=new WeakMap,he=new WeakMap,$=new WeakMap,B=new WeakMap;let Ae={get(G,_e,W){if(G instanceof IDBTransaction){if("done"===_e)return oe.get(G);if("objectStoreNames"===_e)return G.objectStoreNames||he.get(G);if("store"===_e)return W.objectStoreNames[1]?void 0:W.objectStore(W.objectStoreNames[0])}return Ie(G[_e])},set:(G,_e,W)=>(G[_e]=W,!0),has:(G,_e)=>G instanceof IDBTransaction&&("done"===_e||"store"===_e)||_e in G};function fe(G){return"function"==typeof G?function Ue(G){return G!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function pe(){return ue||(ue=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(G)?function(..._e){return G.apply(qe(this),_e),Ie(se.get(this))}:function(..._e){return Ie(G.apply(qe(this),_e))}:function(_e,...W){const ee=G.call(qe(this),_e,...W);return he.set(ee,_e.sort?_e.sort():[_e]),Ie(ee)}}(G):(G instanceof IDBTransaction&&function Le(G){if(oe.has(G))return;const _e=new Promise((W,ee)=>{const Q=()=>{G.removeEventListener("complete",ge),G.removeEventListener("error",ae),G.removeEventListener("abort",ae)},ge=()=>{W(),Q()},ae=()=>{ee(G.error||new DOMException("AbortError","AbortError")),Q()};G.addEventListener("complete",ge),G.addEventListener("error",ae),G.addEventListener("abort",ae)});oe.set(G,_e)}(G),((G,_e)=>_e.some(W=>G instanceof W))(G,function ie(){return P||(P=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(G,Ae):G)}function Ie(G){if(G instanceof IDBRequest)return function X(G){const _e=new Promise((W,ee)=>{const Q=()=>{G.removeEventListener("success",ge),G.removeEventListener("error",ae)},ge=()=>{W(Ie(G.result)),Q()},ae=()=>{ee(G.error),Q()};G.addEventListener("success",ge),G.addEventListener("error",ae)});return _e.then(W=>{W instanceof IDBCursor&&se.set(W,G)}).catch(()=>{}),B.set(_e,G),_e}(G);if($.has(G))return $.get(G);const _e=fe(G);return _e!==G&&($.set(G,_e),B.set(_e,G)),_e}const qe=G=>B.get(G);function Ye(G,_e,{blocked:W,upgrade:ee,blocking:Q,terminated:ge}={}){const ae=indexedDB.open(G,_e),Pe=Ie(ae);return ee&&ae.addEventListener("upgradeneeded",ut=>{ee(Ie(ae.result),ut.oldVersion,ut.newVersion,Ie(ae.transaction))}),W&&ae.addEventListener("blocked",()=>W()),Pe.then(ut=>{ge&&ut.addEventListener("close",()=>ge()),Q&&ut.addEventListener("versionchange",()=>Q())}).catch(()=>{}),Pe}function xe(G,{blocked:_e}={}){const W=indexedDB.deleteDatabase(G);return _e&&W.addEventListener("blocked",()=>_e()),Ie(W).then(()=>{})}const me=["get","getKey","getAll","getAllKeys","count"],be=["put","add","delete","clear"],Ve=new Map;function Be(G,_e){if(!(G instanceof IDBDatabase)||_e in G||"string"!=typeof _e)return;if(Ve.get(_e))return Ve.get(_e);const W=_e.replace(/FromIndex$/,""),ee=_e!==W,Q=be.includes(W);if(!(W in(ee?IDBIndex:IDBObjectStore).prototype)||!Q&&!me.includes(W))return;const ge=function(){var ae=(0,f.Z)(function*(Pe,...ut){const Qt=this.transaction(Pe,Q?"readwrite":"readonly");let Bt=Qt.store;return ee&&(Bt=Bt.index(ut.shift())),(yield Promise.all([Bt[W](...ut),Q&&Qt.done]))[0]});return function(ut){return ae.apply(this,arguments)}}();return Ve.set(_e,ge),ge}!function Oe(G){Ae=G(Ae)}(G=>pR(fR({},G),{get:(_e,W,ee)=>Be(_e,W)||G.get(_e,W,ee),has:(_e,W)=>!!Be(_e,W)||G.has(_e,W)}))},5861:(Je,we,O)=>{function f(P,ue,ie,pe,se,oe,he){try{var $=P[oe](he),B=$.value}catch(X){return void ie(X)}$.done?ue(B):Promise.resolve(B).then(pe,se)}function J(P){return function(){var ue=this,ie=arguments;return new Promise(function(pe,se){var oe=P.apply(ue,ie);function he(B){f(oe,pe,se,he,$,"next",B)}function $(B){f(oe,pe,se,he,$,"throw",B)}he(void 0)})}}O.d(we,{Z:()=>J})}},Je=>{Je(Je.s=5226)}]);